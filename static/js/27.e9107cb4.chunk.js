/*! For license information please see 27.e9107cb4.chunk.js.LICENSE.txt */
(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[27,4],{161:function(e,t,n){"use strict";n.r(t),n.d(t,"createGenerateClassName",(function(){return r.a})),n.d(t,"createStyles",(function(){return i.a})),n.d(t,"getThemeProps",(function(){return o.a})),n.d(t,"jssPreset",(function(){return a.a})),n.d(t,"makeStyles",(function(){return s.a})),n.d(t,"mergeClasses",(function(){return u.a})),n.d(t,"ServerStyleSheets",(function(){return c.a})),n.d(t,"styled",(function(){return l.a})),n.d(t,"StylesProvider",(function(){return h.b})),n.d(t,"sheetsManager",(function(){return f.b})),n.d(t,"StylesContext",(function(){return f.a})),n.d(t,"ThemeProvider",(function(){return d.a})),n.d(t,"useTheme",(function(){return p.a})),n.d(t,"withStyles",(function(){return v.a})),n.d(t,"withTheme",(function(){return m.a})),n.d(t,"withThemeCreator",(function(){return m.b}));var r=n(158),i=n(714),o=n(159),a=n(104),s=n(160),u=n(175),c=n(716),l=n(715),h=n(163),f=n(162),d=n(717),p=n(157),v=n(156),m=n(368)},162:function(e,t,n){"use strict";var r=n(163);n.d(t,"a",(function(){return r.a})),n.d(t,"b",(function(){return r.c}))},178:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},179:function(e,t,n){var r=n(346).default;function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}e.exports=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,t&&t.set(e,n),n},e.exports.default=e.exports,e.exports.__esModule=!0},180:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(263)},182:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=t.Context=void 0;var i=((r=n(0))&&r.__esModule?r:{default:r}).default.createContext(null);t.Context=i;var o=i;t.default=o},183:function(e,t,n){"use strict";n.r(t);var r=n(286);n.d(t,"default",(function(){return r.a}))},184:function(e,t,n){"use strict";n.r(t);var r=n(270);n.d(t,"default",(function(){return r.a}))},211:function(e,t,n){"use strict";t.__esModule=!0,t.useTheme=function(){return(0,r.useContext)(i.default)},t.default=t.withTheme=void 0;var r=n(0),i=s(n(182)),o=s(n(224));t.withTheme=o.default;var a=s(n(219));function s(e){return e&&e.__esModule?e:{default:e}}t.default=a.default},215:function(e,t,n){"use strict";n.r(t);var r=n(337);n.d(t,"default",(function(){return r.a}))},216:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=t.Context=void 0;var i=((r=n(0))&&r.__esModule?r:{default:r}).default.createContext(null);t.Context=i;var o=i;t.default=o},217:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=t.Context=void 0;var i=((r=n(0))&&r.__esModule?r:{default:r}).default.createContext(null);t.Context=i;var o=i;t.default=o},219:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;c(n(13));var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=c(n(182)),o=n(11),a=c(n(220)),s=n(181);function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}var l=(0,o.create)({plugins:[].concat((0,s.jssPreset)().plugins,[(0,a.default)()])}),h=function(e){var t=e.children,n=e.persistKey,o=void 0===n?"theme":n,a=(e.appConfig||{}).theme||{},u=a.defaultThemeID,c=a.defaultIsDarkMode,h=a.defaultIsRTL,f=(0,r.useState)(u),d=f[0],p=f[1],v=(0,r.useState)(c),m=v[0],g=v[1],y=(0,r.useState)(h),b=y[0],_=y[1],w=o+":themeID",O=o+":isDarkMode",E=o+":isRTL";return(0,r.useEffect)((function(){var e=localStorage.getItem(w),t=localStorage.getItem(O),n=localStorage.getItem(E);e&&p(e),t&&g("true"===t),n&&_("true"===n)}),[w,O,E]),(0,r.useEffect)((function(){try{localStorage.setItem(w,d)}catch(e){console.warn(e)}}),[d,w]),(0,r.useEffect)((function(){try{localStorage.setItem(O,m)}catch(e){console.warn(e)}}),[m,O]),(0,r.useEffect)((function(){try{localStorage.setItem(E,b)}catch(e){console.warn(e)}}),[b,E]),r.default.createElement(i.default.Provider,{value:{themeID:d,setThemeID:p,isDarkMode:m,isRTL:b,toggleThisTheme:function(e){"isRTL"===e&&_(!b),"isDarkMode"===e&&g(!m)}}},r.default.createElement(s.StylesProvider,{jss:l},r.default.createElement("div",{style:{direction:b?"rtl":"ltr"}},t)))};h.propTypes={};var f=h;t.default=f,e.exports=t.default},220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(223),i=r.default||r;t.default=function(e){var t=void 0===e?{}:e,n=t.enabled,r=void 0===n||n,o=t.opt,a=void 0===o?"out":o;return{onProcessStyle:function(e,t,n){if("font-face"===t.type)return e;if(!r)return"boolean"===typeof e.flip&&delete e.flip,e;var o="out"===a;return"boolean"===typeof n.options.flip&&(o=n.options.flip),"boolean"===typeof e.flip&&(o=e.flip,delete e.flip),o?i("function"===typeof t.toJSON?t.toJSON():e):e}}}},221:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=t.Context=void 0;var i=((r=n(0))&&r.__esModule?r:{default:r}).default.createContext(null);t.Context=i;var o=i;t.default=o},223:function(e,t,n){"use strict";function r(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e[r]=n,e}),{})}function i(e){return"number"===typeof e}function o(e,t){return-1!==e.indexOf(t)}function a(e,t,n,r){return t+(i=n,0===parseFloat(i)?i:"-"===i[0]?i.slice(1):"-"+i)+r;var i}function s(e){return e.replace(/ +/g," ").split(" ").map((function(e){return e.trim()})).filter(Boolean).reduce((function(e,t){var n=e.list,r=e.state,i=(t.match(/\(/g)||[]).length,o=(t.match(/\)/g)||[]).length;return r.parensDepth>0?n[n.length-1]=n[n.length-1]+" "+t:n.push(t),r.parensDepth+=i-o,{list:n,state:r}}),{list:[],state:{parensDepth:0}}).list}function u(e){var t=s(e);if(t.length<=3||t.length>4)return e;var n=t[0],r=t[1],i=t[2];return[n,t[3],i,r].join(" ")}n.r(t);var c={padding:function(e){var t=e.value;return i(t)?t:u(t)},textShadow:function(e){return e.value.replace(/(-*)([.|\d]+)/,(function(e,t,n){return"0"===n?e:""+(""===t?"-":"")+n}))},borderColor:function(e){return u(e.value)},borderRadius:function(e){var t=e.value;if(i(t))return t;if(o(t,"/")){var n=t.split("/"),r=n[0],a=n[1];return c.borderRadius({value:r.trim()})+" / "+c.borderRadius({value:a.trim()})}var u=s(t);switch(u.length){case 2:return u.reverse().join(" ");case 4:var l=u[0],h=u[1],f=u[2];return[h,l,u[3],f].join(" ");default:return t}},background:function(e){var t=e.value,n=e.valuesToConvert,r=e.isRtl,i=e.bgImgDirectionRegex,o=e.bgPosDirectionRegex,a=t.replace(/(url\(.*?\))|(rgba?\(.*?\))|(hsl\(.*?\))|(#[a-fA-F0-9]+)|((^| )(\D)+( |$))/g,"").trim();return t=t.replace(a,c.backgroundPosition({value:a,valuesToConvert:n,isRtl:r,bgPosDirectionRegex:o})),c.backgroundImage({value:t,valuesToConvert:n,bgImgDirectionRegex:i})},backgroundImage:function(e){var t=e.value,n=e.valuesToConvert,r=e.bgImgDirectionRegex;return o(t,"url(")||o(t,"linear-gradient(")?t.replace(r,(function(e,t,r){return e.replace(r,n[r])})):t},backgroundPosition:function(e){var t=e.value,n=e.valuesToConvert,r=e.isRtl,i=e.bgPosDirectionRegex;return t.replace(r?/^((-|\d|\.)+%)/:null,(function(e,t){return function(e){var t=e.indexOf(".");if(-1===t)e=100-parseFloat(e)+"%";else{var n=e.length-t-2;e=(e=100-parseFloat(e)).toFixed(n)+"%"}return e}(t)})).replace(i,(function(e){return n[e]}))},backgroundPositionX:function(e){var t=e.value,n=e.valuesToConvert,r=e.isRtl,o=e.bgPosDirectionRegex;return i(t)?t:c.backgroundPosition({value:t,valuesToConvert:n,isRtl:r,bgPosDirectionRegex:o})},transition:function(e){var t=e.value,n=e.propertiesToConvert;return t.split(/,\s*/g).map((function(e){var t=e.split(" ");return t[0]=n[t[0]]||t[0],t.join(" ")})).join(", ")},transitionProperty:function(e){var t=e.value,n=e.propertiesToConvert;return t.split(/,\s*/g).map((function(e){return n[e]||e})).join(", ")},transform:function(e){var t=e.value,n="(?:(?:(?:\\[0-9a-f]{1,6})(?:\\r\\n|\\s)?)|\\\\[^\\r\\n\\f0-9a-f])",r="((?:-?(?:[0-9]*\\.[0-9]+|[0-9]+)(?:\\s*(?:em|ex|px|cm|mm|in|pt|pc|deg|rad|grad|ms|s|hz|khz|%)|-?(?:[_a-z]|[^\\u0020-\\u007e]|"+n+")(?:[_a-z0-9-]|[^\\u0020-\\u007e]|"+n+")*)?)|(?:inherit|auto))",i=new RegExp("(translateX\\s*\\(\\s*)"+r+"(\\s*\\))","gi"),o=new RegExp("(translate\\s*\\(\\s*)"+r+"((?:\\s*,\\s*"+r+"){0,1}\\s*\\))","gi"),s=new RegExp("(translate3d\\s*\\(\\s*)"+r+"((?:\\s*,\\s*"+r+"){0,2}\\s*\\))","gi"),u=new RegExp("(rotate[ZY]?\\s*\\(\\s*)"+r+"(\\s*\\))","gi");return t.replace(i,a).replace(o,a).replace(s,a).replace(u,a)}};c.objectPosition=c.backgroundPosition,c.margin=c.padding,c.borderWidth=c.padding,c.boxShadow=c.textShadow,c.webkitBoxShadow=c.boxShadow,c.mozBoxShadow=c.boxShadow,c.WebkitBoxShadow=c.boxShadow,c.MozBoxShadow=c.boxShadow,c.borderStyle=c.borderColor,c.webkitTransform=c.transform,c.mozTransform=c.transform,c.WebkitTransform=c.transform,c.MozTransform=c.transform,c.transformOrigin=c.backgroundPosition,c.webkitTransformOrigin=c.transformOrigin,c.mozTransformOrigin=c.transformOrigin,c.WebkitTransformOrigin=c.transformOrigin,c.MozTransformOrigin=c.transformOrigin,c.webkitTransition=c.transition,c.mozTransition=c.transition,c.WebkitTransition=c.transition,c.MozTransition=c.transition,c.webkitTransitionProperty=c.transitionProperty,c.mozTransitionProperty=c.transitionProperty,c.WebkitTransitionProperty=c.transitionProperty,c.MozTransitionProperty=c.transitionProperty,c["text-shadow"]=c.textShadow,c["border-color"]=c.borderColor,c["border-radius"]=c.borderRadius,c["background-image"]=c.backgroundImage,c["background-position"]=c.backgroundPosition,c["background-position-x"]=c.backgroundPositionX,c["object-position"]=c.objectPosition,c["border-width"]=c.padding,c["box-shadow"]=c.textShadow,c["-webkit-box-shadow"]=c.textShadow,c["-moz-box-shadow"]=c.textShadow,c["border-style"]=c.borderColor,c["-webkit-transform"]=c.transform,c["-moz-transform"]=c.transform,c["transform-origin"]=c.transformOrigin,c["-webkit-transform-origin"]=c.transformOrigin,c["-moz-transform-origin"]=c.transformOrigin,c["-webkit-transition"]=c.transition,c["-moz-transition"]=c.transition,c["transition-property"]=c.transitionProperty,c["-webkit-transition-property"]=c.transitionProperty,c["-moz-transition-property"]=c.transitionProperty;var l=r([["paddingLeft","paddingRight"],["marginLeft","marginRight"],["left","right"],["borderLeft","borderRight"],["borderLeftColor","borderRightColor"],["borderLeftStyle","borderRightStyle"],["borderLeftWidth","borderRightWidth"],["borderTopLeftRadius","borderTopRightRadius"],["borderBottomLeftRadius","borderBottomRightRadius"],["padding-left","padding-right"],["margin-left","margin-right"],["border-left","border-right"],["border-left-color","border-right-color"],["border-left-style","border-right-style"],["border-left-width","border-right-width"],["border-top-left-radius","border-top-right-radius"],["border-bottom-left-radius","border-bottom-right-radius"]]),h=["content"],f=r([["ltr","rtl"],["left","right"],["w-resize","e-resize"],["sw-resize","se-resize"],["nw-resize","ne-resize"]]),d=new RegExp("(^|\\W|_)((ltr)|(rtl)|(left)|(right))(\\W|_|$)","g"),p=new RegExp("(left)|(right)");function v(e){return Object.keys(e).reduce((function(t,n){var r=e[n];if("string"===typeof r&&(r=r.trim()),o(h,n))return t[n]=r,t;var a=function(e,t){var n=/\/\*\s?@noflip\s?\*\//.test(t),r=n?e:(a=e,l[a]||a),o=n?t:function(e,t){if(function(e){return null===e||"undefined"===typeof e}(t)||function(e){return"boolean"===typeof e}(t))return t;if(function(e){return e&&"object"===typeof e}(t))return v(t);var n,r=i(t),o=function(e){return"function"===typeof e}(t),a=r||o?t:t.replace(/ !important.*?$/,""),s=!r&&a.length!==t.length,u=c[e];n=u?u({value:a,valuesToConvert:f,propertiesToConvert:l,isRtl:!0,bgImgDirectionRegex:d,bgPosDirectionRegex:p}):f[a]||a;if(s)return n+" !important";return n}(r,t);var a;return{key:r,value:o}}(n,r),s=a.key,u=a.value;return t[s]=u,t}),Array.isArray(e)?[]:{})}t.default=v},224:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(182)),i=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e){return function(t){return i.default.createElement(r.default.Consumer,null,(function(n){return i.default.createElement(e,a({},n,t))}))}};t.default=s,e.exports=t.default},225:function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},229:function(e,t,n){"use strict";n.r(t);var r=n(283);n.d(t,"default",(function(){return r.a}))},246:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}},248:function(e,t,n){"use strict";t.__esModule=!0,t.ON_CLEAR=t.ON_SET_SEARCH=t.ON_REMOVE_FILTER_QUERY=t.ON_EDIT_FILTER_QUERY=t.ON_ADD_FILTER_QUERY=t.ON_FILTER_SORT_ORIENTATION_CHANGED=t.ON_FILTER_SORT_FIELD_CHANGED=t.ON_FILTER_IS_CLOSE=t.ON_FILTER_IS_OPEN=void 0;t.ON_FILTER_IS_OPEN="filters@ON_FILTER_IS_OPEN";t.ON_FILTER_IS_CLOSE="filters@ON_FILTER_IS_CLOSE";t.ON_FILTER_SORT_FIELD_CHANGED="filters@ON_FILTER_SORT_FIELD_CHANGED";t.ON_FILTER_SORT_ORIENTATION_CHANGED="filters@ON_FILTER_SORT_ORIENTATION_CHANGED";t.ON_ADD_FILTER_QUERY="filters@ON_ADD_FILTER_QUERY";t.ON_EDIT_FILTER_QUERY="filters@ON_EDIT_FILTER_QUERY";t.ON_REMOVE_FILTER_QUERY="filters@ON_REMOVE_FILTER_QUERY";t.ON_SET_SEARCH="filters@ON_SET_SEARCH";t.ON_CLEAR="filters@ON_CLEAR"},252:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a}));var r=n(0),i=(n(13),Object(r.createContext)(null)),o=function(e){var t=e.utils,n=e.children,o=e.locale,a=e.libInstance,s=Object(r.useMemo)((function(){return new t({locale:o,instance:a})}),[t,a,o]);return Object(r.createElement)(i.Provider,{value:s,children:n})};function a(){var e=Object(r.useContext)(i);return function(e){if(!e)throw new Error("Can not find utils in context. You either a) forgot to wrap your component tree in MuiPickersUtilsProvider; or b) mixed named and direct file imports.  Recommendation: use named imports from the module index.")}(e),e}},254:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=t.Context=void 0;var i=((r=n(0))&&r.__esModule?r:{default:r}).default.createContext(null);t.Context=i;var o=i;t.default=o},257:function(e,t,n){"use strict";n.r(t);var r=n(357);n.d(t,"default",(function(){return r.a}))},258:function(e,t,n){"use strict";n.r(t);var r=n(358);n.d(t,"default",(function(){return r.a}))},259:function(e,t,n){"use strict";n.r(t);var r=n(359);n.d(t,"default",(function(){return r.a}))},260:function(e,t,n){var r=n(275),i=n(276),o=n(277),a=n(278);e.exports=function(e){return r(e)||i(e)||o(e)||a()}},264:function(e,t,n){"use strict";n.r(t);var r=n(288);n.d(t,"default",(function(){return r.a}))},265:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=t.Context=void 0;var i=((r=n(0))&&r.__esModule?r:{default:r}).default.createContext(null);t.Context=i;var o=i;t.default=o},266:function(e,t,n){"use strict";n.r(t);var r=n(285);n.d(t,"default",(function(){return r.a}))},267:function(e,t,n){"use strict";n.d(t,"a",(function(){return q})),n.d(t,"b",(function(){return N})),n.d(t,"c",(function(){return D})),n.d(t,"d",(function(){return P})),n.d(t,"e",(function(){return Y})),n.d(t,"f",(function(){return S})),n.d(t,"g",(function(){return G})),n.d(t,"h",(function(){return F})),n.d(t,"i",(function(){return H})),n.d(t,"j",(function(){return L}));var r=n(29),i=n(0),o=n.n(i),a=(n(13),n(252)),s=n(48),u=n(2),c=n(9),l=n(304),h=n(453),f=n(35),d=n(452),p=n(63),v=n(337),m=n(330),g=n(287),y=n(286),b=n(270),_=n(283),w=n(354),O=n(386),E=n(68),T=n(340),I=Object(h.a)((function(e){var t="light"===e.palette.type?e.palette.primary.contrastText:e.palette.getContrastText(e.palette.background.default);return{toolbarTxt:{color:Object(f.d)(t,.54)},toolbarBtnSelected:{color:t}}}),{name:"MuiPickersToolbarText"}),S=function(e){var t=e.selected,n=e.label,r=e.className,o=void 0===r?null:r,a=Object(c.a)(e,["selected","label","className"]),h=I();return Object(i.createElement)(l.a,Object(u.a)({children:n,className:Object(s.default)(h.toolbarTxt,o,t&&h.toolbarBtnSelected)},a))},k=function(e){var t=e.classes,n=e.className,r=void 0===n?null:n,o=e.label,a=e.selected,l=e.variant,h=e.align,f=e.typographyClassName,d=Object(c.a)(e,["classes","className","label","selected","variant","align","typographyClassName"]);return Object(i.createElement)(v.a,Object(u.a)({variant:"text",className:Object(s.default)(t.toolbarBtn,r)},d),Object(i.createElement)(S,{align:h,className:f,variant:l,label:o,selected:a}))};k.defaultProps={className:""};var C=Object(d.a)({toolbarBtn:{padding:0,minWidth:"16px",textTransform:"none"}}),D=Object(p.a)(C,{name:"MuiPickersToolbarButton"})(k),j=Object(h.a)((function(e){return{toolbar:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",height:100,backgroundColor:"light"===e.palette.type?e.palette.primary.main:e.palette.background.default},toolbarLandscape:{height:"auto",maxWidth:150,padding:8,justifyContent:"flex-start"}}}),{name:"MuiPickersToolbar"}),N=function(e){var t=e.children,n=e.isLandscape,r=e.className,o=void 0===r?null:r,a=Object(c.a)(e,["children","isLandscape","className"]),l=j();return Object(i.createElement)(m.a,Object(u.a)({className:Object(s.default)(l.toolbar,o,n&&l.toolbarLandscape)},a),t)};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var P=function(e){var t=e.inputValue,n=e.inputVariant,o=e.validationError,a=e.InputProps,s=e.openPicker,l=e.TextFieldComponent,h=void 0===l?y.a:l,f=Object(c.a)(e,["inputValue","inputVariant","validationError","InputProps","openPicker","TextFieldComponent"]),d=Object(i.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a,{readOnly:!0})}),[a]);return Object(i.createElement)(h,Object(u.a)({error:Boolean(o),helperText:o},f,{onClick:s,value:t,variant:n,InputProps:d,onKeyDown:function(e){32===e.keyCode&&(e.stopPropagation(),s())}}))};P.displayName="PureDateInput";var A=function(e,t,n,r,i){var o=i.invalidLabel,a=i.emptyLabel,s=i.labelFunc,u=n.date(e);return s?s(r?null:u,o):r?a||"":n.isValid(u)?n.format(u,t):o},R=function(e,t,n){return t?n:e.endOfDay(n)},M=function(e,t,n){return t?n:e.startOfDay(n)},L=function(e,t,n){var r=n.maxDate,i=n.minDate,o=n.disablePast,a=n.disableFuture,s=n.maxDateMessage,u=n.minDateMessage,c=n.invalidDateMessage,l=n.strictCompareDates,h=t.date(e);return null===e?"":t.isValid(e)?r&&t.isAfter(h,R(t,!!l,t.date(r)))||a&&t.isAfter(h,R(t,!!l,t.date()))?s:i&&t.isBefore(h,M(t,!!l,t.date(i)))||o&&t.isBefore(h,M(t,!!l,t.date()))?u:"":c};function F(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0;return e||(t?n["12h"]:n["24h"])}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var q=function(e){var t=e.inputValue,n=e.inputVariant,o=e.validationError,a=e.KeyboardButtonProps,s=e.InputAdornmentProps,l=e.openPicker,h=e.onChange,f=e.InputProps,d=e.mask,p=e.maskChar,v=void 0===p?"_":p,m=e.refuse,g=void 0===m?/[^\d]+/gi:m,O=e.format,E=e.keyboardIcon,T=e.disabled,I=e.rifmFormatter,S=e.TextFieldComponent,k=void 0===S?y.a:S,C=Object(c.a)(e,["inputValue","inputVariant","validationError","KeyboardButtonProps","InputAdornmentProps","openPicker","onChange","InputProps","mask","maskChar","refuse","format","keyboardIcon","disabled","rifmFormatter","TextFieldComponent"]),D=d||function(e,t){return e.replace(/[a-z]/gi,t)}(O,v),j=Object(i.useMemo)((function(){return function(e,t,n){return function(r){var i="",o=r.replace(n,"");if(""===o)return o;for(var a=0,s=0;a<e.length;){var u=e[a];u===t&&s<o.length?(i+=o[s],s+=1):i+=u,a+=1}return i}}(D,v,g)}),[D,v,g]),N=s&&s.position?s.position:"end";return Object(i.createElement)(w.a,{key:D,value:t,onChange:function(e){h(""===e||e===D?null:e)},refuse:g,format:I||j},(function(e){var t=e.onChange,c=e.value;return Object(i.createElement)(k,Object(u.a)({disabled:T,error:Boolean(o),helperText:o},C,{value:c,onChange:t,variant:n,InputProps:V({},f,Object(r.a)({},"".concat(N,"Adornment"),Object(i.createElement)(_.a,Object(u.a)({position:N},s),Object(i.createElement)(b.a,Object(u.a)({disabled:T},a,{onClick:l}),E))))}))}))};q.defaultProps={keyboardIcon:Object(i.createElement)((function(e){return o.a.createElement(O.a,e,o.a.createElement("path",{d:"M17 12h-5v5h5v-5zM16 1v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-1V1h-2zm3 18H5V8h14v11z"}),o.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}))}),null)};function B(e,t){return{date:function(e,t){var n=t.value,r=t.initialFocusedDate,o=Object(i.useRef)(e.date()),a=e.date(n||r||o.current);return a&&e.isValid(a)?a:o.current}(Object(a.c)(),e),format:e.format||t.getDefaultFormat()}}function H(e,t){var n=e.autoOk,r=e.disabled,o=e.readOnly,s=e.onAccept,u=e.onChange,c=e.onError,l=e.value,h=e.variant,f=Object(a.c)(),d=function(e){var t=e.open,n=e.onOpen,r=e.onClose,o=null;if(void 0===t||null===t){var a=Object(i.useState)(!1),s=Object(E.a)(a,2);t=s[0],o=s[1]}return{isOpen:t,setIsOpen:Object(i.useCallback)((function(e){return o&&o(e),e?n&&n():r&&r()}),[n,r,o])}}(e),p=d.isOpen,v=d.setIsOpen,m=B(e,t),g=m.date,y=m.format,b=Object(i.useState)(g),_=Object(E.a)(b,2),w=_[0],O=_[1];Object(i.useEffect)((function(){p||f.isEqual(w,g)||O(g)}),[g,p,w,f]);var T=Object(i.useCallback)((function(e){u(e),s&&s(e),v(!1)}),[s,u,v]),I=Object(i.useMemo)((function(){return{format:y,open:p,onClear:function(){return T(null)},onAccept:function(){return T(w)},onSetToday:function(){return O(f.date())},onDismiss:function(){v(!1)}}}),[T,y,p,w,v,f]),S=Object(i.useMemo)((function(){return{date:w,onChange:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];O(e),t&&n?T(e):"inline"!==h&&"static"!==h||(u(e),s&&s(e))}}}),[T,n,s,u,w,h]),k=L(l,f,e);Object(i.useEffect)((function(){c&&c(k,l)}),[c,k,l]);var C=A(g,y,f,null===l,e),D={pickerProps:S,inputProps:Object(i.useMemo)((function(){return{inputValue:C,validationError:k,openPicker:function(){return!o&&!r&&v(!0)}}}),[r,C,o,v,k]),wrapperProps:I};return Object(i.useDebugValue)(D),D}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t){var n=e.format,r=void 0===n?t.getDefaultFormat():n,o=e.inputValue,s=e.onChange,u=e.value,c=Object(a.c)(),l=A(u,r,c,null===u,e),h=Object(i.useState)(l),f=Object(E.a)(h,2),d=f[0],p=f[1],v=o?function(e,t,n){try{return t.parse(e,n)}catch(r){return null}}(o,c,r):u;Object(i.useEffect)((function(){(null===u||c.isValid(u))&&p(l)}),[l,p,c,u]);var m=H(K({},e,{value:v,onChange:Object(i.useCallback)((function(e){s(e,null===e?null:c.format(e,r))}),[r,s,c])}),t),g=m.inputProps,y=m.wrapperProps,b=m.pickerProps;return{inputProps:Object(i.useMemo)((function(){return K({},g,{format:y.format,inputValue:o||d,onChange:function(e){p(e||"");var t=null===e?null:c.parse(e,y.format);s(t,e)}})}),[g,d,o,s,c,y.format]),wrapperProps:y,pickerProps:b}}function G(e){var t=e.Input,n=e.useState,r=e.useOptions,o=e.getCustomProps,a=e.DefaultToolbarComponent;return function(e){var s=e.allowKeyboardControl,l=e.ampm,h=e.animateYearScrolling,f=(e.autoOk,e.dateRangeIcon),d=e.disableFuture,p=e.disablePast,v=e.disableToolbar,m=(e.emptyLabel,e.format,e.forwardedRef,e.hideTabs),y=(e.initialFocusedDate,e.invalidDateMessage,e.invalidLabel,e.labelFunc,e.leftArrowButtonProps),b=e.leftArrowIcon,_=e.loadingIndicator,w=e.maxDate,O=(e.maxDateMessage,e.minDate),E=(e.minDateMessage,e.minutesStep),I=(e.onAccept,e.onChange,e.onClose,e.onMonthChange),S=(e.onOpen,e.onYearChange),k=e.openTo,C=e.orientation,D=e.renderDay,j=e.rightArrowButtonProps,N=e.rightArrowIcon,x=e.shouldDisableDate,P=e.strictCompareDates,A=e.timeIcon,R=e.ToolbarComponent,M=void 0===R?a:R,L=(e.value,e.variant),F=e.views,U=Object(c.a)(e,["allowKeyboardControl","ampm","animateYearScrolling","autoOk","dateRangeIcon","disableFuture","disablePast","disableToolbar","emptyLabel","format","forwardedRef","hideTabs","initialFocusedDate","invalidDateMessage","invalidLabel","labelFunc","leftArrowButtonProps","leftArrowIcon","loadingIndicator","maxDate","maxDateMessage","minDate","minDateMessage","minutesStep","onAccept","onChange","onClose","onMonthChange","onOpen","onYearChange","openTo","orientation","renderDay","rightArrowButtonProps","rightArrowIcon","shouldDisableDate","strictCompareDates","timeIcon","ToolbarComponent","value","variant","views"]),V=o?o(e):{},q=r(e),B=n(e,q),H=B.pickerProps,W=B.inputProps,K=B.wrapperProps;return Object(i.createElement)(g.c,Object(u.a)({variant:L,InputComponent:t,DateInputProps:W},V,K,U),Object(i.createElement)(T.a,Object(u.a)({},H,{allowKeyboardControl:s,ampm:l,animateYearScrolling:h,dateRangeIcon:f,disableFuture:d,disablePast:p,disableToolbar:v,hideTabs:m,leftArrowButtonProps:y,leftArrowIcon:b,loadingIndicator:_,maxDate:w,minDate:O,minutesStep:E,onMonthChange:I,onYearChange:S,openTo:k,orientation:C,renderDay:D,rightArrowButtonProps:j,rightArrowIcon:N,shouldDisableDate:x,strictCompareDates:P,timeIcon:A,ToolbarComponent:M,views:F})))}}},271:function(e,t,n){"use strict";var r=n(178),i=n(179);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(0)),a=(0,r(n(180)).default)(o.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");t.default=a},274:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=t.Context=void 0;var i=((r=n(0))&&r.__esModule?r:{default:r}).default.createContext(null);t.Context=i;var o=i;t.default=o},275:function(e,t,n){var r=n(246);e.exports=function(e){if(Array.isArray(e))return r(e)}},276:function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},277:function(e,t,n){var r=n(246);e.exports=function(e,t){if(e){if("string"===typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}},278:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},287:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return D})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return v})),n.d(t,"e",(function(){return y})),n.d(t,"f",(function(){return g})),n.d(t,"g",(function(){return I})),n.d(t,"h",(function(){return T}));var r=n(0),i=(n(13),n(48)),o=n(2),a=n(9),s=n(453),u=n(452),c=n(63),l=n(337),h=n(358),f=n(359),d=n(357),p=n(982);function v(e,t){return Array.isArray(t)?t.every((function(t){return-1!==e.indexOf(t)})):-1!==e.indexOf(t)}var m=310,g=325,y=305,b=Object(s.a)((function(e){return{staticWrapperRoot:{overflow:"hidden",minWidth:m,display:"flex",flexDirection:"column",backgroundColor:e.palette.background.paper}}}),{name:"MuiPickersStaticWrapper"}),_=function(e){var t=e.children,n=b();return Object(r.createElement)("div",{className:n.staticWrapperRoot,children:t})},w=function(e){var t=e.children,n=e.classes,s=e.onAccept,u=e.onDismiss,c=e.onClear,p=e.onSetToday,v=e.okLabel,m=e.cancelLabel,g=e.clearLabel,y=e.todayLabel,b=e.clearable,_=e.showTodayButton,w=(e.showTabs,e.wider),O=Object(a.a)(e,["children","classes","onAccept","onDismiss","onClear","onSetToday","okLabel","cancelLabel","clearLabel","todayLabel","clearable","showTodayButton","showTabs","wider"]);return Object(r.createElement)(d.a,Object(o.a)({role:"dialog",onClose:u,classes:{paper:Object(i.default)(n.dialogRoot,w&&n.dialogRootWider)}},O),Object(r.createElement)(f.a,{children:t,className:n.dialog}),Object(r.createElement)(h.a,{classes:{root:Object(i.default)((b||_)&&n.withAdditionalAction)}},b&&Object(r.createElement)(l.a,{color:"primary",onClick:c},g),_&&Object(r.createElement)(l.a,{color:"primary",onClick:p},y),m&&Object(r.createElement)(l.a,{color:"primary",onClick:u},m),v&&Object(r.createElement)(l.a,{color:"primary",onClick:s},v)))};w.displayName="ModalDialog";var O=Object(u.a)({dialogRoot:{minWidth:m},dialogRootWider:{minWidth:g},dialog:{"&:first-child":{padding:0}},withAdditionalAction:{justifyContent:"flex-start","& > *:first-child":{marginRight:"auto"}}}),E=Object(c.a)(O,{name:"MuiPickersModal"})(w),T="undefined"===typeof window?r.useEffect:r.useLayoutEffect;function I(e,t){var n=t[e.key];n&&(n(),e.preventDefault())}function S(e,t){var n=Object(r.useRef)(t);n.current=t,T((function(){if(e){var t=function(e){I(e,n.current)};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}}),[e])}var k=function(e){var t=e.open,n=e.children,i=e.okLabel,s=e.cancelLabel,u=e.clearLabel,c=e.todayLabel,l=e.showTodayButton,h=e.clearable,f=e.DialogProps,d=e.showTabs,p=e.wider,v=e.InputComponent,m=e.DateInputProps,g=e.onClear,y=e.onAccept,b=e.onDismiss,_=e.onSetToday,w=Object(a.a)(e,["open","children","okLabel","cancelLabel","clearLabel","todayLabel","showTodayButton","clearable","DialogProps","showTabs","wider","InputComponent","DateInputProps","onClear","onAccept","onDismiss","onSetToday"]);return S(t,{Enter:y}),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(v,Object(o.a)({},w,m)),Object(r.createElement)(E,Object(o.a)({wider:p,showTabs:d,open:t,onClear:g,onAccept:y,onDismiss:b,onSetToday:_,clearLabel:u,todayLabel:c,okLabel:i,cancelLabel:s,clearable:h,showTodayButton:l,children:n},f)))};k.defaultProps={okLabel:"OK",cancelLabel:"Cancel",clearLabel:"Clear",todayLabel:"Today",clearable:!1,showTodayButton:!1};var C=function(e){var t=e.open,n=(e.wider,e.children),i=e.PopoverProps,s=(e.onClear,e.onDismiss),u=(e.onSetToday,e.onAccept),c=(e.showTabs,e.DateInputProps),l=e.InputComponent,h=Object(a.a)(e,["open","wider","children","PopoverProps","onClear","onDismiss","onSetToday","onAccept","showTabs","DateInputProps","InputComponent"]),f=Object(r.useRef)();return S(t,{Enter:u}),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(l,Object(o.a)({},h,c,{inputRef:f})),Object(r.createElement)(p.a,Object(o.a)({open:t,onClose:s,anchorEl:f.current,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:n},i)))};var D=Object(r.createContext)(null),j=function(e){var t=e.variant,n=Object(a.a)(e,["variant"]),i=function(e){switch(e){case"inline":return C;case"static":return _;default:return k}}(t);return Object(r.createElement)(D.Provider,{value:t||"dialog"},Object(r.createElement)(i,n))}},289:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;c(n(13));var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=c(n(216)),o=c(n(290)),a=n(291),s=n(292);function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=function(e){var t=e.children,n=e.persistKey,u=void 0===n?"mui_filter":n,c=(0,r.useReducer)(o.default,function(e){var t={};try{t=JSON.parse(localStorage.getItem(e))||{}}catch(n){console.warn(n)}return t}(u)),h=c[0],f=c[1];(0,r.useEffect)((function(){try{localStorage.setItem(u,JSON.stringify(h))}catch(e){console.warn(e)}}),[h,u]);var d={openFilter:function(e){return f((0,a.openFilter)(e))},closeFilter:function(e){return f((0,a.closeFilter)(e))},clearFilter:function(e){return f((0,a.clearFilter)(e))},setSearch:function(e,t){return f((0,a.setSearch)(e,t))},setFilterSortField:function(e,t){return f((0,a.setFilterSortField)(e,t))},setFilterSortOrientation:function(e,t){return f((0,a.setFilterSortOrientation)(e,t))},addFilterQuery:function(e,t){return f((0,a.addFilterQuery)(e,t))},removeFilterQuery:function(e,t){return f((0,a.removeFilterQuery)(e,t))},editFilterQuery:function(e,t,n){return f((0,a.editFilterQuery)(e,t,n))},getList:function(e,t,n){return(0,s.getList)(h[e],t,n)},isFilterOpen:function(e){return!!h[e]&&!!h[e].isOpen},getFilterQueries:function(e){return h[e]&&h[e].queries?h[e].queries:[]},getFilter:function(e){return h[e]?h[e]:{}},getField:function(e,t){return(0,s.getField)(e,t)}};return r.default.createElement(i.default.Provider,{value:l({},d)},t)};h.propTypes={};var f=h;t.default=f,e.exports=t.default},290:function(e,t,n){"use strict";var r=n(105);t.__esModule=!0,t.default=function(e,t){void 0===e&&(e={});var n=t.name;switch(t.type){case i.ON_FILTER_IS_OPEN:case i.ON_FILTER_IS_CLOSE:case i.ON_FILTER_SORT_FIELD_CHANGED:case i.ON_FILTER_SORT_ORIENTATION_CHANGED:case i.ON_ADD_FILTER_QUERY:case i.ON_EDIT_FILTER_QUERY:case i.ON_REMOVE_FILTER_QUERY:case i.ON_SET_SEARCH:case i.ON_CLEAR:return a(a({},e),{},r({},n,function(e,t){void 0===e&&(e={});var n=t.payload;switch(t.type){case i.ON_FILTER_IS_OPEN:case i.ON_FILTER_IS_CLOSE:case i.ON_FILTER_SORT_FIELD_CHANGED:case i.ON_FILTER_SORT_ORIENTATION_CHANGED:return a(a({},e),n);case i.ON_ADD_FILTER_QUERY:case i.ON_EDIT_FILTER_QUERY:case i.ON_REMOVE_FILTER_QUERY:return a(a({},e),{},{queries:u(e.queries,t)});case i.ON_SET_SEARCH:return a(a({},e),{},{search:c(e.search,t)});case i.ON_CLEAR:return{fields:e.fields};default:return e}}(e[n],t)));default:return e}};var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=r?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(n,i,a):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(248));function o(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){var n=t.payload;switch(t.type){case i.ON_ADD_FILTER_QUERY:case i.ON_EDIT_FILTER_QUERY:return a(a({},e),n);default:return e}}function u(e,t){void 0===e&&(e=[]);var n=t.index;switch(t.type){case i.ON_ADD_FILTER_QUERY:return[].concat(e,[s({},t)]);case i.ON_EDIT_FILTER_QUERY:return e.map((function(e,r){return n!==r?e:s(e,t)}));case i.ON_REMOVE_FILTER_QUERY:return e.filter((function(e,t){return t!==n}));default:return e}}function c(e,t){void 0===e&&(e={});var n=t.payload;switch(t.type){case i.ON_SET_SEARCH:return a(a({},e),{},{value:n});default:return e}}e.exports=t.default},291:function(e,t,n){"use strict";t.__esModule=!0,t.openFilter=function(e){return{type:r.ON_FILTER_IS_OPEN,name:e,payload:{isOpen:!0}}},t.closeFilter=function(e){return{type:r.ON_FILTER_IS_CLOSE,name:e,payload:{isOpen:!1}}},t.clearFilter=function(e){return{type:r.ON_CLEAR,name:e}},t.setFilterSortField=function(e,t){return{type:r.ON_FILTER_SORT_FIELD_CHANGED,name:e,payload:{sortField:t}}},t.setFilterSortOrientation=function(e,t){return{type:r.ON_FILTER_SORT_FIELD_CHANGED,name:e,payload:{sortOrientation:t}}},t.addFilterQuery=function(e,t){return{type:r.ON_ADD_FILTER_QUERY,name:e,payload:o({},t)}},t.setSearch=function(e,t){return{type:r.ON_SET_SEARCH,name:e,payload:t}},t.editFilterQuery=function(e,t,n){return{type:r.ON_EDIT_FILTER_QUERY,name:e,index:t,payload:o({},n)}},t.removeFilterQuery=function(e,t){return{type:r.ON_REMOVE_FILTER_QUERY,name:e,index:t}};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=i();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var a=r?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}n.default=e,t&&t.set(e,n);return n}(n(248));function i(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return i=function(){return e},e}function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}},292:function(e,t,n){"use strict";t.__esModule=!0,t.getField=o,t.getList=function(e,t,n){void 0===e&&(e={});void 0===t&&(t=[]);void 0===n&&(n=[]);var r=[].concat(t),a=e,s=a.queries,u=void 0===s?[]:s,c=a.sortField,l=a.sortOrientation,h=void 0===l?1:l,f=a.search,d=(void 0===f?{}:f).value,p=void 0===d?"":d;if(null==t||t.length<1)return[];n.length>0&&(r=r.filter((function(e){for(var t=!0,r=0;r<u.length;r++){var i=u[r],a=i.field,s=o(a,n);if(s&&(t=s.filter(e[a],i)),!t)return t}return t})));null!=p&&""!==p&&void 0!==p&&(r=r.filter((function(e){return void 0===e&&(e={}),-1!==JSON.stringify(i({},e)).toUpperCase().indexOf(String(p).toUpperCase())})));if(c&&""!==c){var v=o(c,n);void 0!==r&&void 0!==v.sort&&r.sort((function(e,t){return v.sort(h,e[c],t[c])}))}return r};var r=n(293);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function o(e,t){void 0===t&&(t=[]);var n=!1;return t.map((function(t){var o=t.type,a=void 0===o?"text":o;if(t.name===e){var s={};"number"===a?s=i({},r.numberField):"text"===a?s=i({},r.textField):"bool"===a?s=i({},r.boolField):"time"===a?s=i({},r.timeField):"date"===a&&(s=i({},r.dateField)),n=i(i({},s),t)}return t})),n}},293:function(e,t,n){"use strict";t.__esModule=!0;var r=u(n(294));t.numberField=r.default;var i=u(n(295));t.textField=i.default;var o=u(n(297));t.boolField=o.default;var a=u(n(298));t.dateField=a.default;var s=u(n(299));function u(e){return e&&e.__esModule?e:{default:e}}t.timeField=s.default},294:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(0)),i=o(n(183));function o(e){return e&&e.__esModule?e:{default:e}}var a={operators:[{value:"=",label:"="},{value:">",label:">"},{value:"<",label:"<"},{value:"!=",label:"!="},{value:"<=",label:"<="},{value:">=",label:">="},{value:"like",label:"like"},{value:"!like",label:"!like"}],defaultOperator:"=",filter:function(e,t){var n=t.operator,r=t.value;if(""===r)return!0;var i=parseFloat(r);switch(n){case"=":return e===i;case">":return e>i;case"<":return e<i;case"!=":return e!==i;case"<=":return e<=i;case">=":return e>=i;case"like":return-1!==e.toString().indexOf(i.toString());case"!like":return-1===e.toString().indexOf(i.toString());default:return!1}},sort:function(e,t,n){return(t-n)*e},render:function(e,t){var n=e.value,o=void 0===n?"":n;return r.default.createElement(i.default,{variant:"outlined",style:{padding:1},type:"number",value:o,fullWidth:!0,onChange:function(e){return t({value:e.target.value})}})}};t.default=a,e.exports=t.default},295:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=u(n(0)),i=u(n(183)),o=u(n(229)),a=u(n(184)),s=u(n(296));function u(e){return e&&e.__esModule?e:{default:e}}var c={operators:[{value:"=",label:"="},{value:">",label:">"},{value:"<",label:"<"},{value:"!=",label:"!="},{value:"<=",label:"<="},{value:">=",label:">="},{value:"like",label:"like"},{value:"!like",label:"!like"}],defaultOperator:"like",filter:function(e,t){void 0===e&&(e="");var n=t.operator,r=t.value,i=t.isCaseSensitive;if(""===r)return!0;var o=r,a=e;switch(void 0!==i&&i&&(o=null!=r?r.toUpperCase():r,a=null!=a?a.toUpperCase():r),n){case"=":return a===o;case">":return a.localeCompare(o)>0;case"<":return a.localeCompare(o)<0;case"!=":return a!==o;case"<=":return a.localeCompare(o)<=0;case">=":return a.localeCompare(o)>=0;case"like":return-1!==a.indexOf(o);case"!like":return-1===a.indexOf(o);default:return!1}},sort:function(e,t,n){return(t<n?-1:t>n?1:0)*e},render:function(e,t){var n=e.value,u=void 0===n?"":n,c=e.isCaseSensitive,l=void 0!==c&&c;return r.default.createElement(i.default,{variant:"outlined",style:{padding:1},type:"text",value:u,fullWidth:!0,onChange:function(e){return t({value:e.target.value})},InputProps:{endAdornment:r.default.createElement(o.default,{position:"end"},r.default.createElement(a.default,{color:l?"secondary":"primary",onClick:function(){return t({isCaseSensitive:!l})}},r.default.createElement(s.default,null)))}})}};t.default=c,e.exports=t.default},296:function(e,t,n){"use strict";var r=n(178),i=n(179);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(0)),a=(0,r(n(180)).default)(o.createElement("path",{d:"M9 4v3h5v12h3V7h5V4H9zm-6 8h3v7h3v-7h3V9H3v3z"}),"FormatSize");t.default=a},297:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(0)),i=o(n(266));function o(e){return e&&e.__esModule?e:{default:e}}var a={operators:[{value:"=",label:"="},{value:"!=",label:"!="}],defaultOperator:"=",filter:function(e,t){var n=t.operator,r=t.value;if(""===r)return!0;var i=!!r;switch(n){case"=":return e===i;case"!=":return e!==i;default:return!1}},sort:function(e,t,n){return(t-n)*e},render:function(e,t){var n=e.value,o=void 0===n?"":n;return r.default.createElement("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center",padding:16}},r.default.createElement(i.default,{onChange:function(e,n){t({value:n})},value:o}))}};t.default=a,e.exports=t.default},298:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(0)),i=o(n(183));function o(e){return e&&e.__esModule?e:{default:e}}var a={operators:[{value:"=",label:"="},{value:">",label:">"},{value:"<",label:"<"},{value:"!=",label:"!="},{value:"<=",label:"<="},{value:">=",label:">="}],defaultOperator:"=",filter:function(e,t){var n=t.operator,r=t.value;if(""===r)return!0;var i=new Date(r).getTime(),o=new Date(e).getTime();switch(n){case"=":return o===i;case">":return o>i;case"<":return o<i;case"!=":return o!==i;case"<=":return o<=i;case">=":return o>=i;default:return!1}},sort:function(e,t,n){var r=new Date(t).getTime(),i=new Date(n).getTime();return(r<i?-1:r>i?1:0)*e},render:function(e,t){var n=e.value,o=void 0===n?"":n;e.isCaseSensitive;return r.default.createElement(i.default,{type:"date",value:o,onChange:function(e){return t({value:e.target.value})},InputLabelProps:{shrink:!0}})}};t.default=a,e.exports=t.default},299:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(0)),i=o(n(183));function o(e){return e&&e.__esModule?e:{default:e}}var a={operators:[{value:"=",label:"="},{value:">",label:">"},{value:"<",label:"<"},{value:"!=",label:"!="},{value:"<=",label:"<="},{value:">=",label:">="}],defaultOperator:"=",filter:function(e,t){var n=t.operator,r=t.value;if(""===r)return!0;var i=r?parseInt(r.split(":").join("")):0,o=e?parseInt(e.split(":").join("")):0;switch(n){case"=":return o===i;case">":return o>i;case"<":return o<i;case"!=":return o!==i;case"<=":return o<=i;case">=":return o>=i;default:return!1}},sort:function(e,t,n){var r=new Date(t).getTime(),i=new Date(n).getTime();return(r<i?-1:r>i?1:0)*e},render:function(e,t){var n=e.value,o=void 0===n?"":n;e.isCaseSensitive;return r.default.createElement(i.default,{InputLabelProps:{shrink:!0},inputProps:{step:300},type:"time",value:o,onChange:function(e){return t({value:e.target.value})}})}};t.default=a,e.exports=t.default},300:function(e,t,n){"use strict";var r=n(105);t.__esModule=!0,t.default=void 0;s(n(13));var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=s(n(217));function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n=t.type,i=t.name,o=t.offset;switch(n){case"SET_OFFSET":return u(u({},e),{},r({},i,o));default:throw new Error}}var l=function(e){var t=e.children,n=(0,i.useReducer)(c,{}),r=n[0],a=n[1];return i.default.createElement(o.default.Provider,{value:{setOffset:function(e,t){a({type:"SET_OFFSET",name:e,offset:t})},getOffset:function(e){return r[e]||0}}},t)};l.propTypes={};var h=l;t.default=h,e.exports=t.default},310:function(e,t,n){"use strict";var r=n(105),i=n(260);t.__esModule=!0,t.default=void 0;var o=c(n(65)),a=c(n(221)),s=(c(n(13)),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)));function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function h(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d="LOADING_CHANGED",p="ERROR",v="VALUE_CHANGED",m="CLEAR",g="CLEAR_ALL",y="CHILD_ADDED",b="CHILD_CHANGED",_="CHILD_REMOVED",w={},O=function(e){w[e]=!0},E=function(e){w[e]=!1};function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.payload;switch(t.type){case y:return-1===e.findIndex((function(e){return e.key===n.key}))?[].concat(i(e),[n]):i(e);case b:return e.map((function(e){return n.key===e.key?n:e}));case _:return e.filter((function(e){return n.key!==e.key}))}}function I(e,t){var n=t.type,i=t.path,o=t.value,a=t.isLoading,s=void 0!==a&&a,u=t.error,c=void 0!==u&&u,l=t.hasError,w=void 0!==l&&l;switch(n){case d:return f({},e,r({},i,f({},e[i],{isLoading:s})));case p:return f({},e,r({},i,f({},e[i],{error:c,hasError:w,isLoading:s})));case v:return f({},e,r({},i,f({},e[i],{value:o,isLoading:s,error:c,hasError:w})));case m:e[i];return f({},function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,[i].map(h)));case y:case b:case _:return f({},e,r({},i,f({},e[i],{value:T(e[i].value,t)})));case g:return{};default:throw new Error}}var S=function(e){var t=e.children,n=e.firebaseApp,r=e.persistKey,i=void 0===r?"firebase_lists":r,u=(0,s.useReducer)(I,function(e){var t={};try{t=JSON.parse(localStorage.getItem(e))||{}}catch(n){console.warn(n)}return t}(i)),c=u[0],h=u[1];(0,s.useEffect)((function(){try{localStorage.setItem(i,JSON.stringify(c))}catch(e){console.warn(e)}}),[c,i]);var f=(0,s.useCallback)((function(e){return"string"===typeof e||e instanceof String?n.database().ref(e):e}),[n]),T=(0,s.useCallback)((function(e){return"string"===typeof e||e instanceof String?e:e.toString().substring(n.database().ref().root.toString().length)}),[n]),S=(0,s.useCallback)(function(){var e,t=(e=o.default.mark((function e(t,n){var r,i,a,s,u,c,l;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f(t),!((i=n||T(t)).length<1)){e.next=4;break}return e.abrupt("return");case 4:if(!w[i]){e.next=6;break}return e.abrupt("return");case 6:return a=!1,s=function(e){h({type:p,path:i,isLoading:!1,error:e,hasError:!0}),E(i)},u=function(e,t){a&&h({type:t,path:i,payload:{key:e.key,val:e.val()}})},O(i),h({type:d,path:i,isLoading:!0}),r.on("child_added",(function(e){return u(e,y)}),s),r.on("child_changed",(function(e){return u(e,b)}),s),r.on("child_removed",(function(e){return u(e,_)}),s),e.prev=14,e.next=17,r.once("value");case 17:c=e.sent,a=!0,l=[],c.forEach((function(e){l.push({key:e.key,val:e.val()})})),h({type:v,path:i,value:l,isLoading:!1}),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(14),s(e.t0);case 27:case"end":return e.stop()}}),e,null,[[14,24]])})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),[T,f]),k=(0,s.useCallback)((function(e){var t=f(e),n=T(e);n.length<1||(t.off(),E(n))}),[f,T]),C=(0,s.useCallback)((function(e){return c[e]&&c[e].value?c[e].value:[]}),[c]),D=(0,s.useCallback)((function(e){return!!c[e]&&c[e].isLoading}),[c]),j=(0,s.useCallback)((function(e){return!!c[e]&&c[e].error}),[c]),N=(0,s.useCallback)((function(e){return!!c[e]&&c[e].hasError}),[c]),x=(0,s.useCallback)((function(e){var t=f(e),n=T(e);k(t),h({type:m,path:n})}),[f,T,k]),P=(0,s.useCallback)((function(){n.database().ref().off(),h({type:g})}),[n]);return s.default.createElement(a.default.Provider,{value:{firebaseApp:n,watchList:S,unwatchList:k,getList:C,clearList:x,clearAllLists:P,isListLoading:D,hasListError:N,getListError:j}},t)};S.propTypes={};var k=S;t.default=k,e.exports=t.default},322:function(e,t,n){"use strict";n.r(t);var r=n(351);n.d(t,"default",(function(){return r.a}))},324:function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return O}));var r,i=n(0),o=(n(13),n(48)),a=n(452),s=n(63),u=n(281),c=n(34),l=n(328),h=n(329),f=n(327);!function(e){e.HOURS="hours",e.MINUTES="minutes",e.SECONDS="seconds"}(r||(r={}));var d=r,p=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).state={toAnimateTransform:!1,previousType:void 0},n.getAngleStyle=function(){var e=n.props,t=e.value,r=e.isInner,i=e.type,o=360/(i===d.HOURS?12:60)*t;return i===d.HOURS&&t>12&&(o-=360),{height:r?"26%":"40%",transform:"rotateZ(".concat(o,"deg)")}},n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.hasSelected;return Object(i.createElement)("div",{style:this.getAngleStyle(),className:Object(o.default)(t.pointer,this.state.toAnimateTransform&&t.animateTransform)},Object(i.createElement)("div",{className:Object(o.default)(t.thumb,n&&t.noPoint)}))}}]),t}(i.Component);p.getDerivedStateFromProps=function(e,t){return e.type!==t.previousType?{toAnimateTransform:!0,previousType:e.type}:{toAnimateTransform:!1,previousType:e.type}};var v=Object(s.a)((function(e){return Object(a.a)({pointer:{width:2,backgroundColor:e.palette.primary.main,position:"absolute",left:"calc(50% - 1px)",bottom:"50%",transformOrigin:"center bottom 0px"},animateTransform:{transition:e.transitions.create(["transform","height"])},thumb:{width:4,height:4,backgroundColor:e.palette.primary.contrastText,borderRadius:"100%",position:"absolute",top:-21,left:-15,border:"14px solid ".concat(e.palette.primary.main),boxSizing:"content-box"},noPoint:{backgroundColor:e.palette.primary.main}})}),{name:"MuiPickersClockPointer"})(p),m={x:130,y:130},g=m.x-m.x,y=0-m.y,b=function(e,t,n){var r=t-m.x,i=n-m.y,o=Math.atan2(g,y)-Math.atan2(r,i),a=57.29577951308232*o;a=Math.round(a/e)*e,a%=360;var s=Math.floor(a/e)||0,u=Math.pow(r,2)+Math.pow(i,2);return{value:s,distance:Math.sqrt(u)}},_=function(e,t,n){var r=b(30,e,t),i=r.value,o=r.distance;return i=i||12,n?i%=12:o<90&&(i+=12,i%=24),i},w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=6*n,i=b(r,e,t),o=i.value;return o=o*n%60},O=function(e,t){return t.getHours(e)>=12?"pm":"am"},E=function(e,t,n,r){if(n&&(r.getHours(e)>=12?"pm":"am")!==t){var i="am"===t?r.getHours(e)-12:r.getHours(e)+12;return r.setHours(e,i)}return e},T=function(e){function t(){var e,n;Object(u.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(i)))).isMoving=!1,n.handleTouchMove=function(e){n.isMoving=!0,n.setTime(e)},n.handleTouchEnd=function(e){n.isMoving&&(n.setTime(e,!0),n.isMoving=!1)},n.handleMove=function(e){e.preventDefault(),e.stopPropagation(),("undefined"===typeof e.buttons?1===e.nativeEvent.which:1===e.buttons)&&n.setTime(e.nativeEvent,!1)},n.handleMouseUp=function(e){n.isMoving&&(n.isMoving=!1),n.setTime(e.nativeEvent,!0)},n.hasSelected=function(){var e=n.props,t=e.type,r=e.value;return t===d.HOURS||r%5===0},n}return Object(f.a)(t,e),Object(c.a)(t,[{key:"setTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.offsetX,r=e.offsetY;if("undefined"===typeof n){var i=e.target.getBoundingClientRect();n=e.changedTouches[0].clientX-i.left,r=e.changedTouches[0].clientY-i.top}var o=this.props.type===d.SECONDS||this.props.type===d.MINUTES?w(n,r,this.props.minutesStep):_(n,r,Boolean(this.props.ampm));this.props.onChange(o,t)}},{key:"render",value:function(){var e=this.props,t=e.classes,n=e.value,r=e.children,o=e.type,a=!e.ampm&&o===d.HOURS&&(n<1||n>12);return Object(i.createElement)("div",{className:t.container},Object(i.createElement)("div",{className:t.clock},Object(i.createElement)("div",{role:"menu",tabIndex:-1,className:t.squareMask,onTouchMove:this.handleTouchMove,onTouchEnd:this.handleTouchEnd,onMouseUp:this.handleMouseUp,onMouseMove:this.handleMove}),Object(i.createElement)("div",{className:t.pin}),Object(i.createElement)(v,{type:o,value:n,isInner:a,hasSelected:this.hasSelected()}),r))}}]),t}(i.Component);T.defaultProps={ampm:!1,minutesStep:1};var I=Object(s.a)((function(e){return Object(a.a)({container:{display:"flex",justifyContent:"center",alignItems:"flex-end",margin:"".concat(e.spacing(2),"px 0 ").concat(e.spacing(1),"px")},clock:{backgroundColor:"rgba(0,0,0,.07)",borderRadius:"50%",height:260,width:260,position:"relative",pointerEvents:"none"},squareMask:{width:"100%",height:"100%",position:"absolute",pointerEvents:"auto",outline:"none",touchActions:"none",userSelect:"none","&:active":{cursor:"move"}},pin:{width:6,height:6,borderRadius:"50%",backgroundColor:e.palette.primary.main,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})}),{name:"MuiPickersClock"})(T)},331:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(0),i=(n(13),n(252)),o=n(48),a=n(2),s=n(304),u=n(453),c=(n(281),n(34),n(328),n(329),n(327),n(324)),l={0:[0,40],1:[55,19.6],2:[94.4,59.5],3:[109,114],4:[94.4,168.5],5:[54.5,208.4],6:[0,223],7:[-54.5,208.4],8:[-94.4,168.5],9:[-109,114],10:[-94.4,59.5],11:[-54.5,19.6],12:[0,5],13:[36.9,49.9],14:[64,77],15:[74,114],16:[64,151],17:[37,178],18:[0,188],19:[-37,178],20:[-64,151],21:[-74,114],22:[-64,77],23:[-37,50]},h=Object(u.a)((function(e){var t=e.spacing(4);return{clockNumber:{width:t,height:32,userSelect:"none",position:"absolute",left:"calc((100% - ".concat("number"===typeof t?"".concat(t,"px"):t,") / 2)"),display:"inline-flex",justifyContent:"center",alignItems:"center",borderRadius:"50%",color:"light"===e.palette.type?e.palette.text.primary:e.palette.text.hint},clockNumberSelected:{color:e.palette.primary.contrastText}}}),{name:"MuiPickersClockNumber"}),f=function(e){var t=e.selected,n=e.label,i=e.index,a=e.isInner,u=h(),c=Object(o.default)(u.clockNumber,t&&u.clockNumberSelected),f=Object(r.useMemo)((function(){var e=l[i];return{transform:"translate(".concat(e[0],"px, ").concat(e[1],"px")}}),[i]);return Object(r.createElement)(s.a,{component:"span",className:c,variant:a?"body2":"body1",style:f,children:n})},d=function(e){for(var t=e.ampm,n=e.utils,i=e.date,o=n.getHours(i),s=[],u=t?12:23,c=function(e){return t?12===e?12===o||0===o:o===e||o-12===e:o===e},l=t?1:0;l<=u;l+=1){var h=l.toString();0===l&&(h="00");var d={index:l,label:n.formatNumber(h),selected:c(l),isInner:!t&&(0===l||l>12)};s.push(Object(r.createElement)(f,Object(a.a)({key:l},d)))}return s},p=function(e){var t=e.value,n=e.utils.formatNumber;return[Object(r.createElement)(f,{label:n("00"),selected:0===t,index:12,key:12}),Object(r.createElement)(f,{label:n("05"),selected:5===t,index:1,key:1}),Object(r.createElement)(f,{label:n("10"),selected:10===t,index:2,key:2}),Object(r.createElement)(f,{label:n("15"),selected:15===t,index:3,key:3}),Object(r.createElement)(f,{label:n("20"),selected:20===t,index:4,key:4}),Object(r.createElement)(f,{label:n("25"),selected:25===t,index:5,key:5}),Object(r.createElement)(f,{label:n("30"),selected:30===t,index:6,key:6}),Object(r.createElement)(f,{label:n("35"),selected:35===t,index:7,key:7}),Object(r.createElement)(f,{label:n("40"),selected:40===t,index:8,key:8}),Object(r.createElement)(f,{label:n("45"),selected:45===t,index:9,key:9}),Object(r.createElement)(f,{label:n("50"),selected:50===t,index:10,key:10}),Object(r.createElement)(f,{label:n("55"),selected:55===t,index:11,key:11})]},v=function(e){var t=e.type,n=e.onHourChange,o=e.onMinutesChange,s=e.onSecondsChange,u=e.ampm,l=e.date,h=e.minutesStep,f=Object(i.c)(),v=Object(r.useMemo)((function(){switch(t){case c.b.HOURS:return{value:f.getHours(l),children:d({date:l,utils:f,ampm:Boolean(u)}),onChange:function(e,t){var r=Object(c.d)(l,f),i=Object(c.c)(f.setHours(l,e),r,Boolean(u),f);n(i,t)}};case c.b.MINUTES:var e=f.getMinutes(l);return{value:e,children:p({value:e,utils:f}),onChange:function(e,t){var n=f.setMinutes(l,e);o(n,t)}};case c.b.SECONDS:var r=f.getSeconds(l);return{value:r,children:p({value:r,utils:f}),onChange:function(e,t){var n=f.setSeconds(l,e);s(n,t)}};default:throw new Error("You must provide the type for TimePickerView")}}),[u,l,n,o,s,t,f]);return Object(r.createElement)(c.a,Object(a.a)({type:t,ampm:u,minutesStep:h},v))};v.displayName="TimePickerView",v.defaultProps={ampm:!0,minutesStep:1};var m=Object(r.memo)(v);t.b=m},340:function(e,t,n){"use strict";n.d(t,"a",(function(){return P})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return y})),n.d(t,"d",(function(){return g}));var r=n(29),i=n(0),o=n(13),a=n(252),s=n(48),u=n(2),c=n(9),l=n(304),h=n(453),f=n(287),d=n(343),p=n(68),v=n(331);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}Object(o.oneOfType)([o.object,o.string,o.number,Object(o.instanceOf)(Date)]),Object(o.oneOf)(["year","month","day"]);var g={ampm:!0,invalidDateMessage:"Invalid Time Format"},y={minDate:new Date("1900-01-01"),maxDate:new Date("2100-01-01"),invalidDateMessage:"Invalid Date Format",minDateMessage:"Date should not be before minimal date",maxDateMessage:"Date should not be after maximal date",allowKeyboardControl:!0},b=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},g,{},y,{showTabs:!0});var _=Object(h.a)((function(e){return{root:{height:40,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",outline:"none","&:focus":{color:e.palette.primary.main,fontWeight:e.typography.fontWeightMedium}},yearSelected:{margin:"10px 0",fontWeight:e.typography.fontWeightMedium},yearDisabled:{pointerEvents:"none",color:e.palette.text.hint}}}),{name:"MuiPickersYear"}),w=function(e){var t=e.onSelect,n=e.forwardedRef,r=e.value,o=e.selected,a=e.disabled,h=e.children,f=Object(c.a)(e,["onSelect","forwardedRef","value","selected","disabled","children"]),d=_(),p=Object(i.useCallback)((function(){return t(r)}),[t,r]);return Object(i.createElement)(l.a,Object(u.a)({role:"button",component:"div",tabIndex:a?-1:0,onClick:p,onKeyPress:p,color:o?"primary":void 0,variant:o?"h5":"subtitle1",children:h,ref:n,className:Object(s.default)(d.root,o&&d.yearSelected,a&&d.yearDisabled)},f))};w.displayName="Year";var O=Object(i.forwardRef)((function(e,t){return Object(i.createElement)(w,Object(u.a)({},e,{forwardedRef:t}))})),E=Object(h.a)({container:{height:300,overflowY:"auto"}},{name:"MuiPickersYearSelection"}),T=function(e){var t=e.date,n=e.onChange,r=e.onYearChange,o=e.minDate,s=e.maxDate,u=e.disablePast,c=e.disableFuture,l=e.animateYearScrolling,h=Object(a.c)(),d=E(),p=Object(i.useContext)(f.b),v=Object(i.useRef)(null);Object(i.useEffect)((function(){if(v.current&&v.current.scrollIntoView)try{v.current.scrollIntoView({block:"static"===p?"nearest":"center",behavior:l?"smooth":"auto"})}catch(e){v.current.scrollIntoView()}}),[]);var m=h.getYear(t),g=Object(i.useCallback)((function(e){var i=h.setYear(t,e);r&&r(i),n(i,!0)}),[t,n,r,h]);return Object(i.createElement)("div",{className:d.container},h.getYearRange(o,s).map((function(e){var t=h.getYear(e),n=t===m;return Object(i.createElement)(O,{key:h.getYearText(e),selected:n,value:t,onSelect:g,ref:n?v:void 0,disabled:Boolean(u&&h.isBeforeYear(e,h.date())||c&&h.isAfterYear(e,h.date()))},h.getYearText(e))})))},I=Object(h.a)((function(e){return{root:{flex:"1 0 33.33%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",outline:"none",height:75,transition:e.transitions.create("font-size",{duration:"100ms"}),"&:focus":{color:e.palette.primary.main,fontWeight:e.typography.fontWeightMedium}},monthSelected:{color:e.palette.primary.main,fontWeight:e.typography.fontWeightMedium},monthDisabled:{pointerEvents:"none",color:e.palette.text.hint}}}),{name:"MuiPickersMonth"}),S=function(e){var t=e.selected,n=e.onSelect,r=e.disabled,o=e.value,a=e.children,h=Object(c.a)(e,["selected","onSelect","disabled","value","children"]),f=I(),d=Object(i.useCallback)((function(){n(o)}),[n,o]);return Object(i.createElement)(l.a,Object(u.a)({role:"button",component:"div",className:Object(s.default)(f.root,t&&f.monthSelected,r&&f.monthDisabled),tabIndex:r?-1:0,onClick:d,onKeyPress:d,color:t?"primary":void 0,variant:t?"h5":"subtitle1",children:a},h))};S.displayName="Month";var k=Object(h.a)({container:{width:310,display:"flex",flexWrap:"wrap",alignContent:"stretch"}},{name:"MuiPickersMonthSelection"}),C=function(e){var t=e.disablePast,n=e.disableFuture,r=e.minDate,o=e.maxDate,s=e.date,u=e.onMonthChange,c=e.onChange,l=Object(a.c)(),h=k(),f=l.getMonth(s),d=function(e){var i=l.date(),a=l.date(r),s=l.date(o),u=l.startOfMonth(t&&l.isAfter(i,a)?i:a),c=l.startOfMonth(n&&l.isBefore(i,s)?i:s),h=l.isBefore(e,u),f=l.isAfter(e,c);return h||f},p=Object(i.useCallback)((function(e){var t=l.setMonth(s,e);c(t,!0),u&&u(t)}),[s,c,u,l]);return Object(i.createElement)("div",{className:h.container},l.getMonthArray(s).map((function(e){var t=l.getMonth(e),n=l.format(e,"MMM");return Object(i.createElement)(S,{key:n,value:t,selected:t===f,onSelect:p,disabled:d(e)},n)})))},D=function(){return"undefined"===typeof window?"portrait":window.screen&&window.screen.orientation&&window.screen.orientation.angle?90===Math.abs(window.screen.orientation.angle)?"landscape":"portrait":window.orientation&&90===Math.abs(Number(window.orientation))?"landscape":"portrait"};function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var N={year:T,month:C,date:d.a,hours:v.a,minutes:v.a,seconds:v.a},x=Object(h.a)({container:{display:"flex",flexDirection:"column"},containerLandscape:{flexDirection:"row"},pickerView:{overflowX:"hidden",minHeight:f.e,minWidth:f.a,maxWidth:f.f,display:"flex",flexDirection:"column",justifyContent:"center"},pickerViewLandscape:{padding:"0 8px"}},{name:"MuiPickersBasePicker"}),P=function(e){var t=e.date,n=e.views,r=e.disableToolbar,o=e.onChange,l=e.openTo,h=e.minDate,m=e.maxDate,g=e.ToolbarComponent,y=e.orientation,b=Object(c.a)(e,["date","views","disableToolbar","onChange","openTo","minDate","maxDate","ToolbarComponent","orientation"]),_=Object(a.c)(),w=x(),O=function(e){var t=Object(i.useState)(D()),n=Object(p.a)(t,2),r=n[0],o=n[1],a=Object(i.useCallback)((function(){return o(D())}),[]);return Object(f.h)((function(){return window.addEventListener("orientationchange",a),function(){return window.removeEventListener("orientationchange",a)}}),[a]),"landscape"===(e||r)}(y),E=function(e,t,n){var r=Object(i.useState)(t&&Object(f.d)(e,t)?t:e[0]),o=Object(p.a)(r,2),a=o[0],s=o[1];return{handleChangeAndOpenNext:Object(i.useCallback)((function(t,r){var i=e[e.indexOf(a)+1];if(r&&i)return n(t,!1),void s(i);n(t,Boolean(r))}),[n,a,e]),openView:a,setOpenView:s}}(n,l,o),I=E.openView,S=E.setOpenView,k=E.handleChangeAndOpenNext,j=Object(i.useMemo)((function(){return _.date(h)}),[h,_]),N=Object(i.useMemo)((function(){return _.date(m)}),[m,_]);return Object(i.createElement)("div",{className:Object(s.default)(w.container,O&&w.containerLandscape)},!r&&Object(i.createElement)(g,Object(u.a)({},b,{views:n,isLandscape:O,date:t,onChange:o,setOpenView:S,openView:I})),Object(i.createElement)("div",{className:Object(s.default)(w.pickerView,O&&w.pickerViewLandscape)},"year"===I&&Object(i.createElement)(T,Object(u.a)({},b,{date:t,onChange:k,minDate:j,maxDate:N})),"month"===I&&Object(i.createElement)(C,Object(u.a)({},b,{date:t,onChange:k,minDate:j,maxDate:N})),"date"===I&&Object(i.createElement)(d.a,Object(u.a)({},b,{date:t,onChange:k,minDate:j,maxDate:N})),("hours"===I||"minutes"===I||"seconds"===I)&&Object(i.createElement)(v.a,Object(u.a)({},b,{date:t,type:I,onHourChange:k,onMinutesChange:k,onSecondsChange:k}))))};P.defaultProps=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},y,{views:Object.keys(N)})},341:function(e,t,n){"use strict";var r=n(0),i=(n(13),n(48)),o=n(2),a=n(9),s=n(304),u=n(453),c=n(270),l=Object(u.a)((function(e){return{day:{width:36,height:36,fontSize:e.typography.caption.fontSize,margin:"0 2px",color:e.palette.text.primary,fontWeight:e.typography.fontWeightMedium,padding:0},hidden:{opacity:0,pointerEvents:"none"},current:{color:e.palette.primary.main,fontWeight:600},daySelected:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,fontWeight:e.typography.fontWeightMedium,"&:hover":{backgroundColor:e.palette.primary.main}},dayDisabled:{pointerEvents:"none",color:e.palette.text.hint}}}),{name:"MuiPickersDay"}),h=function(e){var t=e.children,n=e.disabled,u=e.hidden,h=e.current,f=e.selected,d=Object(a.a)(e,["children","disabled","hidden","current","selected"]),p=l(),v=Object(i.default)(p.day,u&&p.hidden,h&&p.current,f&&p.daySelected,n&&p.dayDisabled);return Object(r.createElement)(c.a,Object(o.a)({className:v,tabIndex:u||n?-1:0},d),Object(r.createElement)(s.a,{variant:"body2",color:"inherit"},t))};h.displayName="Day",h.defaultProps={disabled:!1,hidden:!1,current:!1,selected:!1},t.a=h},343:function(e,t,n){"use strict";n.d(t,"a",(function(){return B})),n.d(t,"b",(function(){return P})),n.d(t,"c",(function(){return A})),n.d(t,"d",(function(){return x}));var r=n(0),i=n.n(r),o=(n(13),n(252)),a=n(48),s=n(2),u=n(9),c=n(304),l=n(453),h=n(339),f=n(63),d=n(287),p=n(270),v=n(386),m=n(281),g=n(34),y=n(328),b=n(329),_=n(327),w=n(341),O=n(1019),E=n(494),T=n(457),I=n(461);function S(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}var k=n(524),C=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.remove(r):"string"===typeof n.className?n.className=S(n.className,r):n.setAttribute("class",S(n.className&&n.className.baseVal||"",r)));var n,r}))},D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1];t.removeClasses(i,"exit"),t.addClass(i,o?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.addClass(i,o,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),i=r[0],o=r[1]?"appear":"enter";t.removeClasses(i,o),t.addClass(i,o,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"===typeof n,i=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:i,activeClassName:r?i+"-active":n[e+"Active"],doneClassName:r?i+"-done":n[e+"Done"]}},t}Object(I.a)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],i=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&i&&(r+=" "+i),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return r=t,void((n=e).classList?n.classList.add(r):function(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}(n,r)||("string"===typeof n.className?n.className=n.className+" "+r:n.setAttribute("class",(n.className&&n.className.baseVal||"")+" "+r)));var n,r}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,i=n.active,o=n.done;this.appliedClasses[t]={},r&&C(e,r),i&&C(e,i),o&&C(e,o)},n.render=function(){var e=this.props,t=(e.classNames,Object(T.a)(e,["classNames"]));return i.a.createElement(k.a,Object(E.a)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(i.a.Component);D.defaultProps={classNames:""},D.propTypes={};var j=D,N=n(88),x=function(e){return 1===e.length&&"year"===e[0]},P=function(e){return 2===e.length&&Object(d.d)(e,"month")&&Object(d.d)(e,"year")},A=function(e,t){return x(e)?t.yearFormat:P(e)?t.yearMonthFormat:t.dateFormat},R=function(e){var t=e.children,n=e.value,i=e.disabled,o=e.onSelect,a=e.dayInCurrentMonth,c=Object(u.a)(e,["children","value","disabled","onSelect","dayInCurrentMonth"]),l=Object(r.useCallback)((function(){return o(n)}),[o,n]);return Object(r.createElement)("div",Object(s.a)({role:"presentation",onClick:a&&!i?l:void 0,onKeyPress:a&&!i?l:void 0},c),t)},M=Object(l.a)((function(e){var t=e.transitions.create("transform",{duration:350,easing:"cubic-bezier(0.35, 0.8, 0.4, 1)"});return{transitionContainer:{display:"block",position:"relative","& > *":{position:"absolute",top:0,right:0,left:0}},"slideEnter-left":{willChange:"transform",transform:"translate(100%)"},"slideEnter-right":{willChange:"transform",transform:"translate(-100%)"},slideEnterActive:{transform:"translate(0%)",transition:t},slideExit:{transform:"translate(0%)"},"slideExitActiveLeft-left":{willChange:"transform",transform:"translate(-200%)",transition:t},"slideExitActiveLeft-right":{willChange:"transform",transform:"translate(200%)",transition:t}}}),{name:"MuiPickersSlideTransition"}),L=function(e){var t=e.children,n=e.transKey,i=e.slideDirection,o=e.className,s=void 0===o?null:o,u=M(),c={exit:u.slideExit,enterActive:u.slideEnterActive,enter:u["slideEnter-"+i],exitActive:u["slideExitActiveLeft-"+i]};return Object(r.createElement)(O.a,{className:Object(a.default)(u.transitionContainer,s),childFactory:function(e){return Object(r.cloneElement)(e,{classNames:c})}},Object(r.createElement)(j,{mountOnEnter:!0,unmountOnExit:!0,key:n+i,timeout:350,classNames:c,children:t}))},F=Object(l.a)((function(e){return{switchHeader:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:e.spacing(.5),marginBottom:e.spacing(1)},transitionContainer:{width:"100%",overflow:"hidden",height:23},iconButton:{zIndex:1,backgroundColor:e.palette.background.paper},daysHeader:{display:"flex",justifyContent:"center",alignItems:"center",maxHeight:16},dayLabel:{width:36,margin:"0 2px",textAlign:"center",color:e.palette.text.hint}}}),{name:"MuiPickersCalendarHeader"}),U=function(e){var t=e.currentMonth,n=e.onMonthChange,i=e.leftArrowIcon,a=e.rightArrowIcon,u=e.leftArrowButtonProps,l=e.rightArrowButtonProps,f=e.disablePrevMonth,d=e.disableNextMonth,v=e.slideDirection,m=Object(o.c)(),g=F(),y="rtl"===Object(h.a)().direction;return Object(r.createElement)("div",null,Object(r.createElement)("div",{className:g.switchHeader},Object(r.createElement)(p.a,Object(s.a)({},u,{disabled:f,onClick:function(){return n(m.getPreviousMonth(t),"right")},className:g.iconButton}),y?a:i),Object(r.createElement)(L,{slideDirection:v,transKey:t.toString(),className:g.transitionContainer},Object(r.createElement)(c.a,{align:"center",variant:"body1"},m.getCalendarHeaderText(t))),Object(r.createElement)(p.a,Object(s.a)({},l,{disabled:d,onClick:function(){return n(m.getNextMonth(t),"left")},className:g.iconButton}),y?i:a)),Object(r.createElement)("div",{className:g.daysHeader},m.getWeekdays().map((function(e,t){return Object(r.createElement)(c.a,{key:t,variant:"caption",className:g.dayLabel},e)}))))};U.displayName="CalendarHeader",U.defaultProps={leftArrowIcon:Object(r.createElement)((function(e){return i.a.createElement(v.a,e,i.a.createElement("path",{d:"M15.41 16.59L10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),i.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))}),null),rightArrowIcon:Object(r.createElement)((function(e){return i.a.createElement(v.a,e,i.a.createElement("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),i.a.createElement("path",{fill:"none",d:"M0 0h24v24H0V0z"}))}),null),disablePrevMonth:!1,disableNextMonth:!1};var V=function(e){var t=e.onKeyDown;return Object(r.useEffect)((function(){return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}),[t]),null},q=function(e){function t(){var e,n;Object(m.a)(this,t);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(n=Object(y.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={slideDirection:"left",currentMonth:n.props.utils.startOfMonth(n.props.date),loadingQueue:0},n.pushToLoadingQueue=function(){var e=n.state.loadingQueue+1;n.setState({loadingQueue:e})},n.popFromLoadingQueue=function(){var e=n.state.loadingQueue;e=e<=0?0:e-1,n.setState({loadingQueue:e})},n.handleChangeMonth=function(e,t){if(n.setState({currentMonth:e,slideDirection:t}),n.props.onMonthChange){var r=n.props.onMonthChange(e);r&&(n.pushToLoadingQueue(),r.then((function(){n.popFromLoadingQueue()})))}},n.validateMinMaxDate=function(e){var t=n.props,r=t.minDate,i=t.maxDate,o=t.utils,a=t.disableFuture,s=t.disablePast,u=o.date();return Boolean(a&&o.isAfterDay(e,u)||s&&o.isBeforeDay(e,u)||r&&o.isBeforeDay(e,o.date(r))||i&&o.isAfterDay(e,o.date(i)))},n.shouldDisablePrevMonth=function(){var e=n.props,t=e.utils,r=e.disablePast,i=e.minDate,o=t.date(),a=t.startOfMonth(r&&t.isAfter(o,t.date(i))?o:t.date(i));return!t.isBefore(a,n.state.currentMonth)},n.shouldDisableNextMonth=function(){var e=n.props,t=e.utils,r=e.disableFuture,i=e.maxDate,o=t.date(),a=t.startOfMonth(r&&t.isBefore(o,t.date(i))?o:t.date(i));return!t.isAfter(a,n.state.currentMonth)},n.shouldDisableDate=function(e){var t=n.props.shouldDisableDate;return n.validateMinMaxDate(e)||Boolean(t&&t(e))},n.handleDaySelect=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=n.props,i=r.date,o=r.utils;n.props.onChange(o.mergeDateAndTime(e,i),t)},n.moveToDay=function(e){var t=n.props.utils;e&&!n.shouldDisableDate(e)&&(t.getMonth(e)!==t.getMonth(n.state.currentMonth)&&n.handleChangeMonth(t.startOfMonth(e),"left"),n.handleDaySelect(e,!1))},n.handleKeyDown=function(e){var t=n.props,r=t.theme,i=t.date,o=t.utils;Object(d.g)(e,{ArrowUp:function(){return n.moveToDay(o.addDays(i,-7))},ArrowDown:function(){return n.moveToDay(o.addDays(i,7))},ArrowLeft:function(){return n.moveToDay(o.addDays(i,"ltr"===r.direction?-1:1))},ArrowRight:function(){return n.moveToDay(o.addDays(i,"ltr"===r.direction?1:-1))}})},n.renderWeeks=function(){var e=n.props,t=e.utils,i=e.classes;return t.getWeekArray(n.state.currentMonth).map((function(e){return Object(r.createElement)("div",{key:"week-".concat(e[0].toString()),className:i.week},n.renderDays(e))}))},n.renderDays=function(e){var t=n.props,i=t.date,o=t.renderDay,a=t.utils,s=a.date(),u=a.startOfDay(i),c=a.getMonth(n.state.currentMonth);return e.map((function(e){var t=n.shouldDisableDate(e),i=a.getMonth(e)===c,l=Object(r.createElement)(w.a,{disabled:t,current:a.isSameDay(e,s),hidden:!i,selected:a.isSameDay(u,e)},a.getDayText(e));return o&&(l=o(e,u,i,l)),Object(r.createElement)(R,{value:e,key:e.toString(),disabled:t,dayInCurrentMonth:i,onSelect:n.handleDaySelect},l)}))},n}return Object(_.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.date,n=e.minDate,r=e.maxDate,i=e.utils,o=e.disablePast,a=e.disableFuture;if(this.shouldDisableDate(t)){var s=function(e){var t=e.date,n=e.utils,r=e.minDate,i=e.maxDate,o=e.disableFuture,a=e.disablePast,s=e.shouldDisableDate,u=n.startOfDay(n.date());a&&n.isBefore(r,u)&&(r=u),o&&n.isAfter(i,u)&&(i=u);var c=t,l=t;for(n.isBefore(t,r)&&(c=n.date(r),l=null),n.isAfter(t,i)&&(l&&(l=n.date(i)),c=null);c||l;){if(c&&n.isAfter(c,i)&&(c=null),l&&n.isBefore(l,r)&&(l=null),c){if(!s(c))return c;c=n.addDays(c,1)}if(l){if(!s(l))return l;l=n.addDays(l,-1)}}return n.date()}({date:t,utils:i,minDate:i.date(n),maxDate:i.date(r),disablePast:Boolean(o),disableFuture:Boolean(a),shouldDisableDate:this.shouldDisableDate});this.handleDaySelect(s,!1)}}},{key:"render",value:function(){var e=this.state,t=e.currentMonth,n=e.slideDirection,i=this.props,o=i.classes,a=i.allowKeyboardControl,s=i.leftArrowButtonProps,u=i.leftArrowIcon,c=i.rightArrowButtonProps,l=i.rightArrowIcon,h=i.loadingIndicator,f=h||Object(r.createElement)(N.a,null);return Object(r.createElement)(r.Fragment,null,a&&"static"!==this.context&&Object(r.createElement)(V,{onKeyDown:this.handleKeyDown}),Object(r.createElement)(U,{currentMonth:t,slideDirection:n,onMonthChange:this.handleChangeMonth,leftArrowIcon:u,leftArrowButtonProps:s,rightArrowIcon:l,rightArrowButtonProps:c,disablePrevMonth:this.shouldDisablePrevMonth(),disableNextMonth:this.shouldDisableNextMonth()}),Object(r.createElement)(L,{slideDirection:n,transKey:t.toString(),className:o.transitionContainer},Object(r.createElement)(r.Fragment,null,this.state.loadingQueue>0&&Object(r.createElement)("div",{className:o.progressContainer},f)||Object(r.createElement)("div",null,this.renderWeeks()))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.utils,r=e.date;if(!n.isEqual(r,t.lastDate)){var i=n.getMonth(r),o=t.lastDate||r,a=n.getMonth(o);return{lastDate:r,currentMonth:e.utils.startOfMonth(r),slideDirection:i===a?t.slideDirection:n.isAfterDay(r,o)?"left":"right"}}return null}}]),t}(r.Component);q.contextType=d.b,q.defaultProps={minDate:new Date("1900-01-01"),maxDate:new Date("2100-01-01"),disablePast:!1,disableFuture:!1,allowKeyboardControl:!0};var B=Object(f.a)((function(e){return{transitionContainer:{minHeight:216,marginTop:e.spacing(1.5)},progressContainer:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center"},week:{display:"flex",justifyContent:"center"}}}),{name:"MuiPickersCalendar",withTheme:!0})(function(e){var t=function(t){var n=Object(o.c)();return Object(r.createElement)(e,Object(s.a)({utils:n},t))};return t.displayName="WithUtils(".concat(e.displayName||e.name,")"),t}(q))},347:function(e,t,n){"use strict";var r=n(105);t.__esModule=!0,t.default=void 0;s(n(13));var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=s(n(254));function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function l(e,t){var n=t.type,i=t.path,o=t.value,a=t.isLoading,s=void 0!==a&&a,l=t.error,h=void 0!==l&&l,f=t.hasError,d=void 0!==f&&f;switch(n){case"loading_changed":return c({},e,r({},i,c({},e[i],{isLoading:s})));case"error_changed":return c({},e,r({},i,c({},e[i],{error:h,hasError:d,isLoading:s})));case"value_changed":return c({},e,r({},i,c({},e[i],{value:o,isLoading:s,error:h,hasError:d})));case"clear":e[i];return c({},function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,[i].map(u)));case"clear_all":return{};default:throw new Error}}var h=function(e){var t=e.children,n=e.firebaseApp,r=e.persistKey,a=void 0===r?"firebase_paths":r,s=(0,i.useReducer)(l,function(e){var t={};try{t=JSON.parse(localStorage.getItem(e))||{}}catch(n){console.warn(n)}return t}(a)),u=s[0],c=s[1];(0,i.useEffect)((function(){try{localStorage.setItem(a,JSON.stringify(u))}catch(e){console.warn(e)}}),[u,a]);var h=(0,i.useCallback)((function(e,t){e.length<1||(c({type:"loading_changed",path:e,isLoading:!0}),n.database().ref(e).on("value",(function(n){c({type:"value_changed",path:e,value:n.val(),isLoading:!1}),t&&t(n.val())}),(function(t){c({type:"error_changed",path:e,isLoading:!1,error:t,hasError:!0})})))}),[n]),f=(0,i.useCallback)((function(e){e.length<1||n.database().ref(e).off()}),[n]),d=(0,i.useCallback)((function(e,t){return u[e]?u[e].value:t}),[u]),p=(0,i.useCallback)((function(e){return!!u[e]&&u[e].isLoading}),[u]),v=(0,i.useCallback)((function(e){return!!u[e]&&u[e].error}),[u]),m=(0,i.useCallback)((function(e){return!!u[e]&&u[e].hasError}),[u]),g=(0,i.useCallback)((function(e){f(e),c({type:"clear",path:e})}),[f]),y=(0,i.useCallback)((function(){n.database().ref().off(),c({type:"clear_all"})}),[n]);return i.default.createElement(o.default.Provider,{value:{firebaseApp:n,watchPath:h,unwatchPath:f,getPath:d,clearPath:g,clearAllPaths:y,isPathLoading:p,hasPathError:m,getPathError:v}},t)};h.propTypes={};var f=h;t.default=f,e.exports=t.default},348:function(e,t,n){"use strict";var r,i,o=n(1),a=n(375),s=n(392),u=n(430),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new a.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),v=function(){function e(e,t,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=Object(a.k)(e),this.container=new s.b(t.name),this._addComponent(new s.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return r._addComponent(e)}))}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},e.prototype._getService=function(e,t){return void 0===t&&(t=f),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},e.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=f),this.container.getProvider(e).clearInstance(t)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){p.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},e}();v.prototype.name&&v.prototype.options||v.prototype.delete||console.log("dc");var m=function e(){var t=function(e){var t={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"===typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!==typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(Object(a.i)(t,s))throw l.create("duplicate-app",{appName:s});var u=new e(n,o,r);return t[s]=u,u},app:i,registerVersion:function(e,t,n){var r,i=null!==(r=d[e])&&void 0!==r?r:e;n&&(i+="-"+n);var a=i.match(/\s|\//),u=t.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+t+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new s.a(i+"-version",(function(){return{library:i,version:t}}),"VERSION"))},setLogLevel:u.c,onLog:function(e,t){if(null!==e&&"function"!==typeof e)throw l.create("invalid-log-argument");Object(u.d)(e,t)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(e){delete t[e]},components:n,useAsService:function(e,t){return"serverAuth"===t?null:t}}};function i(e){if(e=e||f,!Object(a.i)(t,e))throw l.create("no-app",{appName:e});return t[e]}function o(o){var s=o.name;if(n.has(s))return p.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(e){if(void 0===e&&(e=i()),"function"!==typeof e[s])throw l.create("invalid-app-argument",{appName:s});return e[s]()};void 0!==o.serviceProps&&Object(a.l)(u,o.serviceProps),r[s]=u,e.prototype[s]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,s).apply(this,o.multipleInstances?e:[])}}for(var c=0,h=Object.keys(t);c<h.length;c++){var f=h[c];t[f]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(t).map((function(e){return t[e]}))}}),i.App=e,r}(v);return t.INTERNAL=Object(o.__assign)(Object(o.__assign)({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(a.l)(t,e)},createSubscribe:a.j,ErrorFactory:a.b,deepExtend:a.l}),t}(),g=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},e}();if(Object(a.p)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(a.v)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,e)};var _=m;!function(e,t){e.INTERNAL.registerComponent(new s.a("platform-logger",(function(e){return new g(e)}),"PRIVATE")),e.registerVersion(h,"0.6.17",t),e.registerVersion("fire-js","")}(_),t.a=_},352:function(e,t,n){"use strict";n.r(t);var r=n(360);n.d(t,"default",(function(){return r.a}))},353:function(e,t,n){"use strict";n.r(t);var r=n(361);n.d(t,"default",(function(){return r.a}))},354:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(12),i=n(0),o=function(e){function t(t){var n;return(n=e.call(this,t)||this)._state=null,n._del=!1,n._handleChange=function(e){var t=n.state.value,r=e.target.value,i=e.target,o=r.length>t.length,a=n._del,s=t===n.props.format(r);n.setState({value:r,local:!0},(function(){var e=i.selectionStart,u=n.props.refuse||/[^\d]+/g,c=r.substr(0,e).replace(u,"");if(n._state={input:i,before:c,op:o,di:a&&s,del:a},n.props.replace&&n.props.replace(t)&&o&&!s){for(var l=-1,h=0;h!==c.length;++h)l=Math.max(l,r.toLowerCase().indexOf(c[h].toLowerCase(),l+1));var f=r.substr(l+1).replace(u,"")[0];l=r.indexOf(f,l+1),r=""+r.substr(0,l)+r.substr(l+1)}var d=n.props.format(r);t===d?n.setState({value:r}):n.props.onChange(d)}))},n._hKD=function(e){"Delete"===e.code&&(n._del=!0)},n._hKU=function(e){"Delete"===e.code&&(n._del=!1)},n.state={value:t.value,local:!0},n}Object(r.a)(t,e),t.getDerivedStateFromProps=function(e,t){return{value:t.local?t.value:e.value,local:!1}};var n=t.prototype;return n.render=function(){var e=this._handleChange,t=this.state.value;return(0,this.props.children)({value:t,onChange:e})},n.componentWillUnmount=function(){document.removeEventListener("keydown",this._hKD),document.removeEventListener("keyup",this._hKU)},n.componentDidMount=function(){document.addEventListener("keydown",this._hKD),document.addEventListener("keyup",this._hKU)},n.componentDidUpdate=function(){var e=this._state;if(e){for(var t=this.state.value,n=-1,r=0;r!==e.before.length;++r)n=Math.max(n,t.toLowerCase().indexOf(e.before[r].toLowerCase(),n+1));if(this.props.replace&&(e.op||e.del&&!e.di))for(;t[n+1]&&(this.props.refuse||/[^\d]+/).test(t[n+1]);)n+=1;e.input.selectionStart=e.input.selectionEnd=n+1+(e.di?1:0)}this._state=null},t}(i.Component)},365:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;s(n(13));var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=s(n(265)),o=s(n(366));function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e){var t=e.children,n=(0,r.useState)({isOpen:!1}),a=n[0],s=n[1],c=(0,r.useState)(!1),l=c[0],h=c[1],f=function(){s({isOpen:!1})};return r.default.createElement(i.default.Provider,{value:{openDialog:function(e){s(u({isOpen:!0},e))},closeDialog:f,setProcessing:function(e){h(e)}}},r.default.createElement(r.Fragment,null,t,r.default.createElement(o.default,u({handleClose:f,isProcessing:l},a))))};c.propTypes={};var l=c;t.default=l,e.exports=t.default},366:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=p(n(215)),i=p(n(257)),o=p(n(258)),a=p(n(259)),s=p(n(352)),u=p(n(353)),c=p(n(0)),l=p(n(322)),h=p(n(264)),f=n(64),d=n(181);function p(e){return e&&e.__esModule?e:{default:e}}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var m=c.default.forwardRef((function(e,t){return c.default.createElement(l.default,v({direction:"up"},e,{ref:t}))})),g=function(e){var t=e.isProcessing,n=void 0!==t&&t,l=e.isOpen,p=void 0!==l&&l,g=(e.id,e.message),y=void 0===g?"":g,b=e.title,_=void 0===b?"":b,w=e.action,O=void 0===w?"":w,E=e.handleAction,T=void 0===E?function(){}:E,I=e.handleClose,S=void 0===I?function(){}:I,k=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["isProcessing","isOpen","id","message","title","action","handleAction","handleClose"]),C=(0,f.useIntl)(),D=(0,d.useTheme)(),j=(0,h.default)(D.breakpoints.down("sm"));return c.default.createElement(i.default,v({fullScreen:j,open:p,onClose:S,TransitionComponent:m,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},k),c.default.createElement(u.default,{id:"alert-dialog-title"},_),c.default.createElement(a.default,null,c.default.createElement(s.default,{id:"alert-dialog-description"},y)),c.default.createElement(o.default,null,c.default.createElement(r.default,{onClick:S,color:"primary"},C.formatMessage({id:"cancel",defaultMessage:"Cancel"})),c.default.createElement(r.default,{disabled:n,onClick:function(){T(S)},color:"secondary"},O)))};t.default=g,e.exports=t.default},369:function(e,t,n){"use strict";t.__esModule=!0,t.useFirebase=function(){return(0,r.useContext)(i.default)},t.default=t.withFirebase=void 0;var r=n(0),i=s(n(274)),o=s(n(373));t.withFirebase=o.default;var a=s(n(374));function s(e){return e&&e.__esModule?e:{default:e}}t.default=a.default},373:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=o(n(274)),i=o(n(0));function o(e){return e&&e.__esModule?e:{default:e}}function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var s=function(e){return function(t){return i.default.createElement(r.default.Consumer,null,(function(n){return i.default.createElement(e,a({},n,t))}))}};t.default=s,e.exports=t.default},374:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;o(n(13));var r=o(n(0)),i=o(n(274));function o(e){return e&&e.__esModule?e:{default:e}}var a=function(e){var t=e.firebaseApp,n=e.children;return r.default.createElement(i.default.Provider,{value:{firebaseApp:t}},n)};a.propTypes={};var s=a;t.default=s,e.exports=t.default},375:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return k})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return V})),n.d(t,"e",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return l})),n.d(t,"h",(function(){return h})),n.d(t,"i",(function(){return R})),n.d(t,"j",(function(){return q})),n.d(t,"k",(function(){return d})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return K})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return A})),n.d(t,"p",(function(){return b})),n.d(t,"q",(function(){return _})),n.d(t,"r",(function(){return O})),n.d(t,"s",(function(){return L})),n.d(t,"t",(function(){return E})),n.d(t,"u",(function(){return g})),n.d(t,"v",(function(){return y})),n.d(t,"w",(function(){return I})),n.d(t,"x",(function(){return w})),n.d(t,"y",(function(){return T})),n.d(t,"z",(function(){return P})),n.d(t,"A",(function(){return j})),n.d(t,"B",(function(){return F})),n.d(t,"C",(function(){return U})),n.d(t,"D",(function(){return M})),n.d(t,"E",(function(){return Q})),n.d(t,"F",(function(){return z})),n.d(t,"G",(function(){return N})),n.d(t,"H",(function(){return W})),n.d(t,"I",(function(){return Y})),n.d(t,"J",(function(){return G}));var r=n(1),i=!1,o=!1,a="${JSCORE_VERSION}",s=function(e,t){if(!e)throw u(t)},u=function(e){return new Error("Firebase Database ("+a+") INTERNAL ASSERT FAILED: "+e)},c=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,d=63&c;u||(d=64,a||(f=64)),r.push(n[l],n[h],n[f],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(c(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},h=function(e){var t=c(e);return l.encodeByteArray(t,!0)},f=function(e){try{return l.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function d(e){return p(void 0,e)}function p(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=p(e[n],t[n]));return e}var v=function(){function e(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))}return e.prototype.wrapCallback=function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}},e}();function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function y(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return!1}}function b(){return"object"===typeof self&&self.self===self}function _(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function w(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function O(){return m().indexOf("Electron/")>=0}function E(){var e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){return m().indexOf("MSAppHost/")>=0}function I(){return!0===i||!0===o}var S=function(e){function t(n,r,i){var o=e.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,k.prototype.create),o}return Object(r.__extends)(t,e),t}(Error),k=function(){function e(e,t,n){this.service=e,this.serviceName=t,this.errors=n}return e.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?C(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new S(i,s,r);return u},e}();function C(e,t){return e.replace(D,(function(e,n){var r=t[n];return null!=r?String(r):"<"+n+"?>"}))}var D=/\{\$([^}]+)}/g;function j(e){return JSON.parse(e)}function N(e){return JSON.stringify(e)}var x=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=j(f(o[0])||""),n=j(f(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(a){}return{header:t,claims:n,data:r,signature:i}},P=function(e){var t=x(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},A=function(e){var t=x(e).claims;return"object"===typeof t&&!0===t.admin};function R(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function L(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function F(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function U(e){for(var t=[],n=function(e,n){Array.isArray(n)?n.forEach((function(n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))})):t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];n(o[0],o[1])}return t.length?"&"+t.join("&"):""}var V=function(){function e(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}return e.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},e.prototype.compress_=function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},e.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},e.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},e}();function q(e,t){var n=new B(e,t);return n.subscribe.bind(n)}var B=function(){function e(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(n)})).catch((function(e){n.error(e)}))}return e.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},e.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},e.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},e.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"===typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),o},e.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},e.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},e.prototype.sendOne=function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},e.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},e}();function H(){}var W=function(e,t,n,r){var i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function K(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}function Y(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(K(e,t,r)+"must be a valid function.")}function G(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(K(e,t,r)+"must be a valid context object.")}var z=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,s(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Q=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t}}).call(this,n(33))},388:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return f}));var r=n(0),i=n(252),o=n(48),a=n(453),s=n(339),u=n(267),c=n(287),l=n(324),h=Object(a.a)({toolbarLandscape:{flexWrap:"wrap"},toolbarAmpmLeftPadding:{paddingLeft:50},separator:{margin:"0 4px 0 2px",cursor:"default"},hourMinuteLabel:{display:"flex",justifyContent:"flex-end",alignItems:"flex-end"},hourMinuteLabelAmpmLandscape:{marginTop:"auto"},hourMinuteLabelReverse:{flexDirection:"row-reverse"},ampmSelection:{marginLeft:20,marginRight:-20,display:"flex",flexDirection:"column"},ampmLandscape:{margin:"4px 0 auto",flexDirection:"row",justifyContent:"space-around",flexBasis:"100%"},ampmSelectionWithSeconds:{marginLeft:15,marginRight:10},ampmLabel:{fontSize:18}},{name:"MuiPickersTimePickerToolbar"});function f(e,t,n){var o=Object(i.c)();return{meridiemMode:Object(l.d)(e,o),handleMeridiemChange:Object(r.useCallback)((function(r){var i=Object(l.c)(e,r,Boolean(t),o);n(i,!1)}),[t,e,n,o])}}var d=function(e){var t=e.date,n=e.views,a=e.ampm,d=e.openView,p=e.onChange,v=e.isLandscape,m=e.setOpenView,g=Object(i.c)(),y=Object(s.a)(),b=h(),_=f(t,a,p),w=_.meridiemMode,O=_.handleMeridiemChange,E=v?"h3":"h2";return Object(r.createElement)(u.b,{isLandscape:v,className:Object(o.default)(v?b.toolbarLandscape:a&&b.toolbarAmpmLeftPadding)},Object(r.createElement)("div",{className:Object(o.default)(b.hourMinuteLabel,a&&v&&b.hourMinuteLabelAmpmLandscape,{rtl:b.hourMinuteLabelReverse}[y.direction])},Object(c.d)(n,"hours")&&Object(r.createElement)(u.c,{variant:E,onClick:function(){return m(l.b.HOURS)},selected:d===l.b.HOURS,label:g.getHourText(t,Boolean(a))}),Object(c.d)(n,["hours","minutes"])&&Object(r.createElement)(u.f,{label:":",variant:E,selected:!1,className:b.separator}),Object(c.d)(n,"minutes")&&Object(r.createElement)(u.c,{variant:E,onClick:function(){return m(l.b.MINUTES)},selected:d===l.b.MINUTES,label:g.getMinuteText(t)}),Object(c.d)(n,["minutes","seconds"])&&Object(r.createElement)(u.f,{variant:"h2",label:":",selected:!1,className:b.separator}),Object(c.d)(n,"seconds")&&Object(r.createElement)(u.c,{variant:"h2",onClick:function(){return m(l.b.SECONDS)},selected:d===l.b.SECONDS,label:g.getSecondText(t)})),a&&Object(r.createElement)("div",{className:Object(o.default)(b.ampmSelection,v&&b.ampmLandscape,Object(c.d)(n,"seconds")&&b.ampmSelectionWithSeconds)},Object(r.createElement)(u.c,{disableRipple:!0,variant:"subtitle1",selected:"am"===w,typographyClassName:b.ampmLabel,label:g.getMeridiemText("am"),onClick:function(){return O("am")}}),Object(r.createElement)(u.c,{disableRipple:!0,variant:"subtitle1",selected:"pm"===w,typographyClassName:b.ampmLabel,label:g.getMeridiemText("pm"),onClick:function(){return O("pm")}})))}},390:function(e,t,n){"use strict";n.r(t),n.d(t,"SnackbarContent",(function(){return L})),n.d(t,"SnackbarProvider",(function(){return re})),n.d(t,"useSnackbar",(function(){return oe})),n.d(t,"withSnackbar",(function(){return ie}));var r=n(0),i=n.n(r),o=n(70),a=n(48),s=n(351),u=n(452),c=n(63),l=n(35),h=n(453),f=n(965),d=n(386),p=n(971),v=n(23),m=n.n(v);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var _=i.a.createContext(),w={root:{},anchorOriginTopCenter:{},anchorOriginBottomCenter:{},anchorOriginTopRight:{},anchorOriginBottomRight:{},anchorOriginTopLeft:{},anchorOriginBottomLeft:{}},O={containerRoot:{},containerAnchorOriginTopCenter:{},containerAnchorOriginBottomCenter:{},containerAnchorOriginTopRight:{},containerAnchorOriginBottomRight:{},containerAnchorOriginTopLeft:{},containerAnchorOriginBottomLeft:{}},E={default:20,dense:4},T={default:6,dense:2},I={maxSnack:3,dense:!1,hideIconVariant:!1,variant:"default",autoHideDuration:5e3,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:s.a,transitionDuration:{enter:225,exit:195}},S=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},k=function(e){return Object.keys(e).filter((function(e){return!O[e]})).reduce((function(t,n){var r;return y({},t,((r={})[n]=e[n],r))}),{})},C={TIMEOUT:"timeout",CLICKAWAY:"clickaway",MAXSNACK:"maxsnack",INSTRUCTED:"instructed"},D=function(e){return"anchorOrigin"+e},j=function(e){var t=e.vertical,n=e.horizontal;return"anchorOrigin"+S(t)+S(n)},N=function(e){return"variant"+S(e)},x=function(e){return!!e||0===e},P=function(e){return"number"===typeof e||null===e};function A(e,t,n){return void 0===e&&(e={}),void 0===t&&(t={}),void 0===n&&(n={}),y({},n,{},t,{},e)}var R=function(e){var t;return Object(u.a)({root:(t={display:"flex",flexWrap:"wrap",flexGrow:1},t[e.breakpoints.up("sm")]={flexGrow:"initial",minWidth:288},t)})},M=Object(r.forwardRef)((function(e,t){var n=e.classes,r=e.className,o=b(e,["classes","className"]);return i.a.createElement("div",Object.assign({ref:t,className:Object(a.default)(n.root,r)},o))})),L=Object(c.a)(R)(M),F={right:"left",left:"right",bottom:"up",top:"down"},U=function(e){return"center"!==e.horizontal?F[e.horizontal]:F[e.vertical]},V=function(e,t){return{container:e.collapseContainer,wrapper:Object(a.default)(e.collapseWrapper,t&&e.collapseWrapperDense),wrapperInner:e.collapseWrapperInner}},q=function(e){return i.a.createElement(d.a,Object.assign({},e),i.a.createElement("path",{d:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41\n        10.59L10 14.17L17.59 6.58L19 8L10 17Z"}))},B=function(e){return i.a.createElement(d.a,Object.assign({},e),i.a.createElement("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"}))},H=function(e){return i.a.createElement(d.a,Object.assign({},e),i.a.createElement("path",{d:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2,\n        6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12,\n        13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"}))},W=function(e){return i.a.createElement(d.a,Object.assign({},e),i.a.createElement("path",{d:"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,\n        0 22,12A10,10 0 0,0 12,2Z"}))},K={fontSize:20,marginInlineEnd:8},Y={default:void 0,success:i.a.createElement(q,{style:K}),warning:i.a.createElement(B,{style:K}),error:i.a.createElement(H,{style:K}),info:i.a.createElement(W,{style:K})};function G(e,t){return e.reduce((function(e,n){return null==n?e:function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=[].concat(i);t&&-1===a.indexOf(t)&&a.push(t),e.apply(this,a),n.apply(this,a)}}),(function(){}))}var z="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function Q(e){var t=Object(r.useRef)(e);return z((function(){t.current=e})),Object(r.useCallback)((function(){return t.current.apply(void 0,arguments)}),[])}var X=Object(r.forwardRef)((function(e,t){var n=e.children,i=e.autoHideDuration,o=e.ClickAwayListenerProps,a=e.disableWindowBlurListener,s=void 0!==a&&a,u=e.onClose,c=e.onMouseEnter,l=e.onMouseLeave,h=e.open,f=e.resumeHideDuration,d=b(e,["children","autoHideDuration","ClickAwayListenerProps","disableWindowBlurListener","onClose","onMouseEnter","onMouseLeave","open","resumeHideDuration"]),v=Object(r.useRef)(),m=Q((function(){u&&u.apply(void 0,arguments)})),g=Q((function(e){u&&null!=e&&(clearTimeout(v.current),v.current=setTimeout((function(){m(null,C.TIMEOUT)}),e))}));Object(r.useEffect)((function(){return h&&g(i),function(){clearTimeout(v.current)}}),[h,i,g]);var _=function(){clearTimeout(v.current)},w=Object(r.useCallback)((function(){null!=i&&g(null!=f?f:.5*i)}),[i,f,g]);return Object(r.useEffect)((function(){if(!s&&h)return window.addEventListener("focus",w),window.addEventListener("blur",_),function(){window.removeEventListener("focus",w),window.removeEventListener("blur",_)}}),[s,w,h]),Object(r.createElement)(p.a,y({onClickAway:function(e){u&&u(e,C.CLICKAWAY)}},o),Object(r.createElement)("div",y({onMouseEnter:function(e){c&&c(e),_()},onMouseLeave:function(e){l&&l(e),w()},ref:t},d),n))})),J=function(e){var t,n=e.palette.mode||e.palette.type,r=Object(l.c)(e.palette.background.default,"light"===n?.8:.98);return Object(u.a)(y({},w,{lessPadding:{paddingLeft:20},variantSuccess:{backgroundColor:"#43a047 !important",color:"#fff !important"},variantError:{backgroundColor:"#d32f2f !important",color:"#fff !important"},variantInfo:{backgroundColor:"#2196f3 !important",color:"#fff !important"},variantWarning:{backgroundColor:"#ff9800 !important",color:"#fff !important"},contentRoot:y({},e.typography.body2,{backgroundColor:r,color:e.palette.getContrastText(r),alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"}),message:{display:"flex",alignItems:"center",padding:"8px 0"},action:{display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8},wrappedRoot:{position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0},collapseContainer:(t={},t[e.breakpoints.down("xs")]={paddingLeft:e.spacing(1),paddingRight:e.spacing(1)},t),collapseWrapper:{transition:e.transitions.create(["margin-bottom"],{easing:"ease"}),marginTop:T.default,marginBottom:T.default},collapseWrapperDense:{marginTop:T.dense,marginBottom:T.dense},collapseWrapperInner:{width:"auto"}}))},$=function(e){var t=e.classes,n=b(e,["classes"]),o=Object(r.useRef)(),s=Object(r.useState)(!0),u=s[0],c=s[1];Object(r.useEffect)((function(){return function(){o.current&&clearTimeout(o.current)}}),[]);var l=G([n.snack.onClose,n.onClose],n.snack.key),h=n.style,d=n.dense,p=n.ariaAttributes,v=n.className,m=n.hideIconVariant,g=n.iconVariant,_=n.snack,w=n.action,O=n.content,E=n.TransitionComponent,T=n.TransitionProps,S=n.transitionDuration,k=b(n,["style","dense","ariaAttributes","className","hideIconVariant","iconVariant","snack","action","content","TransitionComponent","TransitionProps","transitionDuration","onEnter","onEntered","onEntering","onExit","onExited","onExiting"]),D=_.key,x=_.open,P=_.className,R=_.variant,M=_.content,F=_.action,q=_.ariaAttributes,B=_.anchorOrigin,H=_.message,W=_.TransitionComponent,K=_.TransitionProps,z=_.transitionDuration,Q=b(_,["persist","key","open","entered","requestClose","className","variant","content","action","ariaAttributes","anchorOrigin","message","TransitionComponent","TransitionProps","transitionDuration","onEnter","onEntered","onEntering","onExit","onExited","onExiting"]),J=y({},Y,{},g)[R],$=y({"aria-describedby":"notistack-snackbar"},A(q,p)),Z=W||E||I.TransitionComponent,ee=A(z,S,I.transitionDuration),te=y({direction:U(B)},A(K,T)),ne=F||w;"function"===typeof ne&&(ne=ne(D));var re=M||O;"function"===typeof re&&(re=re(D,_.message));var ie=["onEnter","onEntering","onEntered","onExit","onExiting","onExited"].reduce((function(e,t){var r;return y({},e,((r={})[t]=G([n.snack[t],n[t]],n.snack.key),r))}),{});return i.a.createElement(f.a,{unmountOnExit:!0,timeout:175,in:u,classes:V(t,d),onExited:ie.onExited},i.a.createElement(X,Object.assign({},k,Q,{open:x,className:Object(a.default)(t.root,t.wrappedRoot,t[j(B)]),onClose:l}),i.a.createElement(Z,Object.assign({appear:!0,in:x,timeout:ee},te,{onExit:ie.onExit,onExiting:ie.onExiting,onExited:function(){o.current=setTimeout((function(){c(!u)}),125)},onEnter:ie.onEnter,onEntering:ie.onEntering,onEntered:G([ie.onEntered,function(){n.snack.requestClose&&l(null,C.INSTRCUTED)}])}),re||i.a.createElement(L,Object.assign({},$,{role:"alert",style:h,className:Object(a.default)(t.contentRoot,t[N(R)],v,P,!m&&J&&t.lessPadding)}),i.a.createElement("div",{id:$["aria-describedby"],className:t.message},m?null:J,H),ne&&i.a.createElement("div",{className:t.action},ne)))))},Z=Object(c.a)(J)($),ee=Object(h.a)((function(e){var t,n;return{root:(t={boxSizing:"border-box",display:"flex",maxHeight:"100%",maxWidth:"100%",position:"fixed",flexDirection:"column",zIndex:e.zIndex.snackbar,height:"auto",width:"auto",minWidth:288,transition:e.transitions.create(["top","right","bottom","left"],{easing:"ease"})},t[e.breakpoints.down("xs")]={left:"0 !important",right:"0 !important",width:"100%"},t),reverseColumns:{flexDirection:"column-reverse"},top:{top:E.default-T.default},topDense:{top:E.dense-T.dense},bottom:{bottom:E.default-T.default},bottomDense:{bottom:E.dense-T.dense},left:{left:E.default},leftDense:{left:E.dense},right:{right:E.default},rightDense:{right:E.dense},center:(n={left:"50%",transform:"translateX(-50%)"},n[e.breakpoints.down("xs")]={transform:"translateX(0)"},n)}})),te=function(e){var t=ee(),n=e.className,r=e.anchorOrigin,o=e.dense,s=b(e,["className","anchorOrigin","dense"]),u=Object(a.default)(t.root,t[r.vertical],t[r.horizontal],t[r.vertical+(o?"Dense":"")],t[r.horizontal+(o?"Dense":"")],n,"bottom"===r.vertical&&t.reverseColumns);return i.a.createElement("div",Object.assign({className:u},s))},ne=i.a.memo(te),re=function(e){var t,n,r,s,u;function c(t){var n;return(n=e.call(this,t)||this).enqueueSnackbar=function(e,t){void 0===t&&(t={});var r=t,i=r.key,o=r.preventDuplicate,a=b(r,["key","preventDuplicate"]),s=x(i),u=s?i:(new Date).getTime()+Math.random(),c=function(e,t,n){return function(r){return"autoHideDuration"===r?P(e.autoHideDuration)?e.autoHideDuration:P(t.autoHideDuration)?t.autoHideDuration:I.autoHideDuration:e[r]||t[r]||n[r]}}(a,n.props,I),l=y({key:u},a,{message:e,open:!0,entered:!1,requestClose:!1,variant:c("variant"),anchorOrigin:c("anchorOrigin"),autoHideDuration:c("autoHideDuration")});return a.persist&&(l.autoHideDuration=void 0),n.setState((function(t){if(void 0===o&&n.props.preventDuplicate||o){var r=function(t){return s?t.key===i:t.message===e},a=t.queue.findIndex(r)>-1,u=t.snacks.findIndex(r)>-1;if(a||u)return t}return n.handleDisplaySnack(y({},t,{queue:[].concat(t.queue,[l])}))})),u},n.handleDisplaySnack=function(e){return e.snacks.length>=n.maxSnack?n.handleDismissOldest(e):n.processQueue(e)},n.processQueue=function(e){var t=e.queue,n=e.snacks;return t.length>0?y({},e,{snacks:[].concat(n,[t[0]]),queue:t.slice(1,t.length)}):e},n.handleDismissOldest=function(e){if(e.snacks.some((function(e){return!e.open||e.requestClose})))return e;var t=!1,r=!1;e.snacks.reduce((function(e,t){return e+(t.open&&t.persist?1:0)}),0)===n.maxSnack&&(r=!0);var i=e.snacks.map((function(e){return t||e.persist&&!r?y({},e):(t=!0,e.entered?(e.onClose&&e.onClose(null,C.MAXSNACK,e.key),n.props.onClose&&n.props.onClose(null,C.MAXSNACK,e.key),y({},e,{open:!1})):y({},e,{requestClose:!0}))}));return y({},e,{snacks:i})},n.handleEnteredSnack=function(e,t,r){if(!x(r))throw new Error("handleEnteredSnack Cannot be called with undefined key");n.setState((function(e){return{snacks:e.snacks.map((function(e){return e.key===r?y({},e,{entered:!0}):y({},e)}))}}))},n.handleCloseSnack=function(e,t,r){if(n.props.onClose&&n.props.onClose(e,t,r),t!==C.CLICKAWAY){var i=void 0===r;n.setState((function(e){var t=e.snacks,n=e.queue;return{snacks:t.map((function(e){return i||e.key===r?e.entered?y({},e,{open:!1}):y({},e,{requestClose:!0}):y({},e)})),queue:n.filter((function(e){return e.key!==r}))}}))}},n.closeSnackbar=function(e){var t=n.state.snacks.find((function(t){return t.key===e}));x(e)&&t&&t.onClose&&t.onClose(null,C.INSTRUCTED,e),n.handleCloseSnack(null,C.INSTRUCTED,e)},n.handleExitedSnack=function(e,t,r){var i=t||r;if(!x(i))throw new Error("handleExitedSnack Cannot be called with undefined key");n.setState((function(e){var t=n.processQueue(y({},e,{snacks:e.snacks.filter((function(e){return e.key!==i}))}));return 0===t.queue.length?t:n.handleDismissOldest(t)}))},n.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:n.enqueueSnackbar,closeSnackbar:n.closeSnackbar}},n}return n=e,(t=c).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,c.prototype.render=function(){var e=this,t=this.state.contextValue,n=this.props,r=n.iconVariant,s=n.dense,u=void 0===s?I.dense:s,c=n.hideIconVariant,l=void 0===c?I.hideIconVariant:c,h=n.domRoot,f=n.children,d=n.classes,p=void 0===d?{}:d,v=b(n,["maxSnack","preventDuplicate","variant","anchorOrigin","iconVariant","dense","hideIconVariant","domRoot","children","classes"]),m=this.state.snacks.reduce((function(e,t){var n,r,i=(r=t.anchorOrigin,""+S(r.vertical)+S(r.horizontal)),o=e[i]||[];return y({},e,((n={})[i]=[].concat(o,[t]),n))}),{}),g=Object.keys(m).map((function(t){var n=m[t];return i.a.createElement(ne,{key:t,dense:u,anchorOrigin:n[0].anchorOrigin,className:Object(a.default)(p.containerRoot,p[D(t)])},n.map((function(t){return i.a.createElement(Z,Object.assign({},v,{key:t.key,snack:t,dense:u,iconVariant:r,hideIconVariant:l,classes:k(p),onClose:e.handleCloseSnack,onExited:G([e.handleExitedSnack,e.props.onExited]),onEntered:G([e.handleEnteredSnack,e.props.onEntered])}))})))}));return i.a.createElement(_.Provider,{value:t},f,h?Object(o.createPortal)(g,h):g)},r=c,(s=[{key:"maxSnack",get:function(){return this.props.maxSnack||I.maxSnack}}])&&g(r.prototype,s),u&&g(r,u),c}(r.Component),ie=function(e){var t=i.a.forwardRef((function(t,n){return i.a.createElement(_.Consumer,null,(function(r){return i.a.createElement(e,y({},t,{ref:n,enqueueSnackbar:r.enqueueSnackbar,closeSnackbar:r.closeSnackbar}))}))}));return m()(t,e),t},oe=function(){return Object(r.useContext)(_)}},391:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=t.Context=void 0;var i=((r=n(0))&&r.__esModule?r:{default:r}).default.createContext(null);t.Context=i;var o=i;t.default=o},392:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return s}));var r=n(1),i=n(375),o=function(){function e(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return e.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},e.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},e.prototype.setServiceProps=function(e){return this.serviceProps=e,this},e}(),a="[DEFAULT]",s=function(){function e(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return e.prototype.get=function(e){void 0===e&&(e=a);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.a;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(t).promise},e.prototype.getImmediate=function(e){var t=Object(r.__assign)({identifier:a,optional:!1},e),n=t.identifier,i=t.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService({instanceIdentifier:o});if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(u){if(i)return null;throw u}},e.prototype.getComponent=function(){return this.component},e.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:a})}catch(f){}try{for(var i=Object(r.__values)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=Object(r.__read)(o.value,2),u=s[0],c=s[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(f){}}}catch(d){t={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},e.prototype.clearInstance=function(e){void 0===e&&(e=a),this.instancesDeferred.delete(e),this.instances.delete(e)},e.prototype.delete=function(){return Object(r.__awaiter)(this,void 0,void 0,(function(){var e;return Object(r.__generator)(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Object(r.__spreadArray)(Object(r.__spreadArray)([],Object(r.__read)(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),Object(r.__read)(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},e.prototype.isComponentSet=function(){return null!=this.component},e.prototype.isInitialized=function(e){return void 0===e&&(e=a),this.instances.has(e)},e.prototype.initialize=function(e){void 0===e&&(e={});var t=e.instanceIdentifier,n=void 0===t?a:t,r=e.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(n);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:o,options:i})},e.prototype.getOrInitializeService=function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===a?void 0:t),options:i}),this.instances.set(n,o)),o||null},e.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:a:e},e}();var u=function(){function e(e){this.name=e,this.providers=new Map}return e.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},e.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},e.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new s(e,this);return this.providers.set(e,t),t},e.prototype.getProviders=function(){return Array.from(this.providers.values())},e}()},406:function(e,t,n){"use strict";n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return g}));var r=n(29),i=n(0),o=(n(13),n(252)),a=n(48),s=(n(2),n(9),n(453)),u=n(267),c=n(343),l=(n(354),n(68),n(340)),h=(n(281),n(34),n(328),n(329),n(327),Object(s.a)({toolbar:{flexDirection:"column",alignItems:"flex-start"},toolbarLandscape:{padding:16},dateLandscape:{marginRight:16}},{name:"MuiPickersDatePickerRoot"})),f=function(e){var t=e.date,n=e.views,r=e.setOpenView,s=e.isLandscape,l=e.openView,f=Object(o.c)(),d=h(),p=Object(i.useMemo)((function(){return Object(c.d)(n)}),[n]),v=Object(i.useMemo)((function(){return Object(c.b)(n)}),[n]);return Object(i.createElement)(u.b,{isLandscape:s,className:Object(a.default)(!p&&d.toolbar,s&&d.toolbarLandscape)},Object(i.createElement)(u.c,{variant:p?"h3":"subtitle1",onClick:function(){return r("year")},selected:"year"===l,label:f.getYearText(t)}),!p&&!v&&Object(i.createElement)(u.c,{variant:"h4",selected:"date"===l,onClick:function(){return r("date")},align:s?"left":"center",label:f.getDatePickerHeaderText(t),className:Object(a.default)(s&&d.dateLandscape)}),v&&Object(i.createElement)(u.c,{variant:"h4",onClick:function(){return r("month")},selected:"month"===l,label:f.getMonthText(t)}))};function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},l.c,{openTo:"date",views:["year","date"]});function v(e){var t=Object(o.c)();return{getDefaultFormat:function(){return Object(c.c)(e.views,t)}}}var m=Object(u.g)({useOptions:v,Input:u.d,useState:u.i,DefaultToolbarComponent:f}),g=Object(u.g)({useOptions:v,Input:u.a,useState:u.e,DefaultToolbarComponent:f});m.defaultProps=p,g.defaultProps=p},407:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return h}));var r=n(29),i=(n(0),n(13),n(252)),o=(n(48),n(2),n(9),n(267)),a=(n(354),n(68),n(340)),s=(n(281),n(34),n(328),n(329),n(327),n(388));function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},a.d,{openTo:"hours",views:["hours","minutes"]});function l(e){var t=Object(i.c)();return{getDefaultFormat:function(){return Object(o.h)(e.format,e.ampm,{"12h":t.time12hFormat,"24h":t.time24hFormat})}}}var h=Object(o.g)({useOptions:l,Input:o.d,useState:o.i,DefaultToolbarComponent:s.a}),f=Object(o.g)({useOptions:l,Input:o.a,useState:o.e,DefaultToolbarComponent:s.a,getCustomProps:function(e){return{refuse:e.ampm?/[^\dap]+/gi:/[^\d]+/gi}}});h.defaultProps=c,f.defaultProps=c},408:function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return S}));var r=n(29),i=n(0),o=n.n(i),a=(n(13),n(252)),s=(n(48),n(2),n(9),n(453)),u=n(339),c=n(267),l=(n(354),n(386)),h=(n(68),n(340)),f=(n(281),n(34),n(328),n(329),n(327),n(388)),d=n(978),p=n(534),v=n(545),m=n(465),g=function(e){return"date"===e||"year"===e?"date":"time"},y=Object(s.a)((function(e){var t="light"===e.palette.type?e.palette.primary.main:e.palette.background.default;return{tabs:{color:e.palette.getContrastText(t),backgroundColor:t}}}),{name:"MuiPickerDTTabs"}),b=function(e){var t=e.view,n=e.onChange,r=e.dateRangeIcon,o=e.timeIcon,a=y(),s="light"===Object(u.a)().palette.type?"secondary":"primary";return Object(i.createElement)(m.a,null,Object(i.createElement)(v.a,{variant:"fullWidth",value:g(t),onChange:function(e,r){r!==g(t)&&n("date"===r?"date":"hours")},className:a.tabs,indicatorColor:s},Object(i.createElement)(p.a,{value:"date",icon:Object(i.createElement)(i.Fragment,null,r)}),Object(i.createElement)(p.a,{value:"time",icon:Object(i.createElement)(i.Fragment,null,o)})))};b.defaultProps={dateRangeIcon:Object(i.createElement)((function(e){return o.a.createElement(l.a,e,o.a.createElement("path",{d:"M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"}),o.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}))}),null),timeIcon:Object(i.createElement)((function(e){return o.a.createElement(l.a,e,o.a.createElement("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),o.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),o.a.createElement("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"}))}),null)};var _=Object(s.a)((function(e){return{toolbar:{paddingLeft:16,paddingRight:16,justifyContent:"space-around"},separator:{margin:"0 4px 0 2px",cursor:"default"}}}),{name:"MuiPickerDTToolbar"}),w=function(e){var t=e.date,n=e.openView,r=e.setOpenView,o=e.ampm,s=e.hideTabs,l=e.dateRangeIcon,h=e.timeIcon,p=e.onChange,v=Object(a.c)(),m=_(),g=!s&&"undefined"!==typeof window&&window.innerHeight>667,y=Object(f.b)(t,o,p),w=y.meridiemMode,O=y.handleMeridiemChange,E="rtl"===Object(u.a)().direction;return Object(i.createElement)(i.Fragment,null,Object(i.createElement)(c.b,{isLandscape:!1,className:m.toolbar},Object(i.createElement)(d.a,{container:!0,justify:"center",wrap:"nowrap"},Object(i.createElement)(d.a,{item:!0,container:!0,xs:5,justify:"flex-start",direction:"column"},Object(i.createElement)("div",null,Object(i.createElement)(c.c,{variant:"subtitle1",onClick:function(){return r("year")},selected:"year"===n,label:v.getYearText(t)})),Object(i.createElement)("div",null,Object(i.createElement)(c.c,{variant:"h4",onClick:function(){return r("date")},selected:"date"===n,label:v.getDateTimePickerHeaderText(t)}))),Object(i.createElement)(d.a,{item:!0,container:!0,xs:6,justify:"center",alignItems:"flex-end",direction:E?"row-reverse":"row"},Object(i.createElement)(c.c,{variant:"h3",onClick:function(){return r("hours")},selected:"hours"===n,label:v.getHourText(t,o)}),Object(i.createElement)(c.f,{variant:"h3",label:":",className:m.separator}),Object(i.createElement)(c.c,{variant:"h3",onClick:function(){return r("minutes")},selected:"minutes"===n,label:v.getMinuteText(t)})),o&&Object(i.createElement)(d.a,{item:!0,container:!0,xs:1,direction:"column",justify:"flex-end"},Object(i.createElement)(c.c,{variant:"subtitle1",selected:"am"===w,label:v.getMeridiemText("am"),onClick:function(){return O("am")}}),Object(i.createElement)(c.c,{variant:"subtitle1",selected:"pm"===w,label:v.getMeridiemText("pm"),onClick:function(){return O("pm")}})))),g&&Object(i.createElement)(b,{dateRangeIcon:l,timeIcon:h,view:n,onChange:r}))};function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},h.b,{wider:!0,orientation:"portrait",openTo:"date",views:["year","date","hours","minutes"]});function T(e){var t=Object(a.c)();if("portrait"!==e.orientation)throw new Error("We are not supporting custom orientation for DateTimePicker yet :(");return{getDefaultFormat:function(){return Object(c.h)(e.format,e.ampm,{"12h":t.dateTime12hFormat,"24h":t.dateTime24hFormat})}}}var I=Object(c.g)({useOptions:T,Input:c.d,useState:c.i,DefaultToolbarComponent:w}),S=Object(c.g)({useOptions:T,Input:c.a,useState:c.e,DefaultToolbarComponent:w,getCustomProps:function(e){return{refuse:e.ampm?/[^\dap]+/gi:/[^\d]+/gi}}});I.defaultProps=E,S.defaultProps=E},419:function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},420:function(e,t,n){"use strict";n.r(t);var r=n(348);n.d(t,"default",(function(){return r.a}));r.a.registerVersion("firebase","8.3.1","app")},428:function(e,t,n){"use strict";n.r(t),n.d(t,"useStaticState",(function(){return d}));n(29),n(0),n(13);var r=n(252);n.d(t,"MuiPickersContext",(function(){return r.b})),n.d(t,"MuiPickersUtilsProvider",(function(){return r.a})),n.d(t,"useUtils",(function(){return r.c}));n(48),n(2),n(9);var i=n(267);n.d(t,"makePickerWithState",(function(){return i.g})),n.d(t,"useKeyboardPickerState",(function(){return i.e})),n.d(t,"usePickerState",(function(){return i.i})),n.d(t,"validate",(function(){return i.j}));var o=n(343);n.d(t,"Calendar",(function(){return o.a}));var a=n(406);n.d(t,"DatePicker",(function(){return a.a})),n.d(t,"KeyboardDatePicker",(function(){return a.b}));n(354),n(68);var s=n(340);n.d(t,"Picker",(function(){return s.a}));n(281),n(34),n(328),n(329),n(327);var u=n(341);n.d(t,"Day",(function(){return u.a}));var c=n(324);n.d(t,"Clock",(function(){return c.a}));var l=n(331);n.d(t,"ClockView",(function(){return l.a})),n.d(t,"TimePickerView",(function(){return l.b}));var h=n(407);n.d(t,"KeyboardTimePicker",(function(){return h.a})),n.d(t,"TimePicker",(function(){return h.b}));var f=n(408);function d(e){var t=e.value,n=e.autoOk,r=void 0===n||n,o=e.onChange,a=e.defaultFormat,s=Object(i.i)({value:t,onChange:o,autoOk:r},{getDefaultFormat:function(){return a||"MM/dd/yyyy"}});return{pickerProps:s.pickerProps,wrapperProps:s.wrapperProps,inputProps:s.inputProps}}n.d(t,"DateTimePicker",(function(){return f.a})),n.d(t,"KeyboardDateTimePicker",(function(){return f.b}))},429:function(e,t,n){(function(e){e.exports=function(){"use strict";var t,n;function r(){return t.apply(null,arguments)}function i(e){t=e}function o(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function a(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function u(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(s(e,t))return!1;return!0}function c(e){return void 0===e}function l(e){return"number"===typeof e||"[object Number]"===Object.prototype.toString.call(e)}function h(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function d(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function p(e,t,n,r){return Gn(e,t,n,r,!0).utc()}function v(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function m(e){return null==e._pf&&(e._pf=v()),e._pf}function g(e){if(null==e._isValid){var t=m(e),r=n.call(t.parsedDateParts,(function(e){return null!=e})),i=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&r);if(e._strict&&(i=i&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return i;e._isValid=i}return e._isValid}function y(e){var t=p(NaN);return null!=e?d(m(t),e):m(t).userInvalidated=!0,t}n=Array.prototype.some?Array.prototype.some:function(e){var t,n=Object(this),r=n.length>>>0;for(t=0;t<r;t++)if(t in n&&e.call(this,n[t],t,n))return!0;return!1};var b=r.momentProperties=[],_=!1;function w(e,t){var n,r,i;if(c(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),c(t._i)||(e._i=t._i),c(t._f)||(e._f=t._f),c(t._l)||(e._l=t._l),c(t._strict)||(e._strict=t._strict),c(t._tzm)||(e._tzm=t._tzm),c(t._isUTC)||(e._isUTC=t._isUTC),c(t._offset)||(e._offset=t._offset),c(t._pf)||(e._pf=m(t)),c(t._locale)||(e._locale=t._locale),b.length>0)for(n=0;n<b.length;n++)c(i=t[r=b[n]])||(e[r]=i);return e}function O(e){w(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===_&&(_=!0,r.updateOffset(this),_=!1)}function E(e){return e instanceof O||null!=e&&null!=e._isAMomentObject}function T(e){!1===r.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function I(e,t){var n=!0;return d((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,e),n){var i,o,a,u=[];for(o=0;o<arguments.length;o++){if(i="","object"===typeof arguments[o]){for(a in i+="\n["+o+"] ",arguments[0])s(arguments[0],a)&&(i+=a+": "+arguments[0][a]+", ");i=i.slice(0,-2)}else i=arguments[o];u.push(i)}T(e+"\nArguments: "+Array.prototype.slice.call(u).join("")+"\n"+(new Error).stack),n=!1}return t.apply(this,arguments)}),t)}var S,k={};function C(e,t){null!=r.deprecationHandler&&r.deprecationHandler(e,t),k[e]||(T(t),k[e]=!0)}function D(e){return"undefined"!==typeof Function&&e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function j(e){var t,n;for(n in e)s(e,n)&&(D(t=e[n])?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function N(e,t){var n,r=d({},e);for(n in t)s(t,n)&&(a(e[n])&&a(t[n])?(r[n]={},d(r[n],e[n]),d(r[n],t[n])):null!=t[n]?r[n]=t[n]:delete r[n]);for(n in e)s(e,n)&&!s(t,n)&&a(e[n])&&(r[n]=d({},r[n]));return r}function x(e){null!=e&&this.set(e)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,S=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var P={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function A(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return D(r)?r.call(t,n):r}function R(e,t,n){var r=""+Math.abs(e),i=t-r.length;return(e>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var M=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,L=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},U={};function V(e,t,n,r){var i=r;"string"===typeof r&&(i=function(){return this[r]()}),e&&(U[e]=i),t&&(U[t[0]]=function(){return R(i.apply(this,arguments),t[1],t[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function q(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function B(e){var t,n,r=e.match(M);for(t=0,n=r.length;t<n;t++)U[r[t]]?r[t]=U[r[t]]:r[t]=q(r[t]);return function(t){var i,o="";for(i=0;i<n;i++)o+=D(r[i])?r[i].call(t,e):r[i];return o}}function H(e,t){return e.isValid()?(t=W(t,e.localeData()),F[t]=F[t]||B(t),F[t](e)):e.localeData().invalidDate()}function W(e,t){var n=5;function r(e){return t.longDateFormat(e)||e}for(L.lastIndex=0;n>=0&&L.test(e);)e=e.replace(L,r),L.lastIndex=0,n-=1;return e}var K={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function Y(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(M).map((function(e){return"MMMM"===e||"MM"===e||"DD"===e||"dddd"===e?e.slice(1):e})).join(""),this._longDateFormat[e])}var G="Invalid date";function z(){return this._invalidDate}var Q="%d",X=/\d{1,2}/;function J(e){return this._ordinal.replace("%d",e)}var $={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Z(e,t,n,r){var i=this._relativeTime[n];return D(i)?i(e,t,n,r):i.replace(/%d/i,e)}function ee(e,t){var n=this._relativeTime[e>0?"future":"past"];return D(n)?n(t):n.replace(/%s/i,t)}var te={};function ne(e,t){var n=e.toLowerCase();te[n]=te[n+"s"]=te[t]=e}function re(e){return"string"===typeof e?te[e]||te[e.toLowerCase()]:void 0}function ie(e){var t,n,r={};for(n in e)s(e,n)&&(t=re(n))&&(r[t]=e[n]);return r}var oe={};function ae(e,t){oe[e]=t}function se(e){var t,n=[];for(t in e)s(e,t)&&n.push({unit:t,priority:oe[t]});return n.sort((function(e,t){return e.priority-t.priority})),n}function ue(e){return e%4===0&&e%100!==0||e%400===0}function ce(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function le(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=ce(t)),n}function he(e,t){return function(n){return null!=n?(de(this,e,n),r.updateOffset(this,t),this):fe(this,e)}}function fe(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function de(e,t,n){e.isValid()&&!isNaN(n)&&("FullYear"===t&&ue(e.year())&&1===e.month()&&29===e.date()?(n=le(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Ze(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function pe(e){return D(this[e=re(e)])?this[e]():this}function ve(e,t){if("object"===typeof e){var n,r=se(e=ie(e));for(n=0;n<r.length;n++)this[r[n].unit](e[r[n].unit])}else if(D(this[e=re(e)]))return this[e](t);return this}var me,ge=/\d/,ye=/\d\d/,be=/\d{3}/,_e=/\d{4}/,we=/[+-]?\d{6}/,Oe=/\d\d?/,Ee=/\d\d\d\d?/,Te=/\d\d\d\d\d\d?/,Ie=/\d{1,3}/,Se=/\d{1,4}/,ke=/[+-]?\d{1,6}/,Ce=/\d+/,De=/[+-]?\d+/,je=/Z|[+-]\d\d:?\d\d/gi,Ne=/Z|[+-]\d\d(?::?\d\d)?/gi,xe=/[+-]?\d+(\.\d{1,3})?/,Pe=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;function Ae(e,t,n){me[e]=D(t)?t:function(e,r){return e&&n?n:t}}function Re(e,t){return s(me,e)?me[e](t._strict,t._locale):new RegExp(Me(e))}function Me(e){return Le(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(e,t,n,r,i){return t||n||r||i})))}function Le(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}me={};var Fe={};function Ue(e,t){var n,r=t;for("string"===typeof e&&(e=[e]),l(t)&&(r=function(e,n){n[t]=le(e)}),n=0;n<e.length;n++)Fe[e[n]]=r}function Ve(e,t){Ue(e,(function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)}))}function qe(e,t,n){null!=t&&s(Fe,e)&&Fe[e](t,n._a,n,e)}var Be,He=0,We=1,Ke=2,Ye=3,Ge=4,ze=5,Qe=6,Xe=7,Je=8;function $e(e,t){return(e%t+t)%t}function Ze(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=$e(t,12);return e+=(t-n)/12,1===n?ue(e)?29:28:31-n%7%2}Be=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},V("M",["MM",2],"Mo",(function(){return this.month()+1})),V("MMM",0,0,(function(e){return this.localeData().monthsShort(this,e)})),V("MMMM",0,0,(function(e){return this.localeData().months(this,e)})),ne("month","M"),ae("month",8),Ae("M",Oe),Ae("MM",Oe,ye),Ae("MMM",(function(e,t){return t.monthsShortRegex(e)})),Ae("MMMM",(function(e,t){return t.monthsRegex(e)})),Ue(["M","MM"],(function(e,t){t[We]=le(e)-1})),Ue(["MMM","MMMM"],(function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);null!=i?t[We]=i:m(n).invalidMonth=e}));var et="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),tt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),nt=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,rt=Pe,it=Pe;function ot(e,t){return e?o(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||nt).test(t)?"format":"standalone"][e.month()]:o(this._months)?this._months:this._months.standalone}function at(e,t){return e?o(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[nt.test(t)?"format":"standalone"][e.month()]:o(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function st(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=p([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===t?-1!==(i=Be.call(this._shortMonthsParse,a))?i:null:-1!==(i=Be.call(this._longMonthsParse,a))?i:null:"MMM"===t?-1!==(i=Be.call(this._shortMonthsParse,a))||-1!==(i=Be.call(this._longMonthsParse,a))?i:null:-1!==(i=Be.call(this._longMonthsParse,a))||-1!==(i=Be.call(this._shortMonthsParse,a))?i:null}function ut(e,t,n){var r,i,o;if(this._monthsParseExact)return st.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=p([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function ct(e,t){var n;if(!e.isValid())return e;if("string"===typeof t)if(/^\d+$/.test(t))t=le(t);else if(!l(t=e.localeData().monthsParse(t)))return e;return n=Math.min(e.date(),Ze(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function lt(e){return null!=e?(ct(this,e),r.updateOffset(this,!0),this):fe(this,"Month")}function ht(){return Ze(this.year(),this.month())}function ft(e){return this._monthsParseExact?(s(this,"_monthsRegex")||pt.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(s(this,"_monthsShortRegex")||(this._monthsShortRegex=rt),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function dt(e){return this._monthsParseExact?(s(this,"_monthsRegex")||pt.call(this),e?this._monthsStrictRegex:this._monthsRegex):(s(this,"_monthsRegex")||(this._monthsRegex=it),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function pt(){function e(e,t){return t.length-e.length}var t,n,r=[],i=[],o=[];for(t=0;t<12;t++)n=p([2e3,t]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(e),i.sort(e),o.sort(e),t=0;t<12;t++)r[t]=Le(r[t]),i[t]=Le(i[t]);for(t=0;t<24;t++)o[t]=Le(o[t]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function vt(e){return ue(e)?366:365}V("Y",0,0,(function(){var e=this.year();return e<=9999?R(e,4):"+"+e})),V(0,["YY",2],0,(function(){return this.year()%100})),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),ne("year","y"),ae("year",1),Ae("Y",De),Ae("YY",Oe,ye),Ae("YYYY",Se,_e),Ae("YYYYY",ke,we),Ae("YYYYYY",ke,we),Ue(["YYYYY","YYYYYY"],He),Ue("YYYY",(function(e,t){t[He]=2===e.length?r.parseTwoDigitYear(e):le(e)})),Ue("YY",(function(e,t){t[He]=r.parseTwoDigitYear(e)})),Ue("Y",(function(e,t){t[He]=parseInt(e,10)})),r.parseTwoDigitYear=function(e){return le(e)+(le(e)>68?1900:2e3)};var mt=he("FullYear",!0);function gt(){return ue(this.year())}function yt(e,t,n,r,i,o,a){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,i,o,a),s}function bt(e){var t,n;return e<100&&e>=0?((n=Array.prototype.slice.call(arguments))[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function _t(e,t,n){var r=7+t-n;return-(7+bt(e,0,r).getUTCDay()-t)%7+r-1}function wt(e,t,n,r,i){var o,a,s=1+7*(t-1)+(7+n-r)%7+_t(e,r,i);return s<=0?a=vt(o=e-1)+s:s>vt(e)?(o=e+1,a=s-vt(e)):(o=e,a=s),{year:o,dayOfYear:a}}function Ot(e,t,n){var r,i,o=_t(e.year(),t,n),a=Math.floor((e.dayOfYear()-o-1)/7)+1;return a<1?r=a+Et(i=e.year()-1,t,n):a>Et(e.year(),t,n)?(r=a-Et(e.year(),t,n),i=e.year()+1):(i=e.year(),r=a),{week:r,year:i}}function Et(e,t,n){var r=_t(e,t,n),i=_t(e+1,t,n);return(vt(e)-r+i)/7}function Tt(e){return Ot(e,this._week.dow,this._week.doy).week}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),ne("week","w"),ne("isoWeek","W"),ae("week",5),ae("isoWeek",5),Ae("w",Oe),Ae("ww",Oe,ye),Ae("W",Oe),Ae("WW",Oe,ye),Ve(["w","ww","W","WW"],(function(e,t,n,r){t[r.substr(0,1)]=le(e)}));var It={dow:0,doy:6};function St(){return this._week.dow}function kt(){return this._week.doy}function Ct(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Dt(e){var t=Ot(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function jt(e,t){return"string"!==typeof e?e:isNaN(e)?"number"===typeof(e=t.weekdaysParse(e))?e:null:parseInt(e,10)}function Nt(e,t){return"string"===typeof e?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function xt(e,t){return e.slice(t,7).concat(e.slice(0,t))}V("d",0,"do","day"),V("dd",0,0,(function(e){return this.localeData().weekdaysMin(this,e)})),V("ddd",0,0,(function(e){return this.localeData().weekdaysShort(this,e)})),V("dddd",0,0,(function(e){return this.localeData().weekdays(this,e)})),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),ne("day","d"),ne("weekday","e"),ne("isoWeekday","E"),ae("day",11),ae("weekday",11),ae("isoWeekday",11),Ae("d",Oe),Ae("e",Oe),Ae("E",Oe),Ae("dd",(function(e,t){return t.weekdaysMinRegex(e)})),Ae("ddd",(function(e,t){return t.weekdaysShortRegex(e)})),Ae("dddd",(function(e,t){return t.weekdaysRegex(e)})),Ve(["dd","ddd","dddd"],(function(e,t,n,r){var i=n._locale.weekdaysParse(e,r,n._strict);null!=i?t.d=i:m(n).invalidWeekday=e})),Ve(["d","e","E"],(function(e,t,n,r){t[r]=le(e)}));var Pt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),At="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Rt="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Mt=Pe,Lt=Pe,Ft=Pe;function Ut(e,t){var n=o(this._weekdays)?this._weekdays:this._weekdays[e&&!0!==e&&this._weekdays.isFormat.test(t)?"format":"standalone"];return!0===e?xt(n,this._week.dow):e?n[e.day()]:n}function Vt(e){return!0===e?xt(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function qt(e){return!0===e?xt(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function Bt(e,t,n){var r,i,o,a=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=p([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===t?-1!==(i=Be.call(this._weekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Be.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=Be.call(this._minWeekdaysParse,a))?i:null:"dddd"===t?-1!==(i=Be.call(this._weekdaysParse,a))||-1!==(i=Be.call(this._shortWeekdaysParse,a))||-1!==(i=Be.call(this._minWeekdaysParse,a))?i:null:"ddd"===t?-1!==(i=Be.call(this._shortWeekdaysParse,a))||-1!==(i=Be.call(this._weekdaysParse,a))||-1!==(i=Be.call(this._minWeekdaysParse,a))?i:null:-1!==(i=Be.call(this._minWeekdaysParse,a))||-1!==(i=Be.call(this._weekdaysParse,a))||-1!==(i=Be.call(this._shortWeekdaysParse,a))?i:null}function Ht(e,t,n){var r,i,o;if(this._weekdaysParseExact)return Bt.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=p([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[r].test(e))return r;if(n&&"ddd"===t&&this._shortWeekdaysParse[r].test(e))return r;if(n&&"dd"===t&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function Wt(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=jt(e,this.localeData()),this.add(e-t,"d")):t}function Kt(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function Yt(e){if(!this.isValid())return null!=e?this:NaN;if(null!=e){var t=Nt(e,this.localeData());return this.day(this.day()%7?t:t-7)}return this.day()||7}function Gt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Xt.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(s(this,"_weekdaysRegex")||(this._weekdaysRegex=Mt),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function zt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Xt.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(s(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Lt),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Qt(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||Xt.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(s(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ft),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Xt(){function e(e,t){return t.length-e.length}var t,n,r,i,o,a=[],s=[],u=[],c=[];for(t=0;t<7;t++)n=p([2e3,1]).day(t),r=Le(this.weekdaysMin(n,"")),i=Le(this.weekdaysShort(n,"")),o=Le(this.weekdays(n,"")),a.push(r),s.push(i),u.push(o),c.push(r),c.push(i),c.push(o);a.sort(e),s.sort(e),u.sort(e),c.sort(e),this._weekdaysRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function Jt(){return this.hours()%12||12}function $t(){return this.hours()||24}function Zt(e,t){V(e,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)}))}function en(e,t){return t._meridiemParse}function tn(e){return"p"===(e+"").toLowerCase().charAt(0)}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Jt),V("k",["kk",2],0,$t),V("hmm",0,0,(function(){return""+Jt.apply(this)+R(this.minutes(),2)})),V("hmmss",0,0,(function(){return""+Jt.apply(this)+R(this.minutes(),2)+R(this.seconds(),2)})),V("Hmm",0,0,(function(){return""+this.hours()+R(this.minutes(),2)})),V("Hmmss",0,0,(function(){return""+this.hours()+R(this.minutes(),2)+R(this.seconds(),2)})),Zt("a",!0),Zt("A",!1),ne("hour","h"),ae("hour",13),Ae("a",en),Ae("A",en),Ae("H",Oe),Ae("h",Oe),Ae("k",Oe),Ae("HH",Oe,ye),Ae("hh",Oe,ye),Ae("kk",Oe,ye),Ae("hmm",Ee),Ae("hmmss",Te),Ae("Hmm",Ee),Ae("Hmmss",Te),Ue(["H","HH"],Ye),Ue(["k","kk"],(function(e,t,n){var r=le(e);t[Ye]=24===r?0:r})),Ue(["a","A"],(function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e})),Ue(["h","hh"],(function(e,t,n){t[Ye]=le(e),m(n).bigHour=!0})),Ue("hmm",(function(e,t,n){var r=e.length-2;t[Ye]=le(e.substr(0,r)),t[Ge]=le(e.substr(r)),m(n).bigHour=!0})),Ue("hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ye]=le(e.substr(0,r)),t[Ge]=le(e.substr(r,2)),t[ze]=le(e.substr(i)),m(n).bigHour=!0})),Ue("Hmm",(function(e,t,n){var r=e.length-2;t[Ye]=le(e.substr(0,r)),t[Ge]=le(e.substr(r))})),Ue("Hmmss",(function(e,t,n){var r=e.length-4,i=e.length-2;t[Ye]=le(e.substr(0,r)),t[Ge]=le(e.substr(r,2)),t[ze]=le(e.substr(i))}));var nn=/[ap]\.?m?\.?/i,rn=he("Hours",!0);function on(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var an,sn={calendar:P,longDateFormat:K,invalidDate:G,ordinal:Q,dayOfMonthOrdinalParse:X,relativeTime:$,months:et,monthsShort:tt,week:It,weekdays:Pt,weekdaysMin:Rt,weekdaysShort:At,meridiemParse:nn},un={},cn={};function ln(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function hn(e){return e?e.toLowerCase().replace("_","-"):e}function fn(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=hn(e[o]).split("-")).length,n=(n=hn(e[o+1]))?n.split("-"):null;t>0;){if(r=dn(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&ln(i,n)>=t-1)break;t--}o++}return an}function dn(t){var n=null;if(void 0===un[t]&&"undefined"!==typeof e&&e&&e.exports)try{n=an._abbr,function(){var e=new Error("Cannot find module 'undefined'");throw e.code="MODULE_NOT_FOUND",e}(),pn(n)}catch(r){un[t]=null}return un[t]}function pn(e,t){var n;return e&&((n=c(t)?gn(e):vn(e,t))?an=n:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),an._abbr}function vn(e,t){if(null!==t){var n,r=sn;if(t.abbr=e,null!=un[e])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=un[e]._config;else if(null!=t.parentLocale)if(null!=un[t.parentLocale])r=un[t.parentLocale]._config;else{if(null==(n=dn(t.parentLocale)))return cn[t.parentLocale]||(cn[t.parentLocale]=[]),cn[t.parentLocale].push({name:e,config:t}),null;r=n._config}return un[e]=new x(N(r,t)),cn[e]&&cn[e].forEach((function(e){vn(e.name,e.config)})),pn(e),un[e]}return delete un[e],null}function mn(e,t){if(null!=t){var n,r,i=sn;null!=un[e]&&null!=un[e].parentLocale?un[e].set(N(un[e]._config,t)):(null!=(r=dn(e))&&(i=r._config),t=N(i,t),null==r&&(t.abbr=e),(n=new x(t)).parentLocale=un[e],un[e]=n),pn(e)}else null!=un[e]&&(null!=un[e].parentLocale?(un[e]=un[e].parentLocale,e===pn()&&pn(e)):null!=un[e]&&delete un[e]);return un[e]}function gn(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return an;if(!o(e)){if(t=dn(e))return t;e=[e]}return fn(e)}function yn(){return S(un)}function bn(e){var t,n=e._a;return n&&-2===m(e).overflow&&(t=n[We]<0||n[We]>11?We:n[Ke]<1||n[Ke]>Ze(n[He],n[We])?Ke:n[Ye]<0||n[Ye]>24||24===n[Ye]&&(0!==n[Ge]||0!==n[ze]||0!==n[Qe])?Ye:n[Ge]<0||n[Ge]>59?Ge:n[ze]<0||n[ze]>59?ze:n[Qe]<0||n[Qe]>999?Qe:-1,m(e)._overflowDayOfYear&&(t<He||t>Ke)&&(t=Ke),m(e)._overflowWeeks&&-1===t&&(t=Xe),m(e)._overflowWeekday&&-1===t&&(t=Je),m(e).overflow=t),e}var _n=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,wn=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,On=/Z|[+-]\d\d(?::?\d\d)?/,En=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],Tn=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],In=/^\/?Date\((-?\d+)/i,Sn=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,kn={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Cn(e){var t,n,r,i,o,a,s=e._i,u=_n.exec(s)||wn.exec(s);if(u){for(m(e).iso=!0,t=0,n=En.length;t<n;t++)if(En[t][1].exec(u[1])){i=En[t][0],r=!1!==En[t][2];break}if(null==i)return void(e._isValid=!1);if(u[3]){for(t=0,n=Tn.length;t<n;t++)if(Tn[t][1].exec(u[3])){o=(u[2]||" ")+Tn[t][0];break}if(null==o)return void(e._isValid=!1)}if(!r&&null!=o)return void(e._isValid=!1);if(u[4]){if(!On.exec(u[4]))return void(e._isValid=!1);a="Z"}e._f=i+(o||"")+(a||""),Vn(e)}else e._isValid=!1}function Dn(e,t,n,r,i,o){var a=[jn(e),tt.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(i,10)];return o&&a.push(parseInt(o,10)),a}function jn(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function Nn(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function xn(e,t,n){return!e||At.indexOf(e)===new Date(t[0],t[1],t[2]).getDay()||(m(n).weekdayMismatch=!0,n._isValid=!1,!1)}function Pn(e,t,n){if(e)return kn[e];if(t)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}function An(e){var t,n=Sn.exec(Nn(e._i));if(n){if(t=Dn(n[4],n[3],n[2],n[5],n[6],n[7]),!xn(n[1],t,e))return;e._a=t,e._tzm=Pn(n[8],n[9],n[10]),e._d=bt.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),m(e).rfc2822=!0}else e._isValid=!1}function Rn(e){var t=In.exec(e._i);null===t?(Cn(e),!1===e._isValid&&(delete e._isValid,An(e),!1===e._isValid&&(delete e._isValid,e._strict?e._isValid=!1:r.createFromInputFallback(e)))):e._d=new Date(+t[1])}function Mn(e,t,n){return null!=e?e:null!=t?t:n}function Ln(e){var t=new Date(r.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function Fn(e){var t,n,r,i,o,a=[];if(!e._d){for(r=Ln(e),e._w&&null==e._a[Ke]&&null==e._a[We]&&Un(e),null!=e._dayOfYear&&(o=Mn(e._a[He],r[He]),(e._dayOfYear>vt(o)||0===e._dayOfYear)&&(m(e)._overflowDayOfYear=!0),n=bt(o,0,e._dayOfYear),e._a[We]=n.getUTCMonth(),e._a[Ke]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=a[t]=r[t];for(;t<7;t++)e._a[t]=a[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[Ye]&&0===e._a[Ge]&&0===e._a[ze]&&0===e._a[Qe]&&(e._nextDay=!0,e._a[Ye]=0),e._d=(e._useUTC?bt:yt).apply(null,a),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Ye]=24),e._w&&"undefined"!==typeof e._w.d&&e._w.d!==i&&(m(e).weekdayMismatch=!0)}}function Un(e){var t,n,r,i,o,a,s,u,c;null!=(t=e._w).GG||null!=t.W||null!=t.E?(o=1,a=4,n=Mn(t.GG,e._a[He],Ot(zn(),1,4).year),r=Mn(t.W,1),((i=Mn(t.E,1))<1||i>7)&&(u=!0)):(o=e._locale._week.dow,a=e._locale._week.doy,c=Ot(zn(),o,a),n=Mn(t.gg,e._a[He],c.year),r=Mn(t.w,c.week),null!=t.d?((i=t.d)<0||i>6)&&(u=!0):null!=t.e?(i=t.e+o,(t.e<0||t.e>6)&&(u=!0)):i=o),r<1||r>Et(n,o,a)?m(e)._overflowWeeks=!0:null!=u?m(e)._overflowWeekday=!0:(s=wt(n,r,i,o,a),e._a[He]=s.year,e._dayOfYear=s.dayOfYear)}function Vn(e){if(e._f!==r.ISO_8601)if(e._f!==r.RFC_2822){e._a=[],m(e).empty=!0;var t,n,i,o,a,s,u=""+e._i,c=u.length,l=0;for(i=W(e._f,e._locale).match(M)||[],t=0;t<i.length;t++)o=i[t],(n=(u.match(Re(o,e))||[])[0])&&((a=u.substr(0,u.indexOf(n))).length>0&&m(e).unusedInput.push(a),u=u.slice(u.indexOf(n)+n.length),l+=n.length),U[o]?(n?m(e).empty=!1:m(e).unusedTokens.push(o),qe(o,n,e)):e._strict&&!n&&m(e).unusedTokens.push(o);m(e).charsLeftOver=c-l,u.length>0&&m(e).unusedInput.push(u),e._a[Ye]<=12&&!0===m(e).bigHour&&e._a[Ye]>0&&(m(e).bigHour=void 0),m(e).parsedDateParts=e._a.slice(0),m(e).meridiem=e._meridiem,e._a[Ye]=qn(e._locale,e._a[Ye],e._meridiem),null!==(s=m(e).era)&&(e._a[He]=e._locale.erasConvertYear(s,e._a[He])),Fn(e),bn(e)}else An(e);else Cn(e)}function qn(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function Bn(e){var t,n,r,i,o,a,s=!1;if(0===e._f.length)return m(e).invalidFormat=!0,void(e._d=new Date(NaN));for(i=0;i<e._f.length;i++)o=0,a=!1,t=w({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[i],Vn(t),g(t)&&(a=!0),o+=m(t).charsLeftOver,o+=10*m(t).unusedTokens.length,m(t).score=o,s?o<r&&(r=o,n=t):(null==r||o<r||a)&&(r=o,n=t,a&&(s=!0));d(e,n||t)}function Hn(e){if(!e._d){var t=ie(e._i),n=void 0===t.day?t.date:t.day;e._a=f([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],(function(e){return e&&parseInt(e,10)})),Fn(e)}}function Wn(e){var t=new O(bn(Kn(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Kn(e){var t=e._i,n=e._f;return e._locale=e._locale||gn(e._l),null===t||void 0===n&&""===t?y({nullInput:!0}):("string"===typeof t&&(e._i=t=e._locale.preparse(t)),E(t)?new O(bn(t)):(h(t)?e._d=t:o(n)?Bn(e):n?Vn(e):Yn(e),g(e)||(e._d=null),e))}function Yn(e){var t=e._i;c(t)?e._d=new Date(r.now()):h(t)?e._d=new Date(t.valueOf()):"string"===typeof t?Rn(e):o(t)?(e._a=f(t.slice(0),(function(e){return parseInt(e,10)})),Fn(e)):a(t)?Hn(e):l(t)?e._d=new Date(t):r.createFromInputFallback(e)}function Gn(e,t,n,r,i){var s={};return!0!==t&&!1!==t||(r=t,t=void 0),!0!==n&&!1!==n||(r=n,n=void 0),(a(e)&&u(e)||o(e)&&0===e.length)&&(e=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=i,s._l=n,s._i=e,s._f=t,s._strict=r,Wn(s)}function zn(e,t,n,r){return Gn(e,t,n,r,!1)}r.createFromInputFallback=I("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Qn=I("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=zn.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:y()})),Xn=I("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var e=zn.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:y()}));function Jn(e,t){var n,r;if(1===t.length&&o(t[0])&&(t=t[0]),!t.length)return zn();for(n=t[0],r=1;r<t.length;++r)t[r].isValid()&&!t[r][e](n)||(n=t[r]);return n}function $n(){return Jn("isBefore",[].slice.call(arguments,0))}function Zn(){return Jn("isAfter",[].slice.call(arguments,0))}var er=function(){return Date.now?Date.now():+new Date},tr=["year","quarter","month","week","day","hour","minute","second","millisecond"];function nr(e){var t,n,r=!1;for(t in e)if(s(e,t)&&(-1===Be.call(tr,t)||null!=e[t]&&isNaN(e[t])))return!1;for(n=0;n<tr.length;++n)if(e[tr[n]]){if(r)return!1;parseFloat(e[tr[n]])!==le(e[tr[n]])&&(r=!0)}return!0}function rr(){return this._isValid}function ir(){return kr(NaN)}function or(e){var t=ie(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||t.isoWeek||0,a=t.day||0,s=t.hour||0,u=t.minute||0,c=t.second||0,l=t.millisecond||0;this._isValid=nr(t),this._milliseconds=+l+1e3*c+6e4*u+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=gn(),this._bubble()}function ar(e){return e instanceof or}function sr(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function ur(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&le(e[r])!==le(t[r]))&&a++;return a+o}function cr(e,t){V(e,0,0,(function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+R(~~(e/60),2)+t+R(~~e%60,2)}))}cr("Z",":"),cr("ZZ",""),Ae("Z",Ne),Ae("ZZ",Ne),Ue(["Z","ZZ"],(function(e,t,n){n._useUTC=!0,n._tzm=hr(Ne,e)}));var lr=/([\+\-]|\d\d)/gi;function hr(e,t){var n,r,i=(t||"").match(e);return null===i?null:0===(r=60*(n=((i[i.length-1]||[])+"").match(lr)||["-",0,0])[1]+le(n[2]))?0:"+"===n[0]?r:-r}function fr(e,t){var n,i;return t._isUTC?(n=t.clone(),i=(E(e)||h(e)?e.valueOf():zn(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):zn(e).local()}function dr(e){return-Math.round(e._d.getTimezoneOffset())}function pr(e,t,n){var i,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"===typeof e){if(null===(e=hr(Ne,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&t&&(i=dr(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==e&&(!t||this._changeInProgress?xr(this,kr(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:dr(this)}function vr(e,t){return null!=e?("string"!==typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function mr(e){return this.utcOffset(0,e)}function gr(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(dr(this),"m")),this}function yr(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var e=hr(je,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this}function br(e){return!!this.isValid()&&(e=e?zn(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function _r(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function wr(){if(!c(this._isDSTShifted))return this._isDSTShifted;var e,t={};return w(t,this),(t=Kn(t))._a?(e=t._isUTC?p(t._a):zn(t._a),this._isDSTShifted=this.isValid()&&ur(t._a,e.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function Or(){return!!this.isValid()&&!this._isUTC}function Er(){return!!this.isValid()&&this._isUTC}function Tr(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ir=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,Sr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function kr(e,t){var n,r,i,o=e,a=null;return ar(e)?o={ms:e._milliseconds,d:e._days,M:e._months}:l(e)||!isNaN(+e)?(o={},t?o[t]=+e:o.milliseconds=+e):(a=Ir.exec(e))?(n="-"===a[1]?-1:1,o={y:0,d:le(a[Ke])*n,h:le(a[Ye])*n,m:le(a[Ge])*n,s:le(a[ze])*n,ms:le(sr(1e3*a[Qe]))*n}):(a=Sr.exec(e))?(n="-"===a[1]?-1:1,o={y:Cr(a[2],n),M:Cr(a[3],n),w:Cr(a[4],n),d:Cr(a[5],n),h:Cr(a[6],n),m:Cr(a[7],n),s:Cr(a[8],n)}):null==o?o={}:"object"===typeof o&&("from"in o||"to"in o)&&(i=jr(zn(o.from),zn(o.to)),(o={}).ms=i.milliseconds,o.M=i.months),r=new or(o),ar(e)&&s(e,"_locale")&&(r._locale=e._locale),ar(e)&&s(e,"_isValid")&&(r._isValid=e._isValid),r}function Cr(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Dr(e,t){var n={};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function jr(e,t){var n;return e.isValid()&&t.isValid()?(t=fr(t,e),e.isBefore(t)?n=Dr(e,t):((n=Dr(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function Nr(e,t){return function(n,r){var i;return null===r||isNaN(+r)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),xr(this,kr(n,r),e),this}}function xr(e,t,n,i){var o=t._milliseconds,a=sr(t._days),s=sr(t._months);e.isValid()&&(i=null==i||i,s&&ct(e,fe(e,"Month")+s*n),a&&de(e,"Date",fe(e,"Date")+a*n),o&&e._d.setTime(e._d.valueOf()+o*n),i&&r.updateOffset(e,a||s))}kr.fn=or.prototype,kr.invalid=ir;var Pr=Nr(1,"add"),Ar=Nr(-1,"subtract");function Rr(e){return"string"===typeof e||e instanceof String}function Mr(e){return E(e)||h(e)||Rr(e)||l(e)||Fr(e)||Lr(e)||null===e||void 0===e}function Lr(e){var t,n,r=a(e)&&!u(e),i=!1,o=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"];for(t=0;t<o.length;t+=1)n=o[t],i=i||s(e,n);return r&&i}function Fr(e){var t=o(e),n=!1;return t&&(n=0===e.filter((function(t){return!l(t)&&Rr(e)})).length),t&&n}function Ur(e){var t,n,r=a(e)&&!u(e),i=!1,o=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"];for(t=0;t<o.length;t+=1)n=o[t],i=i||s(e,n);return r&&i}function Vr(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function qr(e,t){1===arguments.length&&(arguments[0]?Mr(arguments[0])?(e=arguments[0],t=void 0):Ur(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||zn(),i=fr(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",a=t&&(D(t[o])?t[o].call(this,n):t[o]);return this.format(a||this.localeData().calendar(o,this,zn(n)))}function Br(){return new O(this)}function Hr(e,t){var n=E(e)?e:zn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function Wr(e,t){var n=E(e)?e:zn(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function Kr(e,t,n,r){var i=E(e)?e:zn(e),o=E(t)?t:zn(t);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))}function Yr(e,t){var n,r=E(e)?e:zn(e);return!(!this.isValid()||!r.isValid())&&("millisecond"===(t=re(t)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function Gr(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function zr(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function Qr(e,t,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=fr(e,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),t=re(t)){case"year":o=Xr(this,r)/12;break;case"month":o=Xr(this,r);break;case"quarter":o=Xr(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:ce(o)}function Xr(e,t){if(e.date()<t.date())return-Xr(t,e);var n=12*(t.year()-e.year())+(t.month()-e.month()),r=e.clone().add(n,"months");return-(n+(t-r<0?(t-r)/(r-e.clone().add(n-1,"months")):(t-r)/(e.clone().add(n+1,"months")-r)))||0}function Jr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function $r(e){if(!this.isValid())return null;var t=!0!==e,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?H(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",H(n,"Z")):H(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function Zr(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e,t,n,r,i="moment",o="";return this.isLocal()||(i=0===this.utcOffset()?"moment.utc":"moment.parseZone",o="Z"),e="["+i+'("]',t=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",n="-MM-DD[T]HH:mm:ss.SSS",r=o+'[")]',this.format(e+t+n+r)}function ei(e){e||(e=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var t=H(this,e);return this.localeData().postformat(t)}function ti(e,t){return this.isValid()&&(E(e)&&e.isValid()||zn(e).isValid())?kr({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ni(e){return this.from(zn(),e)}function ri(e,t){return this.isValid()&&(E(e)&&e.isValid()||zn(e).isValid())?kr({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function ii(e){return this.to(zn(),e)}function oi(e){var t;return void 0===e?this._locale._abbr:(null!=(t=gn(e))&&(this._locale=t),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var ai=I("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(e){return void 0===e?this.localeData():this.locale(e)}));function si(){return this._locale}var ui=1e3,ci=60*ui,li=60*ci,hi=3506328*li;function fi(e,t){return(e%t+t)%t}function di(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-hi:new Date(e,t,n).valueOf()}function pi(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-hi:Date.UTC(e,t,n)}function vi(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?pi:di,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=fi(t+(this._isUTC?0:this.utcOffset()*ci),li);break;case"minute":t=this._d.valueOf(),t-=fi(t,ci);break;case"second":t=this._d.valueOf(),t-=fi(t,ui)}return this._d.setTime(t),r.updateOffset(this,!0),this}function mi(e){var t,n;if(void 0===(e=re(e))||"millisecond"===e||!this.isValid())return this;switch(n=this._isUTC?pi:di,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=li-fi(t+(this._isUTC?0:this.utcOffset()*ci),li)-1;break;case"minute":t=this._d.valueOf(),t+=ci-fi(t,ci)-1;break;case"second":t=this._d.valueOf(),t+=ui-fi(t,ui)-1}return this._d.setTime(t),r.updateOffset(this,!0),this}function gi(){return this._d.valueOf()-6e4*(this._offset||0)}function yi(){return Math.floor(this.valueOf()/1e3)}function bi(){return new Date(this.valueOf())}function _i(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function wi(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Oi(){return this.isValid()?this.toISOString():null}function Ei(){return g(this)}function Ti(){return d({},m(this))}function Ii(){return m(this).overflow}function Si(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function ki(e,t){var n,i,o,a=this._eras||gn("en")._eras;for(n=0,i=a.length;n<i;++n){switch(typeof a[n].since){case"string":o=r(a[n].since).startOf("day"),a[n].since=o.valueOf()}switch(typeof a[n].until){case"undefined":a[n].until=1/0;break;case"string":o=r(a[n].until).startOf("day").valueOf(),a[n].until=o.valueOf()}}return a}function Ci(e,t,n){var r,i,o,a,s,u=this.eras();for(e=e.toUpperCase(),r=0,i=u.length;r<i;++r)if(o=u[r].name.toUpperCase(),a=u[r].abbr.toUpperCase(),s=u[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(a===e)return u[r];break;case"NNNN":if(o===e)return u[r];break;case"NNNNN":if(s===e)return u[r]}else if([o,a,s].indexOf(e)>=0)return u[r]}function Di(e,t){var n=e.since<=e.until?1:-1;return void 0===t?r(e.since).year():r(e.since).year()+(t-e.offset)*n}function ji(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].name;if(r[e].until<=n&&n<=r[e].since)return r[e].name}return""}function Ni(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].narrow;if(r[e].until<=n&&n<=r[e].since)return r[e].narrow}return""}function xi(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e){if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until)return r[e].abbr;if(r[e].until<=n&&n<=r[e].since)return r[e].abbr}return""}function Pi(){var e,t,n,i,o=this.localeData().eras();for(e=0,t=o.length;e<t;++e)if(n=o[e].since<=o[e].until?1:-1,i=this.clone().startOf("day").valueOf(),o[e].since<=i&&i<=o[e].until||o[e].until<=i&&i<=o[e].since)return(this.year()-r(o[e].since).year())*n+o[e].offset;return this.year()}function Ai(e){return s(this,"_erasNameRegex")||qi.call(this),e?this._erasNameRegex:this._erasRegex}function Ri(e){return s(this,"_erasAbbrRegex")||qi.call(this),e?this._erasAbbrRegex:this._erasRegex}function Mi(e){return s(this,"_erasNarrowRegex")||qi.call(this),e?this._erasNarrowRegex:this._erasRegex}function Li(e,t){return t.erasAbbrRegex(e)}function Fi(e,t){return t.erasNameRegex(e)}function Ui(e,t){return t.erasNarrowRegex(e)}function Vi(e,t){return t._eraYearOrdinalRegex||Ce}function qi(){var e,t,n=[],r=[],i=[],o=[],a=this.eras();for(e=0,t=a.length;e<t;++e)r.push(Le(a[e].name)),n.push(Le(a[e].abbr)),i.push(Le(a[e].narrow)),o.push(Le(a[e].name)),o.push(Le(a[e].abbr)),o.push(Le(a[e].narrow));this._erasRegex=new RegExp("^("+o.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+r.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+n.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+i.join("|")+")","i")}function Bi(e,t){V(0,[e,e.length],0,t)}function Hi(e){return Qi.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Wi(e){return Qi.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function Ki(){return Et(this.year(),1,4)}function Yi(){return Et(this.isoWeekYear(),1,4)}function Gi(){var e=this.localeData()._week;return Et(this.year(),e.dow,e.doy)}function zi(){var e=this.localeData()._week;return Et(this.weekYear(),e.dow,e.doy)}function Qi(e,t,n,r,i){var o;return null==e?Ot(this,r,i).year:(t>(o=Et(e,r,i))&&(t=o),Xi.call(this,e,t,n,r,i))}function Xi(e,t,n,r,i){var o=wt(e,t,n,r,i),a=bt(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}function Ji(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}V("N",0,0,"eraAbbr"),V("NN",0,0,"eraAbbr"),V("NNN",0,0,"eraAbbr"),V("NNNN",0,0,"eraName"),V("NNNNN",0,0,"eraNarrow"),V("y",["y",1],"yo","eraYear"),V("y",["yy",2],0,"eraYear"),V("y",["yyy",3],0,"eraYear"),V("y",["yyyy",4],0,"eraYear"),Ae("N",Li),Ae("NN",Li),Ae("NNN",Li),Ae("NNNN",Fi),Ae("NNNNN",Ui),Ue(["N","NN","NNN","NNNN","NNNNN"],(function(e,t,n,r){var i=n._locale.erasParse(e,r,n._strict);i?m(n).era=i:m(n).invalidEra=e})),Ae("y",Ce),Ae("yy",Ce),Ae("yyy",Ce),Ae("yyyy",Ce),Ae("yo",Vi),Ue(["y","yy","yyy","yyyy"],He),Ue(["yo"],(function(e,t,n,r){var i;n._locale._eraYearOrdinalRegex&&(i=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[He]=n._locale.eraYearOrdinalParse(e,i):t[He]=parseInt(e,10)})),V(0,["gg",2],0,(function(){return this.weekYear()%100})),V(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),Bi("gggg","weekYear"),Bi("ggggg","weekYear"),Bi("GGGG","isoWeekYear"),Bi("GGGGG","isoWeekYear"),ne("weekYear","gg"),ne("isoWeekYear","GG"),ae("weekYear",1),ae("isoWeekYear",1),Ae("G",De),Ae("g",De),Ae("GG",Oe,ye),Ae("gg",Oe,ye),Ae("GGGG",Se,_e),Ae("gggg",Se,_e),Ae("GGGGG",ke,we),Ae("ggggg",ke,we),Ve(["gggg","ggggg","GGGG","GGGGG"],(function(e,t,n,r){t[r.substr(0,2)]=le(e)})),Ve(["gg","GG"],(function(e,t,n,i){t[i]=r.parseTwoDigitYear(e)})),V("Q",0,"Qo","quarter"),ne("quarter","Q"),ae("quarter",7),Ae("Q",ge),Ue("Q",(function(e,t){t[We]=3*(le(e)-1)})),V("D",["DD",2],"Do","date"),ne("date","D"),ae("date",9),Ae("D",Oe),Ae("DD",Oe,ye),Ae("Do",(function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient})),Ue(["D","DD"],Ke),Ue("Do",(function(e,t){t[Ke]=le(e.match(Oe)[0])}));var $i=he("Date",!0);function Zi(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}V("DDD",["DDDD",3],"DDDo","dayOfYear"),ne("dayOfYear","DDD"),ae("dayOfYear",4),Ae("DDD",Ie),Ae("DDDD",be),Ue(["DDD","DDDD"],(function(e,t,n){n._dayOfYear=le(e)})),V("m",["mm",2],0,"minute"),ne("minute","m"),ae("minute",14),Ae("m",Oe),Ae("mm",Oe,ye),Ue(["m","mm"],Ge);var eo=he("Minutes",!1);V("s",["ss",2],0,"second"),ne("second","s"),ae("second",15),Ae("s",Oe),Ae("ss",Oe,ye),Ue(["s","ss"],ze);var to,no,ro=he("Seconds",!1);for(V("S",0,0,(function(){return~~(this.millisecond()/100)})),V(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),V(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),V(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),V(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),V(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),V(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),ne("millisecond","ms"),ae("millisecond",16),Ae("S",Ie,ge),Ae("SS",Ie,ye),Ae("SSS",Ie,be),to="SSSS";to.length<=9;to+="S")Ae(to,Ce);function io(e,t){t[Qe]=le(1e3*("0."+e))}for(to="S";to.length<=9;to+="S")Ue(to,io);function oo(){return this._isUTC?"UTC":""}function ao(){return this._isUTC?"Coordinated Universal Time":""}no=he("Milliseconds",!1),V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var so=O.prototype;function uo(e){return zn(1e3*e)}function co(){return zn.apply(null,arguments).parseZone()}function lo(e){return e}so.add=Pr,so.calendar=qr,so.clone=Br,so.diff=Qr,so.endOf=mi,so.format=ei,so.from=ti,so.fromNow=ni,so.to=ri,so.toNow=ii,so.get=pe,so.invalidAt=Ii,so.isAfter=Hr,so.isBefore=Wr,so.isBetween=Kr,so.isSame=Yr,so.isSameOrAfter=Gr,so.isSameOrBefore=zr,so.isValid=Ei,so.lang=ai,so.locale=oi,so.localeData=si,so.max=Xn,so.min=Qn,so.parsingFlags=Ti,so.set=ve,so.startOf=vi,so.subtract=Ar,so.toArray=_i,so.toObject=wi,so.toDate=bi,so.toISOString=$r,so.inspect=Zr,"undefined"!==typeof Symbol&&null!=Symbol.for&&(so[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"}),so.toJSON=Oi,so.toString=Jr,so.unix=yi,so.valueOf=gi,so.creationData=Si,so.eraName=ji,so.eraNarrow=Ni,so.eraAbbr=xi,so.eraYear=Pi,so.year=mt,so.isLeapYear=gt,so.weekYear=Hi,so.isoWeekYear=Wi,so.quarter=so.quarters=Ji,so.month=lt,so.daysInMonth=ht,so.week=so.weeks=Ct,so.isoWeek=so.isoWeeks=Dt,so.weeksInYear=Gi,so.weeksInWeekYear=zi,so.isoWeeksInYear=Ki,so.isoWeeksInISOWeekYear=Yi,so.date=$i,so.day=so.days=Wt,so.weekday=Kt,so.isoWeekday=Yt,so.dayOfYear=Zi,so.hour=so.hours=rn,so.minute=so.minutes=eo,so.second=so.seconds=ro,so.millisecond=so.milliseconds=no,so.utcOffset=pr,so.utc=mr,so.local=gr,so.parseZone=yr,so.hasAlignedHourOffset=br,so.isDST=_r,so.isLocal=Or,so.isUtcOffset=Er,so.isUtc=Tr,so.isUTC=Tr,so.zoneAbbr=oo,so.zoneName=ao,so.dates=I("dates accessor is deprecated. Use date instead.",$i),so.months=I("months accessor is deprecated. Use month instead",lt),so.years=I("years accessor is deprecated. Use year instead",mt),so.zone=I("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",vr),so.isDSTShifted=I("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",wr);var ho=x.prototype;function fo(e,t,n,r){var i=gn(),o=p().set(r,t);return i[n](o,e)}function po(e,t,n){if(l(e)&&(t=e,e=void 0),e=e||"",null!=t)return fo(e,t,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=fo(e,r,n,"month");return i}function vo(e,t,n,r){"boolean"===typeof e?(l(t)&&(n=t,t=void 0),t=t||""):(n=t=e,e=!1,l(t)&&(n=t,t=void 0),t=t||"");var i,o=gn(),a=e?o._week.dow:0,s=[];if(null!=n)return fo(t,(n+a)%7,r,"day");for(i=0;i<7;i++)s[i]=fo(t,(i+a)%7,r,"day");return s}function mo(e,t){return po(e,t,"months")}function go(e,t){return po(e,t,"monthsShort")}function yo(e,t,n){return vo(e,t,n,"weekdays")}function bo(e,t,n){return vo(e,t,n,"weekdaysShort")}function _o(e,t,n){return vo(e,t,n,"weekdaysMin")}ho.calendar=A,ho.longDateFormat=Y,ho.invalidDate=z,ho.ordinal=J,ho.preparse=lo,ho.postformat=lo,ho.relativeTime=Z,ho.pastFuture=ee,ho.set=j,ho.eras=ki,ho.erasParse=Ci,ho.erasConvertYear=Di,ho.erasAbbrRegex=Ri,ho.erasNameRegex=Ai,ho.erasNarrowRegex=Mi,ho.months=ot,ho.monthsShort=at,ho.monthsParse=ut,ho.monthsRegex=dt,ho.monthsShortRegex=ft,ho.week=Tt,ho.firstDayOfYear=kt,ho.firstDayOfWeek=St,ho.weekdays=Ut,ho.weekdaysMin=qt,ho.weekdaysShort=Vt,ho.weekdaysParse=Ht,ho.weekdaysRegex=Gt,ho.weekdaysShortRegex=zt,ho.weekdaysMinRegex=Qt,ho.isPM=tn,ho.meridiem=on,pn("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===le(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),r.lang=I("moment.lang is deprecated. Use moment.locale instead.",pn),r.langData=I("moment.langData is deprecated. Use moment.localeData instead.",gn);var wo=Math.abs;function Oo(){var e=this._data;return this._milliseconds=wo(this._milliseconds),this._days=wo(this._days),this._months=wo(this._months),e.milliseconds=wo(e.milliseconds),e.seconds=wo(e.seconds),e.minutes=wo(e.minutes),e.hours=wo(e.hours),e.months=wo(e.months),e.years=wo(e.years),this}function Eo(e,t,n,r){var i=kr(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function To(e,t){return Eo(this,e,t,1)}function Io(e,t){return Eo(this,e,t,-1)}function So(e){return e<0?Math.floor(e):Math.ceil(e)}function ko(){var e,t,n,r,i,o=this._milliseconds,a=this._days,s=this._months,u=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*So(Do(s)+a),a=0,s=0),u.milliseconds=o%1e3,e=ce(o/1e3),u.seconds=e%60,t=ce(e/60),u.minutes=t%60,n=ce(t/60),u.hours=n%24,a+=ce(n/24),s+=i=ce(Co(a)),a-=So(Do(i)),r=ce(s/12),s%=12,u.days=a,u.months=s,u.years=r,this}function Co(e){return 4800*e/146097}function Do(e){return 146097*e/4800}function jo(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if("month"===(e=re(e))||"quarter"===e||"year"===e)switch(t=this._days+r/864e5,n=this._months+Co(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(Do(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return 24*t+r/36e5;case"minute":return 1440*t+r/6e4;case"second":return 86400*t+r/1e3;case"millisecond":return Math.floor(864e5*t)+r;default:throw new Error("Unknown unit "+e)}}function No(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*le(this._months/12):NaN}function xo(e){return function(){return this.as(e)}}var Po=xo("ms"),Ao=xo("s"),Ro=xo("m"),Mo=xo("h"),Lo=xo("d"),Fo=xo("w"),Uo=xo("M"),Vo=xo("Q"),qo=xo("y");function Bo(){return kr(this)}function Ho(e){return e=re(e),this.isValid()?this[e+"s"]():NaN}function Wo(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ko=Wo("milliseconds"),Yo=Wo("seconds"),Go=Wo("minutes"),zo=Wo("hours"),Qo=Wo("days"),Xo=Wo("months"),Jo=Wo("years");function $o(){return ce(this.days()/7)}var Zo=Math.round,ea={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function ta(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function na(e,t,n,r){var i=kr(e).abs(),o=Zo(i.as("s")),a=Zo(i.as("m")),s=Zo(i.as("h")),u=Zo(i.as("d")),c=Zo(i.as("M")),l=Zo(i.as("w")),h=Zo(i.as("y")),f=o<=n.ss&&["s",o]||o<n.s&&["ss",o]||a<=1&&["m"]||a<n.m&&["mm",a]||s<=1&&["h"]||s<n.h&&["hh",s]||u<=1&&["d"]||u<n.d&&["dd",u];return null!=n.w&&(f=f||l<=1&&["w"]||l<n.w&&["ww",l]),(f=f||c<=1&&["M"]||c<n.M&&["MM",c]||h<=1&&["y"]||["yy",h])[2]=t,f[3]=+e>0,f[4]=r,ta.apply(null,f)}function ra(e){return void 0===e?Zo:"function"===typeof e&&(Zo=e,!0)}function ia(e,t){return void 0!==ea[e]&&(void 0===t?ea[e]:(ea[e]=t,"s"===e&&(ea.ss=t-1),!0))}function oa(e,t){if(!this.isValid())return this.localeData().invalidDate();var n,r,i=!1,o=ea;return"object"===typeof e&&(t=e,e=!1),"boolean"===typeof e&&(i=e),"object"===typeof t&&(o=Object.assign({},ea,t),null!=t.s&&null==t.ss&&(o.ss=t.s-1)),r=na(this,!i,o,n=this.localeData()),i&&(r=n.pastFuture(+this,r)),n.postformat(r)}var aa=Math.abs;function sa(e){return(e>0)-(e<0)||+e}function ua(){if(!this.isValid())return this.localeData().invalidDate();var e,t,n,r,i,o,a,s,u=aa(this._milliseconds)/1e3,c=aa(this._days),l=aa(this._months),h=this.asSeconds();return h?(e=ce(u/60),t=ce(e/60),u%=60,e%=60,n=ce(l/12),l%=12,r=u?u.toFixed(3).replace(/\.?0+$/,""):"",i=h<0?"-":"",o=sa(this._months)!==sa(h)?"-":"",a=sa(this._days)!==sa(h)?"-":"",s=sa(this._milliseconds)!==sa(h)?"-":"",i+"P"+(n?o+n+"Y":"")+(l?o+l+"M":"")+(c?a+c+"D":"")+(t||e||u?"T":"")+(t?s+t+"H":"")+(e?s+e+"M":"")+(u?s+r+"S":"")):"P0D"}var ca=or.prototype;return ca.isValid=rr,ca.abs=Oo,ca.add=To,ca.subtract=Io,ca.as=jo,ca.asMilliseconds=Po,ca.asSeconds=Ao,ca.asMinutes=Ro,ca.asHours=Mo,ca.asDays=Lo,ca.asWeeks=Fo,ca.asMonths=Uo,ca.asQuarters=Vo,ca.asYears=qo,ca.valueOf=No,ca._bubble=ko,ca.clone=Bo,ca.get=Ho,ca.milliseconds=Ko,ca.seconds=Yo,ca.minutes=Go,ca.hours=zo,ca.days=Qo,ca.weeks=$o,ca.months=Xo,ca.years=Jo,ca.humanize=oa,ca.toISOString=ua,ca.toString=ua,ca.toJSON=ua,ca.locale=oi,ca.localeData=si,ca.toIsoString=I("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ua),ca.lang=ai,V("X",0,0,"unix"),V("x",0,0,"valueOf"),Ae("x",De),Ae("X",xe),Ue("X",(function(e,t,n){n._d=new Date(1e3*parseFloat(e))})),Ue("x",(function(e,t,n){n._d=new Date(le(e))})),r.version="2.29.1",i(zn),r.fn=so,r.min=$n,r.max=Zn,r.now=er,r.utc=p,r.unix=uo,r.months=mo,r.isDate=h,r.locale=pn,r.invalid=y,r.duration=kr,r.isMoment=E,r.weekdays=yo,r.parseZone=co,r.localeData=gn,r.isDuration=ar,r.monthsShort=go,r.weekdaysMin=_o,r.defineLocale=vn,r.updateLocale=mn,r.locales=yn,r.weekdaysShort=bo,r.normalizeUnits=re,r.relativeTimeRounding=ra,r.relativeTimeThreshold=ia,r.calendarFormat=Vr,r.prototype=so,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}).call(this,n(419)(e))},430:function(e,t,n){"use strict";function r(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return d}));var o,a=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(e,t){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(t<e.logLevel)){var o=(new Date).toISOString(),a=c[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,r(["["+o+"]  "+e.name+":"],n))}},h=function(){function e(e){this.name=e,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(e.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in o))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),e.prototype.setLogLevel=function(e){this._logLevel="string"===typeof e?s[e]:e},Object.defineProperty(e.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],e)),this._logHandler.apply(this,r([this,o.DEBUG],e))},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],e)),this._logHandler.apply(this,r([this,o.VERBOSE],e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],e)),this._logHandler.apply(this,r([this,o.INFO],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],e)),this._logHandler.apply(this,r([this,o.WARN],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],e)),this._logHandler.apply(this,r([this,o.ERROR],e))},e}();function f(e){a.forEach((function(t){t.setLogLevel(e)}))}function d(e,t){for(var n=function(n){var r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:o[n].toLowerCase(),message:s,args:i,type:t.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},439:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=t.Context=void 0;var i=((r=n(0))&&r.__esModule?r:{default:r}).default.createContext(null);t.Context=i;var o=i;t.default=o},460:function(e,t,n){"use strict";var r=n(178),i=n(179);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i(n(0)),a=(0,r(n(180)).default)(o.createElement("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}),"Notifications");t.default=a},467:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=d(n(65)),i=(d(n(13)),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0))),o=d(n(391)),a=d(n(215)),s=n(49),u=n(66),c=n(64),l=n(390),h=d(n(468));function f(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,s,"next",e)}function s(e){p(o,r,i,a,s,"throw",e)}a(void 0)}))}}var m=function(){return"Notification"in window&&"serviceWorker"in navigator&&"PushManager"in window},g=function(e){var t=e.children,n=e.firebaseApp,f=(0,i.useState)(!1),d=f[0],p=f[1],g=(0,c.useIntl)(),y=(0,s.useConfig)().appConfig,b=(0,u.useAuth)().auth,_=(void 0===b?{}:b)||{},w=_.uid,O=_.notificationsDisabled,E=void 0!==O&&O,T=(((y||{}).firebase||{}).messaging||{}).publicVapidKey,I=(0,l.useSnackbar)(),S=I.enqueueSnackbar,k=I.closeSnackbar;(0,i.useEffect)((function(){m()&&"granted"===Notification.permission&&!E&&D()}),[]);var C=function(){var e=v(r.default.mark((function e(t){return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=2;break}return e.abrupt("return");case 2:if(p(t),e.prev=3,!w){e.next=7;break}return e.next=7,n.database().ref("notification_tokens/"+w+"/"+t).set(!0);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),console.warn(e.t0);case 12:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=v(r.default.mark((function e(){var t,o;return r.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.messaging(),T&&t.usePublicVapidKey(T),t.onMessage((function(e){S("",{content:function(t){return i.default.createElement(h.default,{payload:e,id:t})}})})),t.onTokenRefresh((function(){t.getToken().then((function(e){return C(e)})).catch((function(e){console.log("Unable to retrieve refreshed token ",e)}))})),e.prev=4,e.next=7,t.getToken();case 7:return o=e.sent,e.next=10,C(o);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log("Unable to retrieve token ",e.t0);case 15:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(){return e.apply(this,arguments)}}(),j=function(e){return i.default.createElement(i.Fragment,null,i.default.createElement(a.default,{onClick:v(r.default.mark((function t(){return r.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!m()){t.next=6;break}return k(e),t.next=4,Notification.requestPermission();case 4:"granted"===t.sent&&D();case 6:case"end":return t.stop()}}),t)}))),style:{margin:8},variant:"contained",size:"small"},g.formatMessage({id:"enable",defaultMessage:"Enable"})),i.default.createElement(a.default,{onClick:function(){k(e)},size:"small",color:"secondary"},g.formatMessage({id:"no_thanks",defaultMessage:"No, thanks"})))};return i.default.createElement(o.default.Provider,{value:{firebaseApp:n,requestPermission:function(){"Notification"in window?"default"===Notification.permission?S(g.formatMessage({id:"enable_notifications",defaultMessage:"Enable Notifications?"}),{variant:"default",persist:!0,anchorOrigin:{vertical:"top",horizontal:"center"},action:j}):"granted"===Notification.permission&&D():console.log("This browser does not support desktop notification")},token:d}},t)};g.propTypes={};var y=g;t.default=y,e.exports=t.default},468:function(e,t,n){"use strict";var r=n(105);t.__esModule=!0,t.default=void 0;var i=d(n(0)),o=n(181),a=n(390),s=d(n(271)),u=n(250),c=d(n(460)),l=n(22),h=n(161),f=n(211);function d(e){return e&&e.__esModule?e:{default:e}}var p=(0,o.makeStyles)((function(e){var t;return{root:(t={},r(t,e.breakpoints.up("sm"),{minWidth:"344px !important"}),r(t,"maxWidth",400),r(t,"cursor","pointer"),t),card:{width:"100%"}}})),v=i.default.forwardRef((function(e,t){var n=p(),r=(0,l.useHistory)(),d=(0,a.useSnackbar)().closeSnackbar,v=e.payload,m=e.id,g=v.notification||{},y=g.title,b=g.body,_=g.icon,w=g.image,O=g.click_action,E=(0,f.useTheme)().isDarkMode,T=(0,o.createMuiTheme)({palette:{type:E?"light":"dark"}}),I=function(){d(m)},S=function(){var e=new URL(O);r.push(e.pathname),I()};return i.default.createElement(h.ThemeProvider,{theme:T},i.default.createElement(a.SnackbarContent,{ref:t,className:n.root},i.default.createElement(u.Card,{className:n.card},w&&i.default.createElement(u.CardMedia,{onClick:S,style:{height:140},image:w,title:y}),i.default.createElement(u.CardHeader,{avatar:i.default.createElement(u.Avatar,{onClick:S,src:_,"aria-label":"recipe"},i.default.createElement(c.default,null)),action:i.default.createElement(u.IconButton,{onClick:I,style:{zIndex:9999},className:n.expand},i.default.createElement(s.default,null)),title:i.default.createElement("div",{onClick:S},y),subheader:i.default.createElement("div",{onClick:S},b)}))))}));t.default=v,e.exports=t.default},469:function(e,t,n){"use strict";n.r(t);n(574)},497:function(e,t,n){"use strict";n.r(t);var r=n(720);n.d(t,"default",(function(){return r.a}))},498:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=t.Context=void 0;var i=((r=n(0))&&r.__esModule?r:{default:r}).default.createContext(null);t.Context=i;var o=i;t.default=o},499:function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=t.Context=void 0;var i=((r=n(0))&&r.__esModule?r:{default:r}).default.createContext(null);t.Context=i;var o=i;t.default=o},500:function(e,t,n){"use strict";var r=n(105);t.__esModule=!0,t.default=void 0;var i=u(n(65)),o=(u(n(13)),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0))),a=u(n(439));function s(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){c(o,r,i,a,s,"next",e)}function s(e){c(o,r,i,a,s,"throw",e)}a(void 0)}))}}function h(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d="LOADING_CHANGED",p="PROGRESS_CHANGED",v="ERROR",m="DOWNLOAD_URL_CHANGE",g="CLEAR",y="CLEAR_ALL";function b(e,t){var n=t.type,i=t.path,o=t.downloadURL,a=t.isUploading,s=void 0!==a&&a,u=t.error,c=void 0!==u&&u,l=t.hasError,b=void 0!==l&&l,_=t.progress,w=void 0===_?0:_;switch(n){case d:case p:return f({},e,r({},i,f({},e[i],{isUploading:s,progress:w})));case v:return f({},e,r({},i,f({},e[i],{error:c,hasError:b,isUploading:s,progress:w})));case m:return f({},e,r({},i,f({},e[i],{downloadURL:o,isUploading:s,error:c,hasError:b,progress:w})));case g:e[i];return f({},function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,[i].map(h)));case y:return{};default:throw new Error}}var _=function(e){var t=e.children,n=e.firebaseApp,r=(0,o.useReducer)(b,{}),s=r[0],u=r[1],c=(0,o.useCallback)((function(e,t,n){u({type:d,path:e,isUploading:!0,progress:0}),t.on("state_changed",(function(t){var n=t.bytesTransferred/t.totalBytes*100;u({type:p,path:e,isUploading:!0,progress:n})}),(function(t){u({type:v,path:e,isUploading:!1,error:t,hasError:!0})}),l(i.default.mark((function r(){var o;return i.default.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,t.snapshot.ref.getDownloadURL();case 2:o=r.sent,u({type:m,path:e,downloadURL:o,isUploading:!1,progress:100}),n&&n(o,t.snapshot);case 5:case"end":return r.stop()}}),r)}))))}),[]),h=(0,o.useCallback)((function(e,t,r,i,o){var a=n.storage().ref(t).put(r,i);c(e,a,o)}),[n,c]),f=(0,o.useCallback)((function(e,t,r,i,o,a){var s=n.storage().ref(t).putString(r,i);c(e,s,a)}),[n,c]),_=(0,o.useCallback)((function(e,t,n){c(e,t,n)}),[c]),w=(0,o.useCallback)((function(e){return!!s[e]&&s[e].downloadURL}),[s]),O=(0,o.useCallback)((function(e){return!!s[e]&&s[e].isUploading}),[s]),E=(0,o.useCallback)((function(e){return!!s[e]&&s[e].error}),[s]),T=(0,o.useCallback)((function(e){return!!s[e]&&s[e].hasError}),[s]),I=(0,o.useCallback)((function(e){return s[e]?s[e].progress:0}),[s]),S=(0,o.useCallback)((function(e){u({type:g,path:e})}),[]),k=(0,o.useCallback)((function(){u({type:y})}),[]);return o.default.createElement(a.default.Provider,{value:{firebaseApp:n,uploadFile:h,uploadString:f,uploadTask:_,isUploading:O,getDownloadURL:w,clearUpload:S,clearAllUploads:k,hasUploadError:T,getUploadError:E,getUploadProgress:I}},t)};_.propTypes={};var w=_;t.default=w,e.exports=t.default},572:function(e,t,n){"use strict";var r=n(105);t.__esModule=!0,t.default=void 0;s(n(13));var i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=a();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=s(n(498));function a(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return a=function(){return e},e}function s(e){return e&&e.__esModule?e:{default:e}}function u(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var l="LOADING_CHANGED",h="ERROR",f="VALUE_CHANGED",d="CLEAR",p="CLEAR_ALL";function v(e,t){var n=t.type,i=t.path,o=t.value,a=t.isLoading,s=void 0!==a&&a,v=t.error,m=void 0!==v&&v,g=t.hasError,y=void 0!==g&&g;switch(n){case l:return c({},e,r({},i,c({},e[i],{isLoading:s})));case h:return c({},e,r({},i,c({},e[i],{error:m,hasError:y,isLoading:s})));case f:return c({},e,r({},i,c({},e[i],{value:o,isLoading:s,error:m,hasError:y})));case d:e[i];return c({},function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,[i].map(u)));case p:return{};default:throw new Error}}var m={},g=function(e){var t=e.children,n=e.firebaseApp,r=e.persistKey,a=void 0===r?"firebase_docs":r,s=(0,i.useReducer)(v,function(e){var t={};try{t=JSON.parse(localStorage.getItem(e))||{}}catch(n){console.warn(n)}return t}(a)),u=s[0],c=s[1];(0,i.useEffect)((function(){try{localStorage.setItem(a,JSON.stringify(u))}catch(e){console.warn(e)}}),[u,a]);var g=(0,i.useCallback)((function(e){return"string"===typeof e||e instanceof String?n.firestore().doc(e):e}),[n]),y=(0,i.useCallback)((function(e){return"string"===typeof e||e instanceof String?e:n.firestore().doc(e).path}),[]),b=(0,i.useCallback)((function(e,t){var n=g(e),r=t||y(e);if(!(r.length<1)&&!m[r]){c({type:l,path:r,isLoading:!0});var i=n.onSnapshot((function(e){c({type:f,path:r,value:e.data(),isLoading:!1})}),(function(e){c({type:h,path:r,isLoading:!1,error:e,hasError:!0})}));!function(e,t){m[e]=t}(r,i)}}),[y,g]),_=(0,i.useCallback)((function(e){var t=y(e);m[t]&&m[t](),function(e){m[e]=!1}(t)}),[y]),w=(0,i.useCallback)((function(e,t){return u[e]?u[e].value:t}),[u]),O=(0,i.useCallback)((function(e){return!!u[e]&&u[e].isLoading}),[u]),E=(0,i.useCallback)((function(e){return!!u[e]&&u[e].error}),[u]),T=(0,i.useCallback)((function(e){return!!u[e]&&u[e].hasError}),[u]),I=(0,i.useCallback)((function(e){var t=y(e);_(t),c({type:d,path:t})}),[y,_]),S=(0,i.useCallback)((function(){Object.keys(m).map((function(e){return m[e].unsub&&m[e].unsub(),e})),c({type:p})}),[]);return i.default.createElement(o.default.Provider,{value:{firebaseApp:n,watchDoc:b,unwatchDoc:_,getDoc:w,clearDoc:I,clearAllDocs:S,isDocLoading:O,hasDocError:T,getDocError:E}},t)};g.propTypes={};var y=g;t.default=y,e.exports=t.default},573:function(e,t,n){"use strict";var r=n(105),i=n(260);t.__esModule=!0,t.default=void 0;var o=c(n(65)),a=c(n(499)),s=(c(n(13)),function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)));function u(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function c(e){return e&&e.__esModule?e:{default:e}}function l(e,t,n,r,i,o,a){try{var s=e[o](a),u=s.value}catch(c){return void n(c)}s.done?t(u):Promise.resolve(u).then(r,i)}function h(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d="LOADING_CHANGED",p="ERROR",v="CLEAR",m="CLEAR_ALL",g="CHILD_ADDED",y="CHILD_CHANGED",b="CHILD_REMOVED";function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.payload,r=t.type;switch(r){case g:return-1===e.findIndex((function(e){return e.id===n.id}))?[].concat(i(e),[n]):i(e);case y:return e.map((function(e){return n.id===e.id?n:e}));case b:return e.filter((function(e){return n.id!==e.id}))}}function w(e,t){var n=t.type,i=t.path,o=t.value,a=t.isLoading,s=void 0!==a&&a,u=t.error,c=void 0!==u&&u,l=t.hasError,w=void 0!==l&&l;switch(n){case d:return f({},e,r({},i,f({},e[i],{isLoading:s})));case p:return f({},e,r({},i,f({},e[i],{error:c,hasError:w,isLoading:s})));case"VALUE_CHANGED":return f({},e,r({},i,f({},e[i],{value:o,isLoading:s,error:c,hasError:w})));case v:e[i];return f({},function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,[i].map(h)));case g:case y:case b:return f({},e,r({},i,f({},e[i],{value:_(e[i].value,t)})));case m:return{};default:throw new Error}}var O={},E=function(e,t){O[e]=t},T=function(e){O[e]=!1},I=function(e){return"string"===typeof e||e instanceof String?e:e.path},S=function(e){var t=I(e);O[t]&&O[t](),T(t)},k=function(e){var t=e.children,n=e.firebaseApp,r=e.persistKey,i=void 0===r?"firebase_cols":r,u=(0,s.useReducer)(w,function(e){var t={};try{t=JSON.parse(localStorage.getItem(e))||{}}catch(n){console.warn(n)}return t}(i)),c=u[0],h=u[1];(0,s.useEffect)((function(){try{localStorage.setItem(i,JSON.stringify(c))}catch(e){console.warn(e)}}),[c,i]);var f=(0,s.useCallback)((function(e){return"string"===typeof e||e instanceof String?n.firestore().collection(e):e}),[n]),_=(0,s.useCallback)(function(){var e,t=(e=o.default.mark((function e(t,n){var r,i,a,s,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f(t),!((i=n||I(t)).length<1)){e.next=4;break}return e.abrupt("return");case 4:if(!O[i]){e.next=6;break}return e.abrupt("return");case 6:a=function(e){h({type:p,path:i,isLoading:!1,error:e,hasError:!0}),T(i)},s=function(e,t){h({type:t,path:i,payload:{id:e.id,data:e.data()}})},h({type:d,path:i,isLoading:!0});try{u=r.onSnapshot((function(e){E(i,u),h({type:d,path:i,isLoading:!1}),e.docChanges().forEach((function(e){"added"===e.type&&s(e.doc,g),"modified"===e.type&&s(e.doc,y),"removed"===e.type&&s(e.doc,b)}))}),a)}catch(o){a(o)}case 10:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){l(o,r,i,a,s,"next",e)}function s(e){l(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),[f]),k=(0,s.useCallback)((function(e){return c[e]&&c[e].value?c[e].value:[]}),[c]),C=(0,s.useCallback)((function(e){return!!c[e]&&c[e].isLoading}),[c]),D=(0,s.useCallback)((function(e){return!!c[e]&&c[e].error}),[c]),j=(0,s.useCallback)((function(e){return!!c[e]&&c[e].hasError}),[c]),N=(0,s.useCallback)((function(e){var t=f(e),n=I(e);S(t),h({type:v,path:n})}),[f]),x=(0,s.useCallback)((function(){n.database().ref().off(),h({type:m})}),[n]);return s.default.createElement(a.default.Provider,{value:{firebaseApp:n,watchCol:_,unwatchCol:S,getCol:k,clearCol:N,clearAllCols:x,isColLoading:C,hasColError:j,getColError:D}},t)};k.propTypes={};var C=k;t.default=C,e.exports=t.default},574:function(e,t,n){"use strict";(function(e){var t=n(348);(function(){var n,r="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)};var i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}return globalThis}(this);function o(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function a(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:o(e)}}!function(e,t){if(t){var n=i;e=e.split(".");for(var o=0;o<e.length-1;o++){var a=e[o];a in n||(n[a]={}),n=n[a]}(t=t(o=n[e=e[e.length-1]]))!=o&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}("Promise",(function(e){function t(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(n){t.reject(n)}}function n(){this.a=null}function r(e){return e instanceof t?e:new t((function(t){t(e)}))}if(e)return e;n.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c((function(){t.g()}))}this.a.push(e)};var o=i.setTimeout;n.prototype.c=function(e){o(e,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(r){this.f(r)}}}this.a=null},n.prototype.f=function(e){this.c((function(){throw e}))},t.prototype.f=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.m),reject:e(this.g)}},t.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof t)this.s(e);else{e:switch(typeof e){case"object":var n=null!=e;break e;case"function":n=!0;break e;default:n=!1}n?this.v(e):this.h(e)}},t.prototype.v=function(e){var t=void 0;try{t=e.then}catch(n){return void this.g(n)}"function"==typeof t?this.u(t,e):this.h(e)},t.prototype.g=function(e){this.i(2,e)},t.prototype.h=function(e){this.i(1,e)},t.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},t.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)s.b(this.a[e]);this.a=null}};var s=new n;return t.prototype.s=function(e){var t=this.f();e.Qa(t.resolve,t.reject)},t.prototype.u=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(r){n.reject(r)}},t.prototype.then=function(e,n){function r(e,t){return"function"==typeof e?function(t){try{i(e(t))}catch(n){o(n)}}:t}var i,o,a=new t((function(e,t){i=e,o=t}));return this.Qa(r(e,i),r(n,o)),a},t.prototype.catch=function(e){return this.then(void 0,e)},t.prototype.Qa=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},t.resolve=r,t.reject=function(e){return new t((function(t,n){n(e)}))},t.race=function(e){return new t((function(t,n){for(var i=a(e),o=i.next();!o.done;o=i.next())r(o.value).Qa(t,n)}))},t.all=function(e){var n=a(e),i=n.next();return i.done?r([]):new t((function(e,t){function o(t){return function(n){a[t]=n,0==--s&&e(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Qa(o(a.length-1),t),i=n.next()}while(!i.done)}))},t}));var s=s||{},u=this||self,c=/^[\w+/_-]+[=]{0,2}$/,l=null;function h(e){return(e=e.querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&c.test(e)?e:""}function f(){}function d(e){var t=typeof e;return"object"!=t?t:e?Array.isArray(e)?"array":t:"null"}function p(e){var t=d(e);return"array"==t||"object"==t&&"number"==typeof e.length}function v(e){return"function"==d(e)}function m(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function g(e){return Object.prototype.hasOwnProperty.call(e,y)&&e[y]||(e[y]=++b)}var y="closure_uid_"+(1e9*Math.random()>>>0),b=0;function _(e,t,n){return e.call.apply(e.bind,arguments)}function w(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function O(e,t,n){return(O=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:w).apply(null,arguments)}function E(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var T=Date.now;function I(e,t){function n(){}n.prototype=t.prototype,e.ab=t.prototype,e.prototype=new n,e.prototype.constructor=e}function S(e){return e}function k(e,t,n){this.code=j+e,this.message=t||N[e]||"",this.a=n||null}function C(e){var t=e&&e.code;return t?new k(t.substring(j.length),e.message,e.serverResponse):null}I(k,Error),k.prototype.w=function(){var e={code:this.code,message:this.message};return this.a&&(e.serverResponse=this.a),e},k.prototype.toJSON=function(){return this.w()};var D,j="auth/",N={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},x={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(e){for(var t in x)if(x[t].id===e)return{firebaseEndpoint:(e=x[t]).Ta,secureTokenEndpoint:e.Za,identityPlatformEndpoint:e.Wa};return null}function A(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(t){return!1}}function R(e){if(Error.captureStackTrace)Error.captureStackTrace(this,R);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function M(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");R.call(this,n+e[r])}function L(e,t){throw new M("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function F(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function U(e,t){e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}function V(){this.b=this.a=null}D=P("__EID__")?"__EID__":void 0,I(R,Error),R.prototype.name="CustomError",I(M,R),M.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var q=new F((function(){return new H}),(function(e){e.reset()}));function B(){var e=_t,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function H(){this.next=this.b=this.a=null}V.prototype.add=function(e,t){var n=q.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},H.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},H.prototype.reset=function(){this.next=this.b=this.a=null};var W=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},K=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};var Y=Array.prototype.filter?function(e,t){return Array.prototype.filter.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=[],i=0,o="string"===typeof e?e.split(""):e,a=0;a<n;a++)if(a in o){var s=o[a];t.call(void 0,s,a,e)&&(r[i++]=s)}return r},G=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i="string"===typeof e?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},z=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function Q(e,t){return 0<=W(e,t)}function X(e,t){var n;return(n=0<=(t=W(e,t)))&&Array.prototype.splice.call(e,t,1),n}function J(e,t){!function(e,t){for(var n="string"===typeof e?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(e,(function(n,r){t.call(void 0,n,r,e)&&1==Array.prototype.splice.call(e,r,1).length&&0}))}function $(e){return Array.prototype.concat.apply([],arguments)}function Z(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}var ee,te=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ne=/&/g,re=/</g,ie=/>/g,oe=/"/g,ae=/'/g,se=/\x00/g,ue=/[\x00&<>"']/;function ce(e,t){return-1!=e.indexOf(t)}function le(e,t){return e<t?-1:e>t?1:0}e:{var he=u.navigator;if(he){var fe=he.userAgent;if(fe){ee=fe;break e}}ee=""}function de(e){return ce(ee,e)}function pe(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function ve(e){for(var t in e)return!1;return!0}function me(e){var t,n={};for(t in e)n[t]=e[t];return n}var ge="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ye(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ge.length;o++)n=ge[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function be(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break e}}catch(a){}i=null}if(i&&"undefined"!=typeof i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(m(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(a){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;L("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}function _e(e,t){this.a=e===Te&&t||"",this.b=Ee}function we(e){return e instanceof _e&&e.constructor===_e&&e.b===Ee?e.a:(L("expected object of type Const, got '"+e+"'"),"type_error:Const")}_e.prototype.sa=!0,_e.prototype.ra=function(){return this.a},_e.prototype.toString=function(){return"Const{"+this.a+"}"};var Oe,Ee={},Te={};function Ie(){if(void 0===Oe){var e=null,t=u.trustedTypes;if(t&&t.createPolicy){try{e=t.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(n){u.console&&u.console.error(n.message)}Oe=e}else Oe=e}return Oe}function Se(e,t){this.a=t===Ne?e:""}function ke(e){return e instanceof Se&&e.constructor===Se?e.a:(L("expected object of type TrustedResourceUrl, got '"+e+"' of type "+d(e)),"type_error:TrustedResourceUrl")}function Ce(e,t){var n=we(e);if(!je.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(e){var t=Ie();return new Se(e=t?t.createScriptURL(e):e,Ne)}(e=n.replace(De,(function(e,r){if(!Object.prototype.hasOwnProperty.call(t,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(t));return(e=t[r])instanceof _e?we(e):encodeURIComponent(String(e))})))}Se.prototype.sa=!0,Se.prototype.ra=function(){return this.a.toString()},Se.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var De=/%{(\w+)}/g,je=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ne={};function xe(e,t){this.a=t===Ue?e:""}function Pe(e){return e instanceof xe&&e.constructor===xe?e.a:(L("expected object of type SafeUrl, got '"+e+"' of type "+d(e)),"type_error:SafeUrl")}xe.prototype.sa=!0,xe.prototype.ra=function(){return this.a.toString()},xe.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ae=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Re=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Me=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Le(e){if(e instanceof xe)return e;if(e="object"==typeof e&&e.sa?e.ra():String(e),Me.test(e))e=new xe(e,Ue);else{var t=(e=(e=String(e)).replace(/(%0A|%0D)/g,"")).match(Re);e=t&&Ae.test(t[1])?new xe(e,Ue):null}return e}function Fe(e){return e instanceof xe?e:(e="object"==typeof e&&e.sa?e.ra():String(e),Me.test(e)||(e="about:invalid#zClosurez"),new xe(e,Ue))}var Ue={},Ve=new xe("about:invalid#zClosurez",Ue);function qe(e,t,n){this.a=n===Be?e:""}qe.prototype.sa=!0,qe.prototype.ra=function(){return this.a.toString()},qe.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Be={};function He(e,t,n,r){return e=e instanceof xe?e:Fe(e),t=t||u,n=n instanceof _e?we(n):n||"",t.open(Pe(e),n,r,void 0)}function We(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ke(e){return ue.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ne,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(re,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(ie,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(oe,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(ae,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(se,"&#0;"))),e}function Ye(e){return Ye[" "](e),e}Ye[" "]=f;var Ge,ze=de("Opera"),Qe=de("Trident")||de("MSIE"),Xe=de("Edge"),Je=Xe||Qe,$e=de("Gecko")&&!(ce(ee.toLowerCase(),"webkit")&&!de("Edge"))&&!(de("Trident")||de("MSIE"))&&!de("Edge"),Ze=ce(ee.toLowerCase(),"webkit")&&!de("Edge");function et(){var e=u.document;return e?e.documentMode:void 0}e:{var tt="",nt=function(){var e=ee;return $e?/rv:([^\);]+)(\)|;)/.exec(e):Xe?/Edge\/([\d\.]+)/.exec(e):Qe?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Ze?/WebKit\/(\S+)/.exec(e):ze?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(nt&&(tt=nt?nt[1]:""),Qe){var rt=et();if(null!=rt&&rt>parseFloat(tt)){Ge=String(rt);break e}}Ge=tt}var it,ot={};function at(e){return function(e,t){var n=ot;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=te(String(Ge)).split("."),r=te(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=le(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||le(0==a[2].length,0==s[2].length)||le(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(u.document&&Qe){var st=et();it=st||(parseInt(Ge,10)||void 0)}else it=void 0;var ut=it;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(fa){}var ct=!Qe||9<=Number(ut);function lt(e){var t=document;return"string"===typeof e?t.getElementById(e):e}function ht(e,t){pe(t,(function(t,n){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==n?e.style.cssText=t:"class"==n?e.className=t:"for"==n?e.htmlFor=t:pt.hasOwnProperty(n)?e.setAttribute(pt[n],t):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?e.setAttribute(n,t):e[n]=t}))}var ft,dt,pt={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function vt(e,t,n){function r(n){n&&t.appendChild("string"===typeof n?e.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||m(o)&&0<o.nodeType)r(o);else{e:{if(o&&"number"==typeof o.length){if(m(o)){var a="function"==typeof o.item||"string"==typeof o.item;break e}if(v(o)){a="function"==typeof o.item;break e}}a=!1}K(a?Z(o):o,r)}}}function mt(e,t){return t=String(t),"application/xhtml+xml"===e.contentType&&(t=t.toLowerCase()),e.createElement(t)}function gt(e){u.setTimeout((function(){throw e}),0)}function yt(e,t){dt||function(){if(u.Promise&&u.Promise.resolve){var e=u.Promise.resolve(void 0);dt=function(){e.then(wt)}}else dt=function(){var e=wt;!v(u.setImmediate)||u.Window&&u.Window.prototype&&!de("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(ft||(ft=function(){var e=u.MessageChannel;if("undefined"===typeof e&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!de("Presto")&&(e=function(){var e=mt(document,"IFRAME");e.style.display="none",document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=O((function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()}),this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),"undefined"!==typeof e&&!de("Trident")&&!de("MSIE")){var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).Gb;n.Gb=null,e()}},function(e){r.next={Gb:e},r=r.next,t.port2.postMessage(0)}}return function(e){u.setTimeout(e,0)}}()),ft(e)):u.setImmediate(e)}}(),bt||(dt(),bt=!0),_t.add(e,t)}var bt=!1,_t=new V;function wt(){for(var e;e=B();){try{e.a.call(e.b)}catch(t){gt(t)}U(q,e)}bt=!1}function Ot(e,t){if(this.a=Et,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=f)try{var n=this;e.call(t,(function(e){Mt(n,Tt,e)}),(function(e){if(!(e instanceof Ht))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(t){}Mt(n,It,e)}))}catch(r){Mt(this,It,r)}}var Et=0,Tt=2,It=3;function St(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}St.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var kt=new F((function(){return new St}),(function(e){e.reset()}));function Ct(e,t,n){var r=kt.get();return r.g=e,r.b=t,r.f=n,r}function Dt(e){if(e instanceof Ot)return e;var t=new Ot(f);return Mt(t,Tt,e),t}function jt(e){return new Ot((function(t,n){n(e)}))}function Nt(e,t,n){Lt(e,t,n,null)||yt(E(t,e))}function xt(e){return new Ot((function(t){var n=e.length,r=[];if(n)for(var i=function(e,i,o){n--,r[e]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&t(r)},o=0;o<e.length;o++)Nt(e[o],E(i,o,!0),E(i,o,!1));else t(r)}))}function Pt(e,t){if(e.a==Et)if(e.c){var n=e.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==e&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Et&&1==r?Pt(n,t):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ut(n),Vt(n,i,It,t)))}e.c=null}else Mt(e,It,t)}function At(e,t){e.b||e.a!=Tt&&e.a!=It||Ft(e),e.f?e.f.next=t:e.b=t,e.f=t}function Rt(e,t,n,r){var i=Ct(null,null,null);return i.a=new Ot((function(e,o){i.g=t?function(n){try{var i=t.call(r,n);e(i)}catch(a){o(a)}}:e,i.b=n?function(t){try{var i=n.call(r,t);void 0===i&&t instanceof Ht?o(t):e(i)}catch(a){o(a)}}:o})),i.a.c=e,At(e,i),i.a}function Mt(e,t,n){e.a==Et&&(e===n&&(t=It,n=new TypeError("Promise cannot resolve to itself")),e.a=1,Lt(n,e.$c,e.ad,e)||(e.i=n,e.a=t,e.c=null,Ft(e),t!=It||n instanceof Ht||function(e,t){e.g=!0,yt((function(){e.g&&Bt.call(null,t)}))}(e,n)))}function Lt(e,t,n,r){if(e instanceof Ot)return At(e,Ct(t||f,n||null,r)),!0;if(A(e))return e.then(t,n,r),!0;if(m(e))try{var i=e.then;if(v(i))return function(e,t,n,r,i){function o(e){s||(s=!0,r.call(i,e))}function a(e){s||(s=!0,n.call(i,e))}var s=!1;try{t.call(e,a,o)}catch(u){o(u)}}(e,i,t,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Ft(e){e.h||(e.h=!0,yt(e.gc,e))}function Ut(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function Vt(e,t,n,r){if(n==It&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,qt(t,n,r);else try{t.c?t.g.call(t.f):qt(t,n,r)}catch(i){Bt.call(null,i)}U(kt,t)}function qt(e,t,n){t==Tt?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}Ot.prototype.then=function(e,t,n){return Rt(this,v(e)?e:null,v(t)?t:null,n)},Ot.prototype.$goog_Thenable=!0,(n=Ot.prototype).oa=function(e,t){return(e=Ct(e,e,t)).c=!0,At(this,e),this},n.o=function(e,t){return Rt(this,null,e,t)},n.cancel=function(e){if(this.a==Et){var t=new Ht(e);yt((function(){Pt(this,t)}),this)}},n.$c=function(e){this.a=Et,Mt(this,Tt,e)},n.ad=function(e){this.a=Et,Mt(this,It,e)},n.gc=function(){for(var e;e=Ut(this);)Vt(this,e,this.a,this.i);this.h=!1};var Bt=gt;function Ht(e){R.call(this,e)}function Wt(){0!=Kt&&(Yt[g(this)]=this),this.xa=this.xa,this.pa=this.pa}I(Ht,R),Ht.prototype.name="cancel";var Kt=0,Yt={};function Gt(e){if(!e.xa&&(e.xa=!0,e.Da(),0!=Kt)){var t=g(e);if(0!=Kt&&e.pa&&0<e.pa.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Yt[t]}}Wt.prototype.xa=!1,Wt.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var zt=Object.freeze||function(e){return e},Qt=!Qe||9<=Number(ut),Xt=Qe&&!at("9"),Jt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{u.addEventListener("test",f,t),u.removeEventListener("test",f,t)}catch(n){}return e}();function $t(e,t){this.type=e,this.b=this.target=t,this.defaultPrevented=!1}function Zt(e,t){if($t.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if($e){e:{try{Ye(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:en[e.pointerType]||"",this.a=e,e.defaultPrevented&&this.preventDefault()}}$t.prototype.preventDefault=function(){this.defaultPrevented=!0},I(Zt,$t);var en=zt({2:"touch",3:"pen",4:"mouse"});Zt.prototype.preventDefault=function(){Zt.ab.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Xt)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}},Zt.prototype.g=function(){return this.a};var tn="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Va=i,this.key=++nn,this.va=this.Pa=!1}function on(e){e.va=!0,e.listener=null,e.proxy=null,e.src=null,e.Va=null}function an(e){this.src=e,this.a={},this.b=0}function sn(e,t){var n=t.type;n in e.a&&X(e.a[n],t)&&(on(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function un(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.va&&o.listener==t&&o.capture==!!n&&o.Va==r)return i}return-1}an.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=un(e,t,r,i);return-1<a?(t=e[a],n||(t.Pa=!1)):((t=new rn(t,this.src,o,!!r,i)).Pa=n,e.push(t)),t};var cn="closure_lm_"+(1e6*Math.random()|0),ln={};function hn(e,t,n,r,i){if(r&&r.once)dn(e,t,n,r,i);else if(Array.isArray(t))for(var o=0;o<t.length;o++)hn(e,t[o],n,r,i);else n=On(n),e&&e[tn]?Tn(e,t,n,m(r)?!!r.capture:!!r,i):fn(e,t,n,!1,r,i)}function fn(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=m(i)?!!i.capture:!!i,s=_n(e);if(s||(e[cn]=s=new an(e)),!(n=s.add(t,n,r,a,o)).proxy){if(r=function(){var e=bn,t=Qt?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Jt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(mn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function dn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)dn(e,t[o],n,r,i);else n=On(n),e&&e[tn]?In(e,t,n,m(r)?!!r.capture:!!r,i):fn(e,t,n,!0,r,i)}function pn(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)pn(e,t[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=On(n),e&&e[tn]?(e=e.v,(t=String(t).toString())in e.a&&(-1<(n=un(o=e.a[t],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=_n(e))&&(t=e.a[t.toString()],e=-1,t&&(e=un(t,n,r,i)),(n=-1<e?t[e]:null)&&vn(n))}function vn(e){if("number"!==typeof e&&e&&!e.va){var t=e.src;if(t&&t[tn])sn(t.v,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(mn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_n(t))?(sn(n,e),0==n.b&&(n.src=null,t[cn]=null)):on(e)}}}function mn(e){return e in ln?ln[e]:ln[e]="on"+e}function gn(e,t,n,r){var i=!0;if((e=_n(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.va&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(e,t){var n=e.listener,r=e.Va||e.src;return e.Pa&&vn(e),n.call(r,t)}function bn(e,t){if(e.va)return!0;if(!Qt){if(!t)e:{t=["window","event"];for(var n=u,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Zt(r=t,this),n=!0,!(0>r.keyCode||void 0!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(a){i=!0}(i||void 0==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=gn(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=gn(r[i],e,!1,t),n=n&&o}return n}return yn(e,new Zt(t,this))}function _n(e){return(e=e[cn])instanceof an?e:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function On(e){return v(e)?e:(e[wn]||(e[wn]=function(t){return e.handleEvent(t)}),e[wn])}function En(){Wt.call(this),this.v=new an(this),this.ac=this,this.gb=null}function Tn(e,t,n,r,i){e.v.add(String(t),n,!1,r,i)}function In(e,t,n,r,i){e.v.add(String(t),n,!0,r,i)}function Sn(e,t,n,r){if(!(t=e.v.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Va||a.src;a.Pa&&sn(e.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function kn(e,t,n){if(v(e))n&&(e=O(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=O(e.handleEvent,e)}return 2147483647<Number(t)?-1:u.setTimeout(e,t||0)}function Cn(e){var t=null;return new Ot((function(n,r){-1==(t=kn((function(){n(void 0)}),e))&&r(Error("Failed to schedule timer."))})).o((function(e){throw u.clearTimeout(t),e}))}function Dn(e){if(e.W&&"function"==typeof e.W)return e.W();if("string"===typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function jn(e){if(e.Y&&"function"==typeof e.Y)return e.Y();if(!e.W||"function"!=typeof e.W){if(p(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function Nn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Nn)for(n=e.Y(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function xn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];Pn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)Pn(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function Pn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}I(En,Wt),En.prototype[tn]=!0,En.prototype.addEventListener=function(e,t,n,r){hn(this,e,t,n,r)},En.prototype.removeEventListener=function(e,t,n,r){pn(this,e,t,n,r)},En.prototype.dispatchEvent=function(e){var t,n=this.gb;if(n)for(t=[];n;n=n.gb)t.push(n);n=this.ac;var r=e.type||e;if("string"===typeof e)e=new $t(e,n);else if(e instanceof $t)e.target=e.target||n;else{var i=e;ye(e=new $t(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=Sn(a,r,!0,e)&&i}if(i=Sn(a=e.b=n,r,!0,e)&&i,i=Sn(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Sn(a=e.b=t[o],r,!1,e)&&i;return i},En.prototype.Da=function(){if(En.ab.Da.call(this),this.v){var e,t=this.v;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)on(n[r]);delete t.a[e],t.b--}}this.gb=null},(n=Nn.prototype).W=function(){xn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},n.Y=function(){return xn(this),this.a.concat()},n.clear=function(){this.b={},this.c=this.a.length=0},n.get=function(e,t){return Pn(this.b,e)?this.b[e]:t},n.set=function(e,t){Pn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},n.forEach=function(e,t){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var An=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(e,t){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,e instanceof Rn?(this.i=void 0!==t?t:e.i,Mn(this,e.c),this.l=e.l,this.a=e.a,Ln(this,e.g),this.f=e.f,Fn(this,rr(e.b)),this.h=e.h):e&&(n=String(e).match(An))?(this.i=!!t,Mn(this,n[1]||"",!0),this.l=Hn(n[2]||""),this.a=Hn(n[3]||"",!0),Ln(this,n[4]),this.f=Hn(n[5]||"",!0),Fn(this,n[6]||"",!0),this.h=Hn(n[7]||"")):(this.i=!!t,this.b=new Jn(null,this.i))}function Mn(e,t,n){e.c=n?Hn(t,!0):t,e.c&&(e.c=e.c.replace(/:$/,""))}function Ln(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.g=t}else e.g=null}function Fn(e,t,n){t instanceof Jn?(e.b=t,function(e,t){t&&!e.f&&($n(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(er(this,t),nr(this,n,e))}),e)),e.f=t}(e.b,e.i)):(n||(t=Wn(t,Qn)),e.b=new Jn(t,e.i))}function Un(e,t,n){e.b.set(t,n)}function Vn(e,t){return e.b.get(t)}function qn(e){return e instanceof Rn?new Rn(e):new Rn(e,void 0)}function Bn(e,t,n,r){var i=new Rn(null,void 0);return e&&Mn(i,e),t&&(i.a=t),n&&Ln(i,n),r&&(i.f=r),i}function Hn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Wn(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Kn),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Kn(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Rn.prototype.toString=function(){var e=[],t=this.c;t&&e.push(Wn(t,Yn,!0),":");var n=this.a;return(n||"file"==t)&&(e.push("//"),(t=this.l)&&e.push(Wn(t,Yn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&e.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&e.push("/"),e.push(Wn(n,"/"==n.charAt(0)?zn:Gn,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.h)&&e.push("#",Wn(n,Xn)),e.join("")},Rn.prototype.resolve=function(e){var t=new Rn(this),n=!!e.c;n?Mn(t,e.c):n=!!e.l,n?t.l=e.l:n=!!e.a,n?t.a=e.a:n=null!=e.g;var r=e.f;if(n)Ln(t,e.g);else if(n=!!e.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=t.f.lastIndexOf("/");-1!=i&&(r=t.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ce(i,"./")||ce(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.f=r:n=""!==e.b.toString(),n?Fn(t,rr(e.b)):n=!!e.h,n&&(t.h=e.h),t};var Yn=/[#\/\?@]/g,Gn=/[#\?:]/g,zn=/[#\?]/g,Qn=/[#\?@]/g,Xn=/#/g;function Jn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function $n(e){e.a||(e.a=new Nn,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Zn(e){var t=jn(e);if("undefined"==typeof t)throw Error("Keys are undefined");var n=new Jn(null,void 0);e=Dn(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function er(e,t){$n(e),t=ir(e,t),Pn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,Pn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&xn(e)))}function tr(e,t){return $n(e),t=ir(e,t),Pn(e.a.b,t)}function nr(e,t,n){er(e,t),0<n.length&&(e.c=null,e.a.set(ir(e,t),Z(n)),e.b+=n.length)}function rr(e){var t=new Jn;return t.c=e.c,e.a&&(t.a=new Nn(e.a),t.b=e.b),t}function ir(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function or(e){var t=[];return sr(new ar,e,t),t.join("")}function ar(){}function sr(e,t,n){if(null==t)n.push("null");else{if("object"==typeof t){if(Array.isArray(t)){var r=t;t=r.length,n.push("[");for(var i="",o=0;o<t;o++)n.push(i),sr(e,r[o],n),i=",";return void n.push("]")}if(!(t instanceof String||t instanceof Number||t instanceof Boolean)){for(r in n.push("{"),i="",t)Object.prototype.hasOwnProperty.call(t,r)&&("function"!=typeof(o=t[r])&&(n.push(i),lr(r,n),n.push(":"),sr(e,o,n),i=","));return void n.push("}")}t=t.valueOf()}switch(typeof t){case"string":lr(t,n);break;case"number":n.push(isFinite(t)&&!isNaN(t)?String(t):"null");break;case"boolean":n.push(String(t));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof t)}}}(n=Jn.prototype).add=function(e,t){$n(this),this.c=null,e=ir(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},n.clear=function(){this.a=this.c=null,this.b=0},n.forEach=function(e,t){$n(this),this.a.forEach((function(n,r){K(n,(function(n){e.call(t,n,r,this)}),this)}),this)},n.Y=function(){$n(this);for(var e=this.a.W(),t=this.a.Y(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},n.W=function(e){$n(this);var t=[];if("string"===typeof e)tr(this,e)&&(t=$(t,this.a.get(ir(this,e))));else{e=this.a.W();for(var n=0;n<e.length;n++)t=$(t,e[n])}return t},n.set=function(e,t){return $n(this),this.c=null,tr(this,e=ir(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},n.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.Y(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.W(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function lr(e,t){t.push('"',e.replace(cr,(function(e){var t=ur[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),ur[e]=t),t})),'"')}function hr(){var e=Nr();return Qe&&!!ut&&11==ut||/Edge\/\d+/.test(e)}function fr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function dr(e,t){t=t||u.window;var n="about:blank";e&&(n=Pe(Le(e)||Ve)),t.location.href=n}function pr(e,t){var n,r=[];for(n in e)n in t?typeof e[n]!=typeof t[n]?r.push(n):"object"==typeof e[n]&&null!=e[n]&&null!=t[n]?0<pr(e[n],t[n]).length&&r.push(n):e[n]!==t[n]&&r.push(n):r.push(n);for(n in t)n in e||r.push(n);return r}function vr(e){return!!((e=(e||Nr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function mr(e){e=e||u.window;try{e.close()}catch(t){}}function gr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Nr().toLowerCase(),r&&(t.target=r,ce(n,"crios/")&&(t.target="_blank")),Cr(Nr())==Sr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof xe?n:Le("undefined"!=typeof n.href?n.href:String(n))||Ve,n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((de("iPhone")&&!de("iPod")&&!de("iPad")||de("iPad")||de("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(be(a=mt(document,"A"),"HTMLAnchorElement"),t=t instanceof xe?t:Fe(t),a.href=Pe(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=He("",r,n,a),e=Pe(t),a&&(Je&&ce(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ke(e)+'">',e=new qe(e=(r=Ie())?r.createHTML(e):e,null,Be),r=a.document)&&(r.write(function(e){return e instanceof qe&&e.constructor===qe?e.a:(L("expected object of type SafeHtml, got '"+e+"' of type "+d(e)),"type_error:SafeHtml")}(e)),r.close())):(a=He(t,r,n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,br=/^[^@]+@[^@]+$/;function _r(){var e=null;return new Ot((function(t){"complete"==u.document.readyState?t():(e=function(){t()},dn(window,"load",e))})).o((function(t){throw pn(window,"load",e),t}))}function wr(e){return e=e||Nr(),!("file:"!==Mr()&&"ionic:"!==Mr()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Or(){var e=u.window;try{return!(!e||e==e.top)}catch(t){return!1}}function Er(){return"undefined"!==typeof u.WorkerGlobalScope&&"function"===typeof u.importScripts}function Tr(){return t.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":t.a.INTERNAL.hasOwnProperty("node")?"Node":Er()?"Worker":"Browser"}function Ir(){var e=Tr();return"ReactNative"===e||"Node"===e}var Sr="Firefox",kr="Chrome";function Cr(e){var t=e.toLowerCase();return ce(t,"opera/")||ce(t,"opr/")||ce(t,"opios/")?"Opera":ce(t,"iemobile")?"IEMobile":ce(t,"msie")||ce(t,"trident/")?"IE":ce(t,"edge/")?"Edge":ce(t,"firefox/")?Sr:ce(t,"silk/")?"Silk":ce(t,"blackberry")?"Blackberry":ce(t,"webos")?"Webos":!ce(t,"safari/")||ce(t,"chrome/")||ce(t,"crios/")||ce(t,"android")?!ce(t,"chrome/")&&!ce(t,"crios/")||ce(t,"edge/")?ce(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":kr:"Safari"}var Dr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function jr(e,t){t=t||[];var n,r=[],i={};for(n in Dr)i[Dr[n]]=!0;for(n=0;n<t.length;n++)"undefined"!==typeof i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=Tr())?r=Cr(i=Nr()):"Worker"===r&&(r=Cr(i=Nr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function Nr(){return u.navigator&&u.navigator.userAgent||""}function xr(e,t){e=e.split("."),t=t||u;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function Pr(){try{var e=u.localStorage,t=qr();if(e)return e.setItem(t,"1"),e.removeItem(t),!hr()||!!u.indexedDB}catch(n){return Er()&&!!u.indexedDB}return!1}function Ar(){return(Rr()||"chrome-extension:"===Mr()||wr())&&!Ir()&&Pr()&&!Er()}function Rr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return u.location&&u.location.protocol||null}function Lr(e){return!vr(e=e||Nr())&&Cr(e)!=Sr}function Fr(e){return"undefined"===typeof e?null:or(e)}function Ur(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Vr(e){if(null!==e)return JSON.parse(e)}function qr(e){return e||Math.floor(1e9*Math.random()).toString()}function Br(e){return"Safari"!=Cr(e=e||Nr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Hr(){var e=u.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Wr(e,t){if(e>t)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=Nr(),t=Tr(),this.b=vr(e)||"ReactNative"===t}function Kr(){var e=u.document;return!e||"undefined"===typeof e.visibilityState||"visible"==e.visibilityState}function Yr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(n){}return null}function Gr(){return!(!xr("fireauth.oauthhelper",u)&&!xr("fireauth.iframe",u))}Wr.prototype.get=function(){var e=u.navigator;return!e||"boolean"!==typeof e.onLine||!Rr()&&"chrome-extension:"!==Mr()&&"undefined"===typeof e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var zr,Qr={};function Xr(e){Qr[e]||(Qr[e]=!0,"undefined"!==typeof console&&"function"===typeof console.warn&&console.warn(e))}try{var Jr={};Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Jr,"abcd",{configurable:!0,enumerable:!0,value:2}),zr=2==Jr.abcd}catch(fa){zr=!1}function $r(e,t,n){zr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Zr(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&$r(e,n,t[n])}function ei(e){var t={};return Zr(t,e),t}function ti(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)$r(t,n,ti(e[n]));return t}function ni(e){var t=e&&(e[si]?"phone":null);if(!(t&&e&&e[ai]))throw new k("internal-error","Internal assert: invalid MultiFactorInfo object");$r(this,"uid",e[ai]),$r(this,"displayName",e[ii]||null);var n=null;e[oi]&&(n=new Date(e[oi]).toUTCString()),$r(this,"enrollmentTime",n),$r(this,"factorId",t)}function ri(e){try{var t=new ui(e)}catch(n){t=null}return t}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",ai="mfaEnrollmentId",si="phoneInfo";function ui(e){ni.call(this,e),$r(this,"phoneNumber",e[si])}function ci(e){var t={},n=e[di],r=e[vi],i=e[mi];if(e=ri(e[pi]),!i||i!=hi&&i!=fi&&!n||i==fi&&!r||i==li&&!e)throw Error("Invalid checkActionCode response!");i==fi?(t[yi]=n||null,t[_i]=n||null,t[gi]=r):(t[yi]=r||null,t[_i]=r||null,t[gi]=n||null),t[bi]=e||null,$r(this,Oi,i),$r(this,wi,ti(t))}I(ui,ni),ui.prototype.w=function(){var e=ui.ab.w.call(this);return e.phoneNumber=this.phoneNumber,e};var li="REVERT_SECOND_FACTOR_ADDITION",hi="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",di="email",pi="mfaInfo",vi="newEmail",mi="requestType",gi="email",yi="fromEmail",bi="multiFactorInfo",_i="previousEmail",wi="data",Oi="operation";function Ei(e){var t=Vn(e=qn(e),Ti)||null,n=Vn(e,Ii)||null,r=Vn(e,Ci)||null;if(r=r&&ji[r]||null,!t||!n||!r)throw new k("argument-error",Ti+", "+Ii+"and "+Ci+" are required in a valid action code URL.");Zr(this,{apiKey:t,operation:r,code:n,continueUrl:Vn(e,Si)||null,languageCode:Vn(e,ki)||null,tenantId:Vn(e,Di)||null})}var Ti="apiKey",Ii="oobCode",Si="continueUrl",ki="languageCode",Ci="mode",Di="tenantId",ji={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:li,signIn:hi,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function Ni(e){try{return new Ei(e)}catch(t){return null}}function xi(e){var t=e[Li];if("undefined"===typeof t)throw new k("missing-continue-uri");if("string"!==typeof t||"string"===typeof t&&!t.length)throw new k("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[Pi];if(n&&"object"===typeof n){t=n[Vi];var r=n[Fi];if(n=n[Ui],"string"===typeof t&&t.length){if(this.a=t,"undefined"!==typeof r&&"boolean"!==typeof r)throw new k("argument-error",Fi+" property must be a boolean when specified.");if(this.g=!!r,"undefined"!==typeof n&&("string"!==typeof n||"string"===typeof n&&!n.length))throw new k("argument-error",Ui+" property must be a non empty string when specified.");this.b=n||null}else{if("undefined"!==typeof t)throw new k("argument-error",Vi+" property must be a non empty string when specified.");if("undefined"!==typeof r||"undefined"!==typeof n)throw new k("missing-android-pkg-name")}}else if("undefined"!==typeof n)throw new k("argument-error",Pi+" property must be a non null object when specified.");if(this.f=null,(t=e[Mi])&&"object"===typeof t){if("string"===typeof(t=t[qi])&&t.length)this.f=t;else if("undefined"!==typeof t)throw new k("argument-error",qi+" property must be a non empty string when specified.")}else if("undefined"!==typeof t)throw new k("argument-error",Mi+" property must be a non null object when specified.");if("undefined"!==typeof(t=e[Ri])&&"boolean"!==typeof t)throw new k("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!t,"undefined"!==typeof(e=e[Ai])&&("string"!==typeof e||"string"===typeof e&&!e.length))throw new k("argument-error",Ai+" property must be a non empty string when specified.");this.i=e||null}var Pi="android",Ai="dynamicLinkDomain",Ri="handleCodeInApp",Mi="iOS",Li="url",Fi="installApp",Ui="minimumVersion",Vi="packageName",qi="bundleId";function Bi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var Hi=null;function Wi(e){var t=[];return function(e,t){function n(t){for(;r<e.length;){var n=e.charAt(r++),i=Hi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return t}!function(){if(!Hi){Hi={};for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),t=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=e.concat(t[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Hi[o]&&(Hi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;t(i<<2|o>>4),64!=a&&(t(o<<4&240|a>>2),64!=s&&t(a<<6&192|s))}}(e,(function(e){t.push(e)})),t}function Ki(e){var t=Gi(e);if(!(t&&t.sub&&t.iss&&t.aud&&t.exp))throw Error("Invalid JWT");this.h=e,this.a=t.exp,this.i=t.sub,e=Date.now()/1e3,this.g=t.iat||(e>this.a?this.a:e),this.b=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.f=t.firebase&&t.firebase.tenant||null,this.c=!!t.is_anonymous||"anonymous"==this.b}function Yi(e){try{return new Ki(e)}catch(t){return null}}function Gi(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{var r=Wi(e);for(e=[],n=t=0;t<r.length;){var i=r[t++];if(128>i)e[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[t++];e[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[t++];var a=r[t++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[t++])-65536;e[n++]=String.fromCharCode(55296+(s>>10)),e[n++]=String.fromCharCode(56320+(1023&s))}else o=r[t++],a=r[t++],e[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(e.join(""))}catch(u){}return null}Ki.prototype.T=function(){return this.f},Ki.prototype.l=function(){return this.c},Ki.prototype.toString=function(){return this.h};var zi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Qi=["client_id","response_type","scope","redirect_uri","state"],Xi={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Qi},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Qi},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Qi},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:zi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Ji(e){for(var t in Xi)if(Xi[t].fa==e)return Xi[t];return null}function $i(e){var t={};t["facebook.com"]=ro,t["google.com"]=oo,t["github.com"]=io,t["twitter.com"]=ao;var n=e&&e[eo];try{if(n)return t[n]?new t[n](e):new no(e);if("undefined"!==typeof e[Zi])return new to(e)}catch(r){}return null}var Zi="idToken",eo="providerId";function to(e){var t=e[eo];if(!t&&e[Zi]){var n=Yi(e[Zi]);n&&n.b&&(t=n.b)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,"undefined"!==typeof e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),$r(this,"providerId",t),$r(this,"isNewUser",n)}function no(e){to.call(this,e),$r(this,"profile",ti((e=Vr(e.rawUserInfo||"{}"))||{}))}function ro(e){if(no.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(e){if(no.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",this.profile&&this.profile.login||null)}function oo(e){if(no.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(e){if(no.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");$r(this,"username",e.screenName||null)}function so(e){var t=qn(e),n=Vn(t,"link"),r=Vn(qn(n),"link");return t=Vn(t,"deep_link_id"),Vn(qn(t),"link")||t||r||n||e}function uo(e,t){if(!e&&!t)throw new k("internal-error","Internal assert: no raw session string available");if(e&&t)throw new k("internal-error","Internal assert: unable to determine the session type");this.a=e||null,this.b=t||null,this.type=this.a?co:lo}I(no,to),I(ro,no),I(io,no),I(oo,no),I(ao,no);var co="enroll",lo="signin";function ho(){}function fo(e,t){return e.then((function(e){if(e[ns]){var n=Yi(e[ns]);if(!n||t!=n.i)throw new k("user-mismatch");return e}throw new k("user-mismatch")})).o((function(e){throw e&&e.code&&e.code==j+"user-not-found"?new k("user-mismatch"):e}))}function po(e,t){if(!t)throw new k("internal-error","failed to construct a credential");this.a=t,$r(this,"providerId",e),$r(this,"signInMethod",e)}function vo(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function mo(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new po(e.providerId,e.pendingToken)}catch(t){}return null}function go(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&$r(this,"idToken",t.idToken),t.accessToken&&$r(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&$r(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new k("internal-error","failed to construct a credential");$r(this,"accessToken",t.oauthToken),$r(this,"secret",t.oauthTokenSecret)}$r(this,"providerId",e),$r(this,"signInMethod",n)}function yo(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Zn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function bo(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new go(e.providerId,t,e.signInMethod)}catch(n){}}return null}function _o(e,t){this.Qc=t||[],Zr(this,{providerId:e,isOAuthProvider:!0}),this.Ib={},this.pb=(Ji(e)||{}).Ja||null,this.ob=null}function wo(e){if("string"!==typeof e||0!=e.indexOf("saml."))throw new k("argument-error",'SAML provider IDs must be prefixed with "saml."');_o.call(this,e,[])}function Oo(e){_o.call(this,e,Qi),this.a=[]}function Eo(){Oo.call(this,"facebook.com")}function To(e){if(!e)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new Eo).credential({accessToken:t})}function Io(){Oo.call(this,"github.com")}function So(e){if(!e)throw new k("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return m(e)&&(t=e.accessToken),(new Io).credential({accessToken:t})}function ko(){Oo.call(this,"google.com"),this.Ca("profile")}function Co(e,t){var n=e;return m(e)&&(n=e.idToken,t=e.accessToken),(new ko).credential({idToken:n,accessToken:t})}function Do(){_o.call(this,"twitter.com",zi)}function jo(e,t){var n=e;if(m(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new k("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new go("twitter.com",n,"twitter.com")}function No(e,t,n){this.a=e,this.f=t,$r(this,"providerId","password"),$r(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function xo(e){return e&&e.email&&e.password?new No(e.email,e.password,e.signInMethod):null}function Po(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Ao(e,t){if(!(t=Ro(t)))throw new k("argument-error","Invalid email link!");return new No(e,t.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(e){return(e=Ni(e=so(e)))&&e.operation===hi?e:null}function Mo(e){if(!(e.eb&&e.cb||e.La&&e.ea))throw new k("internal-error");this.a=e,$r(this,"providerId","phone"),this.fa="phone",$r(this,"signInMethod","phone")}function Lo(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var t={};return K(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){e[n]&&(t[n]=e[n])})),new Mo(t)}return null}function Fo(e){return e.a.La&&e.a.ea?{temporaryProof:e.a.La,phoneNumber:e.a.ea}:{sessionInfo:e.a.eb,code:e.a.cb}}function Uo(e){try{this.a=e||t.a.auth()}catch(n){throw new k("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function Vo(e,t){if(!e)throw new k("missing-verification-id");if(!t)throw new k("missing-verification-code");return new Mo({eb:e,cb:t})}function qo(e){if(e.temporaryProof&&e.phoneNumber)return new Mo({La:e.temporaryProof,ea:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return Co(o,n);case"facebook.com":return To(n);case"github.com":return So(n);case"twitter.com":return jo(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new po(t,a):new go(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Oo(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Bo(e){if(!e.isOAuthProvider)throw new k("invalid-oauth-provider")}function Ho(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new k("invalid-auth-event");if(this.g&&this.a)throw new k("invalid-auth-event");if(this.g&&!this.f)throw new k("invalid-auth-event")}function Wo(e){return(e=e||{}).type?new Ho(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&C(e.error),e.postBody,e.tenantId):null}function Ko(){this.b=null,this.a=[]}uo.prototype.Ha=function(){return this.a?Dt(this.a):Dt(this.b)},uo.prototype.w=function(){return this.type==co?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ho.prototype.ka=function(){},ho.prototype.b=function(){},ho.prototype.c=function(){},ho.prototype.w=function(){},po.prototype.ka=function(e){return Ts(e,vo(this))},po.prototype.b=function(e,t){var n=vo(this);return n.idToken=t,Is(e,n)},po.prototype.c=function(e,t){return fo(Ss(e,vo(this)),t)},po.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},go.prototype.ka=function(e){return Ts(e,yo(this))},go.prototype.b=function(e,t){var n=yo(this);return n.idToken=t,Is(e,n)},go.prototype.c=function(e,t){return fo(Ss(e,yo(this)),t)},go.prototype.w=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},_o.prototype.Ka=function(e){return this.Ib=me(e),this},I(wo,_o),I(Oo,_o),Oo.prototype.Ca=function(e){return Q(this.a,e)||this.a.push(e),this},Oo.prototype.Qb=function(){return Z(this.a)},Oo.prototype.credential=function(e,t){var n;if(!(n=m(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new k("argument-error","credential failed: must provide the ID token and/or the access token.");return new go(this.providerId,n,this.providerId)},I(Eo,Oo),$r(Eo,"PROVIDER_ID","facebook.com"),$r(Eo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),I(Io,Oo),$r(Io,"PROVIDER_ID","github.com"),$r(Io,"GITHUB_SIGN_IN_METHOD","github.com"),I(ko,Oo),$r(ko,"PROVIDER_ID","google.com"),$r(ko,"GOOGLE_SIGN_IN_METHOD","google.com"),I(Do,_o),$r(Do,"PROVIDER_ID","twitter.com"),$r(Do,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ka=function(e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?su(e,As,{email:this.a,oobCode:this.f}):su(e,nu,{email:this.a,password:this.f})},No.prototype.b=function(e,t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?su(e,Rs,{idToken:t,email:this.a,oobCode:this.f}):su(e,zs,{idToken:t,email:this.a,password:this.f})},No.prototype.c=function(e,t){return fo(this.ka(e),t)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Po,{PROVIDER_ID:"password"}),Zr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Mo.prototype.ka=function(e){return e.fb(Fo(this))},Mo.prototype.b=function(e,t){var n=Fo(this);return n.idToken=t,su(e,iu,n)},Mo.prototype.c=function(e,t){var n=Fo(this);return n.operation="REAUTH",fo(e=su(e,ou,n),t)},Mo.prototype.w=function(){var e={providerId:"phone"};return this.a.eb&&(e.verificationId=this.a.eb),this.a.cb&&(e.verificationCode=this.a.cb),this.a.La&&(e.temporaryProof=this.a.La),this.a.ea&&(e.phoneNumber=this.a.ea),e},Uo.prototype.fb=function(e,t){var n=this.a.a;return Dt(t.verify()).then((function(r){if("string"!==typeof r)throw new k("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(t.type){case"recaptcha":var i=m(e)?e.session:null,o=m(e)?e.phoneNumber:e;return(i&&i.type==co?i.Ha().then((function(e){return function(e,t){return su(e,Xs,t).then((function(e){return e.phoneSessionInfo.sessionInfo}))}(n,{idToken:e,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==lo?i.Ha().then((function(t){return function(e,t){return su(e,Js,t).then((function(e){return e.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:t,mfaEnrollmentId:e.multiFactorHint&&e.multiFactorHint.uid||e.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(e,t){return su(e,Ys,t)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(e){return"function"===typeof t.reset&&t.reset(),e}),(function(e){throw"function"===typeof t.reset&&t.reset(),e}));default:throw new k("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Zr(Uo,{PROVIDER_ID:"phone"}),Zr(Uo,{PHONE_SIGN_IN_METHOD:"phone"}),Ho.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},Ho.prototype.T=function(){return this.h},Ho.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Yo,Go=null;function zo(e){var t="unauthorized-domain",n=void 0,r=qn(e);e=r.a,"chrome-extension"==(r=r.c)?n=We("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=We("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",k.call(this,t,n)}function Qo(e,t,n){k.call(this,e,n),(e=t||{}).Jb&&$r(this,"email",e.Jb),e.ea&&$r(this,"phoneNumber",e.ea),e.credential&&$r(this,"credential",e.credential),e.Zb&&$r(this,"tenantId",e.Zb)}function Xo(e){if(e.code){var t=e.code||"";0==t.indexOf(j)&&(t=t.substring(j.length));var n={credential:qo(e),Zb:e.tenantId};if(e.email)n.Jb=e.email;else if(e.phoneNumber)n.ea=e.phoneNumber;else if(!n.credential)return new k(t,e.message||void 0);return new Qo(t,n,e.message)}return null}function Jo(){}function $o(e){return e.c||(e.c=e.b())}function Zo(){}function ea(e){if(!e.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(i){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return e.f}function ta(){}function na(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=O(this.qc,this),this.a.onerror=O(this.Sb,this),this.a.onprogress=O(this.rc,this),this.a.ontimeout=O(this.vc,this)}function ra(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function ia(e,t,n){this.reset(e,t,n,void 0,void 0)}I(zo,k),I(Qo,k),Qo.prototype.w=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.w();return t&&ye(e,t),e},Qo.prototype.toJSON=function(){return this.w()},Jo.prototype.c=null,I(Zo,Jo),Zo.prototype.a=function(){var e=ea(this);return e?new ActiveXObject(e):new XMLHttpRequest},Zo.prototype.b=function(){var e={};return ea(this)&&(e[0]=!0,e[1]=!0),e},Yo=new Zo,I(ta,Jo),ta.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new na;throw Error("Unsupported browser")},ta.prototype.b=function(){return{}},(n=na.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},n.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},n.abort=function(){this.a.abort()},n.setRequestHeader=function(){},n.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},n.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ra(this,4)},n.Sb=function(){this.status=500,this.response=this.responseText="",ra(this,4)},n.vc=function(){this.Sb()},n.rc=function(){this.status=200,ra(this,1)},n.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ia.prototype.a=null;function oa(e){this.f=e,this.b=this.c=this.a=null}function aa(e,t){this.name=e,this.value=t}ia.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||T(),delete this.a},aa.prototype.toString=function(){return this.name};var sa=new aa("SEVERE",1e3),ua=new aa("WARNING",900),ca=new aa("CONFIG",700),la=new aa("FINE",500);function ha(e){return e.c?e.c:e.a?ha(e.a):(L("Root logger has no level set."),null)}oa.prototype.log=function(e,t,n){if(e.value>=ha(this).value)for(v(t)&&(t=t()),e=new ia(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var fa,da={},pa=null;function va(e){var t;if(pa||(pa=new oa(""),da[""]=pa,pa.c=ca),!(t=da[e])){t=new oa(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=va(e.substr(0,n))).b||(n.b={}),n.b[r]=t,t.a=n,da[e]=t}return t}function ma(e,t){e&&e.log(la,t,void 0)}function ga(e){this.f=e}function ya(e){En.call(this),this.u=e,this.h=void 0,this.readyState=ba,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=va("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}I(ga,Jo),ga.prototype.a=function(){return new ya(this.f)},ga.prototype.b=(fa={},function(){return fa}),I(ya,En);var ba=0;function _a(e){e.c.read().then(e.pc.bind(e)).catch(e.Ua.bind(e))}function wa(e){e.readyState=4,e.g=null,e.c=null,e.m=null,Oa(e)}function Oa(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ea(e){En.call(this),this.headers=new Nn,this.D=e||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ta,this.u=this.S=!1}(n=ya.prototype).open=function(e,t){if(this.readyState!=ba)throw this.abort(),Error("Error reopening a connection");this.s=e,this.f=t,this.readyState=1,Oa(this)},n.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.l,method:this.s,credentials:this.h,cache:void 0};e&&(t.body=e),this.u.fetch(new Request(this.f,t)).then(this.uc.bind(this),this.Ua.bind(this))},n.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,wa(this)),this.readyState=ba},n.uc=function(e){this.a&&(this.g=e,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=e.headers,this.readyState=2,Oa(this)),this.a&&(this.readyState=3,Oa(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):"undefined"!==typeof u.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.m=new TextDecoder,_a(this)):e.text().then(this.tc.bind(this),this.Ua.bind(this)))))},n.pc=function(e){if(this.a){var t=this.m.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?wa(this):Oa(this),3==this.readyState&&_a(this)}},n.tc=function(e){this.a&&(this.response=this.responseText=e,wa(this))},n.sc=function(e){this.a&&(this.response=e,wa(this))},n.Ua=function(e){var t=this.i;t&&t.log(ua,"Failed to fetch url "+this.f,e instanceof Error?e:Error(e)),this.a&&wa(this)},n.setRequestHeader=function(e,t){this.l.append(e,t)},n.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.i)&&e.log(ua,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},n.getAllResponseHeaders=function(){if(!this.b){var e=this.i;return e&&e.log(ua,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ya.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(e){this.h=e?"include":"same-origin"}}),I(Ea,En);var Ta="";Ea.prototype.b=va("goog.net.XhrIo");var Ia=/^https?$/i,Sa=["POST","PUT"];function ka(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.R=n,e.J=!1,e.c=!0,e.a=e.D?e.D.a():Yo.a(),e.C=e.D?$o(e.D):$o(Yo),e.a.onreadystatechange=O(e.Vb,e);try{ma(e.b,Ma(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(a){return ma(e.b,Ma(e,"Error opening Xhr: "+a.message)),void Da(e,a)}t=r||"";var o=new Nn(e.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"===typeof e)K(e,t,void 0);else for(var n=jn(e),r=Dn(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,(function(e,t){o.set(t,e)})),i=function(e){e:{for(var t=Ca,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(o.Y()),r=u.FormData&&t instanceof u.FormData,!Q(Sa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(e,t){this.a.setRequestHeader(t,e)}),e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.S&&(e.a.withCredentials=e.S);try{Pa(e),0<e.g&&(e.u=function(e){return Qe&&at(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(e.a),ma(e.b,Ma(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=O(e.Ma,e)):e.s=kn(e.Ma,e.g,e)),ma(e.b,Ma(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(a){ma(e.b,Ma(e,"Send error: "+a.message)),Da(e,a)}}function Ca(e){return"content-type"==e.toLowerCase()}function Da(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,ja(e),xa(e)}function ja(e){e.J||(e.J=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function Na(e){if(e.c&&"undefined"!=typeof s)if(e.C[1]&&4==Aa(e)&&2==Ra(e))ma(e.b,Ma(e,"Local request error detected and ignored"));else if(e.i&&4==Aa(e))kn(e.Vb,0,e);else if(e.dispatchEvent("readystatechange"),4==Aa(e)){ma(e.b,Ma(e,"Request complete")),e.c=!1;try{var t,n=Ra(e);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(An)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!Ia.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var c=2<Aa(e)?e.a.statusText:""}catch(l){ma(e.b,"Can not get status: "+l.message),c=""}e.h=c+" ["+Ra(e)+"]",ja(e)}}finally{xa(e)}}}function xa(e,t){if(e.a){Pa(e);var n=e.a,r=e.C[0]?f:null;e.a=null,e.C=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(i){(e=e.b)&&e.log(sa,"Problem encountered resetting onreadystatechange: "+i.message,void 0)}}}function Pa(e){e.a&&e.u&&(e.a.ontimeout=null),e.s&&(u.clearTimeout(e.s),e.s=null)}function Aa(e){return e.a?e.a.readyState:0}function Ra(e){try{return 2<Aa(e)?e.a.status:-1}catch(t){return-1}}function Ma(e,t){return t+" ["+e.R+" "+e.l+" "+Ra(e)+"]"}function La(e){var t=za;this.g=[],this.u=t,this.s=e||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Fa(e,t,n){e.a=!0,e.c=n,e.f=!t,Ba(e)}function Ua(e){if(e.a){if(!e.v)throw new Ha(e);e.v=!1}}function Va(e,t,n,r){e.g.push([t,n,r]),e.a&&Ba(e)}function qa(e){return z(e.g,(function(e){return v(e[1])}))}function Ba(e){if(e.h&&e.a&&qa(e)){var t=e.h,n=Ya[t];n&&(u.clearTimeout(n.a),delete Ya[t]),e.h=0}e.b&&(e.b.l--,delete e.b),t=e.c;for(var r=n=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],a=i[1];if(i=i[2],o=e.f?a:o)try{var s=o.call(i||e.s,t);void 0!==s&&(e.f=e.f&&(s==t||s instanceof Error),e.c=t=s),(A(t)||"function"===typeof u.Promise&&t instanceof u.Promise)&&(r=!0,e.i=!0)}catch(c){t=c,e.f=!0,qa(e)||(n=!0)}}e.c=t,r&&(s=O(e.m,e,!0),r=O(e.m,e,!1),t instanceof La?(Va(t,s,r),t.C=!0):t.then(s,r)),n&&(t=new Ka(t),Ya[t.a]=t,e.h=t.a)}function Ha(){R.call(this)}function Wa(){R.call(this)}function Ka(e){this.a=u.setTimeout(O(this.c,this),0),this.b=e}(n=Ea.prototype).Ma=function(){"undefined"!=typeof s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ma(this.b,Ma(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},n.abort=function(){this.a&&this.c&&(ma(this.b,Ma(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xa(this))},n.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),xa(this,!0)),Ea.ab.Da.call(this)},n.Vb=function(){this.xa||(this.O||this.i||this.f?Na(this):this.Jc())},n.Jc=function(){Na(this)},n.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ta:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(sa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ma(this.b,"Can not get response: "+t.message),null}},La.prototype.cancel=function(e){if(this.a)this.c instanceof La&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,0>=t.l&&t.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(e=new Wa(this),Ua(this),Fa(this,!1,e))}},La.prototype.m=function(e,t){this.i=!1,Fa(this,e,t)},La.prototype.then=function(e,t,n){var r,i,o=new Ot((function(e,t){r=e,i=t}));return Va(this,r,(function(e){e instanceof Wa?o.cancel():i(e)})),o.then(e,t,n)},La.prototype.$goog_Thenable=!0,I(Ha,R),Ha.prototype.message="Deferred has already fired",Ha.prototype.name="AlreadyCalledError",I(Wa,R),Wa.prototype.message="Deferred was canceled",Wa.prototype.name="CanceledError",Ka.prototype.c=function(){throw delete Ya[this.a],this.b};var Ya={};function Ga(e){var t={},n=t.document||document,r=ke(e).toString(),i=mt(document,"SCRIPT"),o={Wb:i,Ma:void 0},a=new La(o),s=null,c=null!=t.timeout?t.timeout:5e3;return 0<c&&(s=window.setTimeout((function(){Qa(i,!0);var e=new $a(Ja,"Timeout reached for loading script "+r);Ua(a),Fa(a,!1,e)}),c),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Qa(i,t.xd||!1,s),Ua(a),Fa(a,!0,null))},i.onerror=function(){Qa(i,!0,s);var e=new $a(Xa,"Error while loading script "+r);Ua(a),Fa(a,!1,e)},ye(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ht(i,o),function(e,t){be(e,"HTMLScriptElement"),e.src=ke(t),(t=e.ownerDocument&&e.ownerDocument.defaultView)&&t!=u?t=h(t.document):(null===l&&(l=h(u.document)),t=l),t&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function za(){if(this&&this.Wb){var e=this.Wb;e&&"SCRIPT"==e.tagName&&Qa(e,!0,this.Ma)}}function Qa(e,t,n){null!=n&&u.clearTimeout(n),e.onload=f,e.onerror=f,e.onreadystatechange=f,t&&window.setTimeout((function(){e&&e.parentNode&&e.parentNode.removeChild(e)}),0)}var Xa=0,Ja=1;function $a(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),R.call(this,n),this.code=e}function Za(e){this.f=e}function es(e,n,r){if(this.c=e,e=n||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=e.secureTokenTimeout||rs,this.g=me(e.secureTokenHeaders||is),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=e.firebaseTimeout||os,this.a=me(e.firebaseHeaders||as),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==Tr(),!(r=u.XMLHttpRequest||r&&t.a.INTERNAL.node&&t.a.INTERNAL.node.XMLHttpRequest)&&!Er())throw new k("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Er()?this.f=new ga(self):Ir()?this.f=new Za(r):this.f=new ta,this.b=null}I($a,R),I(Za,Jo),Za.prototype.a=function(){return new this.f},Za.prototype.b=function(){return{}};var ts,ns="idToken",rs=new Wr(3e4,6e4),is={"Content-Type":"application/x-www-form-urlencoded"},os=new Wr(3e4,6e4),as={"Content-Type":"application/json"};function ss(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function us(e,t){t&&(e.l=cs("https://securetoken.googleapis.com/v1/token",t),e.h=cs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",t),e.i=cs("https://identitytoolkit.googleapis.com/v2/",t))}function cs(e,t){return e=qn(e),t=qn(t.url),e.f=e.a+e.f,Mn(e,t.c),e.a=t.a,Ln(e,t.g),e.toString()}function ls(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function hs(e,t,n,r,i,o,a){(function(){var e=Nr();return!((e=Cr(e)!=kr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&30>e)&&(!Qe||!ut||9<ut)})()||Er()?e=O(e.u,e):(ts||(ts=new Ot((function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{u[ds]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){Va(e,null,t,void 0)}(Ga(Ce(fs,{onload:ds})),(function(){t(Error("CORS_UNSUPPORTED"))}))}}(e,t)}))),e=O(e.s,e)),e(t,n,r,i,o,a)}es.prototype.T=function(){return this.b},es.prototype.u=function(e,t,n,r,i,o){if(Er()&&("undefined"===typeof u.fetch||"undefined"===typeof u.Headers||"undefined"===typeof u.Request))throw new k("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Ea(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}Tn(a,"complete",(function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ma(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(n){e=null}t&&t(e)})),In(a,"ready",(function(){s&&clearTimeout(s),Gt(this)})),In(a,"timeout",(function(){s&&clearTimeout(s),Gt(this),t&&t(null)})),ka(a,e,n,r,i)};var fs=new _e(Te,"https://apis.google.com/js/client.js?onload=%{onload}"),ds="__fcb"+Math.floor(1e6*Math.random()).toString();function ps(e,t,n,r,i,o,a){var s=qn(t+n);Un(s,"key",e.c),a&&Un(s,"cb",T().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Un(s,c,i[c]);return new Ot((function(t,n){hs(e,s.toString(),(function(e){e?e.error?n(cu(e,o||{})):t(e):n(new k("network-request-failed"))}),r,u?void 0:or(Ur(i)),e.a,e.v.get())}))}function vs(e){if("string"!==typeof(e=e.email)||!br.test(e))throw new k("invalid-email")}function ms(e){"email"in e&&vs(e)}function gs(e){if(!e[ns]){if(e.mfaPendingCredential)throw new k("multi-factor-auth-required",null,me(e));throw new k("internal-error")}}function ys(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new k("internal-error")}else{if(!e.sessionInfo)throw new k("missing-verification-id");if(!e.code)throw new k("missing-verification-code")}}es.prototype.s=function(e,t,n,r,i){var o=this;ts.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:n,body:r,headers:i,authType:"none",callback:function(e){window.gapi.auth.setToken(a),t&&t(e)}})})).o((function(e){t&&t({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})}))},es.prototype.zb=function(){return su(this,Qs,{})},es.prototype.Bb=function(e,t){return su(this,Gs,{idToken:e,email:t})},es.prototype.Cb=function(e,t){return su(this,zs,{idToken:e,password:t})};var bs={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function _s(e){if(!e.phoneVerificationInfo)throw new k("internal-error");if(!e.phoneVerificationInfo.sessionInfo)throw new k("missing-verification-id");if(!e.phoneVerificationInfo.code)throw new k("missing-verification-code")}function ws(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new k("internal-error")}function Os(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(tr(e=new Jn(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function Es(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=Xo(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=Xo(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=Xo(e)):e.errorMessage&&(t=uu(e.errorMessage)),t)throw t;gs(e)}function Ts(e,t){return t.returnIdpCredential=!0,su(e,$s,t)}function Is(e,t){return t.returnIdpCredential=!0,su(e,eu,t)}function Ss(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,su(e,Zs,t)}function ks(e){if(!e.oobCode)throw new k("invalid-action-code")}(n=es.prototype).Db=function(e,t){var n={idToken:e},r=[];return pe(bs,(function(e,i){var o=t[i];null===o?r.push(e):i in t&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),su(this,Gs,n)},n.vb=function(e,t){return ye(e={requestType:"PASSWORD_RESET",email:e},t),su(this,Bs,e)},n.wb=function(e,t){return ye(e={requestType:"EMAIL_SIGNIN",email:e},t),su(this,Us,e)},n.ub=function(e,t){return ye(e={requestType:"VERIFY_EMAIL",idToken:e},t),su(this,Vs,e)},n.Eb=function(e,t,n){return ye(e={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e,newEmail:t},n),su(this,qs,e)},n.fb=function(e){return su(this,ru,e)},n.nb=function(e,t){return su(this,Ks,{oobCode:e,newPassword:t})},n.Ra=function(e){return su(this,Ds,{oobCode:e})},n.jb=function(e){return su(this,Cs,{oobCode:e})};var Cs={endpoint:"setAccountInfo",A:ks,Z:"email",B:!0},Ds={endpoint:"resetPassword",A:ks,G:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t&&"VERIFY_AND_CHANGE_EMAIL"!=t)throw new k("internal-error")},B:!0},js={endpoint:"signupNewUser",A:function(e){if(vs(e),!e.password)throw new k("weak-password")},G:gs,V:!0,B:!0},Ns={endpoint:"createAuthUri",B:!0},xs={endpoint:"deleteAccount",N:["idToken"]},Ps={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(e){if(!Array.isArray(e.deleteProvider))throw new k("internal-error")}},As={endpoint:"emailLinkSignin",N:["email","oobCode"],A:vs,G:gs,V:!0,B:!0},Rs={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:vs,G:gs,V:!0},Ms={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:_s,G:gs,B:!0,Na:!0},Ls={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:_s,G:gs,B:!0,Na:!0},Fs={endpoint:"getAccountInfo"},Us={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new k("internal-error");vs(e)},Z:"email",B:!0},Vs={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new k("internal-error")},Z:"email",B:!0},qs={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(e){if("VERIFY_AND_CHANGE_EMAIL"!=e.requestType)throw new k("internal-error")},Z:"email",B:!0},Bs={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(e){if("PASSWORD_RESET"!=e.requestType)throw new k("internal-error");vs(e)},Z:"email",B:!0},Hs={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},Ws={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(e){if(!e.recaptchaSiteKey)throw new k("internal-error")}},Ks={endpoint:"resetPassword",A:ks,Z:"email",B:!0},Ys={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Gs={endpoint:"setAccountInfo",N:["idToken"],A:ms,V:!0},zs={endpoint:"setAccountInfo",N:["idToken"],A:function(e){if(ms(e),!e.password)throw new k("weak-password")},G:gs,V:!0},Qs={endpoint:"signupNewUser",G:gs,V:!0,B:!0},Xs={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(e){if(!e.phoneEnrollmentInfo)throw new k("internal-error");if(!e.phoneEnrollmentInfo.phoneNumber)throw new k("missing-phone-number");if(!e.phoneEnrollmentInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(e){if(!e.phoneSessionInfo||!e.phoneSessionInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},Js={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(e){if(!e.phoneSignInInfo||!e.phoneSignInInfo.recaptchaToken)throw new k("missing-app-credential")},G:function(e){if(!e.phoneResponseInfo||!e.phoneResponseInfo.sessionInfo)throw new k("internal-error")},B:!0,Na:!0},$s={endpoint:"verifyAssertion",A:ws,Ya:Os,G:Es,V:!0,B:!0},Zs={endpoint:"verifyAssertion",A:ws,Ya:Os,G:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new k("user-not-found");if(e.errorMessage)throw uu(e.errorMessage);gs(e)},V:!0,B:!0},eu={endpoint:"verifyAssertion",A:function(e){if(ws(e),!e.idToken)throw new k("internal-error")},Ya:Os,G:Es,V:!0},tu={endpoint:"verifyCustomToken",A:function(e){if(!e.token)throw new k("invalid-custom-token")},G:gs,V:!0,B:!0},nu={endpoint:"verifyPassword",A:function(e){if(vs(e),!e.password)throw new k("wrong-password")},G:gs,V:!0,B:!0},ru={endpoint:"verifyPhoneNumber",A:ys,G:gs,B:!0},iu={endpoint:"verifyPhoneNumber",A:function(e){if(!e.idToken)throw new k("internal-error");ys(e)},G:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",Xo(e);gs(e)}},ou={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ys,G:gs,B:!0},au={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(e){if(!!e[ns]^!!e.refreshToken)throw new k("internal-error")},B:!0,Na:!0};function su(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(void 0===r||null===r||""===r)return!1}return!0}(n,t.N))return jt(new k("internal-error"));var r,i=!!t.Na,o=t.Ub||"POST";return Dt(n).then(t.A).then((function(){return t.V&&(n.returnSecureToken=!0),t.B&&e.b&&"undefined"===typeof n.tenantId&&(n.tenantId=e.b),ps(e,i?e.i:e.h,t.endpoint,o,n,t.Hb,t.lb||!1)})).then((function(e){return r=e,t.Ya?t.Ya(n,r):r})).then(t.G).then((function(){if(!t.Z)return r;if(!(t.Z in r))throw new k("internal-error");return r[t.Z]}))}function uu(e){return cu({error:{errors:[{message:e}],code:400,message:e}})}function cu(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new k(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",ye(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new k(r[i],t);return!t&&e&&(t=Fr(e)),new k("internal-error",t)}function lu(e){this.b=e,this.a=null,this.rb=function(e){return(pu||(pu=new Ot((function(e,t){function n(){Hr(),xr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Hr(),t(Error("Network Error"))},timeout:fu.get()})}if(xr("gapi.iframes.Iframe"))e();else if(xr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){xr("gapi.load")?n():t(Error("Network Error"))},Dt(Ga(r=Ce(hu,{onload:r}))).o((function(){t(Error("Network Error"))}))}})).o((function(e){throw pu=null,e})))).then((function(){return new Ot((function(t,n){xr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),du.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var hu=new _e(Te,"https://apis.google.com/js/api.js?onload=%{onload}"),fu=new Wr(3e4,6e4),du=new Wr(5e3,15e3),pu=null;function vu(e,t,n,r){this.l=e,this.h=t,this.i=n,this.g=r,this.f=null,this.g?e=Bn((e=qn(this.g.url)).c,e.a,e.g,"/emulator/auth/iframe"):e=Bn("https",this.l,null,"/__/auth/iframe"),this.a=e,Un(this.a,"apiKey",this.h),Un(this.a,"appName",this.i),this.b=null,this.c=[]}function mu(e,t,n,r,i,o){this.u=e,this.s=t,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function gu(e){try{return t.a.app(e).auth().Ga()}catch(n){return[]}}function yu(e,t,n,r,i,o){this.s=e,this.g=t,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function bu(e){var t=fr();return function(e){return su(e,Hs,{}).then((function(e){return e.authorizedDomains||[]}))}(e).then((function(e){e:{var n=qn(t),r=n.c;n=n.a;for(var i=0;i<e.length;i++){var o=e[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=qn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:yr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){e=!0;break e}}e=!1}if(!e)throw new zo(fr())}))}function _u(e){return e.m||(e.m=_r().then((function(){if(!e.u){var t=e.c,n=e.i,r=gu(e.b),i=new vu(e.s,e.g,e.b,e.f);i.f=t,i.b=n,i.c=Z(r||[]),e.u=i.toString()}e.v=new lu(e.u),function(e){if(!e.v)throw Error("IfcHandler must be initialized!");!function(e,t){e.rb.then((function(){e.a.register("authEvent",t,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(e.v,(function(t){var n={};if(t&&t.authEvent){var r=!1;for(t=Wo(t.authEvent),n=0;n<e.h.length;n++)r=e.h[n](t)||r;return(n={}).status=r?"ACK":"ERROR",Dt(n)}return n.status="ERROR",Dt(n)}))}(e)}))),e.m}function wu(e){return e.l||(e.C=e.c?jr(e.c,gu(e.b)):null,e.l=new es(e.g,P(e.i),e.C),e.f&&us(e.l,e.f)),e.l}function Ou(e,t,n,r,i,o,a,s,u,c,l,h){return(e=new mu(e,t,n,r,i,h)).l=o,e.g=a,e.i=s,e.b=me(u||null),e.f=c,e.yb(l).toString()}function Eu(e){if(this.a=e||t.a.INTERNAL.reactNative&&t.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new k("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Tu(e){this.b=e,this.a={},this.f=O(this.c,this)}vu.prototype.toString=function(){return this.f?Un(this.a,"v",this.f):er(this.a.b,"v"),this.b?Un(this.a,"eid",this.b):er(this.a.b,"eid"),this.c.length?Un(this.a,"fw",this.c.join(",")):er(this.a.b,"fw"),this.a.toString()},mu.prototype.yb=function(e){return this.h=e,this},mu.prototype.toString=function(){if(this.v){var e=qn(this.v.url);e=Bn(e.c,e.a,e.g,"/emulator/auth/handler")}else e=Bn("https",this.u,null,"/__/auth/handler");if(Un(e,"apiKey",this.s),Un(e,"appName",this.c),Un(e,"authType",this.m),this.a.isOAuthProvider){var n=this.a;try{var r=t.a.app(this.c).auth().la()}catch(u){r=null}for(var i in n.ob=r,Un(e,"providerId",this.a.providerId),n=Ur((r=this.a).Ib))n[i]=n[i].toString();i=r.Qc,n=me(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}r.pb&&r.ob&&!n[r.pb]&&(n[r.pb]=r.ob),ve(n)||Un(e,"customParameters",Fr(n))}if("function"===typeof this.a.Qb&&((r=this.a.Qb()).length&&Un(e,"scopes",r.join(","))),this.l?Un(e,"redirectUrl",this.l):er(e.b,"redirectUrl"),this.g?Un(e,"eventId",this.g):er(e.b,"eventId"),this.i?Un(e,"v",this.i):er(e.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Vn(e,s)&&Un(e,s,this.b[s]);return this.h?Un(e,"tid",this.h):er(e.b,"tid"),this.f?Un(e,"eid",this.f):er(e.b,"eid"),(s=gu(this.c)).length&&Un(e,"fw",s.join(",")),e.toString()},(n=yu.prototype).Ob=function(e,t,n){var r=new k("popup-closed-by-user"),i=new k("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(e){var t={type:"webStorageSupport"};return _u(e).then((function(){return function(e,t){return e.rb.then((function(){return new Ot((function(n){e.a.send(t.type,t,n,xr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(e.v,t)})).then((function(e){if(e&&e.length&&"undefined"!==typeof e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(e&&mr(e),t(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(e){return new Ot((function(t){return function n(){Cn(2e3).then((function(){if(e&&!e.closed)return n();t()}))}()}))}(e)})).then((function(){if(!a)return Cn(n).then((function(){t(r)}))}))},n.Xb=function(){var e=Nr();return!Lr(e)&&!Br(e)},n.Tb=function(){return!1},n.Mb=function(e,t,n,r,i,o,a,s){if(!e)return jt(new k("popup-blocked"));if(a&&!Lr())return this.ma().o((function(t){mr(e),i(t)})),r(),Dt();this.a||(this.a=bu(wu(this)));var u=this;return this.a.then((function(){var t=u.ma().o((function(t){throw mr(e),i(t),t}));return r(),t})).then((function(){(Bo(n),a)||dr(Ou(u.s,u.g,u.b,t,n,null,o,u.c,void 0,u.i,s,u.f),e)})).o((function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e}))},n.Nb=function(e,t,n,r){this.a||(this.a=bu(wu(this)));var i=this;return this.a.then((function(){Bo(t),dr(Ou(i.s,i.g,i.b,e,t,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e}))},n.ma=function(){var e=this;return _u(this).then((function(){return e.v.rb})).o((function(){throw e.a=null,new k("network-request-failed")}))},n.$b=function(){return!0},n.Ea=function(e){this.h.push(e)},n.Sa=function(e){J(this.h,(function(t){return t==e}))},(n=Eu.prototype).get=function(e){return Dt(this.a.getItem(e)).then((function(e){return e&&Vr(e)}))},n.set=function(e,t){return Dt(this.a.setItem(e,Fr(t)))},n.U=function(e){return Dt(this.a.removeItem(e))},n.ca=function(){},n.ia=function(){};var Iu,Su=[];function ku(e,t,n){ve(e.a)&&e.b.addEventListener("message",e.f),"undefined"===typeof e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Cu(e){this.a=e}function Du(e){this.c=e,this.b=!1,this.a=[]}function ju(e,t,n,r){var i,o,a,s,u=n||{},c=null;if(e.b)return jt(Error("connection_unavailable"));var l=r?800:50,h="undefined"!==typeof MessageChannel?new MessageChannel:null;return new Ot((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===e.data.status?(clearTimeout(s),"undefined"!==typeof e.data.response?n(e.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},e.a.push(c),h.port1.addEventListener("message",o),e.c.postMessage({eventType:t,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(t){return Nu(e,c),t})).o((function(t){throw Nu(e,c),t}))}function Nu(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),J(e.a,(function(e){return e==t}))}}function xu(){if(!Mu())throw new k("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var e=this;Er()&&self?(this.v=function(){var e=Er()?self:null;if(K(Su,(function(n){n.b==e&&(t=n)})),!t){var t=new Tu(e);Su.push(t)}return t}(),ku(this.v,"keyChanged",(function(t,n){return qu(e).then((function(t){return 0<t.length&&K(e.a,(function(e){e(t)})),{keyProcessed:Q(t,n.key)}}))})),ku(this.v,"ping",(function(){return Dt(["keyChanged"])}))):function(){var e=u.navigator;return e&&e.serviceWorker?Dt().then((function(){return e.serviceWorker.ready})).then((function(e){return e.active||null})).o((function(){return null})):Dt(null)}().then((function(t){(e.h=t)&&(e.g=new Du(new Cu(t)),ju(e.g,"ping",null,!0).then((function(t){t[0].fulfilled&&Q(t[0].value,"keyChanged")&&(e.s=!0)})).o((function(){})))}))}function Pu(e){return new Ot((function(t,n){var r=e.m.open("firebaseLocalStorageDb",1);r.onerror=function(e){try{e.preventDefault()}catch(t){}n(Error(e.target.error))},r.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(r):function(e){return new Ot((function(t,n){var r=e.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){t()},r.onerror=function(e){n(Error(e.target.error))}}))}(e).then((function(){return Pu(e)})).then((function(e){t(e)})).o((function(e){n(e)}))}}))}function Au(e){return e.i||(e.i=Pu(e)),e.i}function Ru(e,t){var n=0;return new Ot((function r(i,o){Au(e).then(t).then(i).o((function(t){if(!(3<++n))return Au(e).then((function(t){return t.close(),e.i=void 0,r(i,o)})).o((function(e){o(e)}));o(t)}))}))}function Mu(){try{return!!u.indexedDB}catch(fa){return!1}}function Lu(e){return e.objectStore("firebaseLocalStorage")}function Fu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function Uu(e){return new Ot((function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}}))}function Vu(e,t){return e.g&&e.h&&function(){var e=u.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?ju(e.g,"keyChanged",{key:t},e.s).then((function(){})).o((function(){})):Dt()}function qu(e){return Au(e).then((function(e){var t=Lu(Fu(e,!1));return t.getAll?Uu(t.getAll()):new Ot((function(e,n){var r=[],i=t.openCursor();i.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},i.onerror=function(e){n(e.target.error)}}))})).then((function(t){var n={},r=[];if(0==e.b){for(r=0;r<t.length;r++)n[t[r].fbase_key]=t[r].value;r=pr(e.c,n),e.c=n}return r}))}function Bu(e){e.l&&e.l.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function Hu(e){var t=this,n=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Dt().then((function(){if(Mu()){var e=qr(),r="__sak"+e;return Iu||(Iu=new xu),(n=Iu).set(r,e).then((function(){return n.get(r)})).then((function(t){if(t!==e)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return t.c}))}return t.c})).then((function(e){return t.type=e.type,e.ca((function(e){K(t.a,(function(t){t(e)}))})),e}))}function Wu(){this.a={},this.type="inMemory"}function Ku(){if(!function(){var e="Node"==Tr();if(!(e=Yu()||e&&t.a.INTERNAL.node&&t.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==Tr())throw new k("internal-error","The LocalStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Yu()||t.a.INTERNAL.node.localStorage,this.type="localStorage"}function Yu(){try{var e=u.localStorage,t=qr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Gu(){this.type="nullStorage"}function zu(){if(!function(){var e="Node"==Tr();if(!(e=Qu()||e&&t.a.INTERNAL.node&&t.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(n){return!1}}()){if("Node"==Tr())throw new k("internal-error","The SessionStorage compatibility library was not found.");throw new k("web-storage-unsupported")}this.a=Qu()||t.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Qu(){try{var e=u.sessionStorage,t=qr();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(n){return null}}function Xu(){var e={};e.Browser=Zu,e.Node=ec,e.ReactNative=tc,e.Worker=nc,this.a=e[Tr()]}Tu.prototype.c=function(e){var t=e.data.eventType,n=e.data.eventId,r=this.a[t];if(r&&0<r.length){e.ports[0].postMessage({status:"ack",eventId:n,eventType:t,response:null});var i=[];K(r,(function(t){i.push(Dt().then((function(){return t(e.origin,e.data.data)})))})),xt(i).then((function(r){var i=[];K(r,(function(e){i.push({fulfilled:e.Pb,value:e.value,reason:e.reason?e.reason.message:void 0})})),K(i,(function(e){for(var t in e)"undefined"===typeof e[t]&&delete e[t]})),e.ports[0].postMessage({status:"done",eventId:n,eventType:t,response:i})}))}},Cu.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Du.prototype.close=function(){for(;0<this.a.length;)Nu(this,this.a[0]);this.b=!0},(n=xu.prototype).set=function(e,t){var n=this,r=!1;return Ru(this,(function(t){return Uu((t=Lu(Fu(t,!0))).get(e))})).then((function(i){return Ru(n,(function(o){if(o=Lu(Fu(o,!0)),i)return i.value=t,Uu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=e,a.value=t,Uu(o.add(a))}))})).then((function(){return n.c[e]=t,Vu(n,e)})).oa((function(){r&&n.b--}))},n.get=function(e){return Ru(this,(function(t){return Uu(Lu(Fu(t,!1)).get(e))})).then((function(e){return e&&e.value}))},n.U=function(e){var t=this,n=!1;return Ru(this,(function(r){return n=!0,t.b++,Uu(Lu(Fu(r,!0)).delete(e))})).then((function(){return delete t.c[e],Vu(t,e)})).oa((function(){n&&t.b--}))},n.ca=function(e){0==this.a.length&&function(e){function t(){e.f=setTimeout((function(){e.l=qu(e).then((function(t){0<t.length&&K(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}Bu(e),t()}(this),this.a.push(e)},n.ia=function(e){J(this.a,(function(t){return t==e})),0==this.a.length&&Bu(this)},(n=Hu.prototype).get=function(e){return this.b.then((function(t){return t.get(e)}))},n.set=function(e,t){return this.b.then((function(n){return n.set(e,t)}))},n.U=function(e){return this.b.then((function(t){return t.U(e)}))},n.ca=function(e){this.a.push(e)},n.ia=function(e){J(this.a,(function(t){return t==e}))},(n=Wu.prototype).get=function(e){return Dt(this.a[e])},n.set=function(e,t){return this.a[e]=t,Dt()},n.U=function(e){return delete this.a[e],Dt()},n.ca=function(){},n.ia=function(){},(n=Ku.prototype).get=function(e){var t=this;return Dt().then((function(){return Vr(t.a.getItem(e))}))},n.set=function(e,t){var n=this;return Dt().then((function(){var r=Fr(t);null===r?n.U(e):n.a.setItem(e,r)}))},n.U=function(e){var t=this;return Dt().then((function(){t.a.removeItem(e)}))},n.ca=function(e){u.window&&hn(u.window,"storage",e)},n.ia=function(e){u.window&&pn(u.window,"storage",e)},(n=Gu.prototype).get=function(){return Dt(null)},n.set=function(){return Dt()},n.U=function(){return Dt()},n.ca=function(){},n.ia=function(){},(n=zu.prototype).get=function(e){var t=this;return Dt().then((function(){return Vr(t.a.getItem(e))}))},n.set=function(e,t){var n=this;return Dt().then((function(){var r=Fr(t);null===r?n.U(e):n.a.setItem(e,r)}))},n.U=function(e){var t=this;return Dt().then((function(){t.a.removeItem(e)}))},n.ca=function(){},n.ia=function(){};var Ju,$u,Zu={F:Ku,bb:zu},ec={F:Ku,bb:zu},tc={F:Eu,bb:Gu},nc={F:Ku,bb:Gu},rc={rd:"local",NONE:"none",td:"session"};function ic(){var e=!(Br(Nr())||!Or()),t=Lr(),n=Pr();this.m=e,this.h=t,this.l=n,this.a={},Ju||(Ju=new Xu),e=Ju;try{this.g=!hr()&&Gr()||!u.indexedDB?new e.a.F:new Hu(Er()?new Wu:new e.a.F)}catch(r){this.g=new Wu,this.h=!0}try{this.i=new e.a.bb}catch(r){this.i=new Wu}this.v=new Wu,this.f=O(this.Yb,this),this.b={}}function oc(){return $u||($u=new ic),$u}function ac(e,t){switch(t){case"session":return e.i;case"none":return e.v;default:return e.g}}function sc(e,t){return"firebase:"+e.name+(t?":"+t:"")}function uc(e,t,n){return n=sc(t,n),"local"==t.F&&(e.b[n]=null),ac(e,t.F).U(n)}function cc(e){e.c&&(clearInterval(e.c),e.c=null)}function lc(e){this.a=e,this.b=oc()}(n=ic.prototype).get=function(e,t){return ac(this,e.F).get(sc(e,t))},n.set=function(e,t,n){var r=sc(e,n),i=this,o=ac(this,e.F);return o.set(r,t).then((function(){return o.get(r)})).then((function(t){"local"==e.F&&(i.b[r]=t)}))},n.addListener=function(e,t,n){e=sc(e,t),this.l&&(this.b[e]=u.localStorage.getItem(e)),ve(this.a)&&(ac(this,"local").ca(this.f),this.h||(hr()||!Gr())&&u.indexedDB||!this.l||function(e){cc(e),e.c=setInterval((function(){for(var t in e.a){var n=u.localStorage.getItem(t),r=e.b[t];n!=r&&(e.b[t]=n,n=new Zt({type:"storage",key:t,target:window,oldValue:r,newValue:n,a:!0}),e.Yb(n))}}),1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},n.removeListener=function(e,t,n){e=sc(e,t),this.a[e]&&(J(this.a[e],(function(e){return e==n})),0==this.a[e].length&&delete this.a[e]),ve(this.a)&&(ac(this,"local").ia(this.f),cc(this))},n.Yb=function(e){if(e&&e.g){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];"undefined"===typeof r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if("undefined"!==typeof e.a.a?ac(this,"local").ia(this.f):cc(this),this.m)if(n=u.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?u.localStorage.setItem(t,r):u.localStorage.removeItem(t);else if(this.b[t]===r&&"undefined"===typeof e.a.a)return;var o=this;n=function(){"undefined"===typeof e.a.a&&o.b[t]===u.localStorage.getItem(t)||(o.b[t]=u.localStorage.getItem(t),o.mb(t))},Qe&&ut&&10==ut&&u.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else K(e,O(this.mb,this))},n.mb=function(e){this.a[e]&&K(this.a[e],(function(e){e()}))};var hc,fc={name:"authEvent",F:"local"};function dc(){this.a=oc()}function pc(e,t){this.b=vc,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===hc&&(hc=u.Int32Array?new Int32Array(Oc):Oc),this.reset()}I(pc,(function(){this.b=-1}));for(var vc=64,mc=vc-1,gc=[],yc=0;yc<mc;yc++)gc[yc]=0;var bc=$(128,gc);function _c(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;64>t;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;64>t;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|hc[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function wc(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if("string"===typeof t)for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(_c(e),i=0);else{if(!p(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(_c(e),i=0)}}e.c=i,e.g+=n}pc.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):Z(this.h)};var Oc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ec(){pc.call(this,8,Tc)}I(Ec,pc);var Tc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ic(e,t,n,r,i,o){this.v=e,this.i=t,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=t+":"+n,this.C=new dc,this.g=new lc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Sc(e){return new k("invalid-cordova-configuration",e)}function kc(e){var t=new Ec;wc(t,e),e=[];var n=8*t.g;56>t.c?wc(t,bc,56-t.c):wc(t,bc,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(_c(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return G(e,(function(e){return 1<(e=e.toString(16)).length?e:"0"+e})).join("")}(e)}function Cc(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(r){}}function Dc(e){return e.f||(e.f=e.ma().then((function(){return new Ot((function(t){e.Ea((function n(r){return t(r),e.Sa(n),!1})),function(e){function t(t){r=!0,i&&i.cancel(),jc(e).then((function(r){var i=n;if(r&&t&&t.url){var o=null;-1!=(i=so(t.url)).indexOf("/__/auth/callback")&&(o=(o="object"===typeof(o=Vr(Vn(o=qn(i),"firebaseError")||null))?C(o):null)?new Ho(r.c,r.b,null,null,o,null,r.T()):new Ho(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Cc(e,i)}))}var n=new Ho("unknown",null,null,null,new k("no-auth-event")),r=!1,i=Cn(500).then((function(){return jc(e).then((function(){r||Cc(e,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(xr("BuildInfo.packageName",u).toLowerCase()+"://")&&t({url:e}),"function"===typeof o)try{o(e)}catch(n){console.error(n)}},Go||(Go=new Ko),function(e){var t=Go;t.a.push(e),t.b||(t.b=function(e){for(var n=0;n<t.a.length;n++)t.a[n](e)},"function"===typeof(e=xr("universalLinks.subscribe",u))&&e(null,t.b))}(t)}(e)}))}))),e.f}function jc(e){var t=null;return function(e){return e.b.get(fc,e.a).then((function(e){return Wo(e)}))}(e.g).then((function(n){return t=n,uc((n=e.g).b,fc,n.a)})).then((function(){return t}))}function Nc(e){this.a=e,this.b=oc()}(n=Ic.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(wr(void 0)?_r().then((function(){return new Ot((function(e,t){var n=u.document,r=setTimeout((function(){t(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),e()}),!1)}))})):jt(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!==typeof xr("universalLinks.subscribe",u))throw Sc("cordova-universal-links-plugin-fix is not installed");if("undefined"===typeof xr("BuildInfo.packageName",u))throw Sc("cordova-plugin-buildinfo is not installed");if("function"!==typeof xr("cordova.plugins.browsertab.openUrl",u))throw Sc("cordova-plugin-browsertab is not installed");if("function"!==typeof xr("cordova.InAppBrowser.open",u))throw Sc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new k("cordova-not-ready")}))},n.Ob=function(e,t){return t(new k("operation-not-supported-in-this-environment")),Dt()},n.Mb=function(){return jt(new k("operation-not-supported-in-this-environment"))},n.$b=function(){return!1},n.Xb=function(){return!0},n.Tb=function(){return!0},n.Nb=function(e,t,n,r){if(this.c)return jt(new k("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,c=null,l=null;return this.c=Dt().then((function(){return Bo(t),Dc(i)})).then((function(){return function(e,t,n,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new Ho(t,r,null,o,new k("no-auth-event"),null,i),s=xr("BuildInfo.packageName",u);if("string"!==typeof s)throw new k("invalid-cordova-configuration");var c=xr("BuildInfo.displayName",u),l={};if(Nr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!Nr().toLowerCase().match(/android/))return jt(new k("operation-not-supported-in-this-environment"));l.apn=s}c&&(l.appDisplayName=c),o=kc(o),l.sessionId=o;var h=Ou(e.v,e.i,e.l,t,n,null,r,e.m,l,e.u,i,e.s);return e.ma().then((function(){var t=e.h;return e.C.a.set(fc,a.w(),t)})).then((function(){var t=xr("cordova.plugins.browsertab.isAvailable",u);if("function"!==typeof t)throw new k("invalid-cordova-configuration");var n=null;t((function(t){if(t){if("function"!==typeof(n=xr("cordova.plugins.browsertab.openUrl",u)))throw new k("invalid-cordova-configuration");n(h)}else{if("function"!==typeof(n=xr("cordova.InAppBrowser.open",u)))throw new k("invalid-cordova-configuration");t=Nr(),e.a=n(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,e,t,n,r)})).then((function(){return new Ot((function(e,t){s=function(){var t=xr("cordova.plugins.browsertab.close",u);return e(),"function"===typeof t&&t(),i.a&&"function"===typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),c=function(){a||(a=Cn(2e3).then((function(){t(new k("redirect-cancelled-by-user"))})))},l=function(){Kr()&&c()},o.addEventListener("resume",c,!1),Nr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(e){return jc(i).then((function(){throw e}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&i.Sa(s),i.c=null}))},n.Ea=function(e){this.b.push(e),Dc(this).o((function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Ho("unknown",null,null,null,new k("no-auth-event")),e(t))}))},n.Sa=function(e){J(this.b,(function(t){return t==e}))};var xc={name:"pendingRedirect",F:"session"};function Pc(e){return uc(e.b,xc,e.a)}function Ac(e,t,n,r){this.i={},this.u=0,this.D=e,this.v=t,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=O(this.s,this),this.b=new Qc,this.C=new el,this.g=new Nc(Gc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Rc(this.D,this.v,this.m,D,this.J)}function Rc(e,n,r,i,o){var a=t.a.SDK_VERSION||null;return wr()?new Ic(e,n,r,a,i,o):new yu(e,n,r,a,i,o)}function Mc(e){e.f||(e.f=!0,e.a.Ea(e.l));var t=e.a;return e.a.ma().o((function(n){throw e.a==t&&e.reset(),n}))}function Lc(e){e.a.Xb()&&Mc(e).o((function(t){var n=new Ho("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Hc(t)&&e.s(n)})),e.a.Tb()||Xc(e.b)}function Fc(e,t){Q(e.h,t)||e.h.push(t),e.f||function(e){return e.b.get(xc,e.a).then((function(e){return"pending"==e}))}(e.g).then((function(t){t?Pc(e.g).then((function(){Mc(e).o((function(t){var n=new Ho("unknown",null,null,null,new k("operation-not-supported-in-this-environment"));Hc(t)&&e.s(n)}))})):Lc(e)})).o((function(){Lc(e)}))}function Uc(e,t){J(e.h,(function(e){return e==t}))}Ac.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=Rc(this.D,this.v,this.m,null,this.J),this.i={}},Ac.prototype.s=function(e){if(!e)throw new k("invalid-auth-event");if(6e5<=T()-this.u&&(this.i={},this.u=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.u=T())),t=!0;break}}return Xc(this.b),t};var Vc=new Wr(2e3,1e4),qc=new Wr(3e4,6e4);function Bc(e,t,n,r,i,o,a){return e.a.Mb(t,n,r,(function(){e.f||(e.f=!0,e.a.Ea(e.l))}),(function(){e.reset()}),i,o,a)}function Hc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function Wc(e,t,n,r,i){var o;return function(e){return e.b.set(xc,"pending",e.a)}(e.g).then((function(){return e.a.Nb(t,n,r,i).o((function(t){if(Hc(t))throw new k("operation-not-supported-in-this-environment");return o=t,Pc(e.g).then((function(){throw o}))})).then((function(){return e.a.$b()?new Ot((function(){})):Pc(e.g).then((function(){return e.qa()})).then((function(){})).o((function(){}))}))}))}function Kc(e,t,n,r,i){return e.a.Ob(r,(function(e){t.na(n,null,e,i)}),Vc.get())}Ac.prototype.qa=function(){return this.b.qa()};var Yc={};function Gc(e,t,n){return e=e+":"+t,n&&(e=e+":"+n.url),e}function zc(e,t,n,r){var i=Gc(t,n,r);return Yc[i]||(Yc[i]=new Ac(e,t,n,r)),Yc[i]}function Qc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Xc(e){e.g||(e.g=!0,Zc(e,!1,null,null))}function Jc(e){e.g&&!e.i&&Zc(e,!1,null,null)}function $c(e,t){if(e.b=function(){return Dt(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function Zc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return jt(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):$c(e,n):$c(e,{user:null}),e.f=[],e.c=[]}function el(){}function tl(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(e){this.ib=e},enumerable:!1})}function nl(e,t){this.a=t,$r(this,"verificationId",e)}function rl(e,t,n,r){return new Uo(e).fb(t,n).then((function(e){return new nl(e,r)}))}function il(e){var t=Gi(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new k("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:e,expirationTime:Yr(1e3*t.exp),authTime:Yr(1e3*t.auth_time),issuedAtTime:Yr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,signInSecondFactor:t.firebase&&t.firebase.sign_in_second_factor?t.firebase.sign_in_second_factor:null,claims:t})}function ol(e,t,n){var r=t&&t[sl];if(!r)throw new k("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=e,this.f=me(t),this.g=n,this.c=new uo(null,r),this.b=[];var i=this;K(t[al]||[],(function(e){(e=ri(e))&&i.b.push(e)})),$r(this,"auth",this.a),$r(this,"session",this.c),$r(this,"hints",this.b)}Qc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Qc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(Zc(this,!0,null,e.a),Dt()):t.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,a=t.T(),s=!!t.c.match(/Redirect$/);n(r,i,a,o).then((function(t){Zc(e,s,t,null)})).o((function(t){Zc(e,s,null,t)}))}(this,e,t):jt(new k("invalid-auth-event")):(Zc(this,!1,null,null),Dt())}else jt(new k("invalid-auth-event"))},Qc.prototype.qa=function(){var e=this;return new Ot((function(t,n){e.b?e.b().then(t,n):(e.f.push(t),e.c.push(n),function(e){var t=new k("timeout");e.a&&e.a.cancel(),e.a=Cn(qc.get()).then((function(){e.b||(e.g=!0,Zc(e,!0,null,t))}))}(e))}))},el.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.na(e.c,null,e.a,e.b),Dt()):t.Fa(n,r)?function(e,t){var n=e.b,r=e.c;t.Fa(r,n)(e.g,e.f,e.T(),e.i).then((function(e){t.na(r,e,null,n)})).o((function(e){t.na(r,null,e,n)}))}(e,t):jt(new k("invalid-auth-event"))}else jt(new k("invalid-auth-event"))},nl.prototype.confirm=function(e){return e=Vo(this.verificationId,e),this.a(e)};var al="mfaInfo",sl="mfaPendingCredential";function ul(e,t,n,r){k.call(this,"multi-factor-auth-required",r,t),this.b=new ol(e,t,n),$r(this,"resolver",this.b)}function cl(e,t,n){if(e&&m(e.serverResponse)&&"auth/multi-factor-auth-required"===e.code)try{return new ul(t,e.serverResponse,n,e.message)}catch(r){}return null}function ll(){}function hl(e){$r(this,"factorId",e.fa),this.a=e}function fl(e){if(hl.call(this,e),this.a.fa!=Uo.PROVIDER_ID)throw new k("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function dl(e,t){for(var n in $t.call(this,e),t)this[n]=t[n]}function pl(e,t){this.a=e,this.b=[],this.c=O(this.yc,this),hn(this.a,"userReloaded",this.c);var n=[];t&&t.multiFactor&&t.multiFactor.enrolledFactors&&K(t.multiFactor.enrolledFactors,(function(e){var t=null,r={};if(e){e.uid&&(r[ai]=e.uid),e.displayName&&(r[ii]=e.displayName),e.enrollmentTime&&(r[oi]=new Date(e.enrollmentTime).toISOString()),e.phoneNumber&&(r[si]=e.phoneNumber);try{t=new ui(r)}catch(i){}e=t}else e=null;e&&n.push(e)})),vl(this,n)}function vl(e,t){e.b=t,$r(e,"enrolledFactors",t)}function ml(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function gl(e,t){e.stop(),e.b=Cn(function(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}(e,t)).then((function(){return function(){var e=u.document,t=null;return Kr()||!e?Dt():new Ot((function(n){t=function(){Kr()&&(e.removeEventListener("visibilitychange",t,!1),n())},e.addEventListener("visibilitychange",t,!1)})).o((function(n){throw e.removeEventListener("visibilitychange",t,!1),n}))}()})).then((function(){return e.h()})).then((function(){gl(e,!0)})).o((function(t){e.i(t)&&gl(e,!1)}))}function yl(e){this.f=e,this.b=this.a=null,this.c=Date.now()}function bl(e,t){"undefined"===typeof t&&(e.b?t=(t=e.b).a-t.g:t=0),e.c=Date.now()+1e3*t}function _l(e,t){e.b=Yi(t[ns]||""),e.a=t.refreshToken,bl(e,"undefined"!==typeof(t=t.expiresIn)?Number(t):void 0)}function wl(e,t){return function(e,t){return new Ot((function(n,r){"refresh_token"==t.grant_type&&t.refresh_token||"authorization_code"==t.grant_type&&t.code?hs(e,e.l+"?key="+encodeURIComponent(e.c),(function(e){e?e.error?r(cu(e)):e.access_token&&e.refresh_token?n(e):r(new k("internal-error")):r(new k("network-request-failed"))}),"POST",Zn(t).toString(),e.g,e.m.get()):r(new k("internal-error"))}))}(e.f,t).then((function(t){return e.b=Yi(t.access_token),e.a=t.refresh_token,bl(e,t.expires_in),{accessToken:e.b.toString(),refreshToken:e.a}})).o((function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t}))}function Ol(e,t){this.a=e||null,this.b=t||null,Zr(this,{lastSignInTime:Yr(t||null),creationTime:Yr(e||null)})}function El(e,t,n,r,i,o){Zr(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Tl(e,n,r){this.J=[],this.l=e.apiKey,this.m=e.appName,this.s=e.authDomain||null;var i=t.a.SDK_VERSION?jr(t.a.SDK_VERSION):null;this.a=new es(this.l,P(D),i),e.emulatorConfig&&us(this.a,e.emulatorConfig),this.b=new yl(this.a),xl(this,n[ns]),_l(this.b,n),$r(this,"refreshToken",this.b.a),Rl(this,r||{}),En.call(this),this.R=!1,this.s&&Ar()&&(this.i=zc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=function(e){return new ml((function(){return e.I(!0)}),(function(e){return!(!e||"auth/network-request-failed"!=e.code)}),(function(){var t=e.b.c-Date.now()-3e5;return 0<t?t:0}))}(this),this.aa=O(this.hb,this);var o=this;this.ya=null,this.Oa=function(e){o.wa(e.h)},this.ja=null,this.Aa=function(e){us(o.a,e.c)},this.X=null,this.$=[],this.Ba=function(e){kl(o,e.f)},this.ba=null,this.O=new pl(this,r),$r(this,"multiFactor",this.O)}function Il(e,t){e.ja&&pn(e.ja,"languageCodeChanged",e.Oa),(e.ja=t)&&hn(t,"languageCodeChanged",e.Oa)}function Sl(e,t){e.X&&pn(e.X,"emulatorConfigChanged",e.Aa),(e.X=t)&&hn(t,"emulatorConfigChanged",e.Aa)}function kl(e,n){e.$=n,ls(e.a,t.a.SDK_VERSION?jr(t.a.SDK_VERSION,e.$):null)}function Cl(e,t){e.ba&&pn(e.ba,"frameworkChanged",e.Ba),(e.ba=t)&&hn(t,"frameworkChanged",e.Ba)}function Dl(e){try{return t.a.app(e.m).auth()}catch(n){throw new k("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function jl(e){e.D||e.u.b||(e.u.start(),pn(e,"tokenChanged",e.aa),hn(e,"tokenChanged",e.aa))}function Nl(e){pn(e,"tokenChanged",e.aa),e.u.stop()}function xl(e,t){e.za=t,$r(e,"_lat",t)}function Pl(e){for(var t=[],n=0;n<e.S.length;n++)t.push(e.S[n](e));return xt(t).then((function(){return e}))}function Al(e){e.i&&!e.R&&(e.R=!0,Fc(e.i,e))}function Rl(e,t){Zr(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Ol(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function Ml(){}function Ll(e){return Dt().then((function(){if(e.D)throw new k("app-deleted")}))}function Fl(e){return G(e.providerData,(function(e){return e.providerId}))}function Ul(e,t){t&&(Vl(e,t.providerId),e.providerData.push(t))}function Vl(e,t){J(e.providerData,(function(e){return e.providerId==t}))}function ql(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&$r(e,t,n)}function Bl(e,t){e!=t&&(Zr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?$r(e,"metadata",function(e){return new Ol(e.a,e.b)}(t.metadata)):$r(e,"metadata",new Ol),K(t.providerData,(function(t){Ul(e,t)})),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(e.b,t.b),$r(e,"refreshToken",e.b.a),vl(e.O,t.O.b))}function Hl(e){return e.I().then((function(t){var n=e.isAnonymous;return function(e,t){return su(e.a,Fs,{idToken:t}).then(O(e.Kc,e))}(e,t).then((function(){return n||ql(e,"isAnonymous",!1),t}))}))}function Wl(e,t){t[ns]&&e.za!=t[ns]&&(_l(e.b,t),e.dispatchEvent(new dl("tokenChanged")),xl(e,t[ns]),ql(e,"refreshToken",e.b.a))}function Kl(e,t){return Hl(e).then((function(){if(Q(Fl(e),t))return Pl(e).then((function(){throw new k("provider-already-linked")}))}))}function Yl(e,t,n){return ei({user:e,credential:qo(t),additionalUserInfo:t=$i(t),operationType:n})}function Gl(e,t){return Wl(e,t),e.reload().then((function(){return e}))}function zl(e,n,r,i,o){if(!Ar())return jt(new k("operation-not-supported-in-this-environment"));if(e.h&&!o)return jt(e.h);var a=Ji(r.providerId),s=qr(e.uid+":::"),u=null;(!Lr()||Or())&&e.s&&r.isOAuthProvider&&(u=Ou(e.s,e.l,e.m,n,r,null,s,t.a.SDK_VERSION||null,null,null,e.tenantId));var c=gr(u,a&&a.ua,a&&a.ta);return i=i().then((function(){if(Xl(e),!o)return e.I().then((function(){}))})).then((function(){return Bc(e.i,c,n,r,s,!!u,e.tenantId)})).then((function(){return new Ot((function(t,r){e.na(n,null,new k("cancelled-popup-request"),e.g||null),e.f=t,e.C=r,e.g=s,e.c=Kc(e.i,e,n,c,s)}))})).then((function(e){return c&&mr(c),e?ei(e):null})).o((function(e){throw c&&mr(c),e})),Jl(e,i,o)}function Ql(e,t,n,r,i){if(!Ar())return jt(new k("operation-not-supported-in-this-environment"));if(e.h&&!i)return jt(e.h);var o=null,a=qr(e.uid+":::");return r=r().then((function(){if(Xl(e),!i)return e.I().then((function(){}))})).then((function(){return e.ga=a,Pl(e)})).then((function(t){return e.ha&&(t=(t=e.ha).b.set(eh,e.w(),t.a)),t})).then((function(){return Wc(e.i,t,n,a,e.tenantId)})).o((function(t){if(o=t,e.ha)return th(e.ha);throw o})).then((function(){if(o)throw o})),Jl(e,r,i)}function Xl(e){if(!e.i||!e.R){if(e.i&&!e.R)throw new k("internal-error");throw new k("auth-domain-config-required")}}function Jl(e,t,n){var r=function(e,t,n){return e.h&&!n?(t.cancel(),jt(e.h)):t.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(e.h||e.dispatchEvent(new dl("userInvalidated")),e.h=t),t}))}(e,t,n);return e.J.push(r),r.oa((function(){X(e.J,r)})),r.o((function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=cl(t.w(),Dl(e),O(e.jc,e))),n||t}))}function $l(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName,emulatorConfig:e.emulatorConfig},n={};if(!e.stsTokenManager||!e.stsTokenManager.accessToken)return null;n[ns]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null;var r=e.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Tl(t,n,e);return e.providerData&&K(e.providerData,(function(e){e&&Ul(i,ei(e))})),e.redirectEventId&&(i.ga=e.redirectEventId),i}function Zl(e){this.a=e,this.b=oc()}ol.prototype.Rc=function(e){var t=this;return e.sb(this.a.a,this.c).then((function(e){var n=me(t.f);return delete n[al],delete n[sl],ye(n,e),t.g(n)}))},I(ul,k),ll.prototype.sb=function(e,t,n){return t.type==co?function(e,t,n,r){return n.Ha().then((function(n){return n={idToken:n},"undefined"!==typeof r&&(n.displayName=r),ye(n,{phoneVerificationInfo:Fo(e.a)}),su(t,Ms,n)}))}(this,e,t,n):function(e,t,n){return n.Ha().then((function(n){return ye(n={mfaPendingCredential:n},{phoneVerificationInfo:Fo(e.a)}),su(t,Ls,n)}))}(this,e,t)},I(hl,ll),I(fl,hl),I(dl,$t),(n=pl.prototype).yc=function(e){vl(this,function(e){var t=[];return K(e.mfaInfo||[],(function(e){(e=ri(e))&&t.push(e)})),t}(e.hd))},n.Rb=function(){return this.a.I().then((function(e){return new uo(e,null)}))},n.fc=function(e,t){var n=this,r=this.a.a;return this.Rb().then((function(n){return e.sb(r,n,t)})).then((function(e){return Wl(n.a,e),n.a.reload()}))},n.bd=function(e){var t=this,n="string"===typeof e?e:e.uid,r=this.a.a;return this.a.I().then((function(e){return su(r,au,{idToken:e,mfaEnrollmentId:n})})).then((function(e){var r=Y(t.b,(function(e){return e.uid!=n}));return vl(t,r),Wl(t.a,e),t.a.reload().o((function(e){if("auth/user-token-expired"!=e.code)throw e}))}))},n.w=function(){return{multiFactor:{enrolledFactors:G(this.b,(function(e){return e.w()}))}}},ml.prototype.start=function(){this.a=this.c,gl(this,!0)},ml.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},yl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},yl.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?jt(new k("user-token-expired")):e||!this.b||Date.now()>this.c-3e4?this.a?wl(this,{grant_type:"refresh_token",refresh_token:this.a}):Dt(null):Dt({accessToken:this.b.toString(),refreshToken:this.a})},Ol.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},I(Tl,En),Tl.prototype.wa=function(e){this.ya=e,ss(this.a,e)},Tl.prototype.la=function(){return this.ya},Tl.prototype.Ga=function(){return Z(this.$)},Tl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},$r(Tl.prototype,"providerId","firebase"),(n=Tl.prototype).reload=function(){var e=this;return Jl(this,Ll(this).then((function(){return Hl(e).then((function(){return Pl(e)})).then(Ml)})))},n.oc=function(e){return this.I(e).then((function(e){return new il(e)}))},n.I=function(e){var t=this;return Jl(this,Ll(this).then((function(){return t.b.getToken(e)})).then((function(e){if(!e)throw new k("internal-error");return e.accessToken!=t.za&&(xl(t,e.accessToken),t.dispatchEvent(new dl("tokenChanged"))),ql(t,"refreshToken",e.refreshToken),e.accessToken})))},n.Kc=function(e){if(!(e=e.users)||!e.length)throw new k("internal-error");Rl(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?G(e,(function(e){return new El(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)})):[]}(e),n=0;n<t.length;n++)Ul(this,t[n]);ql(this,"isAnonymous",!(this.email&&e.passwordHash)&&!(this.providerData&&this.providerData.length)),this.dispatchEvent(new dl("userReloaded",{hd:e}))},n.Lc=function(e){return Xr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(e)},n.tb=function(e){var t=this,n=null;return Jl(this,e.c(this.a,this.uid).then((function(e){return Wl(t,e),n=Yl(t,e,"reauthenticate"),t.h=null,t.reload()})).then((function(){return n})),!0)},n.Cc=function(e){return Xr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(e)},n.qb=function(e){var t=this,n=null;return Jl(this,Kl(this,e.providerId).then((function(){return t.I()})).then((function(n){return e.b(t.a,n)})).then((function(e){return n=Yl(t,e,"link"),Gl(t,e)})).then((function(){return n})))},n.Dc=function(e,t){var n=this;return Jl(this,Kl(this,"phone").then((function(){return rl(Dl(n),e,t,O(n.qb,n))})))},n.Mc=function(e,t){var n=this;return Jl(this,Dt().then((function(){return rl(Dl(n),e,t,O(n.tb,n))})),!0)},n.Bb=function(e){var t=this;return Jl(this,this.I().then((function(n){return t.a.Bb(n,e)})).then((function(e){return Wl(t,e),t.reload()})))},n.ed=function(e){var t=this;return Jl(this,this.I().then((function(n){return e.b(t.a,n)})).then((function(e){return Wl(t,e),t.reload()})))},n.Cb=function(e){var t=this;return Jl(this,this.I().then((function(n){return t.a.Cb(n,e)})).then((function(e){return Wl(t,e),t.reload()})))},n.Db=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Ll(this);var t=this;return Jl(this,this.I().then((function(n){return t.a.Db(n,{displayName:e.displayName,photoUrl:e.photoURL})})).then((function(e){return Wl(t,e),ql(t,"displayName",e.displayName||null),ql(t,"photoURL",e.photoUrl||null),K(t.providerData,(function(e){"password"===e.providerId&&($r(e,"displayName",t.displayName),$r(e,"photoURL",t.photoURL))})),Pl(t)})).then(Ml))},n.cd=function(e){var t=this;return Jl(this,Hl(this).then((function(n){return Q(Fl(t),e)?function(e,t,n){return su(e,Ps,{idToken:t,deleteProvider:n})}(t.a,n,[e]).then((function(e){var n={};return K(e.providerUserInfo||[],(function(e){n[e.providerId]=!0})),K(Fl(t),(function(e){n[e]||Vl(t,e)})),n[Uo.PROVIDER_ID]||$r(t,"phoneNumber",null),Pl(t)})):Pl(t).then((function(){throw new k("no-such-provider")}))})))},n.delete=function(){var e=this;return Jl(this,this.I().then((function(t){return su(e.a,xs,{idToken:t})})).then((function(){e.dispatchEvent(new dl("userDeleted"))}))).then((function(){for(var t=0;t<e.J.length;t++)e.J[t].cancel("app-deleted");Il(e,null),Sl(e,null),Cl(e,null),e.J=[],e.D=!0,Nl(e),$r(e,"refreshToken",null),e.i&&Uc(e.i,e)}))},n.Fb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ga||null)==t||"reauthViaRedirect"==e&&(this.ga||null)==t)},n.na=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?O(this.Kb,this):"reauthViaPopup"==e&&t==(this.g||null)?O(this.Lb,this):"linkViaRedirect"==e&&(this.ga||null)==t?O(this.Kb,this):"reauthViaRedirect"==e&&(this.ga||null)==t?O(this.Lb,this):null},n.Ec=function(e){var t=this;return zl(this,"linkViaPopup",e,(function(){return Kl(t,e.providerId).then((function(){return Pl(t)}))}),!1)},n.Nc=function(e){return zl(this,"reauthViaPopup",e,(function(){return Dt()}),!0)},n.Fc=function(e){var t=this;return Ql(this,"linkViaRedirect",e,(function(){return Kl(t,e.providerId)}),!1)},n.Oc=function(e){return Ql(this,"reauthViaRedirect",e,(function(){return Dt()}),!0)},n.Kb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jl(this,this.I().then((function(n){return Is(i.a,{requestUri:e,postBody:r,sessionId:t,idToken:n})})).then((function(e){return o=Yl(i,e,"link"),Gl(i,e)})).then((function(){return o})))},n.Lb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Jl(this,Dt().then((function(){return fo(Ss(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)})).then((function(e){return o=Yl(i,e,"reauthenticate"),Wl(i,e),i.h=null,i.reload()})).then((function(){return o})),!0)},n.ub=function(e){var t=this,n=null;return Jl(this,this.I().then((function(t){return n=t,"undefined"===typeof e||ve(e)?{}:Bi(new xi(e))})).then((function(e){return t.a.ub(n,e)})).then((function(e){if(t.email!=e)return t.reload()})).then((function(){})))},n.Eb=function(e,t){var n=this,r=null;return Jl(this,this.I().then((function(e){return r=e,"undefined"===typeof t||ve(t)?{}:Bi(new xi(t))})).then((function(t){return n.a.Eb(r,e,t)})).then((function(e){if(n.email!=e)return n.reload()})).then((function(){})))},n.jc=function(e){var t=null,n=this;return Jl(this,e=fo(Dt(e),n.uid).then((function(e){return t=Yl(n,e,"reauthenticate"),Wl(n,e),n.h=null,n.reload()})).then((function(){return t})),!0)},n.toJSON=function(){return this.w()},n.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ye(e,this.metadata.w()),K(this.providerData,(function(t){e.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(t))})),ye(e,this.O.w()),e};var eh={name:"redirectUser",F:"session"};function th(e){return uc(e.b,eh,e.a)}function nh(e){this.a=e,this.b=oc(),this.c=null,this.f=function(e){var t=oh("local"),n=oh("session"),r=oh("none");return function(e,t,n){var r=sc(t,n),i=ac(e,t.F);return e.get(t,n).then((function(o){var a=null;try{a=Vr(u.localStorage.getItem(r))}catch(s){}if(a&&!o)return u.localStorage.removeItem(r),e.set(t,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(e.b,t,e.a).then((function(){return e.b.get(n,e.a)})).then((function(i){return i?n:e.b.get(r,e.a).then((function(n){return n?r:e.b.get(t,e.a).then((function(n){return n?t:e.b.get(ih,e.a).then((function(e){return e?oh(e):t}))}))}))})).then((function(t){return e.c=t,rh(e,t.F)})).o((function(){e.c||(e.c=t)}))}(this),this.b.addListener(oh("local"),this.a,O(this.g,this))}function rh(e,t){var n,r=[];for(n in rc)rc[n]!==t&&r.push(uc(e.b,oh(rc[n]),e.a));return r.push(uc(e.b,ih,e.a)),function(e){return new Ot((function(t,n){var r=e.length,i=[];if(r)for(var o=function(e,n){r--,i[e]=n,0==r&&t(i)},a=function(e){n(e)},s=0;s<e.length;s++)Nt(e[s],E(o,s),a);else t(i)}))}(r)}nh.prototype.g=function(){var e=this,t=oh("local");ch(this,(function(){return Dt().then((function(){return e.c&&"local"!=e.c.F?e.b.get(t,e.a):null})).then((function(n){if(n)return rh(e,"local").then((function(){e.c=t}))}))}))};var ih={name:"persistence",F:"session"};function oh(e){return{name:"authUser",F:e}}function ah(e,t){return ch(e,(function(){return e.b.set(e.c,t.w(),e.a)}))}function sh(e){return ch(e,(function(){return uc(e.b,e.c,e.a)}))}function uh(e,t,n){return ch(e,(function(){return e.b.get(e.c,e.a).then((function(e){return e&&t&&(e.authDomain=t),e&&n&&(e.emulatorConfig=n),$l(e||{})}))}))}function ch(e,t){return e.f=e.f.then(t,t),e.f}function lh(e){if(this.l=!1,$r(this,"settings",new tl),$r(this,"app",e),!bh(this).options||!bh(this).options.apiKey)throw new k("invalid-api-key");e=t.a.SDK_VERSION?jr(t.a.SDK_VERSION):null,this.a=new es(bh(this).options&&bh(this).options.apiKey,P(D),e),this.R=[],this.s=[],this.O=[],this.hb=t.a.INTERNAL.createSubscribe(O(this.zc,this)),this.X=void 0,this.bc=t.a.INTERNAL.createSubscribe(O(this.Ac,this)),gh(this,null),this.i=new nh(bh(this).options.apiKey+":"+bh(this).name),this.D=new Zl(bh(this).options.apiKey+":"+bh(this).name),this.$=Eh(this,function(e){var t=bh(e).options.authDomain,n=function(e){var t=function(e,t){return e.b.get(eh,e.a).then((function(e){return e&&t&&(e.authDomain=t),$l(e||{})}))}(e.D,bh(e).options.authDomain).then((function(t){return(e.m=t)&&(t.ha=e.D),th(e.D)}));return Eh(e,t)}(e).then((function(){return uh(e.i,t,e.P)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return ah(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:sh(e.i)}))):null})).then((function(t){gh(e,t||null)}));return Eh(e,n)}(this)),this.h=Eh(this,function(e){return e.$.then((function(){return vh(e)})).o((function(){})).then((function(){if(!e.l)return e.ja()})).o((function(){})).then((function(){if(!e.l){e.ba=!0;var t=e.i;t.b.addListener(oh("local"),t.a,e.ja)}}))}(this)),this.ba=!1,this.ja=O(this.Zc,this),this.Ba=O(this.da,this),this.ya=O(this.mc,this),this.za=O(this.wc,this),this.Aa=O(this.xc,this),this.b=null,function(e){var t=bh(e).options.authDomain,n=bh(e).options.apiKey;t&&Ar()&&(e.Oa=e.$.then((function(){if(!e.l){if(e.b=zc(t,n,bh(e).name,e.P),Fc(e.b,e),_h(e)&&Al(_h(e)),e.m){Al(e.m);var r=e.m;r.wa(e.la()),Il(r,e),kl(r=e.m,e.J),Cl(r,e),us((r=e.m).a,e.P),Sl(r,e),e.m=null}return e.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=O(this.delete,this),this.INTERNAL.logFramework=O(this.Gc,this),this.u=0,En.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.la()},set:function(e){this.wa(e)},enumerable:!1}),e.aa=null,Object.defineProperty(e,"ti",{get:function(){return this.T()},set:function(e){this.yb(e)},enumerable:!1}),e.S=null,Object.defineProperty(e,"emulatorConfig",{get:function(){if(this.P){var e=qn(this.P.url);e=ei({protocol:e.c,host:e.a,port:e.g,options:ei({disableWarnings:this.P.ec})})}else e=null;return e},enumerable:!1})}(this),this.J=[],this.P=null}function hh(e){$t.call(this,"languageCodeChanged"),this.h=e}function fh(e){$t.call(this,"emulatorConfigChanged"),this.c=e}function dh(e){$t.call(this,"frameworkChanged"),this.f=e}function ph(e){return e.Oa||jt(new k("auth-domain-config-required"))}function vh(e){if(!Ar())return jt(new k("operation-not-supported-in-this-environment"));var t=ph(e).then((function(){return e.b.qa()})).then((function(e){return e?ei(e):null}));return Eh(e,t)}function mh(e,t){var n={};return n.apiKey=bh(e).options.apiKey,n.authDomain=bh(e).options.authDomain,n.appName=bh(e).name,e.P&&(n.emulatorConfig=e.P),e.$.then((function(){return function(e,t,n,r){var i=new Tl(e,t);return n&&(i.ha=n),r&&kl(i,r),i.reload().then((function(){return i}))}(n,t,e.D,e.Ga())})).then((function(t){return _h(e)&&t.uid==_h(e).uid?(Bl(_h(e),t),e.da(t)):(gh(e,t),Al(t),e.da(t))})).then((function(){Oh(e)}))}function gh(e,t){_h(e)&&(function(e,t){J(e.S,(function(e){return e==t}))}(_h(e),e.Ba),pn(_h(e),"tokenChanged",e.ya),pn(_h(e),"userDeleted",e.za),pn(_h(e),"userInvalidated",e.Aa),Nl(_h(e))),t&&(t.S.push(e.Ba),hn(t,"tokenChanged",e.ya),hn(t,"userDeleted",e.za),hn(t,"userInvalidated",e.Aa),0<e.u&&jl(t)),$r(e,"currentUser",t),t&&(t.wa(e.la()),Il(t,e),kl(t,e.J),Cl(t,e),us(t.a,e.P),Sl(t,e))}function yh(e,t){var n=null,r=null;return Eh(e,t.then((function(t){return n=qo(t),r=$i(t),mh(e,t)}),(function(t){var n=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(n=cl(t.w(),e,O(e.kc,e))),n||t})).then((function(){return ei({user:_h(e),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function bh(e){return e.app}function _h(e){return e.currentUser}function wh(e){return _h(e)&&_h(e)._lat||null}function Oh(e){if(e.ba){for(var t=0;t<e.s.length;t++)e.s[t]&&e.s[t](wh(e));if(e.X!==e.getUid()&&e.O.length)for(e.X=e.getUid(),t=0;t<e.O.length;t++)e.O[t]&&e.O[t](wh(e))}}function Eh(e,t){return e.R.push(t),t.oa((function(){X(e.R,t)})),t}function Th(){}function Ih(){this.a={},this.b=1e12}nh.prototype.xb=function(e){var t=null,n=this;return function(e){var t=new k("invalid-persistence-type"),n=new k("unsupported-persistence-type");e:{for(r in rc)if(rc[r]==e){var r=!0;break e}r=!1}if(!r||"string"!==typeof e)throw t;switch(Tr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;case"Worker":if("session"===e||!Mu()&&"none"!==e)throw n;break;default:if(!Pr()&&"none"!==e)throw n}}(e),ch(this,(function(){return e!=n.c.F?n.b.get(n.c,n.a).then((function(r){return t=r,rh(n,e)})).then((function(){if(n.c=oh(e),t)return n.b.set(n.c,t,n.a)})):Dt()}))},I(lh,En),I(hh,$t),I(fh,$t),I(dh,$t),(n=lh.prototype).xb=function(e){return Eh(this,e=this.i.xb(e))},n.wa=function(e){this.aa===e||this.l||(this.aa=e,ss(this.a,this.aa),this.dispatchEvent(new hh(this.la())))},n.la=function(){return this.aa},n.fd=function(){var e=u.navigator;this.wa(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},n.gd=function(e,t){if(!this.P){if(!/^https?:\/\//.test(e))throw new k("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(e){"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&!e&&_r().then((function(){var e=u.document.createElement("div");e.innerText="Running in emulator mode. Do not use with production credentials.",e.style.position="fixed",e.style.width="100%",e.style.backgroundColor="#ffffff",e.style.border=".1em solid #000000",e.style.color="#ff0000",e.style.bottom="0px",e.style.left="0px",e.style.margin="0px",e.style.zIndex=1e4,e.style.textAlign="center",e.classList.add("firebase-emulator-warning"),u.document.body.appendChild(e)}))})(t=!!t&&!!t.disableWarnings),this.P={url:e,ec:t},this.settings.ib=!0,us(this.a,this.P),this.dispatchEvent(new fh(this.P))}},n.Gc=function(e){this.J.push(e),ls(this.a,t.a.SDK_VERSION?jr(t.a.SDK_VERSION,this.J):null),this.dispatchEvent(new dh(this.J))},n.Ga=function(){return Z(this.J)},n.yb=function(e){this.S===e||this.l||(this.S=e,this.a.b=this.S)},n.T=function(){return this.S},n.toJSON=function(){return{apiKey:bh(this).options.apiKey,authDomain:bh(this).options.authDomain,appName:bh(this).name,currentUser:_h(this)&&_h(this).w()}},n.Fb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},n.na=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.C?this.C(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},n.Fa=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?O(this.ic,this):null},n.ic=function(e,t,n,r){var i=this,o={requestUri:e,postBody:r,sessionId:t,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return yh(i,Ts(i.a,o))}))},n.Xc=function(e){if(!Ar())return jt(new k("operation-not-supported-in-this-environment"));var n=this,r=Ji(e.providerId),i=qr(),o=null;(!Lr()||Or())&&bh(this).options.authDomain&&e.isOAuthProvider&&(o=Ou(bh(this).options.authDomain,bh(this).options.apiKey,bh(this).name,"signInViaPopup",e,null,i,t.a.SDK_VERSION||null,null,null,this.T(),this.P));var a=gr(o,r&&r.ua,r&&r.ta);return Eh(this,r=ph(this).then((function(t){return Bc(t,a,"signInViaPopup",e,i,!!o,n.T())})).then((function(){return new Ot((function(e,t){n.na("signInViaPopup",null,new k("cancelled-popup-request"),n.g),n.f=e,n.C=t,n.g=i,n.c=Kc(n.b,n,"signInViaPopup",a,i)}))})).then((function(e){return a&&mr(a),e?ei(e):null})).o((function(e){throw a&&mr(a),e})))},n.Yc=function(e){if(!Ar())return jt(new k("operation-not-supported-in-this-environment"));var t=this;return Eh(this,ph(this).then((function(){return function(e){return ch(e,(function(){return e.b.set(ih,e.c.F,e.a)}))}(t.i)})).then((function(){return Wc(t.b,"signInViaRedirect",e,void 0,t.T())})))},n.qa=function(){var e=this;return vh(this).then((function(t){return e.b&&Jc(e.b.b),t})).o((function(t){throw e.b&&Jc(e.b.b),t}))},n.dd=function(e){if(!e)return jt(new k("null-user"));if(this.S!=e.tenantId)return jt(new k("tenant-id-mismatch"));var t=this,n={};n.apiKey=bh(this).options.apiKey,n.authDomain=bh(this).options.authDomain,n.appName=bh(this).name;var r=function(e,t,n,r){var i=e.b,o={};return o[ns]=i.b&&i.b.toString(),o.refreshToken=i.a,t=new Tl(t||{apiKey:e.l,authDomain:e.s,appName:e.m},o),n&&(t.ha=n),r&&kl(t,r),Bl(t,e),t}(e,n,t.D,t.Ga());return Eh(this,this.h.then((function(){if(bh(t).options.apiKey!=e.l)return r.reload()})).then((function(){return _h(t)&&e.uid==_h(t).uid?(Bl(_h(t),e),t.da(e)):(gh(t,r),Al(r),t.da(r))})).then((function(){Oh(t)})))},n.Ab=function(){var e=this;return Eh(this,this.h.then((function(){return e.b&&Jc(e.b.b),_h(e)?(gh(e,null),sh(e.i).then((function(){Oh(e)}))):Dt()})))},n.Zc=function(){var e=this;return uh(this.i,bh(this).options.authDomain).then((function(t){if(!e.l){var n;if(n=_h(e)&&t){n=_h(e).uid;var r=t.uid;n=void 0!==n&&null!==n&&""!==n&&void 0!==r&&null!==r&&""!==r&&n==r}if(n)return Bl(_h(e),t),_h(e).I();(_h(e)||t)&&(gh(e,t),t&&(Al(t),t.ha=e.D),e.b&&Fc(e.b,e),Oh(e))}}))},n.da=function(e){return ah(this.i,e)},n.mc=function(){Oh(this),this.da(_h(this))},n.wc=function(){this.Ab()},n.xc=function(){this.Ab()},n.kc=function(e){var t=this;return this.h.then((function(){return yh(t,Dt(e))}))},n.zc=function(e){var t=this;this.addAuthTokenListener((function(){e.next(_h(t))}))},n.Ac=function(e){var t=this;!function(e,t){e.O.push(t),Eh(e,e.h.then((function(){!e.l&&Q(e.O,t)&&e.X!==e.getUid()&&(e.X=e.getUid(),t(wh(e)))})))}(this,(function(){e.next(_h(t))}))},n.Ic=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"===typeof e?e(_h(r)):"function"===typeof e.next&&e.next(_h(r))})),this.hb(e,t,n)},n.Hc=function(e,t,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"===typeof e?e(_h(r)):"function"===typeof e.next&&e.next(_h(r))})),this.bc(e,t,n)},n.nc=function(e){var t=this;return Eh(this,this.h.then((function(){return _h(t)?_h(t).I(e).then((function(e){return{accessToken:e}})):null})))},n.Tc=function(e){var t=this;return this.h.then((function(){return yh(t,su(t.a,tu,{token:e}))})).then((function(e){var n=e.user;return ql(n,"isAnonymous",!1),t.da(n),e}))},n.Uc=function(e,t){var n=this;return this.h.then((function(){return yh(n,su(n.a,nu,{email:e,password:t}))}))},n.dc=function(e,t){var n=this;return this.h.then((function(){return yh(n,su(n.a,js,{email:e,password:t}))}))},n.$a=function(e){var t=this;return this.h.then((function(){return yh(t,e.ka(t.a))}))},n.Sc=function(e){return Xr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(e)},n.zb=function(){var e=this;return this.h.then((function(){var t=_h(e);if(t&&t.isAnonymous){var n=ei({providerId:null,isNewUser:!1});return ei({user:t,credential:null,additionalUserInfo:n,operationType:"signIn"})}return yh(e,e.a.zb()).then((function(t){var n=t.user;return ql(n,"isAnonymous",!0),e.da(n),t}))}))},n.getUid=function(){return _h(this)&&_h(this).uid||null},n.cc=function(e){this.addAuthTokenListener(e),this.u++,0<this.u&&_h(this)&&jl(_h(this))},n.Pc=function(e){var t=this;K(this.s,(function(n){n==e&&t.u--})),0>this.u&&(this.u=0),0==this.u&&_h(this)&&Nl(_h(this)),this.removeAuthTokenListener(e)},n.addAuthTokenListener=function(e){var t=this;this.s.push(e),Eh(this,this.h.then((function(){t.l||Q(t.s,e)&&e(wh(t))})))},n.removeAuthTokenListener=function(e){J(this.s,(function(t){return t==e}))},n.delete=function(){this.l=!0;for(var e=0;e<this.R.length;e++)this.R[e].cancel("app-deleted");return this.R=[],this.i&&(e=this.i).b.removeListener(oh("local"),e.a,this.ja),this.b&&(Uc(this.b,this),Jc(this.b.b)),Promise.resolve()},n.hc=function(e){return Eh(this,function(e,t){return su(e,Ns,{identifier:t,continueUri:Rr()?fr():"http://localhost"}).then((function(e){return e.signinMethods||[]}))}(this.a,e))},n.Bc=function(e){return!!Ro(e)},n.wb=function(e,t){var n=this;return Eh(this,Dt().then((function(){var e=new xi(t);if(!e.c)throw new k("argument-error",Ri+" must be true when sending sign in link to email");return Bi(e)})).then((function(t){return n.a.wb(e,t)})).then((function(){})))},n.jd=function(e){return this.Ra(e).then((function(e){return e.data.email}))},n.nb=function(e,t){return Eh(this,this.a.nb(e,t).then((function(){})))},n.Ra=function(e){return Eh(this,this.a.Ra(e).then((function(e){return new ci(e)})))},n.jb=function(e){return Eh(this,this.a.jb(e).then((function(){})))},n.vb=function(e,t){var n=this;return Eh(this,Dt().then((function(){return"undefined"===typeof t||ve(t)?{}:Bi(new xi(t))})).then((function(t){return n.a.vb(e,t)})).then((function(){})))},n.Wc=function(e,t){return Eh(this,rl(this,e,t,O(this.$a,this)))},n.Vc=function(e,t){var n=this;return Eh(this,Dt().then((function(){var r=t||fr(),i=Ao(e,r);if(!(r=Ro(r)))throw new k("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new k("tenant-id-mismatch");return n.$a(i)})))},Th.prototype.render=function(){},Th.prototype.reset=function(){},Th.prototype.getResponse=function(){},Th.prototype.execute=function(){};var Sh=null;function kh(e,t){return(t=Ch(t))&&e.a[t]||null}function Ch(e){return(e="undefined"===typeof e?1e12:e)?e.toString():null}function Dh(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=lt(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():hn(this.f,"click",this.i)}function jh(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Nh(){}function xh(){}Ih.prototype.render=function(e,t){return this.a[this.b.toString()]=new Dh(e,t),this.b++},Ih.prototype.reset=function(e){var t=kh(this,e);e=Ch(e),t&&e&&(t.delete(),delete this.a[e])},Ih.prototype.getResponse=function(e){return(e=kh(this,e))?e.getResponse():null},Ih.prototype.execute=function(e){(e=kh(this,e))&&e.execute()},Dh.prototype.getResponse=function(){return jh(this),this.b},Dh.prototype.execute=function(){jh(this);var e=this;this.a||(this.a=setTimeout((function(){e.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var t=e.c.callback,n=e.c["expired-callback"];if(t)try{t(e.b)}catch(r){}e.a=setTimeout((function(){if(e.a=null,e.b=null,n)try{n()}catch(r){}e.h&&e.execute()}),6e4)}),500))},Dh.prototype.delete=function(){jh(this),this.g=!0,clearTimeout(this.a),this.a=null,pn(this.f,"click",this.i)},$r(Nh,"FACTOR_ID","phone"),xh.prototype.g=function(){return Sh||(Sh=new Ih),Dt(Sh)},xh.prototype.c=function(){};var Ph=null;function Ah(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Rh=new _e(Te,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Mh=new Wr(3e4,6e4);Ah.prototype.g=function(e){var t=this;return new Ot((function(n,r){var i=setTimeout((function(){r(new k("network-request-failed"))}),Mh.get());!u.grecaptcha||e!==t.f&&!t.b?(u[t.a]=function(){if(u.grecaptcha){t.f=e;var o=u.grecaptcha.render;u.grecaptcha.render=function(e,n){return e=o(e,n),t.b++,e},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new k("internal-error"));delete u[t.a]},Dt(Ga(Ce(Rh,{onload:t.a,hl:e||""}))).o((function(){clearTimeout(i),r(new k("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Ah.prototype.c=function(){this.b--};var Lh=null;function Fh(e,t,n,r,i,o,a){if($r(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=t,this.g=null,a?(Ph||(Ph=new xh),a=Ph):(Lh||(Lh=new Ah),a=Lh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[qh])throw new k("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Bh],!u.document)throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!lt(t)||!this.i&&lt(t).hasChildNodes())throw new k("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new es(e,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var c=this.a[Uh];this.a[Uh]=function(e){if(Hh(s,e),"function"===typeof c)c(e);else if("string"===typeof c){var t=xr(c,u);"function"===typeof t&&t(e)}};var l=this.a[Vh];this.a[Vh]=function(){if(Hh(s,null),"function"===typeof l)l();else if("string"===typeof l){var e=xr(l,u);"function"===typeof e&&e()}}}var Uh="callback",Vh="expired-callback",qh="sitekey",Bh="size";function Hh(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(r){}}function Wh(e,t){return e.h.push(t),t.oa((function(){X(e.h,t)})),t}function Kh(e){if(e.D)throw new k("internal-error","RecaptchaVerifier instance has been destroyed.")}function Yh(e,n,r){var i=!1;try{this.b=r||t.a.app()}catch(s){throw new k("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new k("invalid-api-key");r=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(s){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}a=t.a.SDK_VERSION?jr(t.a.SDK_VERSION,a):null,Fh.call(this,r,e,n,(function(){try{var e=o.b.auth().la()}catch(t){e=null}return e}),a,P(D),i)}function Gh(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new k("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].M(n[i])&&!o){if(t=t[i],0>i||i>=zh.length)throw new k("internal-error","Argument validator received an unsupported number of arguments.");n=zh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.K+".";break e}r=null}}if(r)throw new k("argument-error",e+" failed: "+r)}(n=Fh.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=Wh(this,Dt().then((function(){if(Rr()&&!Er())return _r();throw new k("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return e.m.g(e.u())})).then((function(t){return e.g=t,su(e.s,Ws,{})})).then((function(t){e.a[qh]=t.recaptchaSiteKey})).o((function(t){throw e.f=null,t})))},n.render=function(){Kh(this);var e=this;return Wh(this,this.Ia().then((function(){if(null===e.c){var t=e.v;if(!e.i){var n=lt(t);t=function(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ct&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ke(a.name),'"'),a.type){o.push(' type="',Ke(a.type),'"');var s={};ye(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=mt(i,o),a&&("string"===typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):ht(o,a)),2<r.length&&vt(i,o,r),o}("DIV"),n.appendChild(t)}e.c=e.g.render(t,e.a)}return e.c})))},n.verify=function(){Kh(this);var e=this;return Wh(this,this.render().then((function(t){return new Ot((function(n){var r=e.g.getResponse(t);if(r)n(r);else{e.l.push((function t(r){r&&(function(e,t){J(e.l,(function(e){return e==t}))}(e,t),n(r))})),e.i&&e.g.execute(e.c)}}))})))},n.reset=function(){Kh(this),null!==this.c&&this.g.reset(this.c)},n.clear=function(){Kh(this),this.D=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=lt(this.v);for(var t;t=e.firstChild;)e.removeChild(t)}},I(Yh,Fh);var zh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Qh(e,t){return{name:e||"",K:"a valid string",optional:!!t,M:function(e){return"string"===typeof e}}}function Xh(e,t){return{name:e||"",K:"a boolean",optional:!!t,M:function(e){return"boolean"===typeof e}}}function Jh(e,t){return{name:e||"",K:"a valid object",optional:!!t,M:m}}function $h(e,t){return{name:e||"",K:"a function",optional:!!t,M:function(e){return"function"===typeof e}}}function Zh(e,t){return{name:e||"",K:"null",optional:!!t,M:function(e){return null===e}}}function ef(e){return{name:e?e+"Credential":"credential",K:e?"a valid "+e+" credential":"a valid credential",optional:!1,M:function(t){if(!t)return!1;var n=!e||t.providerId===e;return!(!t.ka||!n)}}}function tf(e,t){return m(e)&&"string"===typeof e.type&&e.type===t&&"function"===typeof e.Ha}function nf(e){return m(e)&&"string"===typeof e.uid}function rf(e,t,n,r){return{name:n||"",K:e.K+" or "+t.K,optional:!!r,M:function(n){return e.M(n)||t.M(n)}}}function of(e,t){for(var n in t){var r=t[n].name;e[r]=uf(r,e[n],t[n].j)}}function af(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:E((function(e){return this[e]}),n),set:E((function(e,t,n,r){Gh(e,[n],[r],!0),this[t]=r}),r,n,t[n].kb),enumerable:!0})}}function sf(e,t,n,r){e[t]=uf(t,n,r)}function uf(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Gh(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}of(lh.prototype,{jb:{name:"applyActionCode",j:[Qh("code")]},Ra:{name:"checkActionCode",j:[Qh("code")]},nb:{name:"confirmPasswordReset",j:[Qh("code"),Qh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Qh("email"),Qh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Qh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Qh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[rf(Jh(),$h(),"nextOrObserver"),$h("opt_error",!0),$h("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[rf(Jh(),$h(),"nextOrObserver"),$h("opt_error",!0),$h("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Qh("email"),rf(Jh("opt_actionCodeSettings",!0),Zh(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Qh("email"),Jh("actionCodeSettings")]},xb:{name:"setPersistence",j:[Qh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[ef()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[ef()]},Tc:{name:"signInWithCustomToken",j:[Qh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Qh("email"),Qh("password")]},Vc:{name:"signInWithEmailLink",j:[Qh("email"),Qh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Qh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[rf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(e){return!!(e&&e instanceof Tl)}},Zh(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Qh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Qh("url"),Jh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Qh("code")]}}),af(lh.prototype,{lc:{name:"languageCode",kb:rf(Qh(),Zh(),"languageCode")},ti:{name:"tenantId",kb:rf(Qh(),Zh(),"tenantId")}}),lh.Persistence=rc,lh.Persistence.LOCAL="local",lh.Persistence.SESSION="session",lh.Persistence.NONE="none",of(Tl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Xh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Xh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[ef()]},qb:{name:"linkWithCredential",j:[ef()]},Dc:{name:"linkWithPhoneNumber",j:[Qh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ef()]},tb:{name:"reauthenticateWithCredential",j:[ef()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Qh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[rf(Jh("opt_actionCodeSettings",!0),Zh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Qh(null,!0)]},cd:{name:"unlink",j:[Qh("provider")]},Bb:{name:"updateEmail",j:[Qh("email")]},Cb:{name:"updatePassword",j:[Qh("password")]},ed:{name:"updatePhoneNumber",j:[ef("phone")]},Db:{name:"updateProfile",j:[Jh("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Qh("email"),rf(Jh("opt_actionCodeSettings",!0),Zh(null,!0),"opt_actionCodeSettings",!0)]}}),of(Ih.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),of(Th.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),of(Ot.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),af(tl.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:Xh("appVerificationDisabledForTesting")}}),of(nl.prototype,{confirm:{name:"confirm",j:[Qh("verificationCode")]}}),sf(ho,"fromJSON",(function(e){e="string"===typeof e?JSON.parse(e):e;for(var t,n=[bo,xo,Lo,mo],r=0;r<n.length;r++)if(t=n[r](e))return t;return null}),[rf(Qh(),Jh(),"json")]),sf(Po,"credential",(function(e,t){return new No(e,t)}),[Qh("email"),Qh("password")]),of(No.prototype,{w:{name:"toJSON",j:[Qh(null,!0)]}}),of(Eo.prototype,{Ca:{name:"addScope",j:[Qh("scope")]},Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),sf(Eo,"credential",To,[rf(Qh(),Jh(),"token")]),sf(Po,"credentialWithLink",Ao,[Qh("email"),Qh("emailLink")]),of(Io.prototype,{Ca:{name:"addScope",j:[Qh("scope")]},Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),sf(Io,"credential",So,[rf(Qh(),Jh(),"token")]),of(ko.prototype,{Ca:{name:"addScope",j:[Qh("scope")]},Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),sf(ko,"credential",Co,[rf(Qh(),rf(Jh(),Zh()),"idToken"),rf(Qh(),Zh(),"accessToken",!0)]),of(Do.prototype,{Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),sf(Do,"credential",jo,[rf(Qh(),Jh(),"token"),Qh("secret",!0)]),of(Oo.prototype,{Ca:{name:"addScope",j:[Qh("scope")]},credential:{name:"credential",j:[rf(Qh(),rf(Jh(),Zh()),"optionsOrIdToken"),rf(Qh(),Zh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Jh("customOAuthParameters")]}}),of(go.prototype,{w:{name:"toJSON",j:[Qh(null,!0)]}}),of(po.prototype,{w:{name:"toJSON",j:[Qh(null,!0)]}}),sf(Uo,"credential",Vo,[Qh("verificationId"),Qh("verificationCode")]),of(Uo.prototype,{fb:{name:"verifyPhoneNumber",j:[rf(Qh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(e){return!!e&&(e.session&&e.phoneNumber?tf(e.session,co)&&"string"===typeof e.phoneNumber:e.session&&e.multiFactorHint?tf(e.session,lo)&&nf(e.multiFactorHint):e.session&&e.multiFactorUid?tf(e.session,lo)&&"string"===typeof e.multiFactorUid:!!e.phoneNumber&&"string"===typeof e.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(e){return!(!e||"string"!==typeof e.type||"function"!==typeof e.verify)}}]}}),of(Mo.prototype,{w:{name:"toJSON",j:[Qh(null,!0)]}}),of(k.prototype,{toJSON:{name:"toJSON",j:[Qh(null,!0)]}}),of(Qo.prototype,{toJSON:{name:"toJSON",j:[Qh(null,!0)]}}),of(zo.prototype,{toJSON:{name:"toJSON",j:[Qh(null,!0)]}}),of(ul.prototype,{toJSON:{name:"toJSON",j:[Qh(null,!0)]}}),of(ol.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.sb}}]}}),of(pl.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(e){return!!e&&!!e.sb}},Qh("displayName",!0)]},bd:{name:"unenroll",j:[rf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:nf},Qh(),"multiFactorInfoIdentifier")]}}),of(Yh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),sf(Ei,"parseLink",Ni,[Qh("link")]),sf(Nh,"assertion",(function(e){return new fl(e)}),[ef("phone")]),function(){if("undefined"===typeof t.a||!t.a.INTERNAL||!t.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:hi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:li,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:lh,AuthCredential:ho,Error:k};sf(e,"EmailAuthProvider",Po,[]),sf(e,"FacebookAuthProvider",Eo,[]),sf(e,"GithubAuthProvider",Io,[]),sf(e,"GoogleAuthProvider",ko,[]),sf(e,"TwitterAuthProvider",Do,[]),sf(e,"OAuthProvider",Oo,[Qh("providerId")]),sf(e,"SAMLAuthProvider",wo,[Qh("providerId")]),sf(e,"PhoneAuthProvider",Uo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(e){return!!(e&&e instanceof lh)}}]),sf(e,"RecaptchaVerifier",Yh,[rf(Qh(),{name:"",K:"an HTML element",optional:!1,M:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),Jh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(e){return!!(e&&e instanceof t.a.app.App)}}]),sf(e,"ActionCodeURL",Ei,[]),sf(e,"PhoneMultiFactorGenerator",Nh,[]),t.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new lh(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),t.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:O((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:O(e.nc,e),addAuthTokenListener:O(e.cc,e),removeAuthTokenListener:O(e.Pc,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),t.a.registerVersion("@firebase/auth","0.16.4"),t.a.INTERNAL.extendNamespace({User:Tl})}()}).apply("undefined"!==typeof e?e:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})}).call(this,n(33))},575:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},732:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return ir})),n.d(t,"b",(function(){return ar})),n.d(t,"c",(function(){return or})),n.d(t,"d",(function(){return sr})),n.d(t,"e",(function(){return ur})),n.d(t,"f",(function(){return cr})),n.d(t,"g",(function(){return nr})),n.d(t,"h",(function(){return rr}));var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e){var t="function"===typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"===typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,a="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},s=s||{},u=a||self;function c(){}function l(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function h(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var f="closure_uid_"+(1e9*Math.random()>>>0),d=0;function p(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function m(e,t,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?p:v).apply(null,arguments)}function g(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function y(){return Date.now()}function b(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Kb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function _(){this.j=this.j,this.i=this.i}_.prototype.j=!1,_.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(e){Object.prototype.hasOwnProperty.call(e,f)&&e[f]||(e[f]=++d)})(this)},_.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var w=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},O=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"===typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function E(e){return Array.prototype.concat.apply([],arguments)}function T(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function I(e){return/^[\s\xa0]*$/.test(e)}var S,k=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function C(e,t){return-1!=e.indexOf(t)}function D(e,t){return e<t?-1:e>t?1:0}e:{var j=u.navigator;if(j){var N=j.userAgent;if(N){S=N;break e}}S=""}function x(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function P(e){var t={};for(var n in e)t[n]=e[n];return t}var A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<A.length;o++)n=A[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function M(e){return M[" "](e),e}M[" "]=c;var L,F=C(S,"Opera"),U=C(S,"Trident")||C(S,"MSIE"),V=C(S,"Edge"),q=V||U,B=C(S,"Gecko")&&!(C(S.toLowerCase(),"webkit")&&!C(S,"Edge"))&&!(C(S,"Trident")||C(S,"MSIE"))&&!C(S,"Edge"),H=C(S.toLowerCase(),"webkit")&&!C(S,"Edge");function W(){var e=u.document;return e?e.documentMode:void 0}e:{var K="",Y=function(){var e=S;return B?/rv:([^\);]+)(\)|;)/.exec(e):V?/Edge\/([\d\.]+)/.exec(e):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):H?/WebKit\/(\S+)/.exec(e):F?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Y&&(K=Y?Y[1]:""),U){var G=W();if(null!=G&&G>parseFloat(K)){L=String(G);break e}}L=K}var z,Q={};function X(e){return function(e,t){var n=Q;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(){for(var t=0,n=k(String(L)).split("."),r=k(String(e)).split("."),i=Math.max(n.length,r.length),o=0;0==t&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;t=D(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||D(0==a[2].length,0==s[2].length)||D(a[2],s[2]),a=a[3],s=s[3]}while(0==t)}return 0<=t}))}if(u.document&&U){var J=W();z=J||(parseInt(L,10)||void 0)}else z=void 0;var $=z,Z=!U||9<=Number($),ee=U&&!X("9"),te=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{u.addEventListener("test",c,t),u.removeEventListener("test",c,t)}catch(n){}return e}();function ne(e,t){this.type=e,this.a=this.target=t,this.defaultPrevented=!1}function re(e,t){if(ne.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(B){e:{try{M(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:ie[e.pointerType]||"",this.c=e,e.defaultPrevented&&this.b()}}ne.prototype.b=function(){this.defaultPrevented=!0},b(re,ne);var ie={2:"touch",3:"pen",4:"mouse"};re.prototype.b=function(){re.X.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,ee)try{(e.ctrlKey||112<=e.keyCode&&123>=e.keyCode)&&(e.keyCode=-1)}catch(t){}};var oe="closure_listenable_"+(1e6*Math.random()|0),ae=0;function se(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ca=i,this.key=++ae,this.Y=this.Z=!1}function ue(e){e.Y=!0,e.listener=null,e.proxy=null,e.src=null,e.ca=null}function ce(e){this.src=e,this.a={},this.b=0}function le(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=w(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ue(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function he(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.Y&&o.listener==t&&o.capture==!!n&&o.ca==r)return i}return-1}ce.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=he(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new se(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var fe="closure_lm_"+(1e6*Math.random()|0),de={};function pe(e,t,n,r,i){if(r&&r.once)return me(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)pe(e,t[o],n,r,i);return null}return n=Te(n),e&&e[oe]?e.va(t,n,h(r)?!!r.capture:!!r,i):ve(e,t,n,!1,r,i)}function ve(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=h(i)?!!i.capture:!!i;if(a&&!Z)return null;var s=Oe(e);if(s||(e[fe]=s=new ce(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=we,t=Z?function(n){return e.call(t.src,t.listener,n)}:function(n){if(!(n=e.call(t.src,t.listener,n)))return n};return t}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)te||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(be(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function me(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)me(e,t[o],n,r,i);return null}return n=Te(n),e&&e[oe]?e.wa(t,n,h(r)?!!r.capture:!!r,i):ve(e,t,n,!0,r,i)}function ge(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)ge(e,t[o],n,r,i);else r=h(r)?!!r.capture:!!r,n=Te(n),e&&e[oe]?(e=e.c,(t=String(t).toString())in e.a&&(-1<(n=he(o=e.a[t],n,r,i))&&(ue(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):e&&(e=Oe(e))&&(t=e.a[t.toString()],e=-1,t&&(e=he(t,n,r,i)),(n=-1<e?t[e]:null)&&ye(n))}function ye(e){if("number"!==typeof e&&e&&!e.Y){var t=e.src;if(t&&t[oe])le(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(be(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Oe(t))?(le(n,e),0==n.b&&(n.src=null,t[fe]=null)):ue(e)}}}function be(e){return e in de?de[e]:de[e]="on"+e}function _e(e,t){var n=e.listener,r=e.ca||e.src;return e.Z&&ye(e),n.call(r,t)}function we(e,t){if(e.Y)return!0;if(!Z){if(!t)e:{t=["window","event"];for(var n=u,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}return _e(e,t=new re(t,this))}return _e(e,new re(t,this))}function Oe(e){return(e=e[fe])instanceof ce?e:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(e){return"function"===typeof e?e:(e[Ee]||(e[Ee]=function(t){return e.handleEvent(t)}),e[Ee])}function Ie(){_.call(this),this.c=new ce(this),this.J=this,this.C=null}function Se(e,t){var n,r=e.C;if(r)for(n=[];r;r=r.C)n.push(r);if(e=e.J,r=t.type||t,"string"===typeof t)t=new ne(t,e);else if(t instanceof ne)t.target=t.target||e;else{var i=t;R(t=new ne(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.a=n[o];i=ke(a,r,!0,t)&&i}if(i=ke(a=t.a=e,r,!0,t)&&i,i=ke(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ke(a=t.a=n[o],r,!1,t)&&i}function ke(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&le(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}b(Ie,_),Ie.prototype[oe]=!0,(o=Ie.prototype).addEventListener=function(e,t,n,r){pe(this,e,t,n,r)},o.removeEventListener=function(e,t,n,r){ge(this,e,t,n,r)},o.G=function(){if(Ie.X.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)ue(n[r]);delete t.a[e],t.b--}}this.C=null},o.va=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},o.wa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ce=u.JSON.stringify;function De(){this.b=this.a=null}var je,Ne=new(function(){function e(e,t){this.c=e,this.f=t,this.b=0,this.a=null}return e.prototype.get=function(){var e;return 0<this.b?(this.b--,e=this.a,this.a=e.next,e.next=null):e=this.c(),e},e}())((function(){return new Pe}),(function(e){e.reset()}));function xe(){var e=Le,t=null;return e.a&&(t=e.a,e.a=e.a.next,e.a||(e.b=null),t.next=null),t}function Pe(){this.next=this.b=this.a=null}function Ae(e){u.setTimeout((function(){throw e}),0)}function Re(e,t){je||function(){var e=u.Promise.resolve(void 0);je=function(){e.then(Fe)}}(),Me||(je(),Me=!0),Le.add(e,t)}De.prototype.add=function(e,t){var n=Ne.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},Pe.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},Pe.prototype.reset=function(){this.next=this.b=this.a=null};var Me=!1,Le=new De;function Fe(){for(var e;e=xe();){try{e.a.call(e.b)}catch(n){Ae(n)}var t=Ne;t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}Me=!1}function Ue(e,t){Ie.call(this),this.b=e||1,this.a=t||u,this.f=m(this.Za,this),this.g=y()}function Ve(e){e.aa=!1,e.M&&(e.a.clearTimeout(e.M),e.M=null)}function qe(e,t,n){if("function"===typeof e)n&&(e=m(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=m(e.handleEvent,e)}return 2147483647<Number(t)?-1:u.setTimeout(e,t||0)}function Be(e){e.a=qe((function(){e.a=null,e.c&&(e.c=!1,Be(e))}),e.h);var t=e.b;e.b=null,e.g.apply(null,t)}b(Ue,Ie),(o=Ue.prototype).aa=!1,o.M=null,o.Za=function(){if(this.aa){var e=y()-this.g;0<e&&e<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-e):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Se(this,"tick"),this.aa&&(Ve(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=y())},o.G=function(){Ue.X.G.call(this),Ve(this),delete this.a};var He=function(e){function t(t,n){var r=e.call(this)||this;return r.g=t,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}(t,e),t.prototype.f=function(e){this.b=arguments,this.a?this.c=!0:Be(this)},t.prototype.G=function(){e.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},t}(_);function We(e){_.call(this),this.b=e,this.a={}}b(We,_);var Ke=[];function Ye(e,t,n,r){Array.isArray(n)||(n&&(Ke[0]=n.toString()),n=Ke);for(var i=0;i<n.length;i++){var o=pe(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Ge(e){x(e.a,(function(e,t){this.a.hasOwnProperty(t)&&ye(e)}),e),e.a={}}function ze(){this.a=!0}function Qe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.a)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Ce(n)}catch(s){return t}}(e,n)+(r?" "+r:"")}))}We.prototype.G=function(){We.X.G.call(this),Ge(this)},We.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ze.prototype.info=function(){};var Xe={},Je=null;function $e(){return Je=Je||new Ie}function Ze(e){ne.call(this,Xe.Fa,e)}function et(e){var t=$e();Se(t,new Ze(t,e))}function tt(e,t){ne.call(this,Xe.STAT_EVENT,e),this.stat=t}function nt(e){var t=$e();Se(t,new tt(t,e))}function rt(e){ne.call(this,Xe.Ga,e)}function it(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){e()}),t)}Xe.Fa="serverreachability",b(Ze,ne),Xe.STAT_EVENT="statevent",b(tt,ne),Xe.Ga="timingevent",b(rt,ne);var ot={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},at={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function st(){}function ut(e){var t;return(t=e.a)||(t=e.a={}),t}function ct(){}st.prototype.a=null;var lt,ht={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ft(){ne.call(this,"d")}function dt(){ne.call(this,"c")}function pt(){}function vt(e,t,n,r){this.g=e,this.c=t,this.f=n,this.S=r||1,this.J=new We(this),this.P=mt,e=q?125:void 0,this.R=new Ue(e),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}b(ft,ne),b(dt,ne),b(pt,st),lt=new pt;var mt=45e3,gt={},yt={};function bt(e,t,n){e.H=1,e.i=qt(Rt(t)),e.j=n,e.I=!0,_t(e,null)}function _t(e,t){e.u=y(),Et(e),e.l=Rt(e.i);var n=e.l,r=e.S;Array.isArray(r)||(r=[String(r)]),en(n.b,"t",r),e.D=0,e.a=Qn(e.g,e.g.C?t:null),0<e.O&&(e.F=new He(m(e.Ca,e,e.a),e.O)),Ye(e.J,e.a,"readystatechange",e.Xa),t=e.B?P(e.B):{},e.j?(e.m||(e.m="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ba(e.l,e.m,e.j,t)):(e.m="GET",e.a.ba(e.l,e.m,null,t)),et(1),function(e,t,n,r,i,o){e.info((function(){if(e.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.c,e.m,e.l,e.f,e.S,e.j)}function wt(e,t,n){for(var r=!0;!e.A&&e.D<n.length;){var i=Ot(e,n);if(i==yt){4==t&&(e.h=4,nt(14),r=!1),Qe(e.c,e.f,null,"[Incomplete Response]");break}if(i==gt){e.h=4,nt(15),Qe(e.c,e.f,n,"[Invalid Chunk]"),r=!1;break}Qe(e.c,e.f,i,null),Ct(e,i)}4==t&&0==n.length&&(e.h=1,nt(16),r=!1),e.b=e.b&&r,r?0<n.length&&!e.V&&(e.V=!0,(t=e.g).a==e&&t.U&&!t.F&&(t.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),qn(t),t.F=!0,nt(11))):(Qe(e.c,e.f,n,"[Invalid Chunked Response]"),kt(e),St(e))}function Ot(e,t){var n=e.D,r=t.indexOf("\n",n);return-1==r?yt:(n=Number(t.substring(n,r)),isNaN(n)?gt:(r+=1)+n>t.length?yt:(t=t.substr(r,n),e.D=r+n,t))}function Et(e){e.T=y()+e.P,Tt(e,e.P)}function Tt(e,t){if(null!=e.o)throw Error("WatchDog timer not null");e.o=it(m(e.Va,e),t)}function It(e){e.o&&(u.clearTimeout(e.o),e.o=null)}function St(e){0==e.g.v||e.A||Wn(e.g,e)}function kt(e){It(e);var t=e.F;t&&"function"==typeof t.ja&&t.ja(),e.F=null,Ve(e.R),Ge(e.J),e.a&&(t=e.a,e.a=null,t.abort(),t.ja())}function Ct(e,t){try{var n=e.g;if(0!=n.v&&(n.a==e||un(n.b,e)))if(n.I=e.N,!e.C&&un(n.b,e)&&3==n.v){try{var r=n.ka.a.parse(t)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.j){if(n.a){if(!(n.a.u+3e3<e.u))break e;Hn(n),xn(n)}Vn(n),nt(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=it(m(n.Sa,n),6e3));if(1>=sn(n.b)&&n.ea){try{n.ea()}catch(g){}n.ea=void 0}}else Yn(n,11)}else if((e.C||n.a==e)&&Hn(n),!I(t))for(t=r=n.ka.a.parse(t),r=0;r<t.length;r++)if(i=t[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"===typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=e.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(C(l,"spdy")||C(l,"quic")||C(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(cn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Vt(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=y()-e.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=e;if((u=n).la=zn(u,u.C?u.ga:null,u.fa),d.C){ln(u.b,d);var p=d,v=u.D;v&&p.setTimeout(v),p.o&&(It(p),Et(p)),u.a=d}else Un(u);0<n.g.length&&Rn(n)}else"stop"!=i[0]&&"close"!=i[0]||Yn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Yn(n,7):Nn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);et(4)}catch(g){}}function Dt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(l(e)||"string"===typeof e)O(e,t,void 0);else{if(e.L&&"function"==typeof e.L)var n=e.L();else if(e.K&&"function"==typeof e.K)n=void 0;else if(l(e)||"string"===typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.K&&"function"==typeof e.K)return e.K();if("string"===typeof e)return e.split("");if(l(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function jt(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof jt)for(n=e.L(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Nt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];xt(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)xt(i,r=e.a[t])||(e.a[n++]=r,i[r]=1),t++;e.a.length=n}}function xt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(o=vt.prototype).setTimeout=function(e){this.P=e},o.Xa=function(e){e=e.target;var t=this.F;t&&3==kn(e)?t.f():this.Ca(e)},o.Ca=function(e){try{if(e==this.a)e:{var t=kn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>t||3==t&&!q&&!this.a.$())){this.A||4!=t||7==n||et(8==n||0>=r?3:2),It(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,t,i),this.b){if(this.U&&!this.C){t:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(a)){var u=a;break t}}u=null}if(!u){this.b=!1,this.h=3,nt(12),kt(this),St(this);break e}Qe(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Ct(this,u)}this.I?(wt(this,t,o),q&&this.b&&3==t&&(Ye(this.J,this.R,"tick",this.Wa),this.R.start())):(Qe(this.c,this.f,o,null),Ct(this,o)),4==t&&kt(this),this.b&&!this.A&&(4==t?Wn(this.g,this):(this.b=!1,Et(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,nt(12)):(this.h=0,nt(13)),kt(this),St(this)}}}catch(c){}},o.Wa=function(){if(this.a){var e=kn(this.a),t=this.a.$();this.D<t.length&&(It(this),wt(this,e,t),this.b&&4!=e&&Et(this))}},o.cancel=function(){this.A=!0,kt(this)},o.Va=function(){this.o=null;var e=y();0<=e-this.T?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.c,this.l),2!=this.H&&(et(3),nt(17)),kt(this),this.h=2,St(this)):Tt(this,this.T-e)},(o=jt.prototype).K=function(){Nt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},o.L=function(){return Nt(this),this.a.concat()},o.get=function(e,t){return xt(this.b,e)?this.b[e]:t},o.set=function(e,t){xt(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},o.forEach=function(e,t){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Pt=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function At(e,t){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,e instanceof At){this.a=void 0!==t?t:e.a,Mt(this,e.f),this.j=e.j,Lt(this,e.c),Ft(this,e.h),this.g=e.g,t=e.b;var n=new Xt;n.c=t.c,t.a&&(n.a=new jt(t.a),n.b=t.b),Ut(this,n),this.i=e.i}else e&&(n=String(e).match(Pt))?(this.a=!!t,Mt(this,n[1]||"",!0),this.j=Bt(n[2]||""),Lt(this,n[3]||"",!0),Ft(this,n[4]),this.g=Bt(n[5]||"",!0),Ut(this,n[6]||"",!0),this.i=Bt(n[7]||"")):(this.a=!!t,this.b=new Xt(null,this.a))}function Rt(e){return new At(e)}function Mt(e,t,n){e.f=n?Bt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Lt(e,t,n){e.c=n?Bt(t,!0):t}function Ft(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.h=t}else e.h=null}function Ut(e,t,n){t instanceof Xt?(e.b=t,function(e,t){t&&!e.f&&(Jt(e),e.c=null,e.a.forEach((function(e,t){var n=t.toLowerCase();t!=n&&($t(this,t),en(this,n,e))}),e)),e.f=t}(e.b,e.a)):(n||(t=Ht(t,zt)),e.b=new Xt(t,e.a))}function Vt(e,t,n){e.b.set(t,n)}function qt(e){return Vt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^y()).toString(36)),e}function Bt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ht(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Wt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Wt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}At.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Ht(t,Kt,!0),":");var n=this.c;return(n||"file"==t)&&(e.push("//"),(t=this.j)&&e.push(Ht(t,Kt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&e.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ht(n,"/"==n.charAt(0)?Gt:Yt,!0))),(n=this.b.toString())&&e.push("?",n),(n=this.i)&&e.push("#",Ht(n,Qt)),e.join("")};var Kt=/[#\/\?@]/g,Yt=/[#\?:]/g,Gt=/[#\?]/g,zt=/[#\?@]/g,Qt=/#/g;function Xt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Jt(e){e.a||(e.a=new jt,e.b=0,e.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.c,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function $t(e,t){Jt(e),t=tn(e,t),xt(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,xt((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Nt(e)))}function Zt(e,t){return Jt(e),t=tn(e,t),xt(e.a.b,t)}function en(e,t,n){$t(e,t),0<n.length&&(e.c=null,e.a.set(tn(e,t),T(n)),e.b+=n.length)}function tn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(o=Xt.prototype).add=function(e,t){Jt(this),this.c=null,e=tn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},o.forEach=function(e,t){Jt(this),this.a.forEach((function(n,r){O(n,(function(n){e.call(t,n,r,this)}),this)}),this)},o.L=function(){Jt(this);for(var e=this.a.K(),t=this.a.L(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},o.K=function(e){Jt(this);var t=[];if("string"===typeof e)Zt(this,e)&&(t=E(t,this.a.get(tn(this,e))));else{e=this.a.K();for(var n=0;n<e.length;n++)t=E(t,e[n])}return t},o.set=function(e,t){return Jt(this),this.c=null,Zt(this,e=tn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},o.get=function(e,t){return e&&0<(e=this.K(e)).length?String(e[0]):t},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.L(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var nn=function(e,t){this.b=e,this.a=t};function rn(e){this.g=e||on,u.PerformanceNavigationTiming?e=0<(e=u.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().Lb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var on=10;function an(e){return!!e.b||!!e.a&&e.a.size>=e.f}function sn(e){return e.b?1:e.a?e.a.size:0}function un(e,t){return e.b?e.b==t:!!e.a&&e.a.has(t)}function cn(e,t){e.a?e.a.add(t):e.b=t}function ln(e,t){e.b&&e.b==t?e.b=null:e.a&&e.a.has(t)&&e.a.delete(t)}function hn(e){var t,n;if(null!=e.b)return e.c.concat(e.b.s);if(null!=e.a&&0!==e.a.size){var r=e.c;try{for(var o=i(e.a.values()),a=o.next();!a.done;a=o.next()){var s=a.value;r=r.concat(s.s)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}return T(e.c)}function fn(){}function dn(){this.a=new fn}function pn(e,t,n){var r=n||"";try{Dt(e,(function(e,n){var i=e;h(e)&&(i=Ce(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function vn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}rn.prototype.cancel=function(){var e,t;if(this.c=hn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(o){e={error:o}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},fn.prototype.stringify=function(e){return u.JSON.stringify(e,void 0)},fn.prototype.parse=function(e){return u.JSON.parse(e,void 0)};var mn=u.JSON.parse;function gn(e){Ie.call(this),this.headers=new jt,this.H=e||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=yn,this.D=this.F=!1}b(gn,Ie);var yn="",bn=/^https?$/i,_n=["POST","PUT"];function wn(e){return"content-type"==e.toLowerCase()}function On(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,En(e),In(e)}function En(e){e.u||(e.u=!0,Se(e,"complete"),Se(e,"error"))}function Tn(e){if(e.b&&"undefined"!=typeof s&&(!e.s[1]||4!=kn(e)||2!=e.W()))if(e.l&&4==kn(e))qe(e.za,0,e);else if(Se(e,"readystatechange"),4==kn(e)){e.b=!1;try{var t,n=e.W();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.B).match(Pt)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!bn.test(o?o.toLowerCase():"")}t=i}if(t)Se(e,"complete"),Se(e,"success");else{e.h=6;try{var c=2<kn(e)?e.a.statusText:""}catch(n){c=""}e.f=c+" ["+e.W()+"]",En(e)}}finally{In(e)}}}function In(e,t){if(e.a){Sn(e);var n=e.a,r=e.s[0]?c:null;e.a=null,e.s=null,t||Se(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Sn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(u.clearTimeout(e.m),e.m=null)}function kn(e){return e.a?e.a.readyState:0}function Cn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return x(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Vt(e,t,n))}function Dn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function jn(e){this.pa=0,this.g=[],this.c=new ze,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Dn("failFast",!1,e),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Dn("baseRetryDelayMs",5e3,e),this.Ra=Dn("retryDelaySeedMs",1e4,e),this.Ma=Dn("forwardChannelMaxRetries",2,e),this.ma=Dn("forwardChannelRequestTimeoutMs",2e4,e),this.Na=e&&e.g||void 0,this.D=void 0,this.C=e&&e.supportsCrossDomainXhr||!1,this.J="",this.b=new rn(e&&e.concurrentRequestLimit),this.ka=new dn,this.da=e&&e.fastHandshake||!1,this.Ia=e&&e.b||!1,e&&e.f&&(this.c.a=!1),e&&e.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&e&&e.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=e&&e.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Nn(e){if(Pn(e),3==e.v){var t=e.R++,n=Rt(e.B);Vt(n,"SID",e.J),Vt(n,"RID",t),Vt(n,"TYPE","terminate"),Ln(e,n),(t=new vt(e,e.c,t,void 0)).H=2,t.i=qt(Rt(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(t.i.toString(),"")),!n&&u.Image&&((new Image).src=t.i,n=!0),n||(t.a=Qn(t.g,null),t.a.ba(t.i)),t.u=y(),Et(t)}Gn(e)}function xn(e){e.a&&(qn(e),e.a.cancel(),e.a=null)}function Pn(e){xn(e),e.j&&(u.clearTimeout(e.j),e.j=null),Hn(e),e.b.cancel(),e.h&&("number"===typeof e.h&&u.clearTimeout(e.h),e.h=null)}function An(e,t){e.g.push(new nn(e.Oa++,t)),3==e.v&&Rn(e)}function Rn(e){an(e.b)||e.h||(e.h=!0,Re(e.Ba,e),e.u=0)}function Mn(e,t){var n;n=t?t.f:e.R++;var r=Rt(e.B);Vt(r,"SID",e.J),Vt(r,"RID",n),Vt(r,"AID",e.P),Ln(e,r),e.i&&e.l&&Cn(r,e.i,e.l),n=new vt(e,e.c,n,e.u+1),null===e.i&&(n.B=e.l),t&&(e.g=t.s.concat(e.g)),t=Fn(e,n,1e3),n.setTimeout(Math.round(.5*e.ma)+Math.round(.5*e.ma*Math.random())),cn(e.b,n),bt(n,r,t)}function Ln(e,t){e.f&&Dt({},(function(e,n){Vt(t,n,e)}))}function Fn(e,t,n){n=Math.min(e.g.length,n);var r=e.f?m(e.f.Ja,e.f,e):null;e:for(var i=e.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{pn(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.g.splice(0,n),t.s=e,r}function Un(e){e.a||e.j||(e.T=1,Re(e.Aa,e),e.o=0)}function Vn(e){return!(e.a||e.j||3<=e.o)&&(e.T++,e.j=it(m(e.Aa,e),Kn(e,e.o)),e.o++,!0)}function qn(e){null!=e.s&&(u.clearTimeout(e.s),e.s=null)}function Bn(e){e.a=new vt(e,e.c,"rpc",e.T),null===e.i&&(e.a.B=e.l),e.a.O=0;var t=Rt(e.la);Vt(t,"RID","rpc"),Vt(t,"SID",e.J),Vt(t,"CI",e.H?"0":"1"),Vt(t,"AID",e.P),Ln(e,t),Vt(t,"TYPE","xmlhttp"),e.i&&e.l&&Cn(t,e.i,e.l),e.D&&e.a.setTimeout(e.D);var n=e.a;e=e.ga,n.H=1,n.i=qt(Rt(t)),n.j=null,n.I=!0,_t(n,e)}function Hn(e){null!=e.m&&(u.clearTimeout(e.m),e.m=null)}function Wn(e,t){var n=null;if(e.a==t){Hn(e),qn(e),e.a=null;var r=2}else{if(!un(e.b,t))return;n=t.s,ln(e.b,t),r=1}if(e.I=t.N,0!=e.v)if(t.b)if(1==r){n=t.j?t.j.length:0,t=y()-t.u;var i=e.u;Se(r=$e(),new rt(r,n,t,i)),Rn(e)}else Un(e);else if(3==(i=t.h)||0==i&&0<e.I||!(1==r&&function(e,t){return!(sn(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.g=t.s.concat(e.g),!0):!(1==e.v||2==e.v||e.u>=(e.La?0:e.Ma))&&(e.h=it(m(e.Ba,e,t),Kn(e,e.u)),e.u++,!0))}(e,t)||2==r&&Vn(e)))switch(n&&0<n.length&&(t=e.b,t.c=t.c.concat(n)),i){case 1:Yn(e,5);break;case 4:Yn(e,10);break;case 3:Yn(e,6);break;default:Yn(e,2)}}function Kn(e,t){var n=e.Ha+Math.floor(Math.random()*e.Ra);return e.f||(n*=2),n*t}function Yn(e,t){if(e.c.info("Error code "+t),2==t){var n=null;e.f&&(n=null);var r=m(e.Ya,e);n||(n=new At("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||Mt(n,"https"),qt(n)),function(e,t){var n=new ze;if(u.Image){var r=new Image;r.onload=g(vn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=g(vn,n,r,"TestLoadImage: error",!1,t),r.onabort=g(vn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=g(vn,n,r,"TestLoadImage: timeout",!1,t),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else nt(2);e.v=0,e.f&&e.f.ra(t),Gn(e),Pn(e)}function Gn(e){e.v=0,e.I=-1,e.f&&(0==hn(e.b).length&&0==e.g.length||(e.b.c.length=0,T(e.g),e.g.length=0),e.f.qa())}function zn(e,t,n){var r=function(e){return e instanceof At?Rt(e):new At(e,void 0)}(n);if(""!=r.c)t&&Lt(r,t+"."+r.c),Ft(r,r.h);else{var i=u.location;r=function(e,t,n,r){var i=new At(null,void 0);return e&&Mt(i,e),t&&Lt(i,t),n&&Ft(i,n),r&&(i.g=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.V&&x(e.V,(function(e,t){Vt(r,t,e)})),t=e.A,n=e.na,t&&n&&Vt(r,t,n),Vt(r,"VER",e.ha),Ln(e,r),r}function Qn(e,t){if(t&&!e.C)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new gn(e.Na)).F=e.C,t}function Xn(){}function Jn(){if(U&&!(10<=Number($)))throw Error("Environmental error: no available transport.")}function $n(e,t){Ie.call(this),this.a=new jn(t),this.o=e,this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.l=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.a&&(e?e["X-WebChannel-Client-Profile"]=t.a:e={"X-WebChannel-Client-Profile":t.a}),this.a.O=e,(e=t&&t.httpHeadersOverwriteParam)&&!I(e)&&(this.a.i=e),this.m=t&&t.supportsCrossDomainXhr||!1,this.l=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!I(t)&&(this.a.A=t,null!==(e=this.b)&&t in e&&(t in(e=this.b)&&delete e[t])),this.f=new tr(this)}function Zn(e){ft.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function er(){dt.call(this),this.status=1}function tr(e){this.a=e}(o=gn.prototype).ba=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+e);t=t?t.toUpperCase():"GET",this.B=e,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ut(this.H):ut(lt),this.a.onreadystatechange=m(this.za,this);try{this.A=!0,this.a.open(t,String(e),!0),this.A=!1}catch(o){return void On(this,o)}e=n||"";var i=new jt(this.headers);r&&Dt(r,(function(e,t){i.set(t,e)})),r=function(e){e:{for(var t=wn,n=e.length,r="string"===typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"===typeof e?e.charAt(t):e[t]}(i.L()),n=u.FormData&&e instanceof u.FormData,!(0<=w(_n,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(e,t){this.a.setRequestHeader(t,e)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Sn(this),0<this.o&&((this.D=function(e){return U&&X(9)&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=m(this.xa,this)):this.m=qe(this.xa,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(o){On(this,o)}},o.xa=function(){"undefined"!=typeof s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Se(this,"timeout"),this.abort(8))},o.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,Se(this,"complete"),Se(this,"abort"),In(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),In(this,!0)),gn.X.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?Tn(this):this.Ua())},o.Ua=function(){Tn(this)},o.W=function(){try{return 2<kn(this)?this.a.status:-1}catch(e){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},o.Pa=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),mn(t)}},o.ua=function(){return this.h},o.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},(o=jn.prototype).ha=8,o.v=1,o.Ba=function(e){if(this.h)if(this.h=null,1==this.v){if(!e){this.R=Math.floor(1e5*Math.random()),e=this.R++;var t,n=new vt(this,this.c,e,void 0),r=this.l;if(this.O&&(r?R(r=P(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)e:{for(var i=t=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"===typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.g.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Fn(this,n,t),Vt(i=Rt(this.B),"RID",e),Vt(i,"CVER",22),this.A&&Vt(i,"X-HTTP-Session-Id",this.A),Ln(this,i),this.i&&r&&Cn(i,this.i,r),cn(this.b,n),this.Ia&&Vt(i,"TYPE","init"),this.da?(Vt(i,"$req",t),Vt(i,"SID","null"),n.U=!0,bt(n,i,null)):bt(n,i,t),this.v=2}}else 3==this.v&&(e?Mn(this,e):0==this.g.length||an(this.b)||Mn(this))},o.Aa=function(){if(this.j=null,Bn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var e=2*this.N;this.c.info("BP detection timer enabled: "+e),this.s=it(m(this.Ta,this),e)}},o.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,nt(10),xn(this),Bn(this))},o.Sa=function(){null!=this.m&&(this.m=null,xn(this),Vn(this),nt(19))},o.Ya=function(e){e?(this.c.info("Successfully pinged google.com"),nt(2)):(this.c.info("Failed to ping google.com"),nt(1))},(o=Xn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ja=function(){},Jn.prototype.a=function(e,t){return new $n(e,t)},b($n,Ie),$n.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var e=this.a,t=this.o,n=this.b||void 0;nt(0),e.fa=t,e.V=n||{},e.H=e.S,e.B=zn(e,null,e.fa),Rn(e)},$n.prototype.close=function(){Nn(this.a)},$n.prototype.h=function(e){if("string"===typeof e){var t={};t.__data__=e,An(this.a,t)}else this.l?((t={}).__data__=Ce(e),An(this.a,t)):An(this.a,e)},$n.prototype.G=function(){this.a.f=null,delete this.f,Nn(this.a),delete this.a,$n.X.G.call(this)},b(Zn,ft),b(er,dt),b(tr,Xn),tr.prototype.ta=function(){Se(this.a,"a")},tr.prototype.sa=function(e){Se(this.a,new Zn(e))},tr.prototype.ra=function(e){Se(this.a,new er(e))},tr.prototype.qa=function(){Se(this.a,"b")},Jn.prototype.createWebChannel=Jn.prototype.a,$n.prototype.send=$n.prototype.h,$n.prototype.open=$n.prototype.g,$n.prototype.close=$n.prototype.close,ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,at.COMPLETE="complete",ct.EventType=ht,ht.OPEN="a",ht.CLOSE="b",ht.ERROR="c",ht.MESSAGE="d",Ie.prototype.listen=Ie.prototype.va,gn.prototype.listenOnce=gn.prototype.wa,gn.prototype.getLastError=gn.prototype.Qa,gn.prototype.getLastErrorCode=gn.prototype.ua,gn.prototype.getStatus=gn.prototype.W,gn.prototype.getResponseJson=gn.prototype.Pa,gn.prototype.getResponseText=gn.prototype.$,gn.prototype.send=gn.prototype.ba;var nr=function(){return new Jn},rr=function(){return $e()},ir=ot,or=at,ar=Xe,sr={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},ur=ct,cr=gn}).call(this,n(33))},733:function(e,t,n){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise((function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}}))}function r(e,t,r){var i,o=new Promise((function(o,a){n(i=e[t].apply(e,r)).then(o,a)}));return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then((function(e){if(e)return new l(e,i.request)}))}function o(e,t,n){n.forEach((function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})}))}function a(e,t,n,i){i.forEach((function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})}))}function s(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})}))}function u(e,t,n,r){r.forEach((function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})}))}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise((function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}}))}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}function v(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then((function(e){return new p(e)}))}function m(e){return r(indexedDB,"deleteDatabase",[e])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then((function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then((function(e){if(e)return new l(e,t._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(e){[h,c].forEach((function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise((function(i){n.iterateCursor(e,(function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)}))}))})})),e.openDb=v,e.deleteDb=m,Object.defineProperty(e,"__esModule",{value:!0})}(t)},765:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.children,n=(0,d.useIntl)(),m=(0,r.useConfig)().appConfig,y=(0,s.useTheme)(),b=y.themeID,_=y.isDarkMode,w=y.isRTL,O=m||{},E=O.theme,T=O.pwa,I=O.notistack,S=T||{},k=S.useiOSPWAPrompt,C=S.iOSPWAPromptProps,D=(E||{}).themes,j=void 0===D?[]:D,N=(0,l.default)(b,j,_,w);return a.default.createElement(f.ThemeProvider,{theme:N},a.default.createElement(i.default,null),a.default.createElement(h.SnackbarProvider,g({maxSnack:3},I),a.default.createElement(u.default,null,a.default.createElement(c.default,null,a.default.createElement(p.default,null,a.default.createElement(v.default,null,t))))),k&&a.default.createElement(o.default,g({promptOnVisit:1,timesToShow:3,copyTitle:n.formatMessage({id:"ios_prompt_title",defaultMessage:"Add to Home Screen"}),copyClosePrompt:n.formatMessage({id:"ios_prompt_close",defaultMessage:"Close"}),copyBody:n.formatMessage({id:"ios_prompt_body",defaultMessage:"This website has app functionality. Add it to your home screen to use it in fullscreen and while offline."}),copyShareButtonLabel:n.formatMessage({id:"ios_prompt_share_button",defaultMessage:"1) Press the 'Share' button"}),copyAddHomeButtonLabel:n.formatMessage({id:"ios_prompt_add_to_home_button",defaultMessage:"2) Press 'Add to Home Screen'"}),permanentlyHideOnDismiss:!1},C)))};var r=n(49),i=m(n(497)),o=m(n(766)),a=m(n(0)),s=n(211),u=m(n(767)),c=m(n(365)),l=m(n(768)),h=n(390),f=n(181),d=n(64),p=m(n(289)),v=m(n(300));function m(e){return e&&e.__esModule?e:{default:e}}function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}e.exports=t.default},766:function(e,t,n){(function(t){var r;e.exports=(r=n(0),function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=5)}([function(e,t){e.exports=r},function(e,t,n){var r=n(2),i=n(3);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o=(r(i,{insert:"head",singleton:!1}),i.locals?i.locals:{});e.exports=o},function(e,t,n){"use strict";var r,i=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function s(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],u=t.base?o[0]+t.base:o[0],c=n[u]||0,l="".concat(u," ").concat(c);n[u]=c+1;var h=s(l),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==h?(a[h].references++,a[h].updater(f)):a.push({identifier:l,updater:m(f,t),references:1}),r.push(l)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var l,h=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function f(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=h(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function d(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,v=0;function m(e,t){var n,r,i;if(t.singleton){var o=v++;n=p||(p=c(t)),r=f.bind(null,n,o,!1),i=f.bind(null,n,o,!0)}else n=c(t),r=d.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=i());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=s(n[r]);a[i].references--}for(var o=u(e,t),c=0;c<n.length;c++){var l=s(n[c]);0===a[l].references&&(a[l].updater(),a.splice(l,1))}n=o}}}},function(e,t,n){(t=n(4)(!1)).push([e.i,'._4e96{overflow:hidden}._132a{background-color:rgba(0,0,0,0.8);left:0;min-height:100vh;min-height:-webkit-fill-available;opacity:0;position:fixed;top:0;transition:opacity 0.2s ease-in;width:100vw;z-index:999999}._132a._7c0e{opacity:1;display:block}._132a.efc7{pointer-events:none;touch-action:none}@media (prefers-color-scheme: dark){._132a._20ef{background:rgba(10,10,10,0.5);color:rgba(235,235,245,0.6)}}._6733{-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);background-color:rgba(250,250,250,0.8);border-radius:10px;bottom:0;color:black;filter:brightness(1.1);left:0;margin:0 8px 10px;overflow:hidden;position:fixed;transform:translateY(calc(100% + 10px));transition:transform 0.4s cubic-bezier(0.4, 0.24, 0.3, 1);width:calc(100vw - 16px);z-index:999999}._6733._7c0e{transform:translateY(0);display:block}._6733.efc7{pointer-events:none;touch-action:none}._6733._20ef{background:rgba(255,255,255,0.6);filter:brightness(1.6)}@media (prefers-color-scheme: dark){._6733._20ef{background:rgba(65,65,65,0.7);filter:brightness(1.1)}}._199d{align-items:center;border-bottom:1px solid rgba(0,0,0,0.1);border-top:0px;border-left:0px;border-right:0px;border-width:0.5px;display:flex;flex-flow:row nowrap;justify-content:space-between;padding:13px 16px}._20ef ._199d{border-color:rgba(60,60,67,0.29)}@media (prefers-color-scheme: dark){._20ef ._199d{border-color:rgba(140,140,140,0.7)}}._199d .ab5d{color:#333;font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:18px;font-weight:500;line-height:1.125;margin:0;padding:0}._20ef ._199d .ab5d{color:#000}@media (prefers-color-scheme: dark){._20ef ._199d .ab5d{color:#fff}}._199d ._6a7e{color:#2d7cf6;font-size:16px;padding:0;margin:0;border:0;background:transparent}._20ef ._199d ._6a7e{color:#0055b3}@media (prefers-color-scheme: dark){._20ef ._199d ._6a7e{color:#0984ff}}.ebda{display:flex;width:100%}.ebda .a91e{border-bottom:1px solid rgba(0,0,0,0.1);border-top:0px;border-left:0px;border-right:0px;border-width:0.5px;color:inherit;margin:0 16px;padding:16px;width:100%}._20ef .ebda .a91e{border-color:rgba(60,60,67,0.29)}@media (prefers-color-scheme: dark){._20ef .ebda .a91e{border-color:rgba(140,140,140,0.7)}}._7d3c{color:#7b7b7a;font-family:-apple-system,system-ui,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;font-size:13px;line-height:17px;margin:0;padding:0}._7d3c.e161{font-weight:600}._20ef ._7d3c{color:rgba(60,60,67,0.6)}@media (prefers-color-scheme: dark){._20ef ._7d3c{border-color:rgba(235,235,245,0.6);color:rgba(235,235,245,0.6)}}.e6cc{color:inherit;margin:0 16px;padding:16px}.e6cc ._3183{align-items:center;display:flex;flex-flow:row nowrap;justify-content:flex-start;text-align:left;margin-bottom:16px}.e6cc ._3183:last-of-type{margin-bottom:0}.e6cc ._4408,.e6cc ._4b98{flex:0 0 auto;height:30px;margin-right:32px;width:25px}.e6cc ._4b98{color:#2d7cf6}._20ef .e6cc ._4b98{color:black;fill:black}@media (prefers-color-scheme: dark){._20ef .e6cc ._4b98{color:white;fill:white}}.e6cc ._4408{color:#2d7cf6;fill:#2d7cf6}._20ef .e6cc ._4408{color:#0055b3;fill:#0055b3}@media (prefers-color-scheme: dark){._20ef .e6cc ._4408{color:#0984ff;fill:#0984ff}}\n',""]),t.locals={noScroll:"_4e96",pwaPromptOverlay:"_132a",visible:"_7c0e",hidden:"efc7",modern:"_20ef",pwaPrompt:"_6733",pwaPromptHeader:"_199d",pwaPromptTitle:"ab5d",pwaPromptCancel:"_6a7e",pwaPromptBody:"ebda",pwaPromptDescription:"a91e",pwaPromptCopy:"_7d3c",bold:"e161",pwaPromptInstruction:"e6cc",pwaPromptInstructionStep:"_3183",pwaPromptShareIcon:"_4408",pwaPromptHomeIcon:"_4b98"},e.exports=t},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,i,o=e[1]||"",a=e[3];if(!a)return o;if(t&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),t.push(u))}},t}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n.n(r),o=function(e){var t=e.className,n=e.modern;return void 0!==n&&n?i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 566 670"},i.a.createElement("path",{d:"M255 12c4-4 10-8 16-8s12 3 16 8l94 89c3 4 6 7 8 12 2 6 0 14-5 19-7 8-20 9-28 2l-7-7-57-60 2 54v276c0 12-10 22-22 22-12 1-24-10-23-22V110l1-43-60 65c-5 5-13 8-21 6a19 19 0 0 1-16-17c-1-7 2-13 7-18l95-91z"}),i.a.createElement("path",{d:"M43 207c16-17 40-23 63-23h83v46h-79c-12 0-25 3-33 13-8 9-10 21-10 33v260c0 13 0 27 6 38 5 12 18 18 30 19l14 1h302c14 0 28 0 40-8 11-7 16-21 16-34V276c0-11-2-24-9-33-8-10-22-13-34-13h-78v-46h75c13 0 25 1 37 4 16 4 31 13 41 27 11 17 14 37 14 57v280c0 20-3 41-15 58a71 71 0 0 1-45 27c-11 2-23 3-34 3H109c-19-1-40-4-56-15-14-9-23-23-27-38-4-12-5-25-5-38V270c1-22 6-47 22-63z"})):i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 120 169"},i.a.createElement("g",{fill:"currentColor"},i.a.createElement("path",{d:"M60 0l28 28-2 2a586 586 0 0 0-4 4L64 15v90h-8V15L38 34l-4-4-2-2L60 0z"}),i.a.createElement("path",{d:"M0 49h44v8H8v104h104V57H76v-8h44v120H0V49z"})))},a=function(e){var t=e.className,n=e.modern;return void 0!==n&&n?i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"0 0 578 584"},i.a.createElement("path",{d:"M101 35l19-1h333c12 0 23 0 35 3 17 3 34 12 44 27 13 16 16 38 16 58v329c0 19 0 39-8 57a65 65 0 0 1-37 37c-18 7-38 7-57 7H130c-21 1-44 0-63-10-14-7-25-20-30-34-6-15-8-30-8-45V121c1-21 5-44 19-61 13-16 33-23 53-25m7 46c-10 1-19 6-24 14-7 8-9 20-9 31v334c0 12 2 25 10 34 9 10 23 12 35 12h336c14 1 30-3 38-15 6-9 8-20 8-31V125c0-12-2-24-10-33-9-9-22-12-35-12H121l-13 1z"}),i.a.createElement("path",{d:"M271 161c9-11 31-10 38 4 3 5 3 11 3 17v87h88c7 0 16 1 21 7 6 6 7 14 6 22a21 21 0 0 1-10 14c-5 4-11 5-17 5h-88v82c0 7-1 15-6 20-10 10-29 10-37-2-3-6-4-13-4-19v-81h-87c-8-1-17-3-23-9-5-6-6-15-4-22a21 21 0 0 1 11-14c6-3 13-3 19-3h84v-88c0-7 1-14 6-20z"})):i.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:t,viewBox:"55.99425507 31.98999977 157.76574707 157.76371765"},i.a.createElement("path",{fill:"#58595b",d:"M90.49 32.83a54.6 54.6 0 019.55-.84c23.98.03 47.96 0 71.94.01 8.5.07 17.3 1.74 24.4 6.65 10.94 7.28 16.52 20.54 17.35 33.3.06 26.03 0 52.06.03 78.08 0 10.16-3.59 20.56-10.95 27.73-7.93 7.61-18.94 11.43-29.79 11.98-25.71.03-51.42 0-77.12.01-10.37-.11-21.01-3.77-28.17-11.48-8.22-8.9-11.72-21.29-11.73-33.21.01-23.03-.03-46.05.02-69.07-.01-9.14 1.33-18.71 6.65-26.4 6.21-9.4 16.97-14.79 27.82-16.76m38.18 41.09c-.05 10.25.01 20.5 0 30.75-9.58-.03-19.16.02-28.75-.04-2.27.08-4.98-.25-6.68 1.61-2.84 2.34-2.75 7.12.01 9.48 1.8 1.69 4.46 1.57 6.75 1.64 9.56-.04 19.12-.01 28.67-.03.02 10.24-.06 20.48.01 30.72-.14 2.66 1.36 5.4 3.95 6.3 3.66 1.66 8.52-1.13 8.61-5.23.26-10.59.02-21.2.09-31.79 9.88 0 19.76.02 29.64.01 2.74.12 5.85-.67 7.14-3.34 2.23-3.75-.61-9.34-5.08-9.29-10.57-.14-21.14-.01-31.7-.04-.01-10.25.04-20.49 0-30.74.3-3.5-2.66-7.09-6.3-6.79-3.65-.33-6.66 3.26-6.36 6.78z"}),i.a.createElement("path",{fill:"transparent",d:"M128.67 73.92c-.3-3.52 2.71-7.11 6.36-6.78 3.64-.3 6.6 3.29 6.3 6.79.04 10.25-.01 20.49 0 30.74 10.56.03 21.13-.1 31.7.04 4.47-.05 7.31 5.54 5.08 9.29-1.29 2.67-4.4 3.46-7.14 3.34-9.88.01-19.76-.01-29.64-.01-.07 10.59.17 21.2-.09 31.79-.09 4.1-4.95 6.89-8.61 5.23-2.59-.9-4.09-3.64-3.95-6.3-.07-10.24.01-20.48-.01-30.72-9.55.02-19.11-.01-28.67.03-2.29-.07-4.95.05-6.75-1.64-2.76-2.36-2.85-7.14-.01-9.48 1.7-1.86 4.41-1.53 6.68-1.61 9.59.06 19.17.01 28.75.04.01-10.25-.05-20.5 0-30.75z"}))},s=n(1),u=n.n(s);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t=e.delay,n=e.copyTitle,s=e.copyBody,f=e.copyAddHomeButtonLabel,d=e.copyShareButtonLabel,p=e.copyClosePrompt,v=e.permanentlyHideOnDismiss,m=e.promptData,g=e.maxVisits,y=e.onClose,b=h(Object(r.useState)(!Boolean(t)),2),_=b[0],w=b[1];Object(r.useEffect)((function(){t&&setTimeout((function(){document.activeElement&&document.activeElement.blur(),w(!0)}),t)}),[]),Object(r.useEffect)((function(){_&&document.body.classList.add(u.a.noScroll)}),[_]);var O=/OS (13|14)/.test(window.navigator.userAgent),E=_?u.a.visible:u.a.hidden,T=O?u.a.modern:"legacy",I=function(e){document.body.classList.remove(u.a.noScroll),w(!1),v&&localStorage.setItem("iosPwaPrompt",JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},m,{visits:g}))),"function"==typeof y&&y(e)},S=function(e){_||(e.currentTarget.style.display="none")};return i.a.createElement(r.Fragment,null,i.a.createElement("div",{className:"".concat(u.a.pwaPromptOverlay," ").concat(E," ").concat(T," iOSPWA-overlay"),"aria-label":"Close",role:"button",onClick:I,onTransitionEnd:S}),i.a.createElement("div",{className:"".concat(u.a.pwaPrompt," ").concat(E," ").concat(T," iOSPWA-container"),"aria-describedby":"pwa-prompt-description","aria-labelledby":"pwa-prompt-title",role:"dialog",onTransitionEnd:S},i.a.createElement("div",{className:"".concat(u.a.pwaPromptHeader," iOSPWA-header")},i.a.createElement("p",{id:"pwa-prompt-title",className:"".concat(u.a.pwaPromptTitle," iOSPWA-title")},n),i.a.createElement("button",{className:"".concat(u.a.pwaPromptCancel," iOSPWA-cancel"),onClick:I},p)),i.a.createElement("div",{className:"".concat(u.a.pwaPromptBody," iOSPWA-body")},i.a.createElement("div",{className:"".concat(u.a.pwaPromptDescription," iOSPWA-description")},i.a.createElement("p",{id:"pwa-prompt-description",className:"".concat(u.a.pwaPromptCopy," iOSPWA-description-copy")},s))),i.a.createElement("div",{className:"".concat(u.a.pwaPromptInstruction," iOSPWA-steps")},i.a.createElement("div",{className:"".concat(u.a.pwaPromptInstructionStep," iOSPWA-step1")},i.a.createElement(o,{className:"".concat(u.a.pwaPromptShareIcon," iOSPWA-step1-icon"),modern:O}),i.a.createElement("p",{className:"".concat(u.a.pwaPromptCopy," ").concat(u.a.bold," iOSPWA-step1-copy")},d)),i.a.createElement("div",{className:"".concat(u.a.pwaPromptInstructionStep," iOSPWA-step2")},i.a.createElement(a,{className:"".concat(u.a.pwaPromptHomeIcon," iOSPWA-step2-icon"),modern:O}),i.a.createElement("p",{className:"".concat(u.a.pwaPromptCopy," ").concat(u.a.bold," iOSPWA-step2-copy")},f)))))};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t,n,r,o=e.timesToShow,a=void 0===o?1:o,s=e.promptOnVisit,u=void 0===s?1:s,c=e.permanentlyHideOnDismiss,l=void 0===c||c,h=e.copyTitle,f=void 0===h?"Add to Home Screen":h,m=e.copyBody,g=void 0===m?"This website has app functionality. Add it to your home screen to use it in fullscreen and while offline.":m,y=e.copyShareButtonLabel,b=void 0===y?"1) Press the 'Share' button on the menu bar below.":y,_=e.copyAddHomeButtonLabel,w=void 0===_?"2) Press 'Add to Home Screen'.":_,O=e.copyClosePrompt,E=void 0===O?"Cancel":O,T=e.delay,I=void 0===T?1e3:T,S=e.debug,k=void 0!==S&&S,C=e.onClose,D=void 0===C?function(){}:C,j=JSON.parse(localStorage.getItem("iosPwaPrompt"));if(null===j&&(j={isiOS:(t=/iphone|ipad|ipod/.test(window.navigator.userAgent.toLowerCase()),n="MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,r="standalone"in window.navigator&&window.navigator.standalone,(t||n)&&!r),visits:0},localStorage.setItem("iosPwaPrompt",JSON.stringify(j))),j.isiOS||k){var N=j.visits+1>=u;if((j.visits+1<u+a||k)&&(localStorage.setItem("iosPwaPrompt",JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},j,{visits:j.visits+1}))),N||k))return i.a.createElement(d,{delay:I,copyTitle:f,copyBody:g,copyAddHomeButtonLabel:w,copyShareButtonLabel:b,copyClosePrompt:E,permanentlyHideOnDismiss:l,promptData:j,maxVisits:a+u,onClose:D})}return null}}]))}).call(this,n(33))},767:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.children,n=(0,s.useIntl)(),r=(0,o.useConfig)().appConfig,c=(0,a.useSnackbar)(),l=c.enqueueSnackbar,h=c.closeSnackbar,f=(r||{}).update||{},d=f.checkInterval,p=void 0===d?3e3:d,v=f.repeatInterval,m=void 0===v?3e5:v,g=function(e){return i.default.createElement(i.Fragment,null,i.default.createElement(u.default,{variant:"contained",style:{margin:8},onClick:function(){h(e),window.update&&window.update()}},n.formatMessage({id:"update",defaultMessage:"Update"})),i.default.createElement(u.default,{color:"secondary",onClick:function(){setTimeout(y,m),h(e)}},n.formatMessage({id:"later",defaultMessage:"Later"})))},y=function e(){window.update?l(n.formatMessage({id:"update_available",defaultMessage:"Update available!"}),{persist:!0,action:g,preventDuplicate:!0,anchorOrigin:{vertical:"top",horizontal:"center"}}):setTimeout(e,p)};return(0,i.useEffect)(y,[y]),i.default.createElement(i.Fragment,null,t)};var r,i=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)),o=n(49),a=n(390),s=n(64),u=(r=n(215))&&r.__esModule?r:{default:r};function c(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}e.exports=t.default},768:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var r=n(181);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=function(e,t,n,o){if(t)for(var a=0;a<t.length;a++)if(t[a].id===e){var s=t[a].source,u=null!=s?s.palette:{};return(0,r.createMuiTheme)(i(i({},s),{},{palette:i(i({},u),{},{type:n?"dark":"light"}),direction:o?"rtl":"ltr"}))}return(0,r.createMuiTheme)({palette:{type:n?"dark":"light"},direction:o?"rtl":"ltr"})};t.default=o,e.exports=t.default},769:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.children,n=(0,i.useConfig)().appConfig,m=(0,o.useAuth)(),g=n||{},b=g.firebase,_=g.auth,w=void 0===_?{}:_,O=b||{},E=O.prod,T=void 0===E?{}:E,I=(O.dev,(w||{}).onAuthStateChanged);y=0===v.default.apps.length?v.default.initializeApp(T.initConfig):v.default.apps[0];return(0,r.useEffect)((function(){var e=y.auth().onAuthStateChanged((function(e){I&&I(e,m,y)}));return function(){return e()}}),[]),r.default.createElement(a.default,{firebaseApp:y},r.default.createElement(s.default,{firebaseApp:y},r.default.createElement(u.default,{firebaseApp:y},r.default.createElement(c.default,{firebaseApp:y},r.default.createElement(l.default,{firebaseApp:y},r.default.createElement(f.default,{firebaseApp:y},r.default.createElement(h.default,{firebaseApp:y},r.default.createElement(d.MuiPickersUtilsProvider,{utils:p.default},t))))))))};var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var t=g();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var o=r?Object.getOwnPropertyDescriptor(e,i):null;o&&(o.get||o.set)?Object.defineProperty(n,i,o):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n(0)),i=n(49),o=n(66),a=m(n(369)),s=m(n(347)),u=m(n(310)),c=m(n(572)),l=m(n(573)),h=m(n(467)),f=m(n(500)),d=n(428),p=m(n(770)),v=m(n(420));function m(e){return e&&e.__esModule?e:{default:e}}function g(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return g=function(){return e},e}n(469),n(771),n(959),n(957),n(960),n(961);var y=null;e.exports=t.default},770:function(e,t,n){"use strict";n.r(t);var r=n(429),i=n.n(r),o=function(){function e(e){var t=void 0===e?{}:e,n=t.locale,r=t.instance,o=t.moment;this.yearFormat="YYYY",this.yearMonthFormat="MMMM YYYY",this.dateTime12hFormat="MMMM Do hh:mm a",this.dateTime24hFormat="MMMM Do HH:mm",this.time12hFormat="hh:mm A",this.time24hFormat="HH:mm",this.dateFormat="MMMM Do",this.moment=r||o||i.a,this.locale=n}return e.prototype.parse=function(e,t){return""===e?null:this.moment(e,t,!0)},e.prototype.date=function(e){if(null===e)return null;var t=this.moment(e);return t.locale(this.locale),t},e.prototype.isValid=function(e){return this.moment(e).isValid()},e.prototype.isNull=function(e){return null===e},e.prototype.getDiff=function(e,t){return e.diff(t)},e.prototype.isAfter=function(e,t){return e.isAfter(t)},e.prototype.isBefore=function(e,t){return e.isBefore(t)},e.prototype.isAfterDay=function(e,t){return e.isAfter(t,"day")},e.prototype.isBeforeDay=function(e,t){return e.isBefore(t,"day")},e.prototype.isBeforeYear=function(e,t){return e.isBefore(t,"year")},e.prototype.isAfterYear=function(e,t){return e.isAfter(t,"year")},e.prototype.startOfDay=function(e){return e.clone().startOf("day")},e.prototype.endOfDay=function(e){return e.clone().endOf("day")},e.prototype.format=function(e,t){return e.locale(this.locale),e.format(t)},e.prototype.formatNumber=function(e){return e},e.prototype.getHours=function(e){return e.get("hours")},e.prototype.addDays=function(e,t){return t<0?e.clone().subtract(Math.abs(t),"days"):e.clone().add(t,"days")},e.prototype.setHours=function(e,t){return e.clone().hours(t)},e.prototype.getMinutes=function(e){return e.get("minutes")},e.prototype.setMinutes=function(e,t){return e.clone().minutes(t)},e.prototype.getSeconds=function(e){return e.get("seconds")},e.prototype.setSeconds=function(e,t){return e.clone().seconds(t)},e.prototype.getMonth=function(e){return e.get("month")},e.prototype.isSameDay=function(e,t){return e.isSame(t,"day")},e.prototype.isSameMonth=function(e,t){return e.isSame(t,"month")},e.prototype.isSameYear=function(e,t){return e.isSame(t,"year")},e.prototype.isSameHour=function(e,t){return e.isSame(t,"hour")},e.prototype.setMonth=function(e,t){return e.clone().month(t)},e.prototype.getMeridiemText=function(e){return"am"===e?"AM":"PM"},e.prototype.startOfMonth=function(e){return e.clone().startOf("month")},e.prototype.endOfMonth=function(e){return e.clone().endOf("month")},e.prototype.getNextMonth=function(e){return e.clone().add(1,"month")},e.prototype.getPreviousMonth=function(e){return e.clone().subtract(1,"month")},e.prototype.getMonthArray=function(e){for(var t=[e.clone().startOf("year")];t.length<12;){var n=t[t.length-1];t.push(this.getNextMonth(n))}return t},e.prototype.getYear=function(e){return e.get("year")},e.prototype.setYear=function(e,t){return e.clone().set("year",t)},e.prototype.mergeDateAndTime=function(e,t){return this.setMinutes(this.setHours(e,this.getHours(t)),this.getMinutes(t))},e.prototype.getWeekdays=function(){return this.moment.weekdaysShort(!0)},e.prototype.isEqual=function(e,t){return null===e&&null===t||this.moment(e).isSame(t)},e.prototype.getWeekArray=function(e){for(var t=e.clone().startOf("month").startOf("week"),n=e.clone().endOf("month").endOf("week"),r=0,i=t,o=[];i.isBefore(n);){var a=Math.floor(r/7);o[a]=o[a]||[],o[a].push(i),i=i.clone().add(1,"day"),r+=1}return o},e.prototype.getYearRange=function(e,t){for(var n=this.moment(e).startOf("year"),r=this.moment(t).endOf("year"),i=[],o=n;o.isBefore(r);)i.push(o),o=o.clone().add(1,"year");return i},e.prototype.getCalendarHeaderText=function(e){return this.format(e,this.yearMonthFormat)},e.prototype.getYearText=function(e){return this.format(e,"YYYY")},e.prototype.getDatePickerHeaderText=function(e){return this.format(e,"ddd, MMM D")},e.prototype.getDateTimePickerHeaderText=function(e){return this.format(e,"MMM D")},e.prototype.getMonthText=function(e){return this.format(e,"MMMM")},e.prototype.getDayText=function(e){return this.format(e,"D")},e.prototype.getHourText=function(e,t){return this.format(e,t?"hh":"HH")},e.prototype.getMinuteText=function(e){return this.format(e,"mm")},e.prototype.getSecondText=function(e){return this.format(e,"ss")},e}();t.default=o},771:function(e,t,n){"use strict";n.r(t);n(772)},772:function(e,t,n){"use strict";(function(e,t){var r=n(348),i=n(1),o=n(375),a=n(430),s=n(392),u=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Object(o.G)(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Object(o.A)(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),c=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return Object(o.i)(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),l=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new u(t)}}catch(n){}return new c},h=l("localStorage"),f=l("sessionStorage"),d=new a.b("@firebase/database"),p=function(){var e=1;return function(){return e++}}(),v=function(e){var t=Object(o.F)(e),n=new o.d;n.update(t);var r=n.digest();return o.g.encodeByteArray(r)},m=function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r="",i=0;i<t.length;i++){var a=t[i];Array.isArray(a)||a&&"object"===typeof a&&"number"===typeof a.length?r+=e.apply(null,a):r+="object"===typeof a?Object(o.G)(a):a,r+=" "}return r},g=null,y=!0,b=function(e,t){Object(o.e)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(d.logLevel=a.a.VERBOSE,g=d.log.bind(d),t&&f.set("logging_enabled",!0)):"function"===typeof e?g=e:(g=null,f.remove("logging_enabled"))},_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===y&&(y=!1,null===g&&!0===f.get("logging_enabled")&&b(!0)),g){var n=m.apply(null,e);g(n)}},w=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];_.apply(void 0,Object(i.__spreadArray)([e],Object(i.__read)(t)))}},O=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+m.apply(void 0,Object(i.__spreadArray)([],Object(i.__read)(e)));d.error(n)},E=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+m.apply(void 0,Object(i.__spreadArray)([],Object(i.__read)(e)));throw d.error(n),new Error(n)},T=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+m.apply(void 0,Object(i.__spreadArray)([],Object(i.__read)(e)));d.warn(n)},I=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},S="[MIN_NAME]",k="[MAX_NAME]",C=function(e,t){if(e===t)return 0;if(e===S||t===k)return-1;if(t===S||e===k)return 1;var n=F(e),r=F(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},D=function(e,t){return e===t?0:e<t?-1:1},j=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Object(o.G)(t))},N=function e(t){if("object"!==typeof t||null===t)return Object(o.G)(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Object(o.G)(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},x=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function P(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var A=function(e){Object(o.e)(!I(e),"Invalid JSON number");var t,n,r,i,a,s=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),s))+s,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var c=u.join(""),l="";for(a=0;a<64;a+=8){var h=parseInt(c.substr(a,8),2).toString(16);1===h.length&&(h="0"+h),l+=h}return l.toLowerCase()},R=new RegExp("^-?(0*)\\d{1,10}$"),M=-2147483648,L=2147483647,F=function(e){if(R.test(e)){var t=Number(e);if(t>=M&&t<=L)return t}return null},U=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw T("Exception was thrown by user callback.",e),t}),Math.floor(0))}},V=function(e,t){var n=setTimeout(e,t);return"object"===typeof n&&n.unref&&n.unref(),n},q=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e}();function B(){return new q("")}function H(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function W(e){return e.pieces_.length-e.pieceNum_}function K(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new q(e.pieces_,t)}function Y(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function G(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}function z(e,t){return void 0===t&&(t=0),e.pieces_.slice(e.pieceNum_+t)}function Q(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new q(t,0)}function X(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof q)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new q(n,0)}function J(e){return e.pieceNum_>=e.pieces_.length}function $(e,t){var n=H(e),r=H(t);if(null===n)return t;if(n===r)return $(K(e),K(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Z(e,t){for(var n=z(e,0),r=z(t,0),i=0;i<n.length&&i<r.length;i++){var o=C(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function ee(e,t){if(W(e)!==W(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function te(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(W(e)>W(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var ne=function(e,t){this.errorPrefix_=t,this.parts_=z(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);re(this)};function re(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ie(e))}function ie(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var oe="5",ae=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,se="websocket",ue="long_polling",ce=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=h.get("host:"+e)||this._host}return e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(e.prototype,"host",{get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&h.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+e+this.host+"/"+t},e}();function le(e,t,n){var r;if(Object(o.e)("string"===typeof t,"typeof type must == string"),Object(o.e)("object"===typeof n,"typeof params must == object"),t===se)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==ue)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return P(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var he,fe=function(e,t){var n=de(e),r=n.namespace;"firebase.com"===n.domain&&E(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||E("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new ce(n.host,n.secure,r,t,i,"",r!==n.subdomain),path:new q(n.pathString)}},de=function(e){var t="",n="",r="",o="",a="",s=!0,u="https",c=443;if("string"===typeof e){var l=e.indexOf("//");l>=0&&(u=e.substring(0,l-1),e=e.substring(l+2));var h=e.indexOf("/");-1===h&&(h=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(h,f)),h<f&&(o=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(e.substring(h,f)));var d=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var o=Object(i.__values)(e.split("&")),a=o.next();!a.done;a=o.next()){var s=a.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):T("Invalid query segment '"+s+"' in query '"+e+"'")}}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,f)));(l=t.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(t.substring(l+1),10)):l=t.length;var p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),a=r}"ns"in d&&(a=d.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:o,namespace:a}},pe=/[\[\].#$\/\u0000-\u001F\u007F]/,ve=/[\[\].#$\u0000-\u001F\u007F]/,me=10485760,ge=function(e){return"string"===typeof e&&0!==e.length&&!pe.test(e)},ye=function(e){return"string"===typeof e&&0!==e.length&&!ve.test(e)},be=function(e){return null===e||"string"===typeof e||"number"===typeof e&&!I(e)||e&&"object"===typeof e&&Object(o.i)(e,".sv")},_e=function(e,t,n,r,i){i&&void 0===n||we(Object(o.m)(e,t,i),n,r)},we=function e(t,n,r){var i=r instanceof q?new ne(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+ie(i));if("function"===typeof n)throw new Error(t+"contains a function "+ie(i)+" with contents = "+n.toString());if(I(n))throw new Error(t+"contains "+n.toString()+" "+ie(i));if("string"===typeof n&&n.length>me/3&&Object(o.E)(n)>me)throw new Error(t+"contains a string greater than "+"10485760 utf8 bytes "+ie(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,s=!1;if(P(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(s=!0,!ge(n)))throw new Error(t+" contains an invalid key ("+n+") "+ie(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var u,c;c=n,(u=i).parts_.length>0&&(u.byteLength_+=1),u.parts_.push(c),u.byteLength_+=Object(o.E)(c),re(u),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Object(o.E)(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&s)throw new Error(t+' contains ".value" child '+ie(i)+" in addition to actual children.")}},Oe=function(e,t,n,r,i){if(!i||void 0!==n){var a=Object(o.m)(e,t,i);if(!n||"object"!==typeof n||Array.isArray(n))throw new Error(a+" must be an object containing the children to replace.");var s=[];P(n,(function(e,t){var n=new q(e);if(we(a,t,X(r,n)),".priority"===Y(n)&&!be(t))throw new Error(a+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)})),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=z(r=t[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ge(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(Z);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&te(a,r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(a,s)}},Ee=function(e,t,n,r){if(!r||void 0!==n){if(I(n))throw new Error(Object(o.m)(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!be(n))throw new Error(Object(o.m)(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Te=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.m)(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ie=function(e,t,n,r){if((!r||void 0!==n)&&!ge(n))throw new Error(Object(o.m)(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Se=function(e,t,n,r){if((!r||void 0!==n)&&!ye(n))throw new Error(Object(o.m)(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ke=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Se(e,t,n,r)},Ce=function(e,t){if(".info"===H(t))throw new Error(e+" failed = Can't modify data under /.info/")},De=function(e,t,n){var r=n.path.toString();if("string"!==typeof n.repoInfo.host||0===n.repoInfo.host.length||!ge(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),ye(e)}(r))throw new Error(Object(o.m)(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},je=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!==typeof n)throw new Error(Object(o.m)(e,t,r)+"must be a boolean.")};var Ne,xe,Pe,Ae=function(e){return"number"===typeof e?"number:"+A(e):"string:"+e},Re=function(e){if(e.isLeafNode()){var t=e.val();Object(o.e)("string"===typeof t||"number"===typeof t||"object"===typeof t&&Object(o.i)(t,".sv"),"Priority must be a string or number.")}else Object(o.e)(e===he||e.isEmpty(),"priority of unexpected type.");Object(o.e)(e===he||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Me=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Object(o.e)(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Re(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return Ne},set:function(e){Ne=e},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return J(t)?this:".priority"===H(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=H(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.e)(".priority"!==r||1===W(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(K(t),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ae(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?A(this.value_):this.value_,this.lazyHash_=v(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Object(o.e)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Object(o.e)(i>=0,"Unknown leaf type: "+n),Object(o.e)(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),Le=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),Fe=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Ve.EMPTY_NODE,this.right=null!=o?o:Ve.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Ve.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Ve.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Ue=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Fe(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Ve=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Fe.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Fe.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Le(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Le(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Le(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Le(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Ue,e}(),qe=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),Be=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new qe(S,e),r=new qe(S,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return qe.MIN},e}();var He,We,Ke,Ye=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?C(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return qe.MIN},t.prototype.maxPost=function(){return new qe(k,new Me("[PRIORITY-POST]",Pe))},t.prototype.makePost=function(e,t){var n=xe(e);return new qe(t,new Me("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(Be)),Ge=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return He},set:function(e){He=e},enumerable:!1,configurable:!0}),t.prototype.compare=function(e,t){return C(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw Object(o.f)("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return qe.MIN},t.prototype.maxPost=function(){return new qe(k,He)},t.prototype.makePost=function(e,t){return Object(o.e)("string"===typeof e,"KeyIndex indexValue must always be a string."),new qe(e,He)},t.prototype.toString=function(){return".key"},t}(Be),ze=new Ge,Qe=Math.log(2),Xe=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Qe,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),Je=function(e,t,n,r){e.sort(t);var i=function t(r,i){var o,a,s=i-r;if(0===s)return null;if(1===s)return o=e[r],a=n?n(o):o,new Fe(a,o.node,Fe.BLACK,null,null);var u=parseInt(s/2,10)+r,c=t(r,u),l=t(u+1,i);return o=e[u],a=n?n(o):o,new Fe(a,o.node,Fe.BLACK,c,l)},o=function(t){for(var r=null,o=null,a=e.length,s=function(t,r){var o=a-t,s=a;a-=t;var c=i(o+1,s),l=e[o],h=n?n(l):l;u(new Fe(h,l.node,r,null,c))},u=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?s(h,Fe.BLACK):(s(h,Fe.BLACK),s(h,Fe.RED))}return o}(new Xe(e.length));return new Ve(r||t,o)},$e={},Ze=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return Object(o.e)($e&&Ye,"ChildrenNode.ts has not been loaded"),We=We||new e({".priority":$e},{".priority":Ye})},enumerable:!1,configurable:!0}),e.prototype.get=function(e){var t=Object(o.D)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Ve?t:null},e.prototype.hasIndex=function(e){return Object(o.i)(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){Object(o.e)(t!==ze,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,a=[],s=!1,u=n.getIterator(qe.Wrap),c=u.getNext();c;)s=s||t.isDefinedOn(c.node),a.push(c),c=u.getNext();r=s?Je(a,t.getCompare()):$e;var l=t.toString(),h=Object(i.__assign)({},this.indexSet_);h[l]=t;var f=Object(i.__assign)({},this.indexes_);return f[l]=r,new e(f,h)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(Object(o.B)(this.indexes_,(function(e,i){var a=Object(o.D)(r.indexSet_,i);if(Object(o.e)(a,"Missing index implementation for "+i),e===$e){if(a.isDefinedOn(t.node)){for(var s=[],u=n.getIterator(qe.Wrap),c=u.getNext();c;)c.name!==t.name&&s.push(c),c=u.getNext();return s.push(t),Je(s,a.getCompare())}return $e}var l=n.get(t.name),h=e;return l&&(h=h.remove(new qe(t.name,l))),h.insert(t,t.node)})),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(Object(o.B)(this.indexes_,(function(e){if(e===$e)return e;var r=n.get(t.name);return r?e.remove(new qe(t.name,r)):e})),this.indexSet_)},e}();function et(e,t){return C(e.name,t.name)}function tt(e,t){return C(e,t)}var nt=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Re(this.priorityNode_),this.children_.isEmpty()&&Object(o.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return Ke||(Ke=new e(new Ve(tt),null,Ze.Default))},enumerable:!1,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||Ke},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Ke:t},e.prototype.getChild=function(e){var t=H(e);return null===t?this:this.getImmediateChild(t).getChild(K(e))},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(Object(o.e)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new qe(t,n),i=void 0,a=void 0;n.isEmpty()?(i=this.children_.remove(t),a=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=i.isEmpty()?Ke:this.priorityNode_;return new e(i,s,a)},e.prototype.updateChild=function(e,t){var n=H(e);if(null===n)return t;Object(o.e)(".priority"!==H(e)||1===W(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(K(e),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ye,(function(a,s){n[a]=s.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!t&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+Ae(this.getPriority().val())+":"),this.forEachChild(Ye,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":v(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new qe(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new qe(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new qe(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,qe.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,qe.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===rt?-1:0},e.prototype.withIndex=function(t){if(t===ze||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===ze||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Ye),r=t.getIterator(Ye),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===ze?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),rt=new(function(e){function t(){return e.call(this,new Ve(tt),nt.EMPTY_NODE,Ze.Default)||this}return Object(i.__extends)(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return nt.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(nt));Object.defineProperties(qe,{MIN:{value:new qe(S,nt.EMPTY_NODE)},MAX:{value:new qe(k,rt)}}),Ge.__EMPTY_NODE=nt.EMPTY_NODE,Me.__childrenNodeConstructor=nt,he=rt,function(e){Pe=e}(rt);var it;function ot(e,t){if(void 0===t&&(t=null),null===e)return nt.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Object(o.e)(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e)return new Me(e,ot(t));if(e instanceof Array){var n=nt.EMPTY_NODE;return P(e,(function(t,r){if(Object(o.i)(e,t)&&"."!==t.substring(0,1)){var i=ot(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(t,i))}})),n.updatePriority(ot(t))}var r=[],i=!1;if(P(e,(function(e,t){if("."!==e.substring(0,1)){var n=ot(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new qe(e,n)))}})),0===r.length)return nt.EMPTY_NODE;var a=Je(r,et,(function(e){return e.name}),tt);if(i){var s=Je(r,Ye.getCompare());return new nt(a,ot(t),new Ze({".priority":s},{".priority":Ye}))}return new nt(a,ot(t),Ze.Default)}function at(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){xe=e}(ot),function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(it||(it={}));var st,ut=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=it.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return e.prototype.operationForChild=function(t){if(J(this.path)){if(null!=this.affectedTree.value)return Object(o.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new q(t));return new e(B(),n,this.revert)}return Object(o.e)(H(this.path)===t,"operationForChild called for unrelated child."),new e(K(this.path),this.affectedTree,this.revert)},e}(),ct=function(){function e(e,t){void 0===t&&(st||(st=new Ve(D)),t=st),this.value=e,this.children=t}return e.fromObject=function(t){var n=new e(null);return P(t,(function(e,t){n=n.set(new q(e),t)})),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:B(),value:this.value};if(J(e))return null;var n=H(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(K(e),t);return null!=i?{path:X(new q(n),i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))},e.prototype.subtree=function(t){if(J(t))return this;var n=H(t),r=this.children.get(n);return null!==r?r.subtree(K(t)):new e(null)},e.prototype.set=function(t,n){if(J(t))return new e(n,this.children);var r=H(t),i=(this.children.get(r)||new e(null)).set(K(t),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(J(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=H(t),r=this.children.get(n);if(r){var i=r.remove(K(t)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new e(null):new e(this.value,o)}return this},e.prototype.get=function(e){if(J(e))return this.value;var t=H(e),n=this.children.get(t);return n?n.get(K(e)):null},e.prototype.setTree=function(t,n){if(J(t))return n;var r=H(t),i=(this.children.get(r)||new e(null)).setTree(K(t),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(B(),e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(X(e,r),t)})),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,B(),t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(J(e))return null;var i=H(e),o=this.children.get(i);return o?o.findOnPath_(K(e),X(t,i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,B(),t)},e.prototype.foreachOnPath_=function(t,n,r){if(J(t))return this;this.value&&r(n,this.value);var i=H(t),o=this.children.get(i);return o?o.foreachOnPath_(K(t),X(n,i),r):new e(null)},e.prototype.foreach=function(e){this.foreach_(B(),e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(X(e,n),t)})),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))},e}(),lt=function(){function e(e,t){this.source=e,this.path=t,this.type=it.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return J(this.path)?new e(this.source,B()):new e(this.source,K(this.path))},e}(),ht=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=it.OVERWRITE}return e.prototype.operationForChild=function(t){return J(this.path)?new e(this.source,B(),this.snap.getImmediateChild(t)):new e(this.source,K(this.path),this.snap)},e}(),ft=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=it.MERGE}return e.prototype.operationForChild=function(t){if(J(this.path)){var n=this.children.subtree(new q(t));return n.isEmpty()?null:n.value?new ht(this.source,B(),n.value):new e(this.source,B(),n)}return Object(o.e)(H(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,K(this.path),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),dt=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(J(e))return this.isFullyInitialized()&&!this.filtered_;var t=H(e);return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}();function pt(e,t){return{eventCache:e,serverCache:t}}function vt(e,t,n,r){return pt(new dt(t,n,r),e.serverCache)}function mt(e,t,n,r){return pt(e.eventCache,new dt(t,n,r))}function gt(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function yt(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}function bt(e){return{type:"value",snapshotNode:e}}function _t(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function wt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function Ot(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var Et=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,i,a){Object(o.e)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=e.getImmediateChild(t);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?e:(null!=a&&(n.isEmpty()?e.hasChild(t)?a.trackChildChange(wt(t,s)):Object(o.e)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(_t(t,n)):a.trackChildChange(Ot(t,n,s))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ye,(function(e,r){t.hasChild(e)||n.trackChildChange(wt(e,r))})),t.isLeafNode()||t.forEachChild(Ye,(function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Ot(t,r,i))}else n.trackChildChange(_t(t,r))}))),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?nt.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),Tt=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;Object(o.e)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Object(o.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,Ot(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,wt(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,_t(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Object(o.f)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ot(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),It=function(){function e(e){this.writeTree_=e}return e.empty=function(){return new e(new ct(null))},e}();function St(e,t,n){if(J(t))return new It(new ct(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=$(i,t);return o=o.updateChild(a,n),new It(e.writeTree_.set(i,o))}var s=new ct(n),u=e.writeTree_.setTree(t,s);return new It(u)}function kt(e,t,n){var r=e;return P(n,(function(e,n){r=St(r,X(t,e),n)})),r}function Ct(e,t){if(J(t))return It.empty();var n=e.writeTree_.setTree(t,new ct(null));return new It(n)}function Dt(e,t){return null!=jt(e,t)}function jt(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild($(n.path,t)):null}function Nt(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Ye,(function(e,n){t.push(new qe(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new qe(e,n.value))})),t}function xt(e,t){if(J(t))return e;var n=jt(e,t);return new It(null!=n?new ct(n):e.writeTree_.subtree(t))}function Pt(e){return e.writeTree_.isEmpty()}function At(e,t){return Rt(B(),e.writeTree_,t)}function Rt(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Object(o.e)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Rt(X(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(X(e,".priority"),r)),n}function Mt(e,t){return Qt(t,e)}function Lt(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Object(o.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,s=e.allWrites.length-1;i&&s>=0;){var u=e.allWrites[s];u.visible&&(s>=n&&Ft(u,r.path)?i=!1:te(r.path,u.path)&&(a=!0)),s--}if(i){if(a)return function(e){e.visibleWrites=Vt(e.allWrites,Ut,B()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Ct(e.visibleWrites,r.path):P(r.children,(function(t){e.visibleWrites=Ct(e.visibleWrites,X(r.path,t))}));return!0}return!1}function Ft(e,t){if(e.snap)return te(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&te(X(e.path,n),t))return!0;return!1}function Ut(e){return e.visible}function Vt(e,t,n){for(var r=It.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var s=a.path,u=void 0;if(a.snap)te(n,s)?r=St(r,u=$(n,s),a.snap):te(s,n)&&(u=$(s,n),r=St(r,B(),a.snap.getChild(u)));else{if(!a.children)throw Object(o.f)("WriteRecord should have .snap or .children");if(te(n,s))r=kt(r,u=$(n,s),a.children);else if(te(s,n))if(J(u=$(s,n)))r=kt(r,B(),a.children);else{var c=Object(o.D)(a.children,H(u));if(c){var l=c.getChild(K(u));r=St(r,B(),l)}}}}}return r}function qt(e,t,n,r,i){if(r||i){var o=xt(e.visibleWrites,t);if(!i&&Pt(o))return n;if(i||null!=n||Dt(o,B())){return At(Vt(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(te(e.path,t)||te(t,e.path))}),t),n||nt.EMPTY_NODE)}return null}var a=jt(e.visibleWrites,t);if(null!=a)return a;var s=xt(e.visibleWrites,t);return Pt(s)?n:null!=n||Dt(s,B())?At(s,n||nt.EMPTY_NODE):null}function Bt(e,t,n,r){return qt(e.writeTree,e.treePath,t,n,r)}function Ht(e,t){return function(e,t,n){var r=nt.EMPTY_NODE,i=jt(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(Ye,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var o=xt(e.visibleWrites,t);return n.forEachChild(Ye,(function(e,t){var n=At(xt(o,new q(e)),t);r=r.updateImmediateChild(e,n)})),Nt(o).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Nt(xt(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function Wt(e,t,n,r){return function(e,t,n,r,i){Object(o.e)(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=X(t,n);if(Dt(e.visibleWrites,a))return null;var s=xt(e.visibleWrites,a);return Pt(s)?i.getChild(n):At(s,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function Kt(e,t){return function(e,t){return jt(e.visibleWrites,t)}(e.writeTree,X(e.treePath,t))}function Yt(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var s,u=xt(e.visibleWrites,t),c=jt(u,B());if(null!=c)s=c;else{if(null==n)return[];s=At(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<i;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,o)}function Gt(e,t,n){return function(e,t,n,r){var i=X(t,n),o=jt(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?At(xt(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function zt(e,t){return Qt(X(e.treePath,t),e.writeTree)}function Qt(e,t){return{treePath:e,writeTree:t}}var Xt=new(function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}()),Jt=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new dt(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gt(this.writes_,e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:yt(this.viewCache_),i=Yt(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]},e}();function $t(e,t,n,r,i){var a,s,u=new Tt;if(n.type===it.OVERWRITE){var c=n;c.source.fromUser?a=tn(e,t,c.path,c.snap,r,i,u):(Object(o.e)(c.source.fromServer,"Unknown source."),s=c.source.tagged||t.serverCache.isFiltered()&&!J(c.path),a=en(e,t,c.path,c.snap,r,i,s,u))}else if(n.type===it.MERGE){var l=n;l.source.fromUser?a=function(e,t,n,r,i,o,a){var s=t;return r.foreach((function(r,u){var c=X(n,r);nn(t,H(c))&&(s=tn(e,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=X(n,r);nn(t,H(c))||(s=tn(e,s,c,u,i,o,a))})),s}(e,t,l.path,l.children,r,i,u):(Object(o.e)(l.source.fromServer,"Unknown source."),s=l.source.tagged||t.serverCache.isFiltered(),a=on(e,t,l.path,l.children,r,i,s,u))}else if(n.type===it.ACK_USER_WRITE){var h=n;a=h.revert?function(e,t,n,r,i,a){var s;if(null!=Kt(r,n))return t;var u=new Jt(r,t,i),c=t.eventCache.getNode(),l=void 0;if(J(n)||".priority"===H(n)){var h=void 0;if(t.serverCache.isFullyInitialized())h=Bt(r,yt(t));else{var f=t.serverCache.getNode();Object(o.e)(f instanceof nt,"serverChildren would be complete if leaf node"),h=Ht(r,f)}h=h,l=e.filter.updateFullNode(c,h,a)}else{var d=H(n),p=Gt(r,d,t.serverCache);null==p&&t.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?e.filter.updateChild(c,d,p,K(n),u,a):t.eventCache.getNode().hasChild(d)?e.filter.updateChild(c,d,nt.EMPTY_NODE,K(n),u,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(s=Bt(r,yt(t))).isLeafNode()&&(l=e.filter.updateFullNode(l,s,a))}return s=t.serverCache.isFullyInitialized()||null!=Kt(r,B()),vt(t,l,s,e.filter.filtersNodes())}(e,t,h.path,r,i,u):function(e,t,n,r,i,o,a){if(null!=Kt(i,n))return t;var s=t.serverCache.isFiltered(),u=t.serverCache;if(null!=r.value){if(J(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return en(e,t,n,u.getNode().getChild(n),i,o,s,a);if(J(n)){var c=new ct(null);return u.getNode().forEachChild(ze,(function(e,t){c=c.set(new q(e),t)})),on(e,t,n,c,i,o,s,a)}return t}var l=new ct(null);return r.foreach((function(e,t){var r=X(n,e);u.isCompleteForPath(r)&&(l=l.set(e,u.getNode().getChild(r)))})),on(e,t,n,l,i,o,s,a)}(e,t,h.path,h.affectedTree,r,i,u)}else{if(n.type!==it.LISTEN_COMPLETE)throw Object(o.f)("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var o=t.serverCache,a=mt(t,o.getNode(),o.isFullyInitialized()||J(n),o.isFiltered());return Zt(e,a,n,r,Xt,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=gt(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(bt(gt(t)))}}(t,a,f),{viewCache:a,changes:f}}function Zt(e,t,n,r,i,a){var s=t.eventCache;if(null!=Kt(r,n))return t;var u=void 0,c=void 0;if(J(n))if(Object(o.e)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var l=yt(t),h=Ht(r,l instanceof nt?l:nt.EMPTY_NODE);u=e.filter.updateFullNode(t.eventCache.getNode(),h,a)}else{var f=Bt(r,yt(t));u=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var d=H(n);if(".priority"===d){Object(o.e)(1===W(n),"Can't have a priority with additional path components");var p=s.getNode(),v=Wt(r,n,p,c=t.serverCache.getNode());u=null!=v?e.filter.updatePriority(p,v):s.getNode()}else{var m=K(n),g=void 0;if(s.isCompleteForChild(d)){c=t.serverCache.getNode();var y=Wt(r,n,s.getNode(),c);g=null!=y?s.getNode().getImmediateChild(d).updateChild(m,y):s.getNode().getImmediateChild(d)}else g=Gt(r,d,t.serverCache);u=null!=g?e.filter.updateChild(s.getNode(),d,g,m,i,a):s.getNode()}}return vt(t,u,s.isFullyInitialized()||J(n),e.filter.filtersNodes())}function en(e,t,n,r,i,o,a,s){var u,c=t.serverCache,l=a?e.filter:e.filter.getIndexedFilter();if(J(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=H(n);if(!c.isCompleteForPath(n)&&W(n)>1)return t;var d=K(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,Xt,null)}var v=mt(t,u,c.isFullyInitialized()||J(n),l.filtersNodes());return Zt(e,v,n,i,new Jt(i,v,o),s)}function tn(e,t,n,r,i,o,a){var s,u,c=t.eventCache,l=new Jt(i,t,o);if(J(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,a),s=vt(t,u,!0,e.filter.filtersNodes());else{var h=H(n);if(".priority"===h)u=e.filter.updatePriority(t.eventCache.getNode(),r),s=vt(t,u,c.isFullyInitialized(),c.isFiltered());else{var f=K(n),d=c.getNode().getImmediateChild(h),p=void 0;if(J(f))p=r;else{var v=l.getCompleteChild(h);p=null!=v?".priority"===Y(f)&&v.getChild(Q(f)).isEmpty()?v:v.updateChild(f,r):nt.EMPTY_NODE}if(d.equals(p))s=t;else s=vt(t,e.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),e.filter.filtersNodes())}}return s}function nn(e,t){return e.eventCache.isCompleteForChild(t)}function rn(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function on(e,t,n,r,i,o,a,s){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var u,c=t;u=J(n)?r:new ct(null).setTree(n,r);var l=t.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=rn(0,t.serverCache.getNode().getImmediateChild(n),r);c=en(e,c,new q(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=rn(0,t.serverCache.getNode().getImmediateChild(n),r);c=en(e,c,new q(n),h,i,o,a,s)}})),c}var an=function(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()};function sn(e,t,n,r,i,a){var s=r.filter((function(e){return e.type===n}));s.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Object(o.f)("Should only compare child_ events.");var r=new qe(t.childName,t.snapshotNode),i=new qe(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),s.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}var un="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",cn=function(){var e=0,t=[];return function(n){var r,i=n===e;e=n;var a=new Array(8);for(r=7;r>=0;r--)a[r]=un.charAt(n%64),n=Math.floor(n/64);Object(o.e)(0===n,"Cannot push at time == 0");var s=a.join("");if(i){for(r=11;r>=0&&63===t[r];r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)s+=un.charAt(t[r]);return Object(o.e)(20===s.length,"nextPushId: Length should be 20."),s}}(),ln=function(e){if("2147483647"===e)return"-";var t=F(e);if(null!=t)return""+(t+1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return k;var o=n[i],a=un.charAt(un.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},hn=function(e){if("-2147483648"===e)return S;var t=F(e);if(null!=t)return""+(t-1);for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=un.charAt(un.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))},fn=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(i.__extends)(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?C(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return qe.MIN},t.prototype.maxPost=function(){return qe.MAX},t.prototype.makePost=function(e,t){var n=ot(e);return new qe(t,n)},t.prototype.toString=function(){return".value"},t}(Be)),dn=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,Object(o.e)(!J(t)&&".priority"!==H(t),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.__extends)(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?C(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=ot(e),r=nt.EMPTY_NODE.updateChild(this.indexPath_,n);return new qe(t,r)},t.prototype.maxPost=function(){var e=nt.EMPTY_NODE.updateChild(this.indexPath_,rt);return new qe(k,e)},t.prototype.toString=function(){return z(this.indexPath_,0).join("/")},t}(Be),pn=function(){function e(t){this.indexedFilter_=new Et(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new qe(t,n))||(n=nt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=nt.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(nt.EMPTY_NODE);var i=this;return t.forEachChild(Ye,(function(e,t){i.matches(new qe(e,t))||(r=r.updateImmediateChild(e,nt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),vn=function(){function e(e){this.rangedFilter_=new pn(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new qe(t,n))||(n=nt.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=nt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=nt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(nt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,nt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(e,t){return s(t,e)}}else a=this.index_.getCompare();var u=e;Object(o.e)(u.numChildren()===this.limit_,"");var c=new qe(t,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(t)){for(var f=u.getImmediateChild(t),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===t||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(Ot(t,n,f)),u.updateImmediateChild(t,n);null!=i&&i.trackChildChange(wt(t,f));var v=u.updateImmediateChild(t,nt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=i&&i.trackChildChange(_t(d.name,d.node)),v.updateImmediateChild(d.name,d.node)):v}return n.isEmpty()?e:h&&a(l,c)>=0?(null!=i&&(i.trackChildChange(wt(l.name,l.node)),i.trackChildChange(_t(t,n))),u.updateImmediateChild(t,n).updateImmediateChild(l.name,nt.EMPTY_NODE)):e},e}(),mn=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ye}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.hasStartAfter=function(){return this.startAfterSet_},e.prototype.hasEndBefore=function(){return this.endBeforeSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},e.prototype.getIndexStartValue=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:k},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return Object(o.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ye},e.prototype.copy=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e}();function gn(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}function yn(e,t){var n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}function bn(e,t,n){var r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function _n(e,t,n){var r;if(e.index_===ze)"string"===typeof t&&(t=ln(t)),r=bn(e,t,n);else{r=bn(e,t,null==n?k:ln(n))}return r.startAfterSet_=!0,r}function wn(e,t,n){var r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function On(e,t,n){var r;return e.index_===ze?("string"===typeof t&&(t=hn(t)),r=wn(e,t,n)):r=wn(e,t,null==n?S:hn(n)),r.endBeforeSet_=!0,r}function En(e,t){var n=e.copy();return n.index_=t,n}function Tn(e){var t,n={};return e.isDefault()||(e.index_===Ye?t="$priority":e.index_===fn?t="$value":e.index_===ze?t="$key":(Object(o.e)(e.index_ instanceof dn,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Object(o.G)(t),e.startSet_&&(n.startAt=Object(o.G)(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+Object(o.G)(e.indexStartName_))),e.endSet_&&(n.endAt=Object(o.G)(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+Object(o.G)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}var In,Sn=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n,r=this.query_.getQueryParams(),i=new Et(r.getIndex()),o=(n=r).loadsAllData()?new Et(n.getIndex()):n.hasLimit()?new vn(n):new pn(n);this.processor_=function(e){return{filter:e}}(o);var a=t.serverCache,s=t.eventCache,u=i.updateFullNode(nt.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(nt.EMPTY_NODE,s.getNode(),null),l=new dt(u,a.isFullyInitialized(),i.filtersNodes()),h=new dt(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=pt(h,l),this.eventGenerator_=new an(this.query_)}return Object.defineProperty(e.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),e}();function kn(e,t){var n=yt(e.viewCache_);return n&&(e.query.getQueryParams().loadsAllData()||!J(t)&&!n.getImmediateChild(H(t)).isEmpty())?n.getChild(t):null}function Cn(e){return 0===e.eventRegistrations_.length}function Dn(e,t,n){var r=[];if(n){Object(o.e)(null==t,"A cancel should cancel all event registrations.");var i=e.query.path;e.eventRegistrations_.forEach((function(e){var t=e.createCancelEvent(n,i);t&&r.push(t)}))}if(t){for(var a=[],s=0;s<e.eventRegistrations_.length;++s){var u=e.eventRegistrations_[s];if(u.matches(t)){if(t.hasAnyCallback()){a=a.concat(e.eventRegistrations_.slice(s+1));break}}else a.push(u)}e.eventRegistrations_=a}else e.eventRegistrations_=[];return r}function jn(e,t,n,r){t.type===it.MERGE&&null!==t.source.queryId&&(Object(o.e)(yt(e.viewCache_),"We should always have a full cache before handling merges"),Object(o.e)(gt(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,s=e.viewCache_,u=$t(e.processor_,s,t,n,r);return i=e.processor_,a=u.viewCache,Object(o.e)(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Object(o.e)(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Object(o.e)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Nn(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Nn(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],o=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),sn(e,i,"child_removed",t,r,n),sn(e,i,"child_added",t,r,n),sn(e,i,"child_moved",o,r,n),sn(e,i,"child_changed",t,r,n),sn(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var xn=function(){this.views=new Map};function Pn(e,t,n,r){var a,s,u=t.source.queryId;if(null!==u){var c=e.views.get(u);return Object(o.e)(null!=c,"SyncTree gave us an op for an invalid query."),jn(c,t,n,r)}var l=[];try{for(var h=Object(i.__values)(e.views.values()),f=h.next();!f.done;f=h.next()){c=f.value;l=l.concat(jn(c,t,n,r))}}catch(d){a={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return l}function An(e,t,n,r,i){var o=t.queryIdentifier(),a=e.views.get(o);if(!a){var s=Bt(n,i?r:null),u=!1;s?u=!0:r instanceof nt?(s=Ht(n,r),u=!1):(s=nt.EMPTY_NODE,u=!1);var c=pt(new dt(s,u,!1),new dt(r,i,!1));return new Sn(t,c)}return a}function Rn(e,t,n,r,i,o){var a=An(e,t,r,i,o);return e.views.has(t.queryIdentifier())||e.views.set(t.queryIdentifier(),a),function(e,t){e.eventRegistrations_.push(t)}(a,n),function(e,t){var n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Ye,(function(e,t){r.push(_t(e,t))})),n.isFullyInitialized()&&r.push(bt(n.getNode())),Nn(e,r,n.getNode(),t)}(a,n)}function Mn(e,t,n,r){var a,s,u=t.queryIdentifier(),c=[],l=[],h=qn(e);if("default"===u)try{for(var f=Object(i.__values)(e.views.entries()),d=f.next();!d.done;d=f.next()){var p=Object(i.__read)(d.value,2),v=p[0],m=p[1];l=l.concat(Dn(m,n,r)),Cn(m)&&(e.views.delete(v),m.query.getQueryParams().loadsAllData()||c.push(m.query))}}catch(g){a={error:g}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}else(m=e.views.get(u))&&(l=l.concat(Dn(m,n,r)),Cn(m)&&(e.views.delete(u),m.query.getQueryParams().loadsAllData()||c.push(m.query)));return h&&!qn(e)&&c.push(new(Object(o.e)(In,"Reference.ts has not been loaded"),In)(t.repo,t.path)),{removed:c,events:l}}function Ln(e){var t,n,r=[];try{for(var o=Object(i.__values)(e.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;s.query.getQueryParams().loadsAllData()||r.push(s)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return r}function Fn(e,t){var n,r,o=null;try{for(var a=Object(i.__values)(e.views.values()),s=a.next();!s.done;s=a.next()){var u=s.value;o=o||kn(u,t)}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o}function Un(e,t){if(t.getQueryParams().loadsAllData())return Bn(e);var n=t.queryIdentifier();return e.views.get(n)}function Vn(e,t){return null!=Un(e,t)}function qn(e){return null!=Bn(e)}function Bn(e){var t,n;try{for(var r=Object(i.__values)(e.views.values()),o=r.next();!o.done;o=r.next()){var a=o.value;if(a.query.getQueryParams().loadsAllData())return a}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return null}var Hn=1,Wn=function(e){this.listenProvider_=e,this.syncPointTree_=new ct(null),this.pendingWriteTree_={visibleWrites:It.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function Kn(e,t,n,r,i){return function(e,t,n,r,i){Object(o.e)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=St(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Zn(e,new ht({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Yn(e,t,n,r){!function(e,t,n,r){Object(o.e)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=kt(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);var i=ct.fromObject(n);return Zn(e,new ft({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}function Gn(e,t,n){void 0===n&&(n=!1);var r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(Lt(e.pendingWriteTree_,t)){var i=new ct(null);return null!=r.snap?i=i.set(B(),!0):P(r.children,(function(e){i=i.set(new q(e),!0)})),Zn(e,new ut(r.path,i,n))}return[]}function zn(e,t,n){return Zn(e,new ht({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Qn(e,t,n,r){var i=t.path,o=e.syncPointTree_.get(i),a=[];if(o&&("default"===t.queryIdentifier()||Vn(o,t))){var s=Mn(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(e){return e.getQueryParams().loadsAllData()})),l=e.syncPointTree_.findOnPath(i,(function(e,t){return qn(t)}));if(c&&!l){var h=e.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(e){return e.fold((function(e,t,n){if(t&&qn(t))return[Bn(t)];var r=[];return t&&(r=Ln(t)),P(n,(function(e,t){r=r.concat(t)})),r}))}(h),d=0;d<f.length;++d){var p=f[d],v=p.query,m=nr(e,p);e.listenProvider_.startListening(ur(v),rr(e,v),m.hashFn,m.onComplete)}}if(!l&&u.length>0&&!r)if(c){e.listenProvider_.stopListening(ur(t),null)}else u.forEach((function(t){var n=e.queryToTagMap.get(ir(t));e.listenProvider_.stopListening(ur(t),n)}));!function(e,t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=ir(r),o=e.queryToTagMap.get(i);e.queryToTagMap.delete(i),e.tagToQueryMap.delete(o)}}}(e,u)}return a}function Xn(e,t,n){var r=t.path,i=null,a=!1;e.syncPointTree_.foreachOnPath(r,(function(e,t){var n=$(e,r);i=i||Fn(t,n),a=a||qn(t)}));var s,u=e.syncPointTree_.get(r);(u?(a=a||qn(u),i=i||Fn(u,B())):(u=new xn,e.syncPointTree_=e.syncPointTree_.set(r,u)),null!=i)?s=!0:(s=!1,i=nt.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((function(e,t){var n=Fn(t,B());n&&(i=i.updateImmediateChild(e,n))})));var c=Vn(u,t);if(!c&&!t.getQueryParams().loadsAllData()){var l=ir(t);Object(o.e)(!e.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Hn++;e.queryToTagMap.set(l,h),e.tagToQueryMap.set(h,l)}var f=Rn(u,t,n,Mt(e.pendingWriteTree_,r),i,s);if(!c&&!a){var d=Un(u,t);f=f.concat(function(e,t,n){var r=t.path,i=rr(e,t),a=nr(e,n),s=e.listenProvider_.startListening(ur(t),i,a.hashFn,a.onComplete),u=e.syncPointTree_.subtree(r);if(i)Object(o.e)(!qn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(e,t,n){if(!J(e)&&t&&qn(t))return[Bn(t).query];var r=[];return t&&(r=r.concat(Ln(t).map((function(e){return e.query})))),P(n,(function(e,t){r=r.concat(t)})),r})),l=0;l<c.length;++l){var h=c[l];e.listenProvider_.stopListening(ur(h),rr(e,h))}return s}(e,t,d))}return f}function Jn(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Fn(n,$(e,t));if(r)return r}));return qt(r,t,i,n,!0)}function $n(e,t){var n=t.path,r=null;e.syncPointTree_.foreachOnPath(n,(function(e,t){var i=$(e,n);r=r||Fn(t,i)}));var i=e.syncPointTree_.get(n);i?r=r||Fn(i,B()):(i=new xn,e.syncPointTree_=e.syncPointTree_.set(n,i));var o=null!=r,a=o?new dt(r,!0,!1):null;return function(e){return gt(e.viewCache_)}(An(i,t,Mt(e.pendingWriteTree_,t.path),o?a.getNode():nt.EMPTY_NODE,o))}function Zn(e,t){return er(t,e.syncPointTree_,null,Mt(e.pendingWriteTree_,B()))}function er(e,t,n,r){if(J(e.path))return tr(e,t,n,r);var i=t.get(B());null==n&&null!=i&&(n=Fn(i,B()));var o=[],a=H(e.path),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=zt(r,a);o=o.concat(er(s,u,c,l))}return i&&(o=o.concat(Pn(i,e,r,n))),o}function tr(e,t,n,r){var i=t.get(B());null==n&&null!=i&&(n=Fn(i,B()));var o=[];return t.children.inorderTraversal((function(t,i){var a=n?n.getImmediateChild(t):null,s=zt(r,t),u=e.operationForChild(t);u&&(o=o.concat(tr(u,i,a,s)))})),i&&(o=o.concat(Pn(i,e,r,n))),o}function nr(e,t){var n=t.query,r=rr(e,n);return{hashFn:function(){return(function(e){return e.viewCache_.serverCache.getNode()}(t)||nt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?function(e,t,n){var r=or(e,n);if(r){var i=ar(r),o=i.path,a=i.queryId,s=$(o,t);return sr(e,o,new lt(at(a),s))}return[]}(e,n.path,r):function(e,t){return Zn(e,new lt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n.path);var i=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Qn(e,n,null,i)}}}function rr(e,t){var n=ir(t);return e.queryToTagMap.get(n)}function ir(e){return e.path.toString()+"$"+e.queryIdentifier()}function or(e,t){return e.tagToQueryMap.get(t)}function ar(e){var t=e.indexOf("$");return Object(o.e)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new q(e.substr(0,t))}}function sr(e,t,n){var r=e.syncPointTree_.get(t);return Object(o.e)(r,"Missing sync point for query tag that we're tracking"),Pn(r,n,Mt(e.pendingWriteTree_,t),null)}function ur(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e}var cr=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),lr=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=X(this.path_,t);return new e(this.syncTree_,n)},e.prototype.node=function(){return Jn(this.syncTree_,this.path_)},e}(),hr=function(e,t,n){return e&&"object"===typeof e?(Object(o.e)(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?fr(e[".sv"],t,n):"object"===typeof e[".sv"]?dr(e[".sv"],t):void Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},fr=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:Object(o.e)(!1,"Unexpected server value: "+e)}},dr=function(e,t,n){e.hasOwnProperty("increment")||Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Object(o.e)(!1,"Unexpected increment value: "+r);var i=t.node();if(Object(o.e)(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},pr=function(e,t,n,r){return mr(t,new lr(n,e),r)},vr=function(e,t,n){return mr(e,new cr(t),n)};function mr(e,t,n){var r,i=e.getPriority().val(),o=hr(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,s=hr(a.getValue(),t,n);return s!==a.getValue()||o!==a.getPriority().val()?new Me(s,ot(o)):e}var u=e;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Me(o))),u.forEachChild(Ye,(function(e,i){var o=mr(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))})),r}function gr(){return{value:null,children:new Map}}function yr(e,t,n){if(J(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=H(t);e.children.has(r)||e.children.set(r,gr()),yr(e.children.get(r),t=K(t),n)}}function br(e,t){if(J(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var n=e.value;return e.value=null,n.forEachChild(Ye,(function(t,n){yr(e,new q(t),n)})),br(e,t)}if(e.children.size>0){var r=H(t);if(t=K(t),e.children.has(r))br(e.children.get(r),t)&&e.children.delete(r);return 0===e.children.size}return!0}function _r(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){_r(r,new q(t.toString()+"/"+e),n)}))}var wr=function(){function e(){this.rootNode_=nt.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),Or=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),Object(o.i)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return Object(o.k)(this.counters_)},e}(),Er={},Tr={};function Ir(e){var t=e.toString();return Er[t]||(Er[t]=new Or),Er[t]}var Sr=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=Object(i.__assign)({},e);return this.last_&&P(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t},e}(),kr=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Sr(e);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;P(t,(function(t,i){i>0&&Object(o.i)(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},e}();var Cr=function(){this.eventLists_=[],this.recursionDepth_=0};function Dr(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null===n||ee(o,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)}function jr(e,t,n){Dr(e,n),xr(e,(function(e){return ee(e,t)}))}function Nr(e,t,n){Dr(e,n),xr(e,(function(e){return te(e,t)||te(t,e)}))}function xr(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(Pr(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function Pr(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();g&&_("event: "+n.toString()),U(r)}}}var Ar=function(){function e(e){this.allowedEvents_=e,this.listeners_={},Object(o.e)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=Object(i.__spreadArray)([],Object(i.__read)(this.listeners_[e])),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){Object(o.e)(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)},e}(),Rr=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(n="visibilitychange",t="hidden"):"undefined"!==typeof document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):"undefined"!==typeof document.msHidden?(n="msvisibilitychange",t="msHidden"):"undefined"!==typeof document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))}),!1),r}return Object(i.__extends)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return Object(o.e)("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(Ar),Mr=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||Object(o.u)()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}return Object(i.__extends)(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return Object(o.e)("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(Ar),Lr=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&U((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},e}(),Fr="start",Ur="close",Vr=function(){function e(e,t,n,r,i){this.connId=e,this.repoInfo=t,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(e),this.stats_=Ir(t),this.urlFn=function(e){return le(t,ue,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Lr(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(Object(o.w)()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new qr((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Object(i.__read)(e,5),o=r[0],a=r[1],s=r[2];r[3],r[4];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Fr)n.id=a,n.password=s;else{if(o!==Ur)throw new Error("Unrecognized command received: "+o);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Object(i.__read)(e,2),o=r[0],a=r[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(o,a)}),(function(){n.onClosed_()}),n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=oe,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),"undefined"!==typeof location&&location.hostname&&ae.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!Object(o.w)()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=Object(o.G)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=Object(o.h)(t),r=x(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=Object(o.G)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),qr=function(){function e(t,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=p(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){_("frame writing exception"),u.stack&&_(u.stack),_(u)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||_("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))},e.prototype.addTag=function(e,t){var n=this;Object(o.w)()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){_("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},e}(),Br="";function Hr(e){Br=e}var Wr=null;"undefined"!==typeof MozWebSocket?Wr=MozWebSocket:"undefined"!==typeof WebSocket&&(Wr=WebSocket);var Kr=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=Ir(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(e,t,n){var r={};return r.v=oe,!Object(o.w)()&&"undefined"!==typeof location&&location.hostname&&ae.test(location.hostname)&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),le(e,se,r)},t.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,h.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var i=this.nodeAdmin?"AdminNode":"Node",a={headers:{"User-Agent":"Firebase/5/"+Br+"/"+e.platform+"/"+i,"X-Firebase-GMPID":this.applicationId||""}},s=Object({NODE_ENV:"production",PUBLIC_URL:"/my-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}),u=0===this.connURL.indexOf("wss://")?s.HTTPS_PROXY||s.https_proxy:s.HTTP_PROXY||s.http_proxy;u&&(a.proxy={origin:u}),this.mySock=new Wr(this.connURL,[],a)}else{a={headers:{"X-Firebase-GMPID":this.applicationId||""}};this.mySock=new Wr(this.connURL,[],a)}}catch(l){this.log_("Error instantiating WebSocket.");var c=l.message||l.data;return c&&this.log_(c),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(e){r.handleIncomingFrame(e)},this.mySock.onerror=function(e){r.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&r.log_(t),r.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Wr&&!t.forceDisallow_},t.previouslyFailed=function(){return h.isInMemoryStorage||!0===h.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){h.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Object(o.A)(t);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},t.prototype.extractFrameCount_=function(e){if(Object(o.e)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},t.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(e){this.resetKeepAlive();var t=Object(o.G)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=x(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Yr=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Vr,Kr]},enumerable:!1,configurable:!0}),e.prototype.initTransports_=function(t){var n,r,o=Kr&&Kr.isAvailable(),a=o&&!Kr.previouslyFailed();if(t.webSocketOnly&&(o||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[Kr];else{var s=this.transports_=[];try{for(var u=Object(i.__values)(e.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),Gr=function(){function e(e,t,n,r,i,o,a,s){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=a,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new Yr(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=V((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=j("t",e),n=j("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=j("t",e),n=j("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=j("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?O("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):O("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),oe!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(h.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),zr=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),Qr=1e3,Xr=function(e){function t(n,r,i,a,s,u,c){var l=e.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=s,l.authTokenProvider_=u,l.authOverride_=c,l.id=t.nextPersistentConnectionId_++,l.log_=w("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Qr,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return l.scheduleConnect_(0),Rr.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Mr.getInstance().on("online",l.onOnline_,l),l}return Object(i.__extends)(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Object(o.G)(i)),Object(o.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},t.prototype.get=function(e){var t=this,n=new o.a,r={p:e.path.toString(),q:e.queryObject()},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var e=t.outstandingGets_[a];void 0!==e&&i===e&&(delete t.outstandingGets_[a],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise},t.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),a=e.path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Object(o.e)(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.e)(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,s),this.connected_&&this.sendListen_(s)},t.prototype.sendGet_=function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=r.queryObject(),a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;t.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),e.onComplete&&e.onComplete(u,s))}))},t.warnOnListenWarnings_=function(e,t){if(e&&"object"===typeof e&&Object(o.i)(e,"w")){var n=Object(o.D)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||Object(o.o)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=Object(o.z)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.e)(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+Object(o.G)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):O("Unrecognized action received from server: "+Object(o.G)(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;Object(o.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Qr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Qr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Qr),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){var e=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+t.nextConnectionId_++,s=this,u=this.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,i())};this.realtime_={close:h,sendRequest:function(e){Object(o.e)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)}};var f=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(f).then((function(e){c?_("getToken() completed but was canceled"):(_("getToken() completed. Creating connection."),s.authToken_=e&&e.accessToken,l=new Gr(a,s.repoInfo_,s.applicationId_,n,r,i,(function(e){T(e+" ("+s.repoInfo_.toString()+")"),s.interrupt("server_kill")}),u))})).then(null,(function(t){s.log_("Failed to get token: "+t),c||(e.repoInfo_.nodeAdmin&&T(t),h())}))}},t.prototype.interrupt=function(e){_("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){_("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=Qr,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map((function(e){return N(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new q(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){_("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var o=Object(i.__values)(this.listens.values()),a=o.next();!a.done;a=o.next()){var s=a.value;try{for(var u=(n=void 0,Object(i.__values)(s.values())),c=u.next();!c.done;c=u.next()){var l=c.value;this.sendListen_(l)}}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{a&&!a.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var f=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(f.action,f.pathString,f.data,f.onComplete)}for(h=0;h<this.outstandingGets_.length;h++)this.outstandingGets_[h]&&this.sendGet_(h)},t.prototype.sendConnectStats_=function(){var e={},t="js";Object(o.w)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+Br.replace(/\./g,"-")]=1,Object(o.u)()?e["framework.cordova"]=1:Object(o.x)()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=Mr.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(zr),Jr=function(e){function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.__extends)(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(Object(o.e)(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,i){var a=this,s=e.path.toString();this.log_("Listen called for "+s+" "+e.queryIdentifier());var u=t.getListenId_(e,r),c={};this.listens_[u]=c;var l=Tn(e.getQueryParams());this.restRequest_(s+".json",l,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(s,n,!1,r),Object(o.D)(a.listens_,u)===c)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.get=function(e){var t=this,n=Tn(e.getQueryParams()),r=e.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,(function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then((function(i){var a=i&&i.accessToken;a&&(t.auth=a);var s=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+Object(o.C)(t);r.log_("Sending REST request for "+s);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+s+" received. status:",u.status,"response:",u.responseText);var e=null;if(u.status>=200&&u.status<300){try{e=Object(o.A)(u.responseText)}catch(t){T("Failed to parse JSON response for "+s+": "+u.responseText)}n(null,e)}else 401!==u.status&&404!==u.status&&T("Got unsuccessful REST response for "+s+" Status: "+u.status),n(u.status);n=null}},u.open("GET",s,!0),u.send()}))},t}(zr),$r=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){Object(o.H)("DataSnapshot.child",0,1,arguments.length),t=String(t),Se("DataSnapshot.child",1,t,!1);var n=new q(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,Ye)},e.prototype.hasChild=function(e){Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),Se("DataSnapshot.hasChild",1,e,!1);var t=new q(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;if(Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach",1,t,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,(function(r,i){return t(new e(i,n.ref_.child(r),Ye))}))},e.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),e.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),Zr=function(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n={children:{},childCount:0}),this.name=e,this.parent=t,this.node=n};function ei(e,t){for(var n=t instanceof q?t:new q(t),r=e,i=H(n);null!==i;){var a=Object(o.D)(r.node.children,i)||{children:{},childCount:0};r=new Zr(i,r,a),i=H(n=K(n))}return r}function ti(e){return e.node.value}function ni(e,t){e.node.value=t,si(e)}function ri(e){return e.node.childCount>0}function ii(e,t){P(e.node.children,(function(n,r){t(new Zr(n,e,r))}))}function oi(e,t,n,r){n&&!r&&t(e),ii(e,(function(e){oi(e,t,!0,r)})),n&&r&&t(e)}function ai(e){return new q(null===e.parent?e.name:ai(e.parent)+"/"+e.name)}function si(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===ti(e)&&!ri(e)}(n),i=Object(o.i)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,si(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,si(e))}(e.parent,e.name,e)}var ui="repo_interrupt",ci=function(){function e(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Cr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=gr(),this.transactionQueueTree_=new Zr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e}();function li(e){if(e.stats_=Ir(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Jr(e.repoInfo_,(function(t,n,r,i){di(e,t,n,r,i)}),e.authTokenProvider_),setTimeout((function(){return pi(e,!0)}),0);else{var t=e.app.options.databaseAuthVariableOverride;if("undefined"!==typeof t&&null!==t){if("object"!==typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(t)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}e.persistentConnection_=new Xr(e.repoInfo_,e.app.options.appId,(function(t,n,r,i){di(e,t,n,r,i)}),(function(t){pi(e,t)}),(function(t){!function(e,t){P(t,(function(t,n){vi(e,t,n)}))}(e,t)}),e.authTokenProvider_,t),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.statsReporter_=function(e,t){var n=e.toString();return Tr[n]||(Tr[n]=t()),Tr[n]}(e.repoInfo_,(function(){return new kr(e.stats_,e.server_)})),e.infoData_=new wr,e.infoSyncTree_=new Wn({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t.path);return a.isEmpty()||(o=zn(e.infoSyncTree_,t.path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),vi(e,"connected",!1),e.serverSyncTree_=new Wn({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var o=i(n,r);Nr(e.eventQueue_,t.path,o)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function hi(e){var t=e.infoData_.getNode(new q(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function fi(e){return(t=(t={timestamp:hi(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function di(e,t,n,r,i){e.dataUpdateCount++;var a=new q(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var s=[];if(i)if(r){var u=Object(o.B)(n,(function(e){return ot(e)}));s=function(e,t,n,r){var i=or(e,r);if(i){var o=ar(i),a=o.path,s=o.queryId,u=$(a,t),c=ct.fromObject(n);return sr(e,a,new ft(at(s),u,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var c=ot(n);s=function(e,t,n,r){var i=or(e,r);if(null!=i){var o=ar(i),a=o.path,s=o.queryId,u=$(a,t);return sr(e,a,new ht(at(s),u,n))}return[]}(e.serverSyncTree_,a,c,i)}else if(r){var l=Object(o.B)(n,(function(e){return ot(e)}));s=function(e,t,n){var r=ct.fromObject(n);return Zn(e,new ft({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,l)}else{var h=ot(n);s=zn(e.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=Pi(e,a)),Nr(e.eventQueue_,f,s)}function pi(e,t){vi(e,"connected",t),!1===t&&function(e){ki(e,"onDisconnectEvents");var t=fi(e),n=gr();_r(e.onDisconnect_,B(),(function(r,i){var o=pr(r,i,e.serverSyncTree_,t);yr(n,r,o)}));var r=[];_r(n,B(),(function(t,n){r=r.concat(zn(e.serverSyncTree_,t,n));var i=Fi(e,t);Pi(e,i)})),e.onDisconnect_=gr(),Nr(e.eventQueue_,B(),r)}(e)}function vi(e,t,n){var r=new q("/.info/"+t),i=ot(n);e.infoData_.updateSnapshot(r,i);var o=zn(e.infoSyncTree_,r,i);Nr(e.eventQueue_,r,o)}function mi(e){return e.nextWriteId_++}function gi(e,t,n,r,i){ki(e,"set",{path:t.toString(),value:n,priority:r});var o=fi(e),a=ot(n,r),s=Jn(e.serverSyncTree_,t),u=vr(a,s,o),c=mi(e),l=Kn(e.serverSyncTree_,t,u,c,!0);Dr(e.eventQueue_,l),e.server_.put(t.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||T("set at "+t+" failed: "+n);var a=Gn(e.serverSyncTree_,c,!o);Nr(e.eventQueue_,t,a),Ci(e,i,n,r)}));var h=Fi(e,t);Pi(e,h),Nr(e.eventQueue_,h,[])}function yi(e,t,n,r){ki(e,"update",{path:t.toString(),value:n});var i=!0,o=fi(e),a={};if(P(n,(function(n,r){i=!1,a[n]=pr(X(t,n),ot(r),e.serverSyncTree_,o)})),i)_("update() called with empty data.  Don't do anything."),Ci(e,r,"ok",void 0);else{var s=mi(e),u=Yn(e.serverSyncTree_,t,a,s);Dr(e.eventQueue_,u),e.server_.merge(t.toString(),n,(function(n,i){var o="ok"===n;o||T("update at "+t+" failed: "+n);var a=Gn(e.serverSyncTree_,s,!o),u=a.length>0?Pi(e,t):t;Nr(e.eventQueue_,u,a),Ci(e,r,n,i)})),P(n,(function(n){var r=Fi(e,X(t,n));Pi(e,r)})),Nr(e.eventQueue_,t,[])}}function bi(e,t,n){e.server_.onDisconnectCancel(t.toString(),(function(r,i){"ok"===r&&br(e.onDisconnect_,t),Ci(e,n,r,i)}))}function _i(e,t,n,r){var i=ot(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(function(n,o){"ok"===n&&yr(e.onDisconnect_,t,i),Ci(e,r,n,o)}))}function wi(e,t,n,r,i){var o=ot(n,r);e.server_.onDisconnectPut(t.toString(),o.val(!0),(function(n,r){"ok"===n&&yr(e.onDisconnect_,t,o),Ci(e,i,n,r)}))}function Oi(e,t,n,r){if(Object(o.s)(n))return _("onDisconnect().update() called with empty data.  Don't do anything."),void Ci(e,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(function(i,o){"ok"===i&&P(n,(function(n,r){var i=ot(r);yr(e.onDisconnect_,X(t,n),i)})),Ci(e,r,i,o)}))}function Ei(e,t,n){var r;r=".info"===H(t.path)?Xn(e.infoSyncTree_,t,n):Xn(e.serverSyncTree_,t,n),jr(e.eventQueue_,t.path,r)}function Ti(e,t,n){var r;r=".info"===H(t.path)?Qn(e.infoSyncTree_,t,n):Qn(e.serverSyncTree_,t,n),jr(e.eventQueue_,t.path,r)}function Ii(e){e.persistentConnection_&&e.persistentConnection_.interrupt(ui)}function Si(e){e.persistentConnection_&&e.persistentConnection_.resume(ui)}function ki(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r="";e.persistentConnection_&&(r=e.persistentConnection_.id+":"),_.apply(void 0,Object(i.__spreadArray)([r],Object(i.__read)(t)))}function Ci(e,t,n,r){t&&U((function(){if("ok"===n)t(null);else{var e=(n||"error").toUpperCase(),i=e;r&&(i+=": "+r);var o=new Error(i);o.code=e,t(o)}}))}function Di(e){return e.__database||(e.__database=new eo(e))}function ji(e,t,n,r,i){ki(e,"transaction on "+t);var a=function(){},s=new zi(e,t);s.on("value",a);var u={path:t,update:n,onComplete:r,status:null,order:p(),applyLocally:i,retryCount:0,unwatcher:function(){s.off("value",a)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},c=Ni(e,t,void 0);u.currentInputSnapshot=c;var l=u.update(c.val());if(void 0===l){if(u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete){var h=new $r(u.currentInputSnapshot,new zi(e,u.path),Ye);u.onComplete(null,!1,h)}}else{we("transaction failed: Data returned ",l,u.path),u.status=0;var f=ei(e.transactionQueueTree_,t),d=ti(f)||[];d.push(u),ni(f,d);var v=void 0;if("object"===typeof l&&null!==l&&Object(o.i)(l,".priority"))v=Object(o.D)(l,".priority"),Object(o.e)(be(v),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else v=(Jn(e.serverSyncTree_,t)||nt.EMPTY_NODE).getPriority().val();var m=fi(e),g=ot(l,v),y=vr(g,c,m);u.currentOutputSnapshotRaw=g,u.currentOutputSnapshotResolved=y,u.currentWriteId=mi(e);var b=Kn(e.serverSyncTree_,t,y,u.currentWriteId,u.applyLocally);Nr(e.eventQueue_,t,b),xi(e,e.transactionQueueTree_)}}function Ni(e,t,n){return Jn(e.serverSyncTree_,t,n)||nt.EMPTY_NODE}function xi(e,t){if(void 0===t&&(t=e.transactionQueueTree_),t||Li(e,t),ti(t)){var n=Ri(e,t);Object(o.e)(n.length>0,"Sending zero length transaction queue"),n.every((function(e){return 0===e.status}))&&function(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=Ni(e,t,r),a=i,s=i.hash(),u=0;u<n.length;u++){var c=n[u];Object(o.e)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=$(t,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=t;e.server_.put(f.toString(),h,(function(r){ki(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<n.length;a++){if(n[a].status=2,i=i.concat(Gn(e.serverSyncTree_,n[a].currentWriteId)),n[a].onComplete){var s=n[a].currentOutputSnapshotResolved,u=new zi(e,n[a].path),c=new $r(s,u,Ye);o.push(n[a].onComplete.bind(null,null,!0,c))}n[a].unwatcher()}Li(e,ei(e.transactionQueueTree_,t)),xi(e,e.transactionQueueTree_),Nr(e.eventQueue_,t,i);for(a=0;a<o.length;a++)U(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else{T("transaction at "+f.toString()+" failed: "+r);for(a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r}Pi(e,t)}}),s)}(e,ai(t),n)}else ri(t)&&ii(t,(function(t){xi(e,t)}))}function Pi(e,t){var n=Ai(e,t),r=ai(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})).map((function(e){return e.currentWriteId})),s=0;s<t.length;s++){var u=t[s],c=$(n,u.path),l=!1,h=void 0;if(Object(o.e)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,h=u.abortReason,i=i.concat(Gn(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,h="maxretry",i=i.concat(Gn(e.serverSyncTree_,u.currentWriteId,!0));else{var f=Ni(e,u.path,a);u.currentInputSnapshot=f;var d=t[s].update(f.val());if(void 0!==d){we("transaction failed: Data returned ",d,u.path);var p=ot(d);"object"===typeof d&&null!=d&&Object(o.i)(d,".priority")||(p=p.updatePriority(f.getPriority()));var v=u.currentWriteId,m=fi(e),g=vr(p,f,m);u.currentOutputSnapshotRaw=p,u.currentOutputSnapshotResolved=g,u.currentWriteId=mi(e),a.splice(a.indexOf(v),1),i=(i=i.concat(Kn(e.serverSyncTree_,u.path,g,u.currentWriteId,u.applyLocally))).concat(Gn(e.serverSyncTree_,v,!0))}else l=!0,h="nodata",i=i.concat(Gn(e.serverSyncTree_,u.currentWriteId,!0))}if(Nr(e.eventQueue_,n,i),i=[],l&&(t[s].status=2,w=t[s].unwatcher,setTimeout(w,Math.floor(0)),t[s].onComplete))if("nodata"===h){var y=new zi(e,t[s].path),b=t[s].currentInputSnapshot,_=new $r(b,y,Ye);r.push(t[s].onComplete.bind(null,null,!1,_))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}var w;Li(e,e.transactionQueueTree_);for(s=0;s<r.length;s++)U(r[s]);xi(e,e.transactionQueueTree_)}(e,Ri(e,n),r),r}function Ai(e,t){var n,r=e.transactionQueueTree_;for(n=H(t);null!==n&&void 0===ti(r);)r=ei(r,n),n=H(t=K(t));return r}function Ri(e,t){var n=[];return Mi(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function Mi(e,t,n){var r=ti(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);ii(t,(function(t){Mi(e,t,n)}))}function Li(e,t){var n=ti(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,ni(t,n.length>0?n:void 0)}ii(t,(function(t){Li(e,t)}))}function Fi(e,t){var n=ai(Ai(e,t)),r=ei(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){Ui(e,t)})),Ui(e,r),oi(r,(function(t){Ui(e,t)})),n}function Ui(e,t){var n=ti(t);if(n){for(var r=[],i=[],a=-1,s=0;s<n.length;s++)if(3===n[s].status);else if(1===n[s].status)Object(o.e)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set";else if(Object(o.e)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),i=i.concat(Gn(e.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete){r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))}-1===a?ni(t,void 0):n.length=a+1,Nr(e.eventQueue_,ai(t),i);for(s=0;s<r.length;s++)U(r[s])}}var Vi,qi=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel",1,e,!0);var t=new o.a;return bi(this.repo_,this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),Ce("OnDisconnect.remove",this.path_),Object(o.I)("OnDisconnect.remove",1,e,!0);var t=new o.a;return _i(this.repo_,this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){Object(o.H)("OnDisconnect.set",1,2,arguments.length),Ce("OnDisconnect.set",this.path_),_e("OnDisconnect.set",1,e,this.path_,!1),Object(o.I)("OnDisconnect.set",2,t,!0);var n=new o.a;return _i(this.repo_,this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),Ce("OnDisconnect.setWithPriority",this.path_),_e("OnDisconnect.setWithPriority",1,e,this.path_,!1),Ee("OnDisconnect.setWithPriority",2,t,!1),Object(o.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return wi(this.repo_,this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),Ce("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Oe("OnDisconnect.update",1,e,this.path_,!1),Object(o.I)("OnDisconnect.update",2,t,!0);var i=new o.a;return Oi(this.repo_,this.path_,e,i.wrapCallback(t)),i.promise},e}(),Bi=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Hi=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},e}(),Wi=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),Ki=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new Hi("value",this,new $r(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Wi(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),Yi=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,Object(o.i)(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Wi(this,e,t):null},e.prototype.createEvent=function(e,t){Object(o.e)(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new Hi(e.type,this,new $r(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var a=r[0],s=i[0];return s===a&&(!t.callbacks_[a]||!this.callbacks_[s]||t.callbacks_[a]===this.callbacks_[s])}return i.every((function(e){return t.callbacks_[e]===n.callbacks_[e]}))}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),Gi=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return Object(o.e)(Vi,"Reference.ts has not been loaded"),Vi},set:function(e){Vi=e},enumerable:!1,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===ze){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==S)throw new Error(r);if("string"!==typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==k)throw new Error(r);if("string"!==typeof n)throw new Error(i)}}else if(e.getIndex()===Ye){if(null!=t&&!be(t)||null!=n&&!be(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.e)(e.getIndex()instanceof dn||e.getIndex()===fn,"unknown index type."),null!=t&&"object"===typeof t||null!=n&&"object"===typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return Object(o.H)("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,i){Object(o.H)("Query.on",2,4,arguments.length),Te("Query.on",1,t,!1),Object(o.I)("Query.on",2,n,!1);var a=e.getCancelAndContextArgs_("Query.on",r,i);if("value"===t)this.onValueEvent(n,a.cancel,a.context);else{var s={};s[t]=n,this.onChildEvent(s,a.cancel,a.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new Ki(e,t||null,n||null);Ei(this.repo,this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new Yi(e,t,n);Ei(this.repo,this,r)},e.prototype.off=function(e,t,n){Object(o.H)("Query.off",0,3,arguments.length),Te("Query.off",1,e,!0),Object(o.I)("Query.off",2,t,!0),Object(o.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===e){var a=t||null;r=new Ki(a,null,n||null)}else e&&(t&&((i={})[e]=t),r=new Yi(i,null,n||null));Ti(this.repo,this,r)},e.prototype.get=function(){return function(e,t){var n=$n(e.serverSyncTree_,t);return null!=n?Promise.resolve(new $r(n,t.getRef(),t.getQueryParams().getIndex())):e.server_.get(t).then((function(n){var r=ot(n),i=zn(e.serverSyncTree_,t.path,r);return jr(e.eventQueue_,t.path,i),Promise.resolve(new $r(r,t.getRef(),t.getQueryParams().getIndex()))}),(function(n){return ki(e,"get for query "+Object(o.G)(t)+" failed: "+n),Promise.reject(new Error(n))}))}(this.repo,this)},e.prototype.once=function(t,n,r,i){var a=this;Object(o.H)("Query.once",1,4,arguments.length),Te("Query.once",1,t,!1),Object(o.I)("Query.once",2,n,!0);var s=e.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch((function(){}));var l=function e(r){u&&(u=!1,a.off(t,e),n&&n.bind(s.context)(r),c.resolve(r))};return this.on(t,l,(function(e){a.off(t,l),s.cancel&&s.cancel.bind(s.context)(e),c.reject(e)})),c.promise},e.prototype.limitToFirst=function(t){if(Object(o.H)("Query.limitToFirst",1,1,arguments.length),"number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,gn(this.queryParams_,t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(Object(o.H)("Query.limitToLast",1,1,arguments.length),"number"!==typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,yn(this.queryParams_,t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(Object(o.H)("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');Se("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new q(t);if(J(n))throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new dn(n),i=En(this.queryParams_,r);return e.validateQueryEndpoints_(i),new e(this.repo,this.path,i,!0)},e.prototype.orderByKey=function(){Object(o.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=En(this.queryParams_,ze);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){Object(o.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=En(this.queryParams_,Ye);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){Object(o.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=En(this.queryParams_,fn);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),Object(o.H)("Query.startAt",0,2,arguments.length),_e("Query.startAt",1,t,this.path,!0),Ie("Query.startAt",2,n,!0);var r=bn(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.startAfter=function(t,n){void 0===t&&(t=null),Object(o.H)("Query.startAfter",0,2,arguments.length),_e("Query.startAfter",1,t,this.path,!1),Ie("Query.startAfter",2,n,!0);var r=_n(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAfter: Starting point was already set (by another call to startAt, startAfter or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),Object(o.H)("Query.endAt",0,2,arguments.length),_e("Query.endAt",1,t,this.path,!0),Ie("Query.endAt",2,n,!0);var r=wn(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endBefore=function(t,n){void 0===t&&(t=null),Object(o.H)("Query.endBefore",0,2,arguments.length),_e("Query.endBefore",1,t,this.path,!1),Ie("Query.endBefore",2,n,!0);var r=On(this.queryParams_,t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endBefore: Ending point was already set (by another call to endAt, endBefore, or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(Object(o.H)("Query.equalTo",1,2,arguments.length),_e("Query.equalTo",1,e,this.path,!1),Ie("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this.repo.toString()+G(this.path)},e.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return function(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==Ye&&(t.i=e.index_.toString()),t}(this.queryParams_)},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=N(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(t instanceof e)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===t.repo,i=ee(this.path,t.path),a=this.queryIdentifier()===t.queryIdentifier();return r&&i&&a},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,Object(o.I)(e,3,r.cancel,!0),r.context=n,Object(o.J)(e,4,r.context,!0);else if(t)if("object"===typeof t&&null!==t)r.context=t;else{if("function"!==typeof t)throw new Error(Object(o.m)(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),e}(),zi=function(e){function t(t,n){if(!(t instanceof ci))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,new mn,!1)||this}return Object(i.__extends)(t,e),t.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),J(this.path)?null:Y(this.path)},t.prototype.child=function(e){return Object(o.H)("Reference.child",1,1,arguments.length),"number"===typeof e?e=String(e):e instanceof q||(null===H(this.path)?ke("Reference.child",1,e,!1):Se("Reference.child",1,e,!1)),new t(this.repo,X(this.path,e))},t.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var e=Q(this.path);return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){Object(o.H)("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return Di(this.repo)},t.prototype.set=function(e,t){Object(o.H)("Reference.set",1,2,arguments.length),Ce("Reference.set",this.path),_e("Reference.set",1,e,this.path,!1),Object(o.I)("Reference.set",2,t,!0);var n=new o.a;return gi(this.repo,this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(Object(o.H)("Reference.update",1,2,arguments.length),Ce("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Oe("Reference.update",1,e,this.path,!1),Object(o.I)("Reference.update",2,t,!0);var i=new o.a;return yi(this.repo,this.path,e,i.wrapCallback(t)),i.promise},t.prototype.setWithPriority=function(e,t,n){if(Object(o.H)("Reference.setWithPriority",2,3,arguments.length),Ce("Reference.setWithPriority",this.path),_e("Reference.setWithPriority",1,e,this.path,!1),Ee("Reference.setWithPriority",2,t,!1),Object(o.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return gi(this.repo,this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return Object(o.H)("Reference.remove",0,1,arguments.length),Ce("Reference.remove",this.path),Object(o.I)("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(Object(o.H)("Reference.transaction",1,3,arguments.length),Ce("Reference.transaction",this.path),Object(o.I)("Reference.transaction",1,e,!1),Object(o.I)("Reference.transaction",2,t,!0),je("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"===typeof t&&r.promise.catch((function(){}));var i=function(e,n,i){e?r.reject(e):r.resolve(new Bi(n,i)),"function"===typeof t&&t(e,n,i)};return ji(this.repo,this.path,e,i,n),r.promise},t.prototype.setPriority=function(e,t){Object(o.H)("Reference.setPriority",1,2,arguments.length),Ce("Reference.setPriority",this.path),Ee("Reference.setPriority",1,e,!1),Object(o.I)("Reference.setPriority",2,t,!0);var n=new o.a;return gi(this.repo,X(this.path,".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){Object(o.H)("Reference.push",0,2,arguments.length),Ce("Reference.push",this.path),_e("Reference.push",1,e,this.path,!0),Object(o.I)("Reference.push",2,t,!0);var n,r=hi(this.repo),i=cn(r),a=this.child(i),s=this.child(i);return n=null!=e?a.set(e,t).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),"function"===typeof t&&n.catch((function(){})),a},t.prototype.onDisconnect=function(){return Ce("Reference.onDisconnect",this.path),new qi(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),t}(Gi);Gi.__referenceConstructor=zi,function(e){Object(o.e)(!In,"__referenceConstructor has already been defined"),In=e}(zi);var Qi=function(){function e(e,t){var n=this;this.app_=e,this.authProvider_=t,this.auth_=null,this.auth_=t.getImmediate({optional:!0}),this.auth_||t.get().then((function(e){return n.auth_=e}))}return e.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(_("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout((function(){return e(null)}),0),this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)})))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',T(e)},e}(),Xi=function(){function e(){}return e.prototype.getToken=function(t){return Promise.resolve({accessToken:e.EMULATOR_AUTH_TOKEN})},e.prototype.addTokenChangeListener=function(t){t(e.EMULATOR_AUTH_TOKEN)},e.prototype.removeTokenChangeListener=function(e){},e.prototype.notifyForInvalidToken=function(){},e.EMULATOR_AUTH_TOKEN="owner",e}(),Ji={},$i=!1;function Zi(t,n,r,i){var a=r||t.options.databaseURL;void 0===a&&(t.options.projectId||E("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_("Using default host for project ",t.options.projectId),a=t.options.projectId+"-default-rtdb.firebaseio.com");var s,u=fe(a,i),c=u.repoInfo,l=void 0;"undefined"!==typeof e&&(l=Object({NODE_ENV:"production",PUBLIC_URL:"/my-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).FIREBASE_DATABASE_EMULATOR_HOST),l?(s=!0,a="http://"+l+"?ns="+c.namespace,c=(u=fe(a,i)).repoInfo):s=!u.repoInfo.secure;var h=i&&s?new Xi:new Qi(t,n);return De("Invalid Firebase Database URL",1,u),J(u.path)||E("Database URL must point to the root of a Firebase Database (not including a child path)."),Di(function(e,t,n){var r=Object(o.D)(Ji,t.name);r||(r={},Ji[t.name]=r);var i=Object(o.D)(r,e.toURLString());i&&E("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return i=new ci(e,$i,t,n),r[e.toURLString()]=i,i}(c,t,h))}var eo=function(){function e(e){var t=this;this.repoInternal_=e,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.__awaiter)(t,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){return this.checkDeleted_("delete"),function(e){var t=Object(o.D)(Ji,e.app.name);t&&Object(o.D)(t,e.key)===e||E("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),Ii(e),delete t[e.key]}(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]}))}))}},e instanceof ci||E("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(e.prototype,"repo_",{get:function(){return this.instanceStarted_||(li(this.repoInternal_),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new zi(this.repo_,B())),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),e.prototype.useEmulator=function(e,t){this.checkDeleted_("useEmulator"),this.instanceStarted_?E("Cannot call useEmulator() after instance has already been initialized."):function(e,t,n){e.repoInfo_=new ce(t+":"+n,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),e.repoInfo_.nodeAdmin&&(e.authTokenProvider_=new Xi)}(this.repoInternal_,e,t)},e.prototype.ref=function(e){return this.checkDeleted_("ref"),Object(o.H)("database.ref",0,1,arguments.length),e instanceof zi?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),Object(o.H)(t,1,1,arguments.length);var n=fe(e,this.repo_.repoInfo_.nodeAdmin);De(t,1,n);var r=n.repoInfo;return this.repo_.repoInfo_.isCustomHost()||r.host===this.repo_.repoInfo_.host||E(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repoInternal_&&E("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){Object(o.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),Ii(this.repo_)},e.prototype.goOnline=function(){Object(o.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),Si(this.repo_)},e.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(e){return{".sv":{increment:e}}}},e}();var to=Object.freeze({__proto__:null,forceLongPolling:function(){Kr.forceDisallow(),Vr.forceAllow()},forceWebSockets:function(){Vr.forceDisallow()},isWebSocketsAvailable:function(){return Kr.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){!function(e,t){if(void 0===t&&(t=!1),"undefined"!==typeof console){var n;t?(e.statsListener_||(e.statsListener_=new Sr(e.stats_)),n=e.statsListener_.get()):n=e.stats_.get();var r=Object.keys(n).reduce((function(e,t){return Math.max(t.length,e)}),0);P(n,(function(e,t){for(var n=e,i=e.length;i<r+2;i++)n+=" ";console.log(n+t)}))}}(e.repo,t)},statsIncrementCounter:function(e,t){!function(e,t){var n,r;e.stats_.incrementCounter(t),n=e.statsReporter_,r=t,n.statsToReport_[r]=!0}(e.repo,t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return function(e,t){e.interceptServerDataCallback_=t}(e.repo,t)},initStandalone:function(e){var t=e.app,n=e.url,r=e.version,i=e.customAuthImpl,o=e.namespace,a=e.nodeAdmin,u=void 0!==a&&a;Hr(r);var c=new s.c("auth-internal",new s.b("database-standalone"));return c.setComponent(new s.a("auth-internal",(function(){return i}),"PRIVATE")),{instance:Zi(t,c,n,u),namespace:o}}}),no=Xr;Xr.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Xr.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var ro=Gr,io=ce,oo=Object.freeze({__proto__:null,DataConnection:no,RealTimeConnection:ro,hijackHash:function(e){var t=Xr.prototype.put;return Xr.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){Xr.prototype.put=t}},ConnectionTarget:io,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){!function(e){$i=e}(e)}}),ao=eo.ServerValue;!function(e){Hr(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new s.a("database",(function(e,t){var n=t.instanceIdentifier;return Zi(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),n,void 0)}),"PUBLIC").setServiceProps({Reference:zi,Query:Gi,Database:eo,DataSnapshot:$r,enableLogging:b,INTERNAL:to,ServerValue:ao,TEST_ACCESS:oo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.9.6"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n(225),n(575)(e))},773:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return lc})),n.d(t,"b",(function(){return fc})),n.d(t,"c",(function(){return Hs})),n.d(t,"d",(function(){return V})),n.d(t,"e",(function(){return ic})),n.d(t,"f",(function(){return ac})),n.d(t,"g",(function(){return Bs})),n.d(t,"h",(function(){return oc})),n.d(t,"i",(function(){return uc})),n.d(t,"j",(function(){return mc})),n.d(t,"k",(function(){return Tc})),n.d(t,"l",(function(){return yc})),n.d(t,"m",(function(){return wc})),n.d(t,"n",(function(){return cc})),n.d(t,"o",(function(){return Ec})),n.d(t,"p",(function(){return _c})),n.d(t,"q",(function(){return gc})),n.d(t,"r",(function(){return Js}));var r=n(430),i=n(375),o=n(732),a=n(1),s=function(){function e(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.t(e)},this.i=function(e){return t.writeSequenceNumber(e)})}return e.prototype.t=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},e.prototype.next=function(){var e=++this.previousValue;return this.i&&this.i(e),e},e}();s.o=-1;var u=new r.b("@firebase/firestore");function c(){return u.logLevel}function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(u.logLevel<=r.a.DEBUG){var i=t.map(d);u.debug.apply(u,Object(a.__spreadArray)(["Firestore (8.3.1): "+e],i))}}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(u.logLevel<=r.a.ERROR){var i=t.map(d);u.error.apply(u,Object(a.__spreadArray)(["Firestore (8.3.1): "+e],i))}}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(u.logLevel<=r.a.WARN){var i=t.map(d);u.warn.apply(u,Object(a.__spreadArray)(["Firestore (8.3.1): "+e],i))}}function d(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function p(e){void 0===e&&(e="Unexpected state");var t="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+e;throw h(t),new Error(t)}function v(e,t){e||p()}function m(e,t){return e}function g(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var y=function(){function e(){}return e.u=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=g(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n},e}();function b(e,t){return e<t?-1:e>t?1:0}function _(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function w(e){return e+"\0"}function O(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function E(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function T(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function I(e){return null==e}function S(e){return 0===e&&1/e==-1/0}function k(e){return"number"==typeof e&&Number.isInteger(e)&&!S(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var C={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},D=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).code=t,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(a.__extends)(t,e),t}(Error),j=function(){function e(e,t,n){void 0===t?t=0:t>e.length&&p(),void 0===n?n=e.length-t:n>e.length-t&&p(),this.segments=e,this.offset=t,this.len=n}return Object.defineProperty(e.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return 0===e.comparator(this,t)},e.prototype.child=function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)},e.prototype.limit=function(){return this.offset+this.length},e.prototype.popFirst=function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)},e.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},e.prototype.firstSegment=function(){return this.segments[this.offset]},e.prototype.lastSegment=function(){return this.get(this.length-1)},e.prototype.get=function(e){return this.segments[this.offset+e]},e.prototype.isEmpty=function(){return 0===this.length},e.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},e.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},e.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},e.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0},e}(),N=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.prototype.canonicalString=function(){return this.toArray().join("/")},t.prototype.toString=function(){return this.canonicalString()},t.fromString=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new D(C.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(e){return e.length>0})))}return new t(r)},t.emptyPath=function(){return new t([])},t}(j),x=/^[_a-zA-Z][_a-zA-Z0-9]*$/,P=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.construct=function(e,n,r){return new t(e,n,r)},t.isValidIdentifier=function(e){return x.test(e)},t.prototype.canonicalString=function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")},t.prototype.toString=function(){return this.canonicalString()},t.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},t.keyField=function(){return new t(["__name__"])},t.fromServerFormat=function(e){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new D(C.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<e.length;){var s=e[i];if("\\"===s){if(i+1===e.length)throw new D(C.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var u=e[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new D(C.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new D(C.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)},t.emptyPath=function(){return new t([])},t}(j),A=function(){function e(e){this.path=e}return e.fromPath=function(t){return new e(N.fromString(t))},e.fromName=function(t){return new e(N.fromString(t).popFirst(5))},e.prototype.hasCollectionId=function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e},e.prototype.isEqual=function(e){return null!==e&&0===N.comparator(this.path,e.path)},e.prototype.toString=function(){return this.path.toString()},e.comparator=function(e,t){return N.comparator(e.path,t.path)},e.isDocumentKey=function(e){return e.length%2==0},e.fromSegments=function(t){return new e(new N(t.slice()))},e}(),R=function(){function e(e){this.binaryString=e}return e.fromBase64String=function(t){return new e(atob(t))},e.fromUint8Array=function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))},e.prototype.toBase64=function(){return e=this.binaryString,btoa(e);var e},e.prototype.toUint8Array=function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)},e.prototype.approximateByteSize=function(){return 2*this.binaryString.length},e.prototype.compareTo=function(e){return b(this.binaryString,e.binaryString)},e.prototype.isEqual=function(e){return this.binaryString===e.binaryString},e}();R.EMPTY_BYTE_STRING=new R("");var M=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function L(e){if(v(!!e),"string"==typeof e){var t=0,n=M.exec(e);if(v(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:F(e.seconds),nanos:F(e.nanos)}}function F(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function U(e){return"string"==typeof e?R.fromBase64String(e):R.fromUint8Array(e)}var V=function(){function e(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new D(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new D(C.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new D(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new D(C.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}return e.now=function(){return e.fromMillis(Date.now())},e.fromDate=function(t){return e.fromMillis(t.getTime())},e.fromMillis=function(t){var n=Math.floor(t/1e3);return new e(n,1e6*(t-1e3*n))},e.prototype.toDate=function(){return new Date(this.toMillis())},e.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},e.prototype._compareTo=function(e){return this.seconds===e.seconds?b(this.nanoseconds,e.nanoseconds):b(this.seconds,e.seconds)},e.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},e.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},e.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},e.prototype.valueOf=function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},e}();function q(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function B(e){var t=e.mapValue.fields.__previous_value__;return q(t)?B(t):t}function H(e){var t=L(e.mapValue.fields.__local_write_time__.timestampValue);return new V(t.seconds,t.nanos)}function W(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?q(e)?4:10:p()}function K(e,t){var n=W(e);if(n!==W(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return H(e).isEqual(H(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=L(e.timestampValue),r=L(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return U(e.bytesValue).isEqual(U(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return F(e.geoPointValue.latitude)===F(t.geoPointValue.latitude)&&F(e.geoPointValue.longitude)===F(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return F(e.integerValue)===F(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=F(e.doubleValue),r=F(t.doubleValue);return n===r?S(n)===S(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return _(e.arrayValue.values||[],t.arrayValue.values||[],K);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(O(n)!==O(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!K(n[i],r[i])))return!1;return!0}(e,t);default:return p()}}function Y(e,t){return void 0!==(e.values||[]).find((function(e){return K(e,t)}))}function G(e,t){var n=W(e),r=W(t);if(n!==r)return b(n,r);switch(n){case 0:return 0;case 1:return b(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=F(e.integerValue||e.doubleValue),r=F(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return z(e.timestampValue,t.timestampValue);case 4:return z(H(e),H(t));case 5:return b(e.stringValue,t.stringValue);case 6:return function(e,t){var n=U(e),r=U(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=b(n[i],r[i]);if(0!==o)return o}return b(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=b(F(e.latitude),F(t.latitude));return 0!==n?n:b(F(e.longitude),F(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=G(n[i],r[i]);if(o)return o}return b(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=b(r[a],o[a]);if(0!==s)return s;var u=G(n[r[a]],i[o[a]]);if(0!==u)return u}return b(r.length,o.length)}(e.mapValue,t.mapValue);default:throw p()}}function z(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return b(e,t);var n=L(e),r=L(t),i=b(n.seconds,r.seconds);return 0!==i?i:b(n.nanos,r.nanos)}function Q(e){return X(e)}function X(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=L(e);return"time("+t.seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?U(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,A.fromName(n).toString()):"geoPointValue"in e?"geo("+(t=e.geoPointValue).latitude+","+t.longitude+")":"arrayValue"in e?function(e){for(var t="[",n=!0,r=0,i=e.values||[];r<i.length;r++)n?n=!1:t+=",",t+=X(i[r]);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var t="{",n=!0,r=0,i=Object.keys(e.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:t+=",",t+=o+":"+X(e.fields[o])}return t+"}"}(e.mapValue):p();var t,n}function J(e,t){return{referenceValue:"projects/"+e.projectId+"/databases/"+e.database+"/documents/"+t.path.canonicalString()}}function $(e){return!!e&&"integerValue"in e}function Z(e){return!!e&&"arrayValue"in e}function ee(e){return!!e&&"nullValue"in e}function te(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ne(e){return!!e&&"mapValue"in e}var re=function(e,t){this.key=e,this.version=t},ie=function(e){function t(t,n,r,i){var o=this;return(o=e.call(this,t,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(a.__extends)(t,e),t.prototype.field=function(e){return this.objectValue.field(e)},t.prototype.data=function(){return this.objectValue},t.prototype.toProto=function(){return this.objectValue.proto},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.objectValue.isEqual(e.objectValue)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t}(re),oe=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(a.__extends)(t,e),t.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(re),ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},t}(re),se=function(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function ue(e,t,n,r,i,o,a){return void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new se(e,t,n,r,i,o,a)}function ce(e){var t=m(e);if(null===t.h){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return function(e){return e.field.canonicalString()+e.op.toString()+Q(e.value)}(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),I(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=Oe(t.startAt)),t.endAt&&(n+="|ub:",n+=Oe(t.endAt)),t.h=n}return t.h}function le(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Te(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(i=e.filters[r],o=t.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!K(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Se(e.startAt,t.startAt)&&Se(e.endAt,t.endAt)}function he(e){return A.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var fe=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).field=t,i.op=n,i.value=r,i}return Object(a.__extends)(t,e),t.create=function(e,n,r){return e.isKeyField()?"in"===n||"not-in"===n?this.l(e,n,r):new de(e,n,r):"array-contains"===n?new ge(e,r):"in"===n?new ye(e,r):"not-in"===n?new be(e,r):"array-contains-any"===n?new _e(e,r):new t(e,n,r)},t.l=function(e,t,n){return"in"===t?new pe(e,n):new ve(e,n)},t.prototype.matches=function(e){var t=e.field(this.field);return"!="===this.op?null!==t&&this.m(G(t,this.value)):null!==t&&W(this.value)===W(t)&&this.m(G(t,this.value))},t.prototype.m=function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return p()}},t.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},t}((function(){})),de=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,r)||this).key=A.fromName(r.referenceValue),i}return Object(a.__extends)(t,e),t.prototype.matches=function(e){var t=A.comparator(e.key,this.key);return this.m(t)},t}(fe),pe=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"in",n)||this).keys=me("in",n),r}return Object(a.__extends)(t,e),t.prototype.matches=function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))},t}(fe),ve=function(e){function t(t,n){var r=this;return(r=e.call(this,t,"not-in",n)||this).keys=me("not-in",n),r}return Object(a.__extends)(t,e),t.prototype.matches=function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))},t}(fe);function me(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return A.fromName(e.referenceValue)}))}var ge=function(e){function t(t,n){return e.call(this,t,"array-contains",n)||this}return Object(a.__extends)(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return Z(t)&&Y(t.arrayValue,this.value)},t}(fe),ye=function(e){function t(t,n){return e.call(this,t,"in",n)||this}return Object(a.__extends)(t,e),t.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&Y(this.value.arrayValue,t)},t}(fe),be=function(e){function t(t,n){return e.call(this,t,"not-in",n)||this}return Object(a.__extends)(t,e),t.prototype.matches=function(e){if(Y(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.field(this.field);return null!==t&&!Y(this.value.arrayValue,t)},t}(fe),_e=function(e){function t(t,n){return e.call(this,t,"array-contains-any",n)||this}return Object(a.__extends)(t,e),t.prototype.matches=function(e){var t=this,n=e.field(this.field);return!(!Z(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Y(t.value.arrayValue,e)}))},t}(fe),we=function(e,t){this.position=e,this.before=t};function Oe(e){return(e.before?"b":"a")+":"+e.position.map((function(e){return Q(e)})).join(",")}var Ee=function(e,t){void 0===t&&(t="asc"),this.field=e,this.dir=t};function Te(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ie(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?A.comparator(A.fromName(a.referenceValue),n.key):G(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Se(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!K(e.position[n],t.position[n]))return!1;return!0}var ke=function(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function Ce(e,t,n,r,i,o,a,s){return new ke(e,t,n,r,i,o,a,s)}function De(e){return new ke(e)}function je(e){return!I(e.limit)&&"F"===e.limitType}function Ne(e){return!I(e.limit)&&"L"===e.limitType}function xe(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Pe(e){for(var t=0,n=e.filters;t<n.length;t++){var r=n[t];if(r.g())return r.field}return null}function Ae(e){return null!==e.collectionGroup}function Re(e){var t=m(e);if(null===t.p){t.p=[];var n=Pe(t),r=xe(t);if(null!==n&&null===r)n.isKeyField()||t.p.push(new Ee(n)),t.p.push(new Ee(P.keyField(),"asc"));else{for(var i=!1,o=0,a=t.explicitOrderBy;o<a.length;o++){var s=a[o];t.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.p.push(new Ee(P.keyField(),u))}}}return t.p}function Me(e){var t=m(e);if(!t.T)if("F"===t.limitType)t.T=ue(t.path,t.collectionGroup,Re(t),t.filters,t.limit,t.startAt,t.endAt);else{for(var n=[],r=0,i=Re(t);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Ee(o.field,a))}var s=t.endAt?new we(t.endAt.position,!t.endAt.before):null,u=t.startAt?new we(t.startAt.position,!t.startAt.before):null;t.T=ue(t.path,t.collectionGroup,n,t.filters,t.limit,s,u)}return t.T}function Le(e,t,n){return new ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Fe(e,t){return le(Me(e),Me(t))&&e.limitType===t.limitType}function Ue(e){return ce(Me(e))+"|lt:"+e.limitType}function Ve(e){return"Query(target="+function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: ["+e.filters.map((function(e){return(t=e).field.canonicalString()+" "+t.op+" "+Q(t.value);var t})).join(", ")+"]"),I(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: ["+e.orderBy.map((function(e){return function(e){return e.field.canonicalString()+" ("+e.dir+")"}(e)})).join(", ")+"]"),e.startAt&&(t+=", startAt: "+Oe(e.startAt)),e.endAt&&(t+=", endAt: "+Oe(e.endAt)),"Target("+t+")"}(Me(e))+"; limitType="+e.limitType+")"}function qe(e,t){return function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):A.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(var n=0,r=e.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===t.field(i.field))return!1}return!0}(e,t)&&function(e,t){for(var n=0,r=e.filters;n<r.length;n++)if(!r[n].matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Ie(e.startAt,Re(e),t))&&(!e.endAt||!Ie(e.endAt,Re(e),t))}(e,t)}function Be(e){return function(t,n){for(var r=!1,i=0,o=Re(e);i<o.length;i++){var a=o[i],s=He(a,t,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function He(e,t,n){var r=e.field.isKeyField()?A.comparator(t.key,n.key):function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?G(r,i):p()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return p()}}var We=function(){function e(e){this.timestamp=e}return e.fromTimestamp=function(t){return new e(t)},e.min=function(){return new e(new V(0,0))},e.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},e.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},e.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},e.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},e.prototype.toTimestamp=function(){return this.timestamp},e}(),Ke=function(){function e(e){this.fields=e,e.sort(P.comparator)}return e.prototype.covers=function(e){for(var t=0,n=this.fields;t<n.length;t++)if(n[t].isPrefixOf(e))return!0;return!1},e.prototype.isEqual=function(e){return _(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))},e}(),Ye=function(){function e(e){this.proto=e}return e.empty=function(){return new e({mapValue:{}})},e.prototype.field=function(e){if(e.isEmpty())return this.proto;for(var t=this.proto,n=0;n<e.length-1;++n){if(!t.mapValue.fields)return null;if(!ne(t=t.mapValue.fields[e.get(n)]))return null}return(t=(t.mapValue.fields||{})[e.lastSegment()])||null},e.prototype.isEqual=function(e){return K(this.proto,e.proto)},e}(),Ge=function(){function e(e){void 0===e&&(e=Ye.empty()),this.I=e,this.A=new Map}return e.prototype.set=function(e,t){return this.R(e,t),this},e.prototype.delete=function(e){return this.R(e,null),this},e.prototype.R=function(e,t){for(var n=this.A,r=0;r<e.length-1;++r){var i=e.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===W(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(e.lastSegment(),t)},e.prototype.v=function(){var e=this.P(P.emptyPath(),this.A);return null!=e?new Ye(e):this.I},e.prototype.P=function(e,t){var n=this,r=!1,i=this.I.field(e),o=ne(i)?Object.assign({},i.mapValue.fields):{};return t.forEach((function(t,i){if(t instanceof Map){var a=n.P(e.child(i),t);null!=a&&(o[i]=a,r=!0)}else null!==t?(o[i]=t,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},e}();function ze(e){var t=[];return E(e.fields||{},(function(e,n){var r=new P([e]);if(ne(n)){var i=ze(n.mapValue).fields;if(0===i.length)t.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];t.push(r.child(s))}}else t.push(r)})),new Ke(t)}function Qe(e,t){if(e.V){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:S(t)?"-0":t}}function Xe(e){return{integerValue:""+e}}function Je(e,t){return k(t)?Xe(t):Qe(e,t)}var $e=function(){this._=void 0};function Ze(e,t,n){return e instanceof nt?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof rt?it(e,t):e instanceof ot?at(e,t):function(e,t){var n=tt(e,t),r=ut(n)+ut(e.S);return $(n)&&$(e.S)?Xe(r):Qe(e.D,r)}(e,t)}function et(e,t,n){return e instanceof rt?it(e,t):e instanceof ot?at(e,t):n}function tt(e,t){return e instanceof st?$(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var nt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t}($e),rt=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return Object(a.__extends)(t,e),t}($e);function it(e,t){for(var n=ct(t),r=function(e){n.some((function(t){return K(t,e)}))||n.push(e)},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ot=function(e){function t(t){var n=this;return(n=e.call(this)||this).elements=t,n}return Object(a.__extends)(t,e),t}($e);function at(e,t){for(var n=ct(t),r=function(e){n=n.filter((function(t){return!K(t,e)}))},i=0,o=e.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var st=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).D=t,r.S=n,r}return Object(a.__extends)(t,e),t}($e);function ut(e){return F(e.integerValue||e.doubleValue)}function ct(e){return Z(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var lt=function(e,t){this.field=e,this.transform=t},ht=function(e,t){this.version=e,this.transformResults=t},ft=function(){function e(e,t){this.updateTime=e,this.exists=t}return e.none=function(){return new e},e.exists=function(t){return new e(void 0,t)},e.updateTime=function(t){return new e(t)},Object.defineProperty(e.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)},e}();function dt(e,t){return void 0!==e.updateTime?t instanceof ie&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t instanceof ie}var pt=function(){};function vt(e,t,n){return e instanceof _t?function(e,t,n){var r=e.value,i=Et(e.fieldTransforms,t,n.transformResults);return r=It(e.fieldTransforms,r,i),new ie(e.key,n.version,r,{hasCommittedMutations:!0})}(e,t,n):e instanceof wt?function(e,t,n){if(!dt(e.precondition,t))return new ae(e.key,n.version);var r=Ot(e,t,Et(e.fieldTransforms,t,n.transformResults));return new ie(e.key,n.version,r,{hasCommittedMutations:!0})}(e,t,n):function(e,t,n){return new oe(e.key,n.version,{hasCommittedMutations:!0})}(e,0,n)}function mt(e,t,n){return e instanceof _t?function(e,t,n){if(!dt(e.precondition,t))return t;var r=e.value,i=Tt(e.fieldTransforms,n,t);r=It(e.fieldTransforms,r,i);var o=bt(t);return new ie(e.key,o,r,{hasLocalMutations:!0})}(e,t,n):e instanceof wt?function(e,t,n){if(!dt(e.precondition,t))return t;var r=bt(t),i=Ot(e,t,Tt(e.fieldTransforms,n,t));return new ie(e.key,r,i,{hasLocalMutations:!0})}(e,t,n):function(e,t){return dt(e.precondition,t)?new oe(e.key,We.min()):t}(e,t)}function gt(e,t){return function(e,t){for(var n=null,r=0,i=e;r<i.length;r++){var o=i[r],a=t instanceof ie?t.field(o.field):void 0,s=tt(o.transform,a||null);null!=s&&(n=null==n?(new Ge).set(o.field,s):n.set(o.field,s))}return n?n.v():null}(e.fieldTransforms,t)}function yt(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&_(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof rt&&t instanceof rt||e instanceof ot&&t instanceof ot?_(e.elements,t.elements,K):e instanceof st&&t instanceof st?K(e.S,t.S):e instanceof nt&&t instanceof nt}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function bt(e){return e instanceof ie?e.version:We.min()}var _t=function(e){function t(t,n,r,i){void 0===i&&(i=[]);var o=this;return(o=e.call(this)||this).key=t,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(a.__extends)(t,e),t}(pt),wt=function(e){function t(t,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=e.call(this)||this).key=t,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(a.__extends)(t,e),t}(pt);function Ot(e,t,n){var r;return r=function(e,t){var n=new Ge(t);return e.fieldMask.fields.forEach((function(t){if(!t.isEmpty()){var r=e.data.field(t);null!==r?n.set(t,r):n.delete(t)}})),n.v()}(e,r=t instanceof ie?t.data():Ye.empty()),It(e.fieldTransforms,r,n)}function Et(e,t,n){var r=[];v(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,s=null;t instanceof ie&&(s=t.field(o.field)),r.push(et(a,s,n[i]))}return r}function Tt(e,t,n){for(var r=[],i=0,o=e;i<o.length;i++){var a=o[i],s=a.transform,u=null;n instanceof ie&&(u=n.field(a.field)),r.push(Ze(s,u,t))}return r}function It(e,t,n){for(var r=new Ge(t),i=0;i<e.length;i++){var o=e[i];r.set(o.field,n[i])}return r.v()}var St,kt,Ct=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(a.__extends)(t,e),t}(pt),Dt=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).key=t,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(a.__extends)(t,e),t}(pt),jt=function(e){this.count=e};function Nt(e){switch(e){case C.OK:return p();case C.CANCELLED:case C.UNKNOWN:case C.DEADLINE_EXCEEDED:case C.RESOURCE_EXHAUSTED:case C.INTERNAL:case C.UNAVAILABLE:case C.UNAUTHENTICATED:return!1;case C.INVALID_ARGUMENT:case C.NOT_FOUND:case C.ALREADY_EXISTS:case C.PERMISSION_DENIED:case C.FAILED_PRECONDITION:case C.ABORTED:case C.OUT_OF_RANGE:case C.UNIMPLEMENTED:case C.DATA_LOSS:return!0;default:return p()}}function xt(e){if(void 0===e)return h("GRPC error has no .code"),C.UNKNOWN;switch(e){case St.OK:return C.OK;case St.CANCELLED:return C.CANCELLED;case St.UNKNOWN:return C.UNKNOWN;case St.DEADLINE_EXCEEDED:return C.DEADLINE_EXCEEDED;case St.RESOURCE_EXHAUSTED:return C.RESOURCE_EXHAUSTED;case St.INTERNAL:return C.INTERNAL;case St.UNAVAILABLE:return C.UNAVAILABLE;case St.UNAUTHENTICATED:return C.UNAUTHENTICATED;case St.INVALID_ARGUMENT:return C.INVALID_ARGUMENT;case St.NOT_FOUND:return C.NOT_FOUND;case St.ALREADY_EXISTS:return C.ALREADY_EXISTS;case St.PERMISSION_DENIED:return C.PERMISSION_DENIED;case St.FAILED_PRECONDITION:return C.FAILED_PRECONDITION;case St.ABORTED:return C.ABORTED;case St.OUT_OF_RANGE:return C.OUT_OF_RANGE;case St.UNIMPLEMENTED:return C.UNIMPLEMENTED;case St.DATA_LOSS:return C.DATA_LOSS;default:return p()}}(kt=St||(St={}))[kt.OK=0]="OK",kt[kt.CANCELLED=1]="CANCELLED",kt[kt.UNKNOWN=2]="UNKNOWN",kt[kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kt[kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kt[kt.NOT_FOUND=5]="NOT_FOUND",kt[kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",kt[kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",kt[kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",kt[kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kt[kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kt[kt.ABORTED=10]="ABORTED",kt[kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",kt[kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",kt[kt.INTERNAL=13]="INTERNAL",kt[kt.UNAVAILABLE=14]="UNAVAILABLE",kt[kt.DATA_LOSS=15]="DATA_LOSS";var Pt=function(){function e(e,t){this.comparator=e,this.root=t||Rt.EMPTY}return e.prototype.insert=function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Rt.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Rt.BLACK,null,null))},e.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null},e.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1},e.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(e.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),e.prototype.minKey=function(){return this.root.minKey()},e.prototype.maxKey=function(){return this.root.maxKey()},e.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},e.prototype.forEach=function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))},e.prototype.toString=function(){var e=[];return this.inorderTraversal((function(t,n){return e.push(t+":"+n),!1})),"{"+e.join(", ")+"}"},e.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},e.prototype.getIterator=function(){return new At(this.root,null,this.comparator,!1)},e.prototype.getIteratorFrom=function(e){return new At(this.root,e,this.comparator,!1)},e.prototype.getReverseIterator=function(){return new At(this.root,null,this.comparator,!0)},e.prototype.getReverseIteratorFrom=function(e){return new At(this.root,e,this.comparator,!0)},e}(),At=function(){function e(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}return e.prototype.getNext=function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},e.prototype.hasNext=function(){return this.nodeStack.length>0},e.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},e}(),Rt=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},e.prototype.minKey=function(){return this.min().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},e.prototype.removeMin=function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()},e.prototype.remove=function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()},e.prototype.isRed=function(){return this.color},e.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},e.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},e.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},e.prototype.rotateLeft=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},e.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw p();if(this.right.isRed())throw p();var e=this.left.check();if(e!==this.right.check())throw p();return e+(this.isRed()?0:1)},e}();Rt.EMPTY=null,Rt.RED=!0,Rt.BLACK=!1,Rt.EMPTY=new(function(){function e(){this.size=0}return Object.defineProperty(e.prototype,"key",{get:function(){throw p()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){throw p()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){throw p()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"left",{get:function(){throw p()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){throw p()},enumerable:!1,configurable:!0}),e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new Rt(e,t)},e.prototype.remove=function(e,t){return this},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.isRed=function(){return!1},e.prototype.checkMaxDepth=function(){return!0},e.prototype.check=function(){return 0},e}());var Mt=function(){function e(e){this.comparator=e,this.data=new Pt(this.comparator)}return e.prototype.has=function(e){return null!==this.data.get(e)},e.prototype.first=function(){return this.data.minKey()},e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(e.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),e.prototype.indexOf=function(e){return this.data.indexOf(e)},e.prototype.forEach=function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}},e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},e.prototype.getIterator=function(){return new Lt(this.data.getIterator())},e.prototype.getIteratorFrom=function(e){return new Lt(this.data.getIteratorFrom(e))},e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},e.prototype.isEmpty=function(){return this.data.isEmpty()},e.prototype.unionWith=function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},e.prototype.toArray=function(){var e=[];return this.forEach((function(t){e.push(t)})),e},e.prototype.toString=function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"},e.prototype.copy=function(t){var n=new e(this.comparator);return n.data=t,n},e}(),Lt=function(){function e(e){this.iter=e}return e.prototype.getNext=function(){return this.iter.getNext().key},e.prototype.hasNext=function(){return this.iter.hasNext()},e}(),Ft=new Pt(A.comparator);function Ut(){return Ft}function Vt(){return Ut()}var qt=new Pt(A.comparator);function Bt(){return qt}var Ht=new Pt(A.comparator);function Wt(){return Ht}var Kt=new Mt(A.comparator);function Yt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=Kt,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Gt=new Mt(b);function zt(){return Gt}var Qt=function(){function e(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return e.createSynthesizedRemoteEventForCurrentChange=function(t,n){var r=new Map;return r.set(t,Xt.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(We.min(),r,zt(),Ut(),Yt())},e}(),Xt=function(){function e(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return e.createSynthesizedTargetChangeForCurrentChange=function(t,n){return new e(R.EMPTY_BYTE_STRING,n,Yt(),Yt(),Yt())},e}(),Jt=function(e,t,n,r){this.C=e,this.removedTargetIds=t,this.key=n,this.N=r},$t=function(e,t){this.targetId=e,this.$=t},Zt=function(e,t,n,r){void 0===n&&(n=R.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},en=function(){function e(){this.F=0,this.O=rn(),this.k=R.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(e.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),e.prototype.U=function(e){e.approximateByteSize()>0&&(this.L=!0,this.k=e)},e.prototype.K=function(){var e=Yt(),t=Yt(),n=Yt();return this.O.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:p()}})),new Xt(this.k,this.M,e,t,n)},e.prototype.W=function(){this.L=!1,this.O=rn()},e.prototype.j=function(e,t){this.L=!0,this.O=this.O.insert(e,t)},e.prototype.G=function(e){this.L=!0,this.O=this.O.remove(e)},e.prototype.H=function(){this.F+=1},e.prototype.J=function(){this.F-=1},e.prototype.Y=function(){this.L=!0,this.M=!0},e}(),tn=function(){function e(e){this.X=e,this.Z=new Map,this.tt=Ut(),this.et=nn(),this.nt=new Mt(b)}return e.prototype.st=function(e){for(var t=0,n=e.C;t<n.length;t++){var r=n[t];e.N instanceof ie?this.it(r,e.N):e.N instanceof oe&&this.rt(r,e.key,e.N)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.rt(r,e.key,e.N)},e.prototype.ot=function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.ct(n);switch(e.state){case 0:t.at(n)&&r.U(e.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(e.resumeToken);break;case 2:r.J(),r.B||t.removeTarget(n);break;case 3:t.at(n)&&(r.Y(),r.U(e.resumeToken));break;case 4:t.at(n)&&(t.ut(n),r.U(e.resumeToken));break;default:p()}}))},e.prototype.forEachTarget=function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Z.forEach((function(e,r){n.at(r)&&t(r)}))},e.prototype.ht=function(e){var t=e.targetId,n=e.$.count,r=this.lt(t);if(r){var i=r.target;if(he(i))if(0===n){var o=new A(i.path);this.rt(t,o,new oe(o,We.min()))}else v(1===n);else this.ft(t)!==n&&(this.ut(t),this.nt=this.nt.add(t))}},e.prototype.dt=function(e){var t=this,n=new Map;this.Z.forEach((function(r,i){var o=t.lt(i);if(o){if(r.current&&he(o.target)){var a=new A(o.target.path);null!==t.tt.get(a)||t.wt(i,a)||t.rt(i,a,new oe(a,e))}r.q&&(n.set(i,r.K()),r.W())}}));var r=Yt();this.et.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.lt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))}));var i=new Qt(e,n,this.nt,this.tt,r);return this.tt=Ut(),this.et=nn(),this.nt=new Mt(b),i},e.prototype.it=function(e,t){if(this.at(e)){var n=this.wt(e,t.key)?2:0;this.ct(e).j(t.key,n),this.tt=this.tt.insert(t.key,t),this.et=this.et.insert(t.key,this._t(t.key).add(e))}},e.prototype.rt=function(e,t,n){if(this.at(e)){var r=this.ct(e);this.wt(e,t)?r.j(t,1):r.G(t),this.et=this.et.insert(t,this._t(t).delete(e)),n&&(this.tt=this.tt.insert(t,n))}},e.prototype.removeTarget=function(e){this.Z.delete(e)},e.prototype.ft=function(e){var t=this.ct(e).K();return this.X.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},e.prototype.H=function(e){this.ct(e).H()},e.prototype.ct=function(e){var t=this.Z.get(e);return t||(t=new en,this.Z.set(e,t)),t},e.prototype._t=function(e){var t=this.et.get(e);return t||(t=new Mt(b),this.et=this.et.insert(e,t)),t},e.prototype.at=function(e){var t=null!==this.lt(e);return t||l("WatchChangeAggregator","Detected inactive target",e),t},e.prototype.lt=function(e){var t=this.Z.get(e);return t&&t.B?null:this.X.yt(e)},e.prototype.ut=function(e){var t=this;this.Z.set(e,new en),this.X.getRemoteKeysForTarget(e).forEach((function(n){t.rt(e,n,null)}))},e.prototype.wt=function(e,t){return this.X.getRemoteKeysForTarget(e).has(t)},e}();function nn(){return new Pt(A.comparator)}function rn(){return new Pt(A.comparator)}var on={asc:"ASCENDING",desc:"DESCENDING"},an={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},sn=function(e,t){this.databaseId=e,this.V=t};function un(e,t){return e.V?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}}function cn(e,t){return e.V?t.toBase64():t.toUint8Array()}function ln(e,t){return un(e,t.toTimestamp())}function hn(e){return v(!!e),We.fromTimestamp(function(e){var t=L(e);return new V(t.seconds,t.nanos)}(e))}function fn(e,t){return function(e){return new N(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function dn(e){var t=N.fromString(e);return v(Ln(t)),t}function pn(e,t){return fn(e.databaseId,t.path)}function vn(e,t){var n=dn(t);if(n.get(1)!==e.databaseId.projectId)throw new D(C.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new D(C.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new A(bn(n))}function mn(e,t){return fn(e.databaseId,t)}function gn(e){var t=dn(e);return 4===t.length?N.emptyPath():bn(t)}function yn(e){return new N(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bn(e){return v(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function _n(e,t,n){return{name:pn(e,t),fields:n.proto.mapValue.fields}}function wn(e,t,n){var r=vn(e,t.name),i=hn(t.updateTime),o=new Ye({mapValue:{fields:t.fields}});return new ie(r,i,o,{hasCommittedMutations:!!n})}function On(e,t){var n;if(t instanceof _t)n={update:_n(e,t.key,t.value)};else if(t instanceof Ct)n={delete:pn(e,t.key)};else if(t instanceof wt)n={update:_n(e,t.key,t.data),updateMask:Mn(t.fieldMask)};else{if(!(t instanceof Dt))return p();n={verify:pn(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof nt)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof rt)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ot)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof st)return{fieldPath:t.field.canonicalString(),increment:n.S};throw p()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ln(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:p()}(e,t.precondition)),n}function En(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?ft.updateTime(hn(e.updateTime)):void 0!==e.exists?ft.exists(e.exists):ft.none()}(t.currentDocument):ft.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)v("REQUEST_TIME"===t.setToServerValue),n=new nt;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new rt(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new ot(i)}else"increment"in t?n=new st(e,t.increment):p();var o=P.fromServerFormat(t.fieldPath);return new lt(o,n)}(e,t)})):[];if(t.update){t.update.name;var i=vn(e,t.update.name),o=new Ye({mapValue:{fields:t.update.fields}});if(t.updateMask){var a=function(e){var t=e.fieldPaths||[];return new Ke(t.map((function(e){return P.fromServerFormat(e)})))}(t.updateMask);return new wt(i,o,a,n,r)}return new _t(i,o,n,r)}if(t.delete){var s=vn(e,t.delete);return new Ct(s,n)}if(t.verify){var u=vn(e,t.verify);return new Dt(u,n)}return p()}function Tn(e,t){return{documents:[mn(e,t.path)]}}function In(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=mn(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=mn(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map((function(e){return function(e){if("=="===e.op){if(te(e.value))return{unaryFilter:{field:xn(e.field),op:"IS_NAN"}};if(ee(e.value))return{unaryFilter:{field:xn(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(te(e.value))return{unaryFilter:{field:xn(e.field),op:"IS_NOT_NAN"}};if(ee(e.value))return{unaryFilter:{field:xn(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xn(e.field),op:Nn(e.op),value:e.value}}}(e)}));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:xn(e.field),direction:jn(e.dir)}}(e)}))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(e,t){return e.V||I(t)?t:{value:t}}(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=Cn(t.startAt)),t.endAt&&(n.structuredQuery.endAt=Cn(t.endAt)),n}function Sn(e){var t=gn(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){v(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=kn(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(e){return function(e){return new Ee(Pn(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var u=null;n.limit&&(u=function(e){var t;return I(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=Dn(n.startAt));var l=null;return n.endAt&&(l=Dn(n.endAt)),Ce(t,i,s,a,u,"F",c,l)}function kn(e){return e?void 0!==e.unaryFilter?[Rn(e)]:void 0!==e.fieldFilter?[An(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return kn(e)})).reduce((function(e,t){return e.concat(t)})):p():[]}function Cn(e){return{before:e.before,values:e.position}}function Dn(e){var t=!!e.before,n=e.values||[];return new we(n,t)}function jn(e){return on[e]}function Nn(e){return an[e]}function xn(e){return{fieldPath:e.canonicalString()}}function Pn(e){return P.fromServerFormat(e.fieldPath)}function An(e){return fe.create(Pn(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return p()}}(e.fieldFilter.op),e.fieldFilter.value)}function Rn(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Pn(e.unaryFilter.field);return fe.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Pn(e.unaryFilter.field);return fe.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Pn(e.unaryFilter.field);return fe.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Pn(e.unaryFilter.field);return fe.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return p()}}function Mn(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Ln(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Fn(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Vn(t)),t=Un(e.get(n),t);return Vn(t)}function Un(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Vn(e){return e+"\x01\x01"}function qn(e){var t=e.length;if(v(t>=2),2===t)return v("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),N.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&p(),e.charAt(a+1)){case"\x01":var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:p()}o=a+2}return new N(r)}var Bn=function(e,t){this.seconds=e,this.nanoseconds=t},Hn=function(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n};Hn.store="owner",Hn.key="owner";var Wn=function(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n};Wn.store="mutationQueues",Wn.keyPath="userId";var Kn=function(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Kn.store="mutations",Kn.keyPath="batchId",Kn.userMutationsIndex="userMutationsIndex",Kn.userMutationsKeyPath=["userId","batchId"];var Yn=function(){function e(){}return e.prefixForUser=function(e){return[e]},e.prefixForPath=function(e,t){return[e,Fn(t)]},e.key=function(e,t,n){return[e,Fn(t),n]},e}();Yn.store="documentMutations",Yn.PLACEHOLDER=new Yn;var Gn=function(e,t){this.path=e,this.readTime=t},zn=function(e,t){this.path=e,this.version=t},Qn=function(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Qn.store="remoteDocuments",Qn.readTimeIndex="readTimeIndex",Qn.readTimeIndexPath="readTime",Qn.collectionReadTimeIndex="collectionReadTimeIndex",Qn.collectionReadTimeIndexPath=["parentPath","readTime"];var Xn=function(e){this.byteSize=e};Xn.store="remoteDocumentGlobal",Xn.key="remoteDocumentGlobalKey";var Jn=function(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Jn.store="targets",Jn.keyPath="targetId",Jn.queryTargetsIndexName="queryTargetsIndex",Jn.queryTargetsKeyPath=["canonicalId","targetId"];var $n=function(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n};$n.store="targetDocuments",$n.keyPath=["targetId","path"],$n.documentTargetsIndex="documentTargetsIndex",$n.documentTargetsKeyPath=["path","targetId"];var Zn=function(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Zn.key="targetGlobalKey",Zn.store="targetGlobal";var er=function(e,t){this.collectionId=e,this.parent=t};er.store="collectionParents",er.keyPath=["collectionId","parent"];var tr=function(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r};tr.store="clientMetadata",tr.keyPath="clientId";var nr=function(e,t,n){this.bundleId=e,this.createTime=t,this.version=n};nr.store="bundles",nr.keyPath="bundleId";var rr=function(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n};rr.store="namedQueries",rr.keyPath="name";var ir=Object(a.__spreadArray)(Object(a.__spreadArray)([],Object(a.__spreadArray)(Object(a.__spreadArray)([],Object(a.__spreadArray)(Object(a.__spreadArray)([],Object(a.__spreadArray)(Object(a.__spreadArray)([],[Wn.store,Kn.store,Yn.store,Qn.store,Jn.store,Hn.store,Zn.store,$n.store]),[tr.store])),[Xn.store])),[er.store])),[nr.store,rr.store]),or="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ar=function(){function e(){this.onCommittedListeners=[]}return e.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},e.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(e){return e()}))},e}(),sr=function(){var e=this;this.promise=new Promise((function(t,n){e.resolve=t,e.reject=n}))},ur=function(){function e(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)}),(function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)}))}return e.prototype.catch=function(e){return this.next(void 0,e)},e.prototype.next=function(t,n){var r=this;return this.callbackAttached&&p(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))},e.prototype.toPromise=function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))},e.prototype.wrapUserFunction=function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}},e.prototype.wrapSuccess=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)},e.prototype.wrapFailure=function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)},e.resolve=function(t){return new e((function(e,n){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.waitFor=function(t){return new e((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(e){return n(e)}))})),o=!0,i===r&&e()}))},e.or=function(t){for(var n=e.resolve(!1),r=function(t){n=n.next((function(n){return n?e.resolve(n):t()}))},i=0,o=t;i<o.length;i++)r(o[i]);return n},e.forEach=function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)},e}(),cr=function(){function e(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.gt=new sr,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){t.error?n.gt.reject(new fr(e,t.error)):n.gt.resolve()},this.transaction.onerror=function(t){var r=gr(t.target.error);n.gt.reject(new fr(e,r))}}return e.open=function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new fr(n,t)}},Object.defineProperty(e.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),e.prototype.abort=function(e){e&&this.gt.reject(e),this.aborted||(l("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},e.prototype.store=function(e){var t=this.transaction.objectStore(e);return new pr(t)},e}(),lr=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(i.n)())&&h("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(e){return l("SimpleDb","Removing database:",e),vr(window.indexedDB.deleteDatabase(e)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(i.n)(),n=t.It(e),r=0<n&&n<10,o=t.bt(e),a=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)},t.Rt=function(){var t;return"undefined"!=typeof e&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"/my-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}))||void 0===t?void 0:t.vt)},t.Pt=function(e,t){return e.store(t)},t.It=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(l("SimpleDb","Opening database:",this.name),t=this,[4,new Promise((function(t,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(e){var n=e.target.result;t(n)},i.onblocked=function(){r(new fr(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;"VersionError"===n.name?r(new D(C.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new fr(e,n))},i.onupgradeneeded=function(e){l("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.Tt.St(t,i.transaction,e.oldVersion,n.version).next((function(){l("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:t.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(e){return n.Dt(e)}),this.db)]}}))}))},t.prototype.Ct=function(e){this.Dt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},t.prototype.runTransaction=function(e,t,n,r){return Object(a.__awaiter)(this,void 0,void 0,(function(){var i,o,s,u,c;return Object(a.__generator)(this,(function(h){switch(h.label){case 0:i="readonly"===t,o=0,s=function(){var t,s,c,h,f;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:++o,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,u.Vt(e)];case 2:return u.db=a.sent(),t=cr.open(u.db,e,i?"readonly":"readwrite",n),s=r(t).catch((function(e){return t.abort(e),ur.reject(e)})).toPromise(),c={},s.catch((function(){})),[4,t.Et];case 3:return[2,(c.value=(a.sent(),s),c)];case 4:return h=a.sent(),f="FirebaseError"!==h.name&&o<3,l("SimpleDb","Transaction failed with error:",h.message,"Retrying:",f),u.close(),f?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),hr=function(){function e(e){this.xt=e,this.Nt=!1,this.$t=null}return Object.defineProperty(e.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursor",{set:function(e){this.xt=e},enumerable:!1,configurable:!0}),e.prototype.done=function(){this.Nt=!0},e.prototype.Ot=function(e){this.$t=e},e.prototype.delete=function(){return vr(this.xt.delete())},e}(),fr=function(e){function t(t,n){var r=this;return(r=e.call(this,C.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(a.__extends)(t,e),t}(D);function dr(e){return"IndexedDbTransactionError"===e.name}var pr=function(){function e(e){this.store=e}return e.prototype.put=function(e,t){var n;return void 0!==t?(l("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(l("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),vr(n)},e.prototype.add=function(e){return l("SimpleDb","ADD",this.store.name,e,e),vr(this.store.add(e))},e.prototype.get=function(e){var t=this;return vr(this.store.get(e)).next((function(n){return void 0===n&&(n=null),l("SimpleDb","GET",t.store.name,e,n),n}))},e.prototype.delete=function(e){return l("SimpleDb","DELETE",this.store.name,e),vr(this.store.delete(e))},e.prototype.count=function(){return l("SimpleDb","COUNT",this.store.name),vr(this.store.count())},e.prototype.kt=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Mt(n,(function(e,t){r.push(t)})).next((function(){return r}))},e.prototype.Lt=function(e,t){l("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,(function(e,t,n){return n.delete()}))},e.prototype.qt=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Mt(r,t)},e.prototype.Ut=function(e){var t=this.cursor({});return new ur((function(n,r){t.onerror=function(e){var t=gr(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))},e.prototype.Mt=function(e,t){var n=[];return new ur((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new hr(i),a=t(i.primaryKey,i.value,o);if(a instanceof ur){var s=a.catch((function(e){return o.done(),ur.reject(e)}));n.push(s)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}})).next((function(){return ur.waitFor(n)}))},e.prototype.options=function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}},e.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Bt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},e}();function vr(e){return new ur((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=gr(e.target.error);n(t)}}))}var mr=!1;function gr(e){var t=lr.It(Object(i.n)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new D("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return mr||(mr=!0,setTimeout((function(){throw r}),0)),r}}return e}var yr=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Qt=t,r.currentSequenceNumber=n,r}return Object(a.__extends)(t,e),t}(ar);function br(e,t){var n=m(e);return lr.Pt(n.Qt,t)}var _r=function(){function e(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}return e.prototype.applyToRemoteDocument=function(e,t,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(e)&&(t=vt(o,t,r[i]))}return t},e.prototype.applyToLocalView=function(e,t){for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(e)&&(t=mt(a,t,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var a;(a=o[i]).key.isEqual(e)&&(t=mt(a,t,this.localWriteTime))}return t},e.prototype.applyToLocalDocumentSet=function(e){var t=this,n=e;return this.mutations.forEach((function(r){var i=t.applyToLocalView(r.key,e.get(r.key));i&&(n=n.insert(r.key,i))})),n},e.prototype.keys=function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Yt())},e.prototype.isEqual=function(e){return this.batchId===e.batchId&&_(this.mutations,e.mutations,(function(e,t){return yt(e,t)}))&&_(this.baseMutations,e.baseMutations,(function(e,t){return yt(e,t)}))},e}(),wr=function(){function e(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}return e.from=function(t,n,r){v(t.mutations.length===r.length);for(var i=Wt(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)},e}(),Or=function(){function e(e,t,n,r,i,o,a){void 0===i&&(i=We.min()),void 0===o&&(o=We.min()),void 0===a&&(a=R.EMPTY_BYTE_STRING),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return e.prototype.withSequenceNumber=function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},e.prototype.withResumeToken=function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)},e.prototype.withLastLimboFreeSnapshotVersion=function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},e}(),Er=function(e){this.Kt=e};function Tr(e,t){if(t.document)return wn(e.Kt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=A.fromSegments(t.noDocument.path),r=Dr(t.noDocument.readTime);return new oe(n,r,{hasCommittedMutations:!!t.hasCommittedMutations})}if(t.unknownDocument){var i=A.fromSegments(t.unknownDocument.path);return r=Dr(t.unknownDocument.version),new ae(i,r)}return p()}function Ir(e,t,n){var r=Sr(n),i=t.key.path.popLast().toArray();if(t instanceof ie){var o=function(e,t){return{name:pn(e,t.key),fields:t.toProto().mapValue.fields,updateTime:un(e,t.version.toTimestamp())}}(e.Kt,t),a=t.hasCommittedMutations;return new Qn(null,null,o,a,r,i)}if(t instanceof oe){var s=t.key.path.toArray(),u=Cr(t.version);return a=t.hasCommittedMutations,new Qn(null,new Gn(s,u),null,a,r,i)}if(t instanceof ae){var c=t.key.path.toArray(),l=Cr(t.version);return new Qn(new zn(c,l),null,null,!0,r,i)}return p()}function Sr(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function kr(e){var t=new V(e[0],e[1]);return We.fromTimestamp(t)}function Cr(e){var t=e.toTimestamp();return new Bn(t.seconds,t.nanoseconds)}function Dr(e){var t=new V(e.seconds,e.nanoseconds);return We.fromTimestamp(t)}function jr(e,t){for(var n=(t.baseMutations||[]).map((function(t){return En(e.Kt,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var o=t.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var a=t.mutations.map((function(t){return En(e.Kt,t)})),s=V.fromMillis(t.localWriteTimeMs);return new _r(t.batchId,s,n,a)}function Nr(e){var t,n,r=Dr(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Dr(e.lastLimboFreeSnapshotVersion):We.min();return void 0!==e.query.documents?(v(1===(n=e.query).documents.length),t=Me(De(gn(n.documents[0])))):t=function(e){return Me(Sn(e))}(e.query),new Or(t,e.targetId,0,e.lastListenSequenceNumber,r,i,R.fromBase64String(e.resumeToken))}function xr(e,t){var n,r=Cr(t.snapshotVersion),i=Cr(t.lastLimboFreeSnapshotVersion);n=he(t.target)?Tn(e.Kt,t.target):In(e.Kt,t.target);var o=t.resumeToken.toBase64();return new Jn(t.targetId,ce(t.target),r,o,t.sequenceNumber,i,n)}function Pr(e){var t=Sn({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Le(t,t.limit,"L"):t}var Ar=function(){function e(){}return e.prototype.getBundleMetadata=function(e,t){return Rr(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Dr(t.createTime),version:t.version};var t}))},e.prototype.saveBundleMetadata=function(e,t){return Rr(e).put({bundleId:(n=t).id,createTime:Cr(hn(n.createTime)),version:n.version});var n},e.prototype.getNamedQuery=function(e,t){return Mr(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Pr(t.bundledQuery),readTime:Dr(t.readTime)};var t}))},e.prototype.saveNamedQuery=function(e,t){return Mr(e).put(function(e){return{name:e.name,readTime:Cr(hn(e.readTime)),bundledQuery:e.bundledQuery}}(t))},e}();function Rr(e){return br(e,nr.store)}function Mr(e){return br(e,rr.store)}var Lr=function(){function e(){this.Wt=new Fr}return e.prototype.addToCollectionParentIndex=function(e,t){return this.Wt.add(t),ur.resolve()},e.prototype.getCollectionParents=function(e,t){return ur.resolve(this.Wt.getEntries(t))},e}(),Fr=function(){function e(){this.index={}}return e.prototype.add=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Mt(N.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},e.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},e.prototype.getEntries=function(e){return(this.index[e]||new Mt(N.comparator)).toArray()},e}(),Ur=function(){function e(){this.jt=new Fr}return e.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(!this.jt.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.jt.add(t)}));var o={collectionId:r,parent:Fn(i)};return Vr(e).put(o)}return ur.resolve()},e.prototype.getCollectionParents=function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[w(t),""],!1,!0);return Vr(e).kt(r).next((function(e){for(var r=0,i=e;r<i.length;r++){var o=i[r];if(o.collectionId!==t)break;n.push(qn(o.parent))}return n}))},e}();function Vr(e){return br(e,er.store)}var qr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Br=function(){function e(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}return e.withCacheSize=function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},e}();function Hr(e,t,n){var r=e.store(Kn.store),i=e.store(Yn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.qt({range:a},(function(e,t,n){return s++,n.delete()}));o.push(u.next((function(){v(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=Yn.key(t,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return ur.waitFor(o).next((function(){return c}))}function Wr(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw p();t=e.noDocument}return JSON.stringify(t).length}Br.DEFAULT_COLLECTION_PERCENTILE=10,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Br.DEFAULT=new Br(41943040,Br.DEFAULT_COLLECTION_PERCENTILE,Br.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Br.DISABLED=new Br(-1,0,0);var Kr=function(){function e(e,t,n,r){this.userId=e,this.D=t,this.Gt=n,this.referenceDelegate=r,this.zt={}}return e.Ht=function(t,n,r,i){return v(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)},e.prototype.checkEmpty=function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Gr(e).qt({index:Kn.userMutationsIndex,range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))},e.prototype.addMutationBatch=function(e,t,n,r){var i=this,o=zr(e),a=Gr(e);return a.add({}).next((function(s){v("number"==typeof s);for(var u=new _r(s,t,n,r),c=function(e,t,n){var r=n.baseMutations.map((function(t){return On(e.Kt,t)})),i=n.mutations.map((function(t){return On(e.Kt,t)}));return new Kn(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new Mt((function(e,t){return b(e.canonicalString(),t.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=Yn.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(m,Yn.PLACEHOLDER))}return h.forEach((function(t){l.push(i.Gt.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.zt[s]=u.keys()})),ur.waitFor(l).next((function(){return u}))}))},e.prototype.lookupMutationBatch=function(e,t){var n=this;return Gr(e).get(t).next((function(e){return e?(v(e.userId===n.userId),jr(n.D,e)):null}))},e.prototype.Jt=function(e,t){var n=this;return this.zt[t]?ur.resolve(this.zt[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.zt[t]=r,r}return null}))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Gr(e).qt({index:Kn.userMutationsIndex,range:i},(function(e,t,i){t.userId===n.userId&&(v(t.batchId>=r),o=jr(n.D,t)),i.done()})).next((function(){return o}))},e.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Gr(e).qt({index:Kn.userMutationsIndex,range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))},e.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Gr(e).kt(Kn.userMutationsIndex,n).next((function(e){return e.map((function(e){return jr(t.D,e)}))}))},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=Yn.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return zr(e).qt({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=qn(u);if(s===n.userId&&t.path.isEqual(l))return Gr(e).get(c).next((function(e){if(!e)throw p();v(e.userId===n.userId),o.push(jr(n.D,e))}));a.done()})).next((function(){return o}))},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Mt(b),i=[];return t.forEach((function(t){var o=Yn.prefixForPath(n.userId,t.path),a=IDBKeyRange.lowerBound(o),s=zr(e).qt({range:a},(function(e,i,o){var a=e[0],s=e[1],u=e[2],c=qn(s);a===n.userId&&t.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),ur.waitFor(i).next((function(){return n.Yt(e,r)}))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=this,r=t.path,i=r.length+1,o=Yn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Mt(b);return zr(e).qt({range:a},(function(e,t,o){var a=e[0],u=e[1],c=e[2],l=qn(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Yt(e,s)}))},e.prototype.Yt=function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Gr(e).get(t).next((function(e){if(null===e)throw p();v(e.userId===n.userId),r.push(jr(n.D,e))})))})),ur.waitFor(i).next((function(){return r}))},e.prototype.removeMutationBatch=function(e,t){var n=this;return Hr(e.Qt,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.Xt(t.batchId)})),ur.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))},e.prototype.Xt=function(e){delete this.zt[e]},e.prototype.performConsistencyCheck=function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return ur.resolve();var r=IDBKeyRange.lowerBound(Yn.prefixForUser(t.userId)),i=[];return zr(e).qt({range:r},(function(e,n,r){if(e[0]===t.userId){var o=qn(e[1]);i.push(o)}else r.done()})).next((function(){v(0===i.length)}))}))},e.prototype.containsKey=function(e,t){return Yr(e,this.userId,t)},e.prototype.Zt=function(e){var t=this;return Qr(e).get(this.userId).next((function(e){return e||new Wn(t.userId,-1,"")}))},e}();function Yr(e,t,n){var r=Yn.prefixForPath(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return zr(e).qt({range:o,Bt:!0},(function(e,n,r){var o=e[0],s=e[1];e[2],o===t&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Gr(e){return br(e,Kn.store)}function zr(e){return br(e,Yn.store)}function Qr(e){return br(e,Wn.store)}var Xr=function(){function e(e){this.te=e}return e.prototype.next=function(){return this.te+=2,this.te},e.ee=function(){return new e(0)},e.ne=function(){return new e(-1)},e}(),Jr=function(){function e(e,t){this.referenceDelegate=e,this.D=t}return e.prototype.allocateTargetId=function(e){var t=this;return this.se(e).next((function(n){var r=new Xr(n.highestTargetId);return n.highestTargetId=r.next(),t.ie(e,n).next((function(){return n.highestTargetId}))}))},e.prototype.getLastRemoteSnapshotVersion=function(e){return this.se(e).next((function(e){return We.fromTimestamp(new V(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))},e.prototype.getHighestSequenceNumber=function(e){return this.se(e).next((function(e){return e.highestListenSequenceNumber}))},e.prototype.setTargetsMetadata=function(e,t,n){var r=this;return this.se(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ie(e,i)}))},e.prototype.addTargetData=function(e,t){var n=this;return this.re(e,t).next((function(){return n.se(e).next((function(r){return r.targetCount+=1,n.oe(t,r),n.ie(e,r)}))}))},e.prototype.updateTargetData=function(e,t){return this.re(e,t)},e.prototype.removeTargetData=function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return $r(e).delete(t.targetId)})).next((function(){return n.se(e)})).next((function(t){return v(t.targetCount>0),t.targetCount-=1,n.ie(e,t)}))},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return $r(e).qt((function(a,s){var u=Nr(s);u.sequenceNumber<=t&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(e,u)))})).next((function(){return ur.waitFor(o)})).next((function(){return i}))},e.prototype.forEachTarget=function(e,t){return $r(e).qt((function(e,n){var r=Nr(n);t(r)}))},e.prototype.se=function(e){return Zr(e).get(Zn.key).next((function(e){return v(null!==e),e}))},e.prototype.ie=function(e,t){return Zr(e).put(Zn.key,t)},e.prototype.re=function(e,t){return $r(e).put(xr(this.D,t))},e.prototype.oe=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},e.prototype.getTargetCount=function(e){return this.se(e).next((function(e){return e.targetCount}))},e.prototype.getTargetData=function(e,t){var n=ce(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return $r(e).qt({range:r,index:Jn.queryTargetsIndexName},(function(e,n,r){var o=Nr(n);le(t,o.target)&&(i=o,r.done())})).next((function(){return i}))},e.prototype.addMatchingKeys=function(e,t,n){var r=this,i=[],o=ei(e);return t.forEach((function(t){var a=Fn(t.path);i.push(o.put(new $n(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))})),ur.waitFor(i)},e.prototype.removeMatchingKeys=function(e,t,n){var r=this,i=ei(e);return ur.forEach(t,(function(t){var o=Fn(t.path);return ur.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])}))},e.prototype.removeMatchingKeysForTargetId=function(e,t){var n=ei(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ei(e),i=Yt();return r.qt({range:n,Bt:!0},(function(e,t,n){var r=qn(e[1]),o=new A(r);i=i.add(o)})).next((function(){return i}))},e.prototype.containsKey=function(e,t){var n=Fn(t.path),r=IDBKeyRange.bound([n],[w(n)],!1,!0),i=0;return ei(e).qt({index:$n.documentTargetsIndex,Bt:!0,range:r},(function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},e.prototype.yt=function(e,t){return $r(e).get(t).next((function(e){return e?Nr(e):null}))},e}();function $r(e){return br(e,Jn.store)}function Zr(e){return br(e,Zn.store)}function ei(e){return br(e,$n.store)}function ti(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){if(e.code!==C.FAILED_PRECONDITION||e.message!==or)throw e;return l("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function ni(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=b(n,i);return 0===a?b(r,o):a}var ri=function(){function e(e){this.ce=e,this.buffer=new Mt(ni),this.ae=0}return e.prototype.ue=function(){return++this.ae},e.prototype.he=function(e){var t=[e,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ni(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(e.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),e}(),ii=function(){function e(e,t){this.garbageCollector=e,this.asyncQueue=t,this.le=!1,this.fe=null}return e.prototype.start=function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(e)},e.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(e.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),e.prototype.de=function(e){var t=this,n=this.le?3e5:6e4;l("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(a.__awaiter)(t,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,e.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return dr(t=n.sent())?(l("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t),[3,6]):[3,4];case 4:return[4,ti(t)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(e)];case 8:return n.sent(),[2]}}))}))}))},e}(),oi=function(){function e(e,t){this.we=e,this.params=t}return e.prototype.calculateTargetCount=function(e,t){return this.we._e(e).next((function(e){return Math.floor(t/100*e)}))},e.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return ur.resolve(s.o);var r=new ri(t);return this.we.forEachTarget(e,(function(e){return r.he(e.sequenceNumber)})).next((function(){return n.we.me(e,(function(e){return r.he(e)}))})).next((function(){return r.maxValue}))},e.prototype.removeTargets=function(e,t,n){return this.we.removeTargets(e,t,n)},e.prototype.removeOrphanedDocuments=function(e,t){return this.we.removeOrphanedDocuments(e,t)},e.prototype.collect=function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(l("LruGarbageCollector","Garbage collection skipped; disabled"),ur.resolve(qr)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(l("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),qr):n.ye(e,t)}))},e.prototype.getCacheSize=function(e){return this.we.getCacheSize(e)},e.prototype.ye=function(e,t){var n,i,o,a,s,u,h,f=this,d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>f.params.maximumSequenceNumbersToCollect?(l("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+f.params.maximumSequenceNumbersToCollect+" from "+t),i=f.params.maximumSequenceNumbersToCollect):i=t,a=Date.now(),f.nthSequenceNumber(e,i)})).next((function(r){return n=r,s=Date.now(),f.removeTargets(e,n,t)})).next((function(t){return o=t,u=Date.now(),f.removeOrphanedDocuments(e,n)})).next((function(e){return h=Date.now(),c()<=r.a.DEBUG&&l("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-d)+"ms\n\tDetermined least recently used "+i+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(h-u)+"ms\nTotal Duration: "+(h-d)+"ms"),ur.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:e})}))},e}(),ai=function(){function e(e,t){this.db=e,this.garbageCollector=function(e,t){return new oi(e,t)}(this,t)}return e.prototype._e=function(e){var t=this.ge(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))},e.prototype.ge=function(e){var t=0;return this.me(e,(function(e){t++})).next((function(){return t}))},e.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},e.prototype.me=function(e,t){return this.pe(e,(function(e,n){return t(n)}))},e.prototype.addReference=function(e,t,n){return si(e,n)},e.prototype.removeReference=function(e,t,n){return si(e,n)},e.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},e.prototype.markPotentiallyOrphaned=function(e,t){return si(e,t)},e.prototype.Ee=function(e,t){return function(e,t){var n=!1;return Qr(e).Ut((function(r){return Yr(e,r,t).next((function(e){return e&&(n=!0),ur.resolve(!e)}))})).next((function(){return n}))}(e,t)},e.prototype.removeOrphanedDocuments=function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(e,(function(a,s){if(s<=t){var u=n.Ee(e,a).next((function(t){if(!t)return o++,r.getEntry(e,a).next((function(){return r.removeEntry(a),ei(e).delete([0,Fn(a.path)])}))}));i.push(u)}})).next((function(){return ur.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return o}))},e.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},e.prototype.updateLimboDocument=function(e,t){return si(e,t)},e.prototype.pe=function(e,t){var n,r=ei(e),i=s.o;return r.qt({index:$n.documentTargetsIndex},(function(e,r){var o=e[0],a=(e[1],r.path),u=r.sequenceNumber;0===o?(i!==s.o&&t(new A(qn(n)),i),i=u,n=a):i=s.o})).next((function(){i!==s.o&&t(new A(qn(n)),i)}))},e.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},e}();function si(e,t){return ei(e).put(function(e,t){return new $n(0,Fn(e.path),t)}(t,e.currentSequenceNumber))}var ui=function(){function e(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}return e.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,e))return s}},e.prototype.has=function(e){return void 0!==this.get(e)},e.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},e.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},e.prototype.forEach=function(e){E(this.inner,(function(t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];e(a,s)}}))},e.prototype.isEmpty=function(){return T(this.inner)},e}(),ci=function(){function e(){this.changes=new ui((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return e.prototype.getReadTime=function(e){var t=this.changes.get(e);return t?t.readTime:We.min()},e.prototype.addEntry=function(e,t){this.assertNotApplied(),this.changes.set(e.key,{maybeDocument:e,readTime:t})},e.prototype.removeEntry=function(e,t){void 0===t&&(t=null),this.assertNotApplied(),this.changes.set(e,{maybeDocument:null,readTime:t})},e.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?ur.resolve(n.maybeDocument):this.getFromCache(e,t)},e.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},e.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},e.prototype.assertNotApplied=function(){},e}(),li=function(){function e(e,t){this.D=e,this.Gt=t}return e.prototype.addEntry=function(e,t,n){return di(e).put(pi(t),n)},e.prototype.removeEntry=function(e,t){var n=di(e),r=pi(t);return n.delete(r)},e.prototype.updateMetadata=function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Te(e,r)}))},e.prototype.getEntry=function(e,t){var n=this;return di(e).get(pi(t)).next((function(e){return n.Ie(e)}))},e.prototype.Ae=function(e,t){var n=this;return di(e).get(pi(t)).next((function(e){var t=n.Ie(e);return t?{maybeDocument:t,size:Wr(e)}:null}))},e.prototype.getEntries=function(e,t){var n=this,r=Vt();return this.Re(e,t,(function(e,t){var i=n.Ie(t);r=r.insert(e,i)})).next((function(){return r}))},e.prototype.be=function(e,t){var n=this,r=Vt(),i=new Pt(A.comparator);return this.Re(e,t,(function(e,t){var o=n.Ie(t);o?(r=r.insert(e,o),i=i.insert(e,Wr(t))):(r=r.insert(e,null),i=i.insert(e,0))})).next((function(){return{ve:r,Pe:i}}))},e.prototype.Re=function(e,t,n){if(t.isEmpty())return ur.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return di(e).qt({range:r},(function(e,t,r){for(var a=A.fromSegments(e);o&&A.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){var r=this,i=Bt(),o=t.path.length+1,a={};if(n.isEqual(We.min())){var s=t.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=t.path.toArray(),c=Sr(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Qn.collectionReadTimeIndex}return di(e).qt(a,(function(e,n,a){if(e.length===o){var s=Tr(r.D,n);t.path.isPrefixOf(s.key.path)?s instanceof ie&&qe(t,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},e.prototype.newChangeBuffer=function(e){return new hi(this,!!e&&e.trackRemovals)},e.prototype.getSize=function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))},e.prototype.getMetadata=function(e){return fi(e).get(Xn.key).next((function(e){return v(!!e),e}))},e.prototype.Te=function(e,t){return fi(e).put(Xn.key,t)},e.prototype.Ie=function(e){if(e){var t=Tr(this.D,e);return t instanceof oe&&t.version.isEqual(We.min())?null:t}return null},e}(),hi=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).Ve=t,r.trackRemovals=n,r.Se=new ui((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),r}return Object(a.__extends)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[],r=0,i=new Mt((function(e,t){return b(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(o,a){var s=t.Se.get(o);if(a.maybeDocument){var u=Ir(t.Ve.D,a.maybeDocument,t.getReadTime(o));i=i.add(o.path.popLast());var c=Wr(u);r+=c-s,n.push(t.Ve.addEntry(e,o,u))}else if(r-=s,t.trackRemovals){var l=Ir(t.Ve.D,new oe(o,We.min()),t.getReadTime(o));n.push(t.Ve.addEntry(e,o,l))}else n.push(t.Ve.removeEntry(e,o))})),i.forEach((function(r){n.push(t.Ve.Gt.addToCollectionParentIndex(e,r))})),n.push(this.Ve.updateMetadata(e,r)),ur.waitFor(n)},t.prototype.getFromCache=function(e,t){var n=this;return this.Ve.Ae(e,t).next((function(e){return null===e?(n.Se.set(t,0),null):(n.Se.set(t,e.size),e.maybeDocument)}))},t.prototype.getAllFromCache=function(e,t){var n=this;return this.Ve.be(e,t).next((function(e){var t=e.ve;return e.Pe.forEach((function(e,t){n.Se.set(e,t)})),t}))},t}(ci);function fi(e){return br(e,Xn.store)}function di(e){return br(e,Qn.store)}function pi(e){return e.path.toArray()}var vi=function(){function e(e){this.D=e}return e.prototype.St=function(e,t,n,r){var i=this;v(n<r&&n>=0&&r<=11);var o=new cr("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Hn.store)}(e),function(e){e.createObjectStore(Wn.store,{keyPath:Wn.keyPath}),e.createObjectStore(Kn.store,{keyPath:Kn.keyPath,autoIncrement:!0}).createIndex(Kn.userMutationsIndex,Kn.userMutationsKeyPath,{unique:!0}),e.createObjectStore(Yn.store)}(e),mi(e),function(e){e.createObjectStore(Qn.store)}(e));var a=ur.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore($n.store),e.deleteObjectStore(Jn.store),e.deleteObjectStore(Zn.store)}(e),mi(e)),a=a.next((function(){return function(e){var t=e.store(Zn.store),n=new Zn(0,0,We.min().toTimestamp(),0);return t.put(Zn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(e,t){return t.store(Kn.store).kt().next((function(n){e.deleteObjectStore(Kn.store),e.createObjectStore(Kn.store,{keyPath:Kn.keyPath,autoIncrement:!0}).createIndex(Kn.userMutationsIndex,Kn.userMutationsKeyPath,{unique:!0});var r=t.store(Kn.store),i=n.map((function(e){return r.put(e)}));return ur.waitFor(i)}))}(e,o)}))),a=a.next((function(){!function(e){e.createObjectStore(tr.store,{keyPath:tr.keyPath})}(e)}))),n<5&&r>=5&&(a=a.next((function(){return i.De(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(e){e.createObjectStore(Xn.store)}(e),i.Ce(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.xe(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Ne(e,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(Qn.store);t.createIndex(Qn.readTimeIndex,Qn.readTimeIndexPath,{unique:!1}),t.createIndex(Qn.collectionReadTimeIndex,Qn.collectionReadTimeIndexPath,{unique:!1})}(t)}))),n<10&&r>=10&&(a=a.next((function(){return i.$e(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(e){e.createObjectStore(nr.store,{keyPath:nr.keyPath})}(e),function(e){e.createObjectStore(rr.store,{keyPath:rr.keyPath})}(e)}))),a},e.prototype.Ce=function(e){var t=0;return e.store(Qn.store).qt((function(e,n){t+=Wr(n)})).next((function(){var n=new Xn(t);return e.store(Xn.store).put(Xn.key,n)}))},e.prototype.De=function(e){var t=this,n=e.store(Wn.store),r=e.store(Kn.store);return n.kt().next((function(n){return ur.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(Kn.userMutationsIndex,i).next((function(r){return ur.forEach(r,(function(r){v(r.userId===n.userId);var i=jr(t.D,r);return Hr(e,n.userId,i).next((function(){}))}))}))}))}))},e.prototype.xe=function(e){var t=e.store($n.store),n=e.store(Qn.store);return e.store(Zn.store).get(Zn.key).next((function(e){var r=[];return n.qt((function(n,i){var o=new N(n),a=function(e){return[0,Fn(e)]}(o);r.push(t.get(a).next((function(n){return n?ur.resolve():function(n){return t.put(new $n(0,Fn(n),e.highestListenSequenceNumber))}(o)})))})).next((function(){return ur.waitFor(r)}))}))},e.prototype.Ne=function(e,t){e.createObjectStore(er.store,{keyPath:er.keyPath});var n=t.store(er.store),r=new Fr,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Fn(i)})}};return t.store(Qn.store).qt({Bt:!0},(function(e,t){var n=new N(e);return i(n.popLast())})).next((function(){return t.store(Yn.store).qt({Bt:!0},(function(e,t){e[0];var n=e[1],r=(e[2],qn(n));return i(r.popLast())}))}))},e.prototype.$e=function(e){var t=this,n=e.store(Jn.store);return n.qt((function(e,r){var i=Nr(r),o=xr(t.D,i);return n.put(o)}))},e}();function mi(e){e.createObjectStore($n.store,{keyPath:$n.keyPath}).createIndex($n.documentTargetsIndex,$n.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Jn.store,{keyPath:Jn.keyPath}).createIndex(Jn.queryTargetsIndexName,Jn.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Zn.store)}var gi="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",yi=function(){function e(t,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=a,this.document=s,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(e){return Promise.resolve()},!e.At())throw new D(C.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ai(this,i),this.We=n+"main",this.D=new Er(u),this.je=new lr(this.We,11,new vi(this.D)),this.Ge=new Jr(this.referenceDelegate,this.D),this.Gt=new Ur,this.ze=function(e,t){return new li(e,t)}(this.D,this.Gt),this.He=new Ar,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&h("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return e.prototype.start=function(){var e=this;return this.Ye().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new D(C.FAILED_PRECONDITION,gi);return e.Xe(),e.Ze(),e.tn(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ge.getHighestSequenceNumber(t)}))})).then((function(t){e.Me=new s(t,e.Oe)})).then((function(){e.Le=!0})).catch((function(t){return e.je&&e.je.close(),Promise.reject(t)}))},e.prototype.en=function(e){var t=this;return this.Ke=function(n){return Object(a.__awaiter)(t,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){return this.started?[2,e(n)]:[2]}))}))},e(this.isPrimary)},e.prototype.setDatabaseDeletedListener=function(e){var t=this;this.je.Ct((function(n){return Object(a.__awaiter)(t,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return null===n.newVersion?[4,e()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))},e.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Fe.enqueueAndForget((function(){return Object(a.__awaiter)(t,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))})))},e.prototype.Ye=function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return _i(t).put(new tr(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next((function(){if(e.isPrimary)return e.nn(t).next((function(t){t||(e.isPrimary=!1,e.Fe.enqueueRetryable((function(){return e.Ke(!1)})))}))})).next((function(){return e.sn(t)})).next((function(n){return e.isPrimary&&!n?e.rn(t).next((function(){return!1})):!!n&&e.on(t).next((function(){return!0}))}))})).catch((function(t){if(dr(t))return l("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return l("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Fe.enqueueRetryable((function(){return e.Ke(t)})),e.isPrimary=t}))},e.prototype.nn=function(e){var t=this;return bi(e).get(Hn.key).next((function(e){return ur.resolve(t.cn(e))}))},e.prototype.an=function(e){return _i(e).delete(this.clientId)},e.prototype.un=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i=this;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=br(e,tr.store);return t.kt().next((function(e){var n=i.ln(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return ur.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=o.sent(),this.Je)for(t=0,n=e;t<n.length;t++)r=n[t],this.Je.removeItem(this.fn(r.clientId));o.label=2;case 2:return[2]}}))}))},e.prototype.tn=function(){var e=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ye().then((function(){return e.un()})).then((function(){return e.tn()}))}))},e.prototype.cn=function(e){return!!e&&e.ownerId===this.clientId},e.prototype.sn=function(e){var t=this;return this.ke?ur.resolve(!0):bi(e).get(Hn.key).next((function(n){if(null!==n&&t.hn(n.leaseTimestampMs,5e3)&&!t.dn(n.ownerId)){if(t.cn(n)&&t.networkEnabled)return!0;if(!t.cn(n)){if(!n.allowTabSynchronization)throw new D(C.FAILED_PRECONDITION,gi);return!1}}return!(!t.networkEnabled||!t.inForeground)||_i(e).kt().next((function(e){return void 0===t.ln(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&l("IndexedDbPersistence","Client "+(e?"is":"is not")+" eligible for a primary lease."),e}))},e.prototype.shutdown=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e=this;return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[Hn.store,tr.store],(function(t){var n=new yr(t,s.o);return e.rn(n).next((function(){return e.an(n)}))}))];case 1:return t.sent(),this.je.close(),this.yn(),[2]}}))}))},e.prototype.ln=function(e,t){var n=this;return e.filter((function(e){return n.hn(e.updateTimeMs,t)&&!n.dn(e.clientId)}))},e.prototype.gn=function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return _i(t).kt().next((function(t){return e.ln(t,18e5).map((function(e){return e.clientId}))}))}))},Object.defineProperty(e.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),e.prototype.getMutationQueue=function(e){return Kr.Ht(e,this.D,this.Gt,this.referenceDelegate)},e.prototype.getTargetCache=function(){return this.Ge},e.prototype.getRemoteDocumentCache=function(){return this.ze},e.prototype.getIndexManager=function(){return this.Gt},e.prototype.getBundleCache=function(){return this.He},e.prototype.runTransaction=function(e,t,n){var r=this;l("IndexedDbPersistence","Starting transaction:",e);var i,o="readonly"===t?"readonly":"readwrite";return this.je.runTransaction(e,o,ir,(function(o){return i=new yr(o,r.Me?r.Me.next():s.o),"readwrite-primary"===t?r.nn(i).next((function(e){return!!e||r.sn(i)})).next((function(t){if(!t)throw h("Failed to obtain primary lease for action '"+e+"'."),r.isPrimary=!1,r.Fe.enqueueRetryable((function(){return r.Ke(!1)})),new D(C.FAILED_PRECONDITION,or);return n(i)})).next((function(e){return r.on(i).next((function(){return e}))})):r.pn(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.pn=function(e){var t=this;return bi(e).get(Hn.key).next((function(e){if(null!==e&&t.hn(e.leaseTimestampMs,5e3)&&!t.dn(e.ownerId)&&!t.cn(e)&&!(t.ke||t.allowTabSynchronization&&e.allowTabSynchronization))throw new D(C.FAILED_PRECONDITION,gi)}))},e.prototype.on=function(e){var t=new Hn(this.clientId,this.allowTabSynchronization,Date.now());return bi(e).put(Hn.key,t)},e.At=function(){return lr.At()},e.prototype.rn=function(e){var t=this,n=bi(e);return n.get(Hn.key).next((function(e){return t.cn(e)?(l("IndexedDbPersistence","Releasing primary lease."),n.delete(Hn.key)):ur.resolve()}))},e.prototype.hn=function(e,t){var n=Date.now();return!(e<n-t||e>n&&(h("Detected an update time that is in the future: "+e+" > "+n),1))},e.prototype.Xe=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){e.Fe.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ye()}))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},e.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},e.prototype.Ze=function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Be=function(){t.wn(),t.Fe.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.Be))},e.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},e.prototype.dn=function(e){var t;try{var n=null!==(null===(t=this.Je)||void 0===t?void 0:t.getItem(this.fn(e)));return l("IndexedDbPersistence","Client '"+e+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(e){return h("IndexedDbPersistence","Failed to get zombied client id.",e),!1}},e.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(e){h("Failed to set zombie client id.",e)}},e.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(e){}},e.prototype.fn=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},e}();function bi(e){return br(e,Hn.store)}function _i(e){return br(e,tr.store)}function wi(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Oi=function(e,t){this.progress=e,this.En=t},Ei=function(){function e(e,t,n){this.ze=e,this.Tn=t,this.Gt=n}return e.prototype.In=function(e,t){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(e,t).next((function(r){return n.An(e,t,r)}))},e.prototype.An=function(e,t,n){return this.ze.getEntry(e,t).next((function(e){for(var r=0,i=n;r<i.length;r++)e=i[r].applyToLocalView(t,e);return e}))},e.prototype.Rn=function(e,t,n){var r=Vt();return t.forEach((function(e,t){for(var i=0,o=n;i<o.length;i++)t=o[i].applyToLocalView(e,t);r=r.insert(e,t)})),r},e.prototype.bn=function(e,t){var n=this;return this.ze.getEntries(e,t).next((function(t){return n.vn(e,t)}))},e.prototype.vn=function(e,t){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(r){var i=n.Rn(e,t,r),o=Ut();return i.forEach((function(e,t){t||(t=new oe(e,We.min())),o=o.insert(e,t)})),o}))},e.prototype.getDocumentsMatchingQuery=function(e,t,n){return function(e){return A.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Pn(e,t.path):Ae(t)?this.Vn(e,t,n):this.Sn(e,t,n)},e.prototype.Pn=function(e,t){return this.In(e,new A(t)).next((function(e){var t=Bt();return e instanceof ie&&(t=t.insert(e.key,e)),t}))},e.prototype.Vn=function(e,t,n){var r=this,i=t.collectionGroup,o=Bt();return this.Gt.getCollectionParents(e,i).next((function(a){return ur.forEach(a,(function(a){var s=function(e,t){return new ke(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return r.Sn(e,s,n).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))},e.prototype.Sn=function(e,t,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(e,t,n).next((function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(e,t)})).next((function(t){return i=t,o.Dn(e,i,r).next((function(e){r=e;for(var t=0,n=i;t<n.length;t++)for(var o=n[t],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=mt(u,r.get(c),o.localWriteTime);r=l instanceof ie?r.insert(c,l):r.remove(c)}}))})).next((function(){return r.forEach((function(e,n){qe(t,n)||(r=r.remove(e))})),r}))},e.prototype.Dn=function(e,t,n){for(var r=Yt(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof wt&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(e,r).next((function(e){return e.forEach((function(e,t){null!==t&&t instanceof ie&&(c=c.insert(e,t))})),c}))},e}(),Ti=function(){function e(e,t,n,r){this.targetId=e,this.fromCache=t,this.Cn=n,this.xn=r}return e.Nn=function(t,n){for(var r=Yt(),i=Yt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new e(t,n.fromCache,r,i)},e}(),Ii=function(){function e(){}return e.prototype.$n=function(e){this.Fn=e},e.prototype.getDocumentsMatchingQuery=function(e,t,n,i){var o=this;return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(We.min())?this.On(e,t):this.Fn.bn(e,i).next((function(a){var s=o.kn(t,a);return(je(t)||Ne(t))&&o.Mn(t.limitType,s,i,n)?o.On(e,t):(c()<=r.a.DEBUG&&l("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Ve(t)),o.Fn.getDocumentsMatchingQuery(e,t,n).next((function(e){return s.forEach((function(t){e=e.insert(t.key,t)})),e})))}))},e.prototype.kn=function(e,t){var n=new Mt(Be(e));return t.forEach((function(t,r){r instanceof ie&&qe(e,r)&&(n=n.add(r))})),n},e.prototype.Mn=function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},e.prototype.On=function(e,t){return c()<=r.a.DEBUG&&l("QueryEngine","Using full collection scan to execute query:",Ve(t)),this.Fn.getDocumentsMatchingQuery(e,t,We.min())},e}(),Si=function(){function e(e,t,n,r){this.persistence=e,this.Ln=t,this.D=r,this.Bn=new Pt(b),this.qn=new ui((function(e){return ce(e)}),le),this.Un=We.min(),this.Tn=e.getMutationQueue(n),this.Qn=e.getRemoteDocumentCache(),this.Ge=e.getTargetCache(),this.Kn=new Ei(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=e.getBundleCache(),this.Ln.$n(this.Kn)}return e.prototype.collectGarbage=function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Bn)}))},e}();function ki(e,t,n,r){return new Si(e,t,n,r)}function Ci(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return n=m(e),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(e){var o;return n.Tn.getAllMutationBatches(e).next((function(a){return o=a,r=n.persistence.getMutationQueue(t),i=new Ei(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e)})).next((function(t){for(var n=[],r=[],a=Yt(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var d=0,p=t;d<p.length;d++){var v=p[d];r.push(v.batchId);for(var m=0,g=v.mutations;m<g.length;m++){var y=g[m];a=a.add(y.key)}}return i.bn(e,a).next((function(e){return{Wn:e,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}}))}))}function Di(e,t){var n=m(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=ur.resolve();return o.forEach((function(e){a=a.next((function(){return r.getEntry(t,e)})).next((function(t){var o=t,a=n.docVersions.get(e);v(null!==a),(!o||o.version.compareTo(a)<0)&&(o=i.applyToRemoteDocument(e,o,n))&&r.addEntry(o,n.commitVersion)}))})),a.next((function(){return e.Tn.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.Tn.performConsistencyCheck(e)})).next((function(){return n.Kn.bn(e,r)}))}))}function ji(e){var t=m(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ge.getLastRemoteSnapshotVersion(e)}))}function Ni(e,t){var n=m(e),r=t.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var a=[];t.targetChanges.forEach((function(t,o){var s=i.get(o);if(s){a.push(n.Ge.removeMatchingKeys(e,t.removedDocuments,o).next((function(){return n.Ge.addMatchingKeys(e,t.addedDocuments,o)})));var u=t.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,c),function(e,t,n){return v(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,t)&&a.push(n.Ge.updateTargetData(e,c))}}}));var s=Ut();if(t.documentUpdates.forEach((function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(xi(e,o,t.documentUpdates,r,void 0).next((function(e){s=e}))),!r.isEqual(We.min())){var u=n.Ge.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ge.setTargetsMetadata(e,e.currentSequenceNumber,r)}));a.push(u)}return ur.waitFor(a).next((function(){return o.apply(e)})).next((function(){return n.Kn.vn(e,s)}))})).then((function(e){return n.Bn=i,e}))}function xi(e,t,n,r,i){var o=Yt();return n.forEach((function(e){return o=o.add(e)})),t.getEntries(e,o).next((function(e){var o=Ut();return n.forEach((function(n,a){var s=e.get(n),u=(null==i?void 0:i.get(n))||r;a instanceof oe&&a.version.isEqual(We.min())?(t.removeEntry(n,u),o=o.insert(n,a)):null==s||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(t.addEntry(a,u),o=o.insert(n,a)):l("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Pi(e,t){var n=m(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.Tn.getNextMutationBatchAfterBatchId(e,t)}))}function Ai(e,t){var n=m(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ge.getTargetData(e,t).next((function(i){return i?(r=i,ur.resolve(r)):n.Ge.allocateTargetId(e).next((function(i){return r=new Or(t,i,0,e.currentSequenceNumber),n.Ge.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Bn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(e.targetId,e),n.qn.set(t,e.targetId)),e}))}function Ri(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:r=m(e),i=r.Bn.get(t),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(e){return r.persistence.referenceDelegate.removeTarget(e,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!dr(s=a.sent()))throw s;return l("LocalStore","Failed to update sequence numbers for target "+t+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(t),r.qn.delete(i.target),[2]}}))}))}function Mi(e,t,n){var r=m(e),i=We.min(),o=Yt();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=m(e),i=r.qn.get(n);return void 0!==i?ur.resolve(r.Bn.get(i)):r.Ge.getTargetData(t,n)}(r,e,Me(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(e,t.targetId).next((function(e){o=e}))})).next((function(){return r.Ln.getDocumentsMatchingQuery(e,t,n?i:We.min(),n?o:Yt())})).next((function(e){return{documents:e,jn:o}}))}))}function Li(e,t){var n=m(e),r=m(n.Ge),i=n.Bn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.yt(e,t).next((function(e){return e?e.target:null}))}))}function Fi(e){var t=m(e);return t.persistence.runTransaction("Get new document changes","readonly",(function(e){return function(e,t,n){var r=m(e),i=Ut(),o=Sr(n),a=di(t),s=IDBKeyRange.lowerBound(o,!0);return a.qt({index:Qn.readTimeIndex,range:s},(function(e,t){var n=Tr(r.D,t);i=i.insert(n.key,n),o=t.readTime})).next((function(){return{En:i,readTime:kr(o)}}))}(t.Qn,e,t.Un)})).then((function(e){var n=e.En,r=e.readTime;return t.Un=r,n}))}function Ui(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){return[2,(t=m(e)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(e){return function(e){var t=di(e),n=We.min();return t.qt({index:Qn.readTimeIndex,reverse:!0},(function(e,t,r){t.readTime&&(n=kr(t.readTime)),r.done()})).next((function(){return n}))}(e)})).then((function(e){t.Un=e}))]}))}))}function Vi(e,t,n,r){return Object(a.__awaiter)(this,void 0,void 0,(function(){var i,o,s,u,c,l,h,f,d,p;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:for(i=m(e),o=Yt(),s=Ut(),u=Wt(),c=0,l=n;c<l.length;c++)h=l[c],f=t.Gn(h.metadata.name),h.document&&(o=o.add(f)),s=s.insert(f,t.zn(h)),u=u.insert(f,t.Hn(h.metadata.readTime));return d=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,Ai(i,function(e){return Me(De(N.fromString("__bundle__/docs/"+e)))}(r))];case 1:return p=a.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return xi(e,d,s,We.min(),u).next((function(t){return d.apply(e),t})).next((function(t){return i.Ge.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return i.Ge.addMatchingKeys(e,o,p.targetId)})).next((function(){return i.Kn.vn(e,t)}))}))}))]}}))}))}function qi(e,t,n){return void 0===n&&(n=Yt()),Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return[4,Ai(e,Me(Pr(t.bundledQuery)))];case 1:return r=o.sent(),[2,(i=m(e)).persistence.runTransaction("Save named query","readwrite",(function(e){var o=hn(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(e,t);var a=r.withResumeToken(R.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(a.targetId,a),i.Ge.updateTargetData(e,a).next((function(){return i.Ge.removeMatchingKeysForTargetId(e,r.targetId)})).next((function(){return i.Ge.addMatchingKeys(e,n,r.targetId)})).next((function(){return i.He.saveNamedQuery(e,t)}))}))]}}))}))}var Bi=function(){function e(e){this.D=e,this.Jn=new Map,this.Yn=new Map}return e.prototype.getBundleMetadata=function(e,t){return ur.resolve(this.Jn.get(t))},e.prototype.saveBundleMetadata=function(e,t){var n;return this.Jn.set(t.id,{id:(n=t).id,version:n.version,createTime:hn(n.createTime)}),ur.resolve()},e.prototype.getNamedQuery=function(e,t){return ur.resolve(this.Yn.get(t))},e.prototype.saveNamedQuery=function(e,t){return this.Yn.set(t.name,function(e){return{name:e.name,query:Pr(e.bundledQuery),readTime:hn(e.readTime)}}(t)),ur.resolve()},e}(),Hi=function(){function e(){this.Xn=new Mt(Wi.Zn),this.ts=new Mt(Wi.es)}return e.prototype.isEmpty=function(){return this.Xn.isEmpty()},e.prototype.addReference=function(e,t){var n=new Wi(e,t);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},e.prototype.ns=function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))},e.prototype.removeReference=function(e,t){this.ss(new Wi(e,t))},e.prototype.rs=function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))},e.prototype.os=function(e){var t=this,n=new A(new N([])),r=new Wi(n,e),i=new Wi(n,e+1),o=[];return this.ts.forEachInRange([r,i],(function(e){t.ss(e),o.push(e.key)})),o},e.prototype.cs=function(){var e=this;this.Xn.forEach((function(t){return e.ss(t)}))},e.prototype.ss=function(e){this.Xn=this.Xn.delete(e),this.ts=this.ts.delete(e)},e.prototype.us=function(e){var t=new A(new N([])),n=new Wi(t,e),r=new Wi(t,e+1),i=Yt();return this.ts.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i},e.prototype.containsKey=function(e){var t=new Wi(e,0),n=this.Xn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},e}(),Wi=function(){function e(e,t){this.key=e,this.hs=t}return e.Zn=function(e,t){return A.comparator(e.key,t.key)||b(e.hs,t.hs)},e.es=function(e,t){return b(e.hs,t.hs)||A.comparator(e.key,t.key)},e}(),Ki=function(){function e(e,t){this.Gt=e,this.referenceDelegate=t,this.Tn=[],this.ls=1,this.fs=new Mt(Wi.Zn)}return e.prototype.checkEmpty=function(e){return ur.resolve(0===this.Tn.length)},e.prototype.addMutationBatch=function(e,t,n,r){var i=this.ls;this.ls++,this.Tn.length>0&&this.Tn[this.Tn.length-1];var o=new _r(i,t,n,r);this.Tn.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.fs=this.fs.add(new Wi(u.key,i)),this.Gt.addToCollectionParentIndex(e,u.key.path.popLast())}return ur.resolve(o)},e.prototype.lookupMutationBatch=function(e,t){return ur.resolve(this.ds(t))},e.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.ws(n),i=r<0?0:r;return ur.resolve(this.Tn.length>i?this.Tn[i]:null)},e.prototype.getHighestUnacknowledgedBatchId=function(){return ur.resolve(0===this.Tn.length?-1:this.ls-1)},e.prototype.getAllMutationBatches=function(e){return ur.resolve(this.Tn.slice())},e.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,t){var n=this,r=new Wi(t,0),i=new Wi(t,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],(function(e){var t=n.ds(e.hs);o.push(t)})),ur.resolve(o)},e.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var n=this,r=new Mt(b);return t.forEach((function(e){var t=new Wi(e,0),i=new Wi(e,Number.POSITIVE_INFINITY);n.fs.forEachInRange([t,i],(function(e){r=r.add(e.hs)}))})),ur.resolve(this._s(r))},e.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var n=t.path,r=n.length+1,i=n;A.isDocumentKey(i)||(i=i.child(""));var o=new Wi(new A(i),0),a=new Mt(b);return this.fs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.hs)),!0)}),o),ur.resolve(this._s(a))},e.prototype._s=function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ds(e);null!==r&&n.push(r)})),n},e.prototype.removeMutationBatch=function(e,t){var n=this;v(0===this.ys(t.batchId,"removed")),this.Tn.shift();var r=this.fs;return ur.forEach(t.mutations,(function(i){var o=new Wi(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.fs=r}))},e.prototype.Xt=function(e){},e.prototype.containsKey=function(e,t){var n=new Wi(t,0),r=this.fs.firstAfterOrEqual(n);return ur.resolve(t.isEqual(r&&r.key))},e.prototype.performConsistencyCheck=function(e){return this.Tn.length,ur.resolve()},e.prototype.ys=function(e,t){return this.ws(e)},e.prototype.ws=function(e){return 0===this.Tn.length?0:e-this.Tn[0].batchId},e.prototype.ds=function(e){var t=this.ws(e);return t<0||t>=this.Tn.length?null:this.Tn[t]},e}(),Yi=function(){function e(e,t){this.Gt=e,this.gs=t,this.docs=new Pt(A.comparator),this.size=0}return e.prototype.addEntry=function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.gs(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.Gt.addToCollectionParentIndex(e,r.path.popLast())},e.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},e.prototype.getEntry=function(e,t){var n=this.docs.get(t);return ur.resolve(n?n.maybeDocument:null)},e.prototype.getEntries=function(e,t){var n=this,r=Vt();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)})),ur.resolve(r)},e.prototype.getDocumentsMatchingQuery=function(e,t,n){for(var r=Bt(),i=new A(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof ie&&qe(t,c)&&(r=r.insert(c.key,c))}return ur.resolve(r)},e.prototype.ps=function(e,t){return ur.forEach(this.docs,(function(e){return t(e)}))},e.prototype.newChangeBuffer=function(e){return new Gi(this)},e.prototype.getSize=function(e){return ur.resolve(this.size)},e}(),Gi=function(e){function t(t){var n=this;return(n=e.call(this)||this).Ve=t,n}return Object(a.__extends)(t,e),t.prototype.applyChanges=function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i&&i.maybeDocument?n.push(t.Ve.addEntry(e,i.maybeDocument,t.getReadTime(r))):t.Ve.removeEntry(r)})),ur.waitFor(n)},t.prototype.getFromCache=function(e,t){return this.Ve.getEntry(e,t)},t.prototype.getAllFromCache=function(e,t){return this.Ve.getEntries(e,t)},t}(ci),zi=function(){function e(e){this.persistence=e,this.Es=new ui((function(e){return ce(e)}),le),this.lastRemoteSnapshotVersion=We.min(),this.highestTargetId=0,this.Ts=0,this.Is=new Hi,this.targetCount=0,this.As=Xr.ee()}return e.prototype.forEachTarget=function(e,t){return this.Es.forEach((function(e,n){return t(n)})),ur.resolve()},e.prototype.getLastRemoteSnapshotVersion=function(e){return ur.resolve(this.lastRemoteSnapshotVersion)},e.prototype.getHighestSequenceNumber=function(e){return ur.resolve(this.Ts)},e.prototype.allocateTargetId=function(e){return this.highestTargetId=this.As.next(),ur.resolve(this.highestTargetId)},e.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ts&&(this.Ts=t),ur.resolve()},e.prototype.re=function(e){this.Es.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.As=new Xr(t),this.highestTargetId=t),e.sequenceNumber>this.Ts&&(this.Ts=e.sequenceNumber)},e.prototype.addTargetData=function(e,t){return this.re(t),this.targetCount+=1,ur.resolve()},e.prototype.updateTargetData=function(e,t){return this.re(t),ur.resolve()},e.prototype.removeTargetData=function(e,t){return this.Es.delete(t.target),this.Is.os(t.targetId),this.targetCount-=1,ur.resolve()},e.prototype.removeTargets=function(e,t,n){var r=this,i=0,o=[];return this.Es.forEach((function(a,s){s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r.Es.delete(a),o.push(r.removeMatchingKeysForTargetId(e,s.targetId)),i++)})),ur.waitFor(o).next((function(){return i}))},e.prototype.getTargetCount=function(e){return ur.resolve(this.targetCount)},e.prototype.getTargetData=function(e,t){var n=this.Es.get(t)||null;return ur.resolve(n)},e.prototype.addMatchingKeys=function(e,t,n){return this.Is.ns(t,n),ur.resolve()},e.prototype.removeMatchingKeys=function(e,t,n){this.Is.rs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),ur.waitFor(i)},e.prototype.removeMatchingKeysForTargetId=function(e,t){return this.Is.os(t),ur.resolve()},e.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.Is.us(t);return ur.resolve(n)},e.prototype.containsKey=function(e,t){return ur.resolve(this.Is.containsKey(t))},e}(),Qi=function(){function e(e,t){var n=this;this.Rs={},this.Me=new s(0),this.Le=!1,this.Le=!0,this.referenceDelegate=e(this),this.Ge=new zi(this),this.Gt=new Lr,this.ze=function(e,t){return new Yi(e,(function(e){return n.referenceDelegate.bs(e)}))}(this.Gt),this.D=new Er(t),this.He=new Bi(this.D)}return e.prototype.start=function(){return Promise.resolve()},e.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(e.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),e.prototype.setDatabaseDeletedListener=function(){},e.prototype.setNetworkEnabled=function(){},e.prototype.getIndexManager=function(){return this.Gt},e.prototype.getMutationQueue=function(e){var t=this.Rs[e.toKey()];return t||(t=new Ki(this.Gt,this.referenceDelegate),this.Rs[e.toKey()]=t),t},e.prototype.getTargetCache=function(){return this.Ge},e.prototype.getRemoteDocumentCache=function(){return this.ze},e.prototype.getBundleCache=function(){return this.He},e.prototype.runTransaction=function(e,t,n){var r=this;l("MemoryPersistence","Starting transaction:",e);var i=new Xi(this.Me.next());return this.referenceDelegate.vs(),n(i).next((function(e){return r.referenceDelegate.Ps(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))},e.prototype.Vs=function(e,t){return ur.or(Object.values(this.Rs).map((function(n){return function(){return n.containsKey(e,t)}})))},e}(),Xi=function(e){function t(t){var n=this;return(n=e.call(this)||this).currentSequenceNumber=t,n}return Object(a.__extends)(t,e),t}(ar),Ji=function(){function e(e){this.persistence=e,this.Ss=new Hi,this.Ds=null}return e.Cs=function(t){return new e(t)},Object.defineProperty(e.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw p()},enumerable:!1,configurable:!0}),e.prototype.addReference=function(e,t,n){return this.Ss.addReference(n,t),this.xs.delete(n.toString()),ur.resolve()},e.prototype.removeReference=function(e,t,n){return this.Ss.removeReference(n,t),this.xs.add(n.toString()),ur.resolve()},e.prototype.markPotentiallyOrphaned=function(e,t){return this.xs.add(t.toString()),ur.resolve()},e.prototype.removeTarget=function(e,t){var n=this;this.Ss.os(t.targetId).forEach((function(e){return n.xs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.xs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))},e.prototype.vs=function(){this.Ds=new Set},e.prototype.Ps=function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ur.forEach(this.xs,(function(r){var i=A.fromPath(r);return t.Ns(e,i).next((function(e){e||n.removeEntry(i)}))})).next((function(){return t.Ds=null,n.apply(e)}))},e.prototype.updateLimboDocument=function(e,t){var n=this;return this.Ns(e,t).next((function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())}))},e.prototype.bs=function(e){return 0},e.prototype.Ns=function(e,t){var n=this;return ur.or([function(){return ur.resolve(n.Ss.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Vs(e,t)}])},e}(),$i=function(){function e(e){this.uid=e}return e.prototype.isAuthenticated=function(){return null!=this.uid},e.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},e.prototype.isEqual=function(e){return e.uid===this.uid},e}();function Zi(e,t){return"firestore_clients_"+e+"_"+t}function eo(e,t,n){var r="firestore_mutations_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}function to(e,t){return"firestore_targets_"+e+"_"+t}$i.UNAUTHENTICATED=new $i(null),$i.GOOGLE_CREDENTIALS=new $i("google-credentials-uid"),$i.FIRST_PARTY=new $i("first-party-uid");var no=function(){function e(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}return e.$s=function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new D(o.error.code,o.error.message)),a?new e(t,n,o.state,i):(h("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},e.prototype.Fs=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),ro=function(){function e(e,t,n){this.targetId=e,this.state=t,this.error=n}return e.$s=function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new D(i.error.code,i.error.message)),o?new e(t,i.state,r):(h("SharedClientState","Failed to parse target state for ID '"+t+"': "+n),null)},e.prototype.Fs=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},e}(),io=function(){function e(e,t){this.clientId=e,this.activeTargetIds=t}return e.$s=function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=zt(),a=0;i&&a<r.activeTargetIds.length;++a)i=k(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(h("SharedClientState","Failed to parse client data for instance '"+t+"': "+n),null)},e}(),oo=function(){function e(e,t){this.clientId=e,this.onlineState=t}return e.$s=function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(h("SharedClientState","Failed to parse online state: "+t),null)},e}(),ao=function(){function e(){this.activeTargetIds=zt()}return e.prototype.Os=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},e.prototype.ks=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},e.prototype.Fs=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},e}(),so=function(){function e(e,t,n,r,i){this.window=e,this.Fe=t,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new Pt(b),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=Zi(this.persistenceKey,this.Ms),this.Ks=function(e){return"firestore_sequence_number_"+e}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new ao),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Hs=function(e){return"firestore_bundle_loaded_"+e}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return e.At=function(e){return!(!e||!e.localStorage)},e.prototype.start=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i,o,s,u,c,l,h,f=this;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return[4,this.syncEngine.gn()];case 1:for(e=a.sent(),t=0,n=e;t<n.length;t++)(r=n[t])!==this.Ms&&(i=this.getItem(Zi(this.persistenceKey,r)))&&(o=io.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(u=this.Ys(s))&&this.Xs(u),c=0,l=this.Us;c<l.length;c++)h=l[c],this.Bs(h);return this.Us=[],this.window.addEventListener("unload",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},e.prototype.writeSequenceNumber=function(e){this.setItem(this.Ks,JSON.stringify(e))},e.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},e.prototype.isActiveQueryTarget=function(e){var t=!1;return this.qs.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t},e.prototype.addPendingMutation=function(e){this.ti(e,"pending")},e.prototype.updateMutationState=function(e,t,n){this.ti(e,t,n),this.ei(e)},e.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(to(this.persistenceKey,e));if(n){var r=ro.$s(e,n);r&&(t=r.state)}}return this.ni.Os(e),this.Js(),t},e.prototype.removeLocalQueryTarget=function(e){this.ni.ks(e),this.Js()},e.prototype.isLocalQueryTarget=function(e){return this.ni.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){this.removeItem(to(this.persistenceKey,e))},e.prototype.updateQueryState=function(e,t,n){this.si(e,t,n)},e.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach((function(e){r.ei(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))},e.prototype.setOnlineState=function(e){this.ii(e)},e.prototype.notifyBundleLoaded=function(){this.ri()},e.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},e.prototype.getItem=function(e){var t=this.storage.getItem(e);return l("SharedClientState","READ",e,t),t},e.prototype.setItem=function(e,t){l("SharedClientState","SET",e,t),this.storage.setItem(e,t)},e.prototype.removeItem=function(e){l("SharedClientState","REMOVE",e),this.storage.removeItem(e)},e.prototype.Bs=function(e){var t=this,n=e;if(n.storageArea===this.storage){if(l("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void h("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable((function(){return Object(a.__awaiter)(t,void 0,void 0,(function(){var e,t,r,i,o,u;return Object(a.__generator)(this,(function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return e=this.oi(n.key),[2,this.ci(e,null)];if(t=this.ai(n.key,n.newValue))return[2,this.ci(t.clientId,t)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(u=function(e){var t=s.o;if(null!=e)try{var n=JSON.parse(e);v("number"==typeof n),t=n}catch(e){h("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue))!==s.o&&this.sequenceNumberHandler(u);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]}))}))}))}},Object.defineProperty(e.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),e.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},e.prototype.ti=function(e,t,n){var r=new no(this.currentUser,e,t,n),i=eo(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Fs())},e.prototype.ei=function(e){var t=eo(this.persistenceKey,this.currentUser,e);this.removeItem(t)},e.prototype.ii=function(e){var t={clientId:this.Ms,onlineState:e};this.storage.setItem(this.zs,JSON.stringify(t))},e.prototype.si=function(e,t,n){var r=to(this.persistenceKey,e),i=new ro(e,t,n);this.setItem(r,i.Fs())},e.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},e.prototype.oi=function(e){var t=this.Ws.exec(e);return t?t[1]:null},e.prototype.ai=function(e,t){var n=this.oi(e);return io.$s(n,t)},e.prototype.ui=function(e,t){var n=this.js.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return no.$s(new $i(i),r,t)},e.prototype.li=function(e,t){var n=this.Gs.exec(e),r=Number(n[1]);return ro.$s(r,t)},e.prototype.Ys=function(e){return oo.$s(e)},e.prototype.hi=function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){return e.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(e.batchId,e.state,e.error)]:(l("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])}))}))},e.prototype.fi=function(e){return this.syncEngine._i(e.targetId,e.state,e.error)},e.prototype.ci=function(e,t){var n=this,r=t?this.qs.insert(e,t):this.qs.remove(e),i=this.Zs(this.qs),o=this.Zs(r),a=[],s=[];return o.forEach((function(e){i.has(e)||a.push(e)})),i.forEach((function(e){o.has(e)||s.push(e)})),this.syncEngine.mi(a,s).then((function(){n.qs=r}))},e.prototype.Xs=function(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)},e.prototype.Zs=function(e){var t=zt();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t},e}(),uo=function(){function e(){this.yi=new ao,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return e.prototype.addPendingMutation=function(e){},e.prototype.updateMutationState=function(e,t,n){},e.prototype.addLocalQueryTarget=function(e){return this.yi.Os(e),this.gi[e]||"not-current"},e.prototype.updateQueryState=function(e,t,n){this.gi[e]=t},e.prototype.removeLocalQueryTarget=function(e){this.yi.ks(e)},e.prototype.isLocalQueryTarget=function(e){return this.yi.activeTargetIds.has(e)},e.prototype.clearQueryState=function(e){delete this.gi[e]},e.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},e.prototype.isActiveQueryTarget=function(e){return this.yi.activeTargetIds.has(e)},e.prototype.start=function(){return this.yi=new ao,Promise.resolve()},e.prototype.handleUserChange=function(e,t,n){},e.prototype.setOnlineState=function(e){},e.prototype.shutdown=function(){},e.prototype.writeSequenceNumber=function(e){},e.prototype.notifyBundleLoaded=function(){},e}(),co=function(){function e(){}return e.prototype.pi=function(e){},e.prototype.shutdown=function(){},e}(),lo=function(){function e(){var e=this;this.Ei=function(){return e.Ti()},this.Ii=function(){return e.Ai()},this.Ri=[],this.bi()}return e.prototype.pi=function(e){this.Ri.push(e)},e.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},e.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},e.prototype.Ti=function(){l("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var e=0,t=this.Ri;e<t.length;e++)(0,t[e])(0)},e.prototype.Ai=function(){l("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.Ri;e<t.length;e++)(0,t[e])(1)},e.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},e}(),ho={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},fo=function(){function e(e){this.vi=e.vi,this.Pi=e.Pi}return e.prototype.Vi=function(e){this.Si=e},e.prototype.Di=function(e){this.Ci=e},e.prototype.onMessage=function(e){this.xi=e},e.prototype.close=function(){this.Pi()},e.prototype.send=function(e){this.vi(e)},e.prototype.Ni=function(){this.Si()},e.prototype.$i=function(e){this.Ci(e)},e.prototype.Fi=function(e){this.xi(e)},e}(),po=function(e){function t(t){var n=this;return(n=e.call(this,t)||this).forceLongPolling=t.forceLongPolling,n.autoDetectLongPolling=t.autoDetectLongPolling,n}return Object(a.__extends)(t,e),t.prototype.qi=function(e,t,n,r){return new Promise((function(i,a){var s=new o.f;s.listenOnce(o.c.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case o.a.NO_ERROR:var t=s.getResponseJson();l("Connection","XHR received:",JSON.stringify(t)),i(t);break;case o.a.TIMEOUT:l("Connection",'RPC "'+e+'" timed out'),a(new D(C.DEADLINE_EXCEEDED,"Request time out"));break;case o.a.HTTP_ERROR:var n=s.getStatus();if(l("Connection",'RPC "'+e+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var u=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(C).indexOf(t)>=0?t:C.UNKNOWN}(r.status);a(new D(u,r.message))}else a(new D(C.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new D(C.UNAVAILABLE,"Connection failed."));break;default:p()}}finally{l("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);s.send(t,"POST",u,n,15)}))},t.prototype.Qi=function(e,t){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=Object(o.g)(),a=Object(o.h)(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(s.initMessageHeaders,t),Object(i.u)()||Object(i.x)()||Object(i.r)()||Object(i.t)()||Object(i.y)()||Object(i.q)()||(s.httpHeadersOverwriteParam="$httpHeaders");var u=n.join("");l("Connection","Creating WebChannel: "+u,s);var c=r.createWebChannel(u,s),h=!1,d=!1,p=new fo({vi:function(e){d?l("Connection","Not sending because WebChannel is closed:",e):(h||(l("Connection","Opening WebChannel transport."),c.open(),h=!0),l("Connection","WebChannel sending:",e),c.send(e))},Pi:function(){return c.close()}}),m=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return m(c,o.e.EventType.OPEN,(function(){d||l("Connection","WebChannel transport opened.")})),m(c,o.e.EventType.CLOSE,(function(){d||(d=!0,l("Connection","WebChannel transport closed"),p.$i())})),m(c,o.e.EventType.ERROR,(function(e){d||(d=!0,f("Connection","WebChannel transport errored:",e),p.$i(new D(C.UNAVAILABLE,"The operation could not be completed")))})),m(c,o.e.EventType.MESSAGE,(function(e){var t;if(!d){var n=e.data[0];v(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){l("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=St[e];if(void 0!==t)return xt(t)}(o),s=i.message;void 0===a&&(a=C.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),d=!0,p.$i(new D(a,s)),c.close()}else l("Connection","WebChannel received:",n),p.Fi(n)}})),m(a,o.b.STAT_EVENT,(function(e){e.stat===o.d.PROXY?l("Connection","Detected buffering proxy"):e.stat===o.d.NOPROXY&&l("Connection","Detected no buffering proxy")})),setTimeout((function(){p.Ni()}),0),p},t}(function(){function e(e){this.databaseInfo=e,this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.Oi=t+"://"+e.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return e.prototype.Mi=function(e,t,n,r){var i=this.Li(e,t);l("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(e,i,o,n).then((function(e){return l("RestConnection","Received: ",e),e}),(function(t){throw f("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t}))},e.prototype.Ui=function(e,t,n,r){return this.Mi(e,t,n,r)},e.prototype.Bi=function(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",e["Content-Type"]="text/plain",t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])},e.prototype.Li=function(e,t){var n=ho[e];return this.Oi+"/v1/"+t+":"+n},e}());function vo(){return"undefined"!=typeof window?window:null}function mo(){return"undefined"!=typeof document?document:null}function go(e){return new sn(e,!0)}var yo=function(){function e(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=e,this.timerId=t,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return e.prototype.reset=function(){this.Gi=0},e.prototype.Ji=function(){this.Gi=this.ji},e.prototype.Yi=function(e){var t=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&l("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,(function(){return t.Hi=Date.now(),e()})),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},e.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},e.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},e.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},e}(),bo=function(){function e(e,t,n,r,i,o){this.Fe=e,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new yo(e,t)}return e.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},e.prototype.ar=function(){return 2===this.state},e.prototype.start=function(){3!==this.state?this.auth():this.ur()},e.prototype.stop=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},e.prototype.hr=function(){this.state=0,this.rr.reset()},e.prototype.lr=function(){var e=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,(function(){return e.dr()})))},e.prototype.wr=function(e){this._r(),this.stream.send(e)},e.prototype.dr=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){return this.ar()?[2,this.close(0)]:[2]}))}))},e.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},e.prototype.close=function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==e?this.rr.reset():t&&t.code===C.RESOURCE_EXHAUSTED?(h(t.toString()),h("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):t&&t.code===C.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Di(t)];case 1:return n.sent(),[2]}}))}))},e.prototype.mr=function(){},e.prototype.auth=function(){var e=this;this.state=1;var t=this.yr(this.sr),n=this.sr;this.nr.getToken().then((function(t){e.sr===n&&e.gr(t)}),(function(n){t((function(){var t=new D(C.UNKNOWN,"Fetching auth token failed: "+n.message);return e.pr(t)}))}))},e.prototype.gr=function(e){var t=this,n=this.yr(this.sr);this.stream=this.Er(e),this.stream.Vi((function(){n((function(){return t.state=2,t.listener.Vi()}))})),this.stream.Di((function(e){n((function(){return t.pr(e)}))})),this.stream.onMessage((function(e){n((function(){return t.onMessage(e)}))}))},e.prototype.ur=function(){var e=this;this.state=4,this.rr.Yi((function(){return Object(a.__awaiter)(e,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){return this.state=0,this.start(),[2]}))}))}))},e.prototype.pr=function(e){return l("PersistentStream","close with error: "+e),this.stream=null,this.close(3,e)},e.prototype.yr=function(e){var t=this;return function(n){t.Fe.enqueueAndForget((function(){return t.sr===e?n():(l("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},e}(),_o=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,a}return Object(a.__extends)(t,e),t.prototype.Er=function(e){return this.er.Qi("Listen",e)},t.prototype.onMessage=function(e){this.rr.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:p()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.V?(v(void 0===t||"string"==typeof t),R.fromBase64String(t||"")):(v(void 0===t||t instanceof Uint8Array),R.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=(s=t.targetChange.cause)&&function(e){var t=void 0===e.code?C.UNKNOWN:xt(e.code);return new D(t,e.message||"")}(s);n=new Zt(r,i,o,a||null)}else if("documentChange"in t){t.documentChange,(r=t.documentChange).document,r.document.name,r.document.updateTime,i=vn(e,r.document.name),o=hn(r.document.updateTime);var s=new Ye({mapValue:{fields:r.document.fields}}),u=(a=new ie(i,o,s,{}),r.targetIds||[]),c=r.removedTargetIds||[];n=new Jt(u,c,a.key,a)}else if("documentDelete"in t)t.documentDelete,(r=t.documentDelete).document,i=vn(e,r.document),o=r.readTime?hn(r.readTime):We.min(),s=new oe(i,o),a=r.removedTargetIds||[],n=new Jt([],a,s.key,s);else if("documentRemove"in t)t.documentRemove,(r=t.documentRemove).document,i=vn(e,r.document),o=r.removedTargetIds||[],n=new Jt([],o,i,null);else{if(!("filter"in t))return p();t.filter;var l=t.filter;l.targetId,r=l.count||0,i=new jt(r),o=l.targetId,n=new $t(o,i)}return n}(this.D,e),n=function(e){if(!("targetChange"in e))return We.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?We.min():t.readTime?hn(t.readTime):We.min()}(e);return this.listener.Tr(t,n)},t.prototype.Ir=function(e){var t={};t.database=yn(this.D),t.addTarget=function(e,t){var n,r=t.target;return(n=he(r)?{documents:Tn(e,r)}:{query:In(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=cn(e,t.resumeToken):t.snapshotVersion.compareTo(We.min())>0&&(n.readTime=un(e,t.snapshotVersion.toTimestamp())),n}(this.D,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return p()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.D,e);n&&(t.labels=n),this.wr(t)},t.prototype.Ar=function(e){var t={};t.database=yn(this.D),t.removeTarget=e,this.wr(t)},t}(bo),wo=function(e){function t(t,n,r,i,o){var a=this;return(a=e.call(this,t,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,a.Rr=!1,a}return Object(a.__extends)(t,e),Object.defineProperty(t.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),t.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,e.prototype.start.call(this)},t.prototype.mr=function(){this.Rr&&this.vr([])},t.prototype.Er=function(e){return this.er.Qi("Write",e)},t.prototype.onMessage=function(e){if(v(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Rr){this.rr.reset();var t=function(e,t){return e&&e.length>0?(v(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?hn(e.updateTime):hn(t);return n.isEqual(We.min())&&(n=hn(t)),new ht(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=hn(e.commitTime);return this.listener.Pr(n,t)}return v(!e.writeResults||0===e.writeResults.length),this.Rr=!0,this.listener.Vr()},t.prototype.Sr=function(){var e={};e.database=yn(this.D),this.wr(e)},t.prototype.vr=function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return On(t.D,e)}))};this.wr(n)},t}(bo),Oo=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).credentials=t,i.er=n,i.D=r,i.Dr=!1,i}return Object(a.__extends)(t,e),t.prototype.Cr=function(){if(this.Dr)throw new D(C.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.Mi=function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.er.Mi(e,t,n,i)})).catch((function(e){throw e.code===C.UNAUTHENTICATED&&r.credentials.invalidateToken(),e}))},t.prototype.Ui=function(e,t,n){var r=this;return this.Cr(),this.credentials.getToken().then((function(i){return r.er.Ui(e,t,n,i)})).catch((function(e){throw e.code===C.UNAUTHENTICATED&&r.credentials.invalidateToken(),e}))},t.prototype.terminate=function(){this.Dr=!1},t}((function(){})),Eo=function(){function e(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return e.prototype.Or=function(){var e=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.$r=null,e.Mr("Backend didn't respond within 10 seconds."),e.kr("Offline"),Promise.resolve()})))},e.prototype.Lr=function(e){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+e.toString()),this.kr("Offline")))},e.prototype.set=function(e){this.Br(),this.Nr=0,"Online"===e&&(this.Fr=!1),this.kr(e)},e.prototype.kr=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},e.prototype.Mr=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(h(t),this.Fr=!1):l("OnlineStateTracker",t)},e.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},e}(),To=function(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi((function(e){n.enqueueAndForget((function(){return Object(a.__awaiter)(o,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return Po(this)?(l("RemoteStore","Restarting streams for network reachability change."),[4,function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return(t=m(e)).Qr.add(4),[4,So(t)];case 1:return n.sent(),t.jr.set("Unknown"),t.Qr.delete(4),[4,Io(t)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))})),this.jr=new Eo(n,r)};function Io(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:if(!Po(e))return[3,4];t=0,n=e.Kr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function So(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:t=0,n=e.Kr,r.label=1;case 1:return t<n.length?[4,(0,n[t])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))}function ko(e,t){var n=m(e);n.Ur.has(t.targetId)||(n.Ur.set(t.targetId,t),xo(n)?No(n):zo(n).ar()&&Do(n,t))}function Co(e,t){var n=m(e),r=zo(n);n.Ur.delete(t),r.ar()&&jo(n,t),0===n.Ur.size&&(r.ar()?r.lr():Po(n)&&n.jr.set("Unknown"))}function Do(e,t){e.Gr.H(t.targetId),zo(e).Ir(t)}function jo(e,t){e.Gr.H(t),zo(e).Ar(t)}function No(e){e.Gr=new tn({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},yt:function(t){return e.Ur.get(t)||null}}),zo(e).start(),e.jr.Or()}function xo(e){return Po(e)&&!zo(e).cr()&&e.Ur.size>0}function Po(e){return 0===m(e).Qr.size}function Ao(e){e.Gr=void 0}function Ro(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){return e.Ur.forEach((function(t,n){Do(e,t)})),[2]}))}))}function Mo(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(n){return Ao(e),xo(e)?(e.jr.Lr(t),No(e)):e.jr.set("Unknown"),[2]}))}))}function Lo(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return Object(a.__generator)(this,(function(s){switch(s.label){case 0:if(e.jr.set("Online"),!(t instanceof Zt&&2===t.state&&t.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:n=t.cause,r=0,i=t.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],e.Ur.has(o)?[4,e.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),e.Ur.delete(o),e.Gr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(e,t)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),l("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),[4,Fo(e,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(t instanceof Jt?e.Gr.st(t):t instanceof $t?e.Gr.ht(t):e.Gr.ot(t),n.isEqual(We.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,ji(e.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(e,t){var n=e.Gr.dt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Ur.get(r);i&&e.Ur.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.Ur.get(t);if(n){e.Ur.set(t,n.withResumeToken(R.EMPTY_BYTE_STRING,n.snapshotVersion)),jo(e,t);var r=new Or(n.target,t,1,n.sequenceNumber);Do(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return l("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Fo(e,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Fo(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r=this;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:if(!dr(t))throw t;return e.Qr.add(1),[4,So(e)];case 1:return i.sent(),e.jr.set("Offline"),n||(n=function(){return ji(e.localStore)}),e.asyncQueue.enqueueRetryable((function(){return Object(a.__awaiter)(r,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return l("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return t.sent(),e.Qr.delete(1),[4,Io(e)];case 2:return t.sent(),[2]}}))}))})),[2]}}))}))}function Uo(e,t){return t().catch((function(n){return Fo(e,n,t)}))}function Vo(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:t=m(e),n=Qo(t),r=t.qr.length>0?t.qr[t.qr.length-1].batchId:-1,a.label=1;case 1:if(!function(e){return Po(e)&&e.qr.length<10}(t))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Pi(t.localStore,r)];case 3:return null===(i=a.sent())?(0===t.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(e,t){e.qr.push(t);var n=Qo(e);n.ar()&&n.br&&n.vr(t.mutations)}(t,i),[3,6]);case 4:return o=a.sent(),[4,Fo(t,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return qo(t)&&Bo(t),[2]}}))}))}function qo(e){return Po(e)&&!Qo(e).cr()&&e.qr.length>0}function Bo(e){Qo(e).start()}function Ho(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){return Qo(e).Sr(),[2]}))}))}function Wo(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(a.__generator)(this,(function(o){for(t=Qo(e),n=0,r=e.qr;n<r.length;n++)i=r[n],t.vr(i.mutations);return[2]}))}))}function Ko(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return r=e.qr.shift(),i=wr.from(r,t,n),[4,Uo(e,(function(){return e.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Vo(e)];case 2:return o.sent(),[2]}}))}))}function Yo(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return t&&Qo(e).br?[4,function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return Nt(r=t.code)&&r!==C.ABORTED?(n=e.qr.shift(),Qo(e).hr(),[4,Uo(e,(function(){return e.remoteSyncer.rejectFailedWrite(n.batchId,t)}))]):[3,3];case 1:return i.sent(),[4,Vo(e)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(e,t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return qo(e)&&Bo(e),[2]}}))}))}function Go(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return n=m(e),t?(n.Qr.delete(2),[4,Io(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return t?[3,4]:(n.Qr.add(2),[4,So(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function zo(e){var t=this;return e.zr||(e.zr=function(e,t,n){var r=m(e);return r.Cr(),new _o(t,r.er,r.credentials,r.D,n)}(e.datastore,e.asyncQueue,{Vi:Ro.bind(null,e),Di:Mo.bind(null,e),Tr:Lo.bind(null,e)}),e.Kr.push((function(n){return Object(a.__awaiter)(t,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return n?(e.zr.hr(),xo(e)?No(e):e.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,e.zr.stop()];case 2:t.sent(),Ao(e),t.label=3;case 3:return[2]}}))}))}))),e.zr}function Qo(e){var t=this;return e.Hr||(e.Hr=function(e,t,n){var r=m(e);return r.Cr(),new wo(t,r.er,r.credentials,r.D,n)}(e.datastore,e.asyncQueue,{Vi:Ho.bind(null,e),Di:Yo.bind(null,e),Vr:Wo.bind(null,e),Pr:Ko.bind(null,e)}),e.Kr.push((function(n){return Object(a.__awaiter)(t,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return n?(e.Hr.hr(),[4,Vo(e)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,e.Hr.stop()];case 3:t.sent(),e.qr.length>0&&(l("RemoteStore","Stopping write stream with "+e.qr.length+" pending writes"),e.qr=[]),t.label=4;case 4:return[2]}}))}))}))),e.Hr}var Xo=function(){function e(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return e.createAndSchedule=function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a},e.prototype.start=function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)},e.prototype.skipDelay=function(){return this.handleDelayElapsed()},e.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new D(C.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},e.prototype.handleDelayElapsed=function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))},e.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},e}();function Jo(e,t){if(h("AsyncQueue",t+": "+e),dr(e))return new D(C.UNAVAILABLE,t+": "+e);throw e}var $o=function(){function e(e){this.comparator=e?function(t,n){return e(t,n)||A.comparator(t.key,n.key)}:function(e,t){return A.comparator(e.key,t.key)},this.keyedMap=Bt(),this.sortedSet=new Pt(this.comparator)}return e.emptySet=function(t){return new e(t.comparator)},e.prototype.has=function(e){return null!=this.keyedMap.get(e)},e.prototype.get=function(e){return this.keyedMap.get(e)},e.prototype.first=function(){return this.sortedSet.minKey()},e.prototype.last=function(){return this.sortedSet.maxKey()},e.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},e.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(e.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))},e.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},e.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},e.prototype.isEqual=function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},e.prototype.toString=function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},e.prototype.copy=function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r},e}(),Zo=function(){function e(){this.Jr=new Pt(A.comparator)}return e.prototype.track=function(e){var t=e.doc.key,n=this.Jr.get(t);n?0!==e.type&&3===n.type?this.Jr=this.Jr.insert(t,e):3===e.type&&1!==n.type?this.Jr=this.Jr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Jr=this.Jr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Jr=this.Jr.remove(t):1===e.type&&2===n.type?this.Jr=this.Jr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Jr=this.Jr.insert(t,{type:2,doc:e.doc}):p():this.Jr=this.Jr.insert(t,e)},e.prototype.Yr=function(){var e=[];return this.Jr.inorderTraversal((function(t,n){e.push(n)})),e},e}(),ea=function(){function e(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return e.fromInitialDocuments=function(t,n,r,i){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,$o.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fe(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},e}(),ta=function(){this.Xr=void 0,this.listeners=[]},na=function(){this.queries=new ui((function(e){return Ue(e)}),Fe),this.onlineState="Unknown",this.Zr=new Set};function ra(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:if(n=m(e),r=t.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new ta),!i)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=a.sent(),[3,4];case 3:return u=a.sent(),c=Jo(u,"Initialization of query '"+Ve(t.query)+"' failed"),[2,void t.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(t),t.eo(n.onlineState),o.Xr&&t.no(o.Xr)&&sa(n),[2]}}))}))}function ia(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a.__generator)(this,(function(a){return n=m(e),r=t.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(t))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function oa(e,t){for(var n=m(e),r=!1,i=0,o=t;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].no(a)&&(r=!0);u.Xr=a}}r&&sa(n)}function aa(e,t,n){var r=m(e),i=r.queries.get(t);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(t)}function sa(e){e.Zr.forEach((function(e){e.next()}))}var ua=function(){function e(e,t,n){this.query=e,this.so=t,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return e.prototype.no=function(e){if(!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&t.push(i)}e=new ea(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.io?this.oo(e)&&(this.so.next(e),o=!0):this.co(e,this.onlineState)&&(this.ao(e),o=!0),this.ro=e,o},e.prototype.onError=function(e){this.so.error(e)},e.prototype.eo=function(e){this.onlineState=e;var t=!1;return this.ro&&!this.io&&this.co(this.ro,e)&&(this.ao(this.ro),t=!0),t},e.prototype.co=function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return!(this.options.uo&&n||e.docs.isEmpty()&&"Offline"!==t)},e.prototype.oo=function(e){if(e.docChanges.length>0)return!0;var t=this.ro&&this.ro.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},e.prototype.ao=function(e){e=ea.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.io=!0,this.so.next(e)},e}(),ca=function(){function e(e,t){this.payload=e,this.byteLength=t}return e.prototype.ho=function(){return"metadata"in this.payload},e}(),la=function(){function e(e){this.D=e}return e.prototype.Gn=function(e){return vn(this.D,e)},e.prototype.zn=function(e){return e.metadata.exists?wn(this.D,e.document,!1):new oe(this.Gn(e.metadata.name),this.Hn(e.metadata.readTime))},e.prototype.Hn=function(e){return hn(e)},e}();!function(){function e(e,t,n){this.lo=e,this.localStore=t,this.D=n,this.queries=[],this.documents=[],this.progress=ha(e)}e.prototype.fo=function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null},e.prototype.wo=function(e){for(var t=new Map,n=new la(this.D),r=0,i=e;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.Gn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(t.get(c)||Yt()).add(a);t.set(c,l)}}return t},e.prototype.complete=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return[4,Vi(this.localStore,new la(this.D),this.documents,this.lo.id)];case 1:e=o.sent(),t=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,qi(this.localStore,i,t.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Oi(Object.assign({},this.progress),e))]}}))}))}}();function ha(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var fa=function(e){this.key=e},da=function(e){this.key=e},pa=function(){function e(e,t){this.query=e,this._o=t,this.mo=null,this.current=!1,this.yo=Yt(),this.mutatedKeys=Yt(),this.po=Be(e),this.Eo=new $o(this.po)}return Object.defineProperty(e.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),e.prototype.Io=function(e,t){var n=this,r=t?t.Ao:new Zo,i=t?t.Eo:this.Eo,o=t?t.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=je(this.query)&&i.size===this.query.limit?i.last():null,c=Ne(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),h=t instanceof ie?t:null;h&&(h=qe(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))})),je(this.query)||Ne(this.query))for(;a.size>this.query.limit;){var l=je(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:a,Ao:r,Mn:s,mutatedKeys:o}},e.prototype.Ro=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},e.prototype.applyChanges=function(e,t,n){var r=this,i=this.Eo;this.Eo=e.Eo,this.mutatedKeys=e.mutatedKeys;var o=e.Ao.Yr();o.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return p()}};return n(e)-n(t)}(e.type,t.type)||r.po(e.doc,t.doc)})),this.bo(n);var a=t?this.vo():[],s=0===this.yo.size&&this.current?1:0,u=s!==this.mo;return this.mo=s,0!==o.length||u?{snapshot:new ea(this.query,e.Eo,i,o,e.mutatedKeys,0===s,u,!1),Po:a}:{Po:a}},e.prototype.eo=function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new Zo,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},e.prototype.Vo=function(e){return!this._o.has(e)&&!!this.Eo.has(e)&&!this.Eo.get(e).hasLocalMutations},e.prototype.bo=function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t._o=t._o.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t._o=t._o.delete(e)})),this.current=e.current)},e.prototype.vo=function(){var e=this;if(!this.current)return[];var t=this.yo;this.yo=Yt(),this.Eo.forEach((function(t){e.Vo(t.key)&&(e.yo=e.yo.add(t.key))}));var n=[];return t.forEach((function(t){e.yo.has(t)||n.push(new da(t))})),this.yo.forEach((function(e){t.has(e)||n.push(new fa(e))})),n},e.prototype.So=function(e){this._o=e.jn,this.yo=Yt();var t=this.Io(e.documents);return this.applyChanges(t,!0)},e.prototype.Do=function(){return ea.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},e}(),va=function(e,t,n){this.query=e,this.targetId=t,this.view=n},ma=function(e){this.key=e,this.Co=!1},ga=function(){function e(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new ui((function(e){return Ue(e)}),Fe),this.$o=new Map,this.Fo=new Set,this.Oo=new Pt(A.comparator),this.ko=new Map,this.Mo=new Hi,this.Lo={},this.Bo=new Map,this.qo=Xr.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(e.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),e}();function ya(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return n=Ga(e),(o=n.No.get(t))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Do(),[3,4]):[3,1];case 1:return[4,Ai(n.localStore,Me(t))];case 2:return s=a.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,ba(n,t,r,"current"===u)];case 3:i=a.sent(),n.isPrimaryClient&&ko(n.remoteStore,s),a.label=4;case 4:return[2,i]}}))}))}function ba(e,t,n,r){return Object(a.__awaiter)(this,void 0,void 0,(function(){var i,o,s,u,c,l;return Object(a.__generator)(this,(function(h){switch(h.label){case 0:return e.Qo=function(t,n,r){return function(e,t,n,r){return Object(a.__awaiter)(this,void 0,void 0,(function(){var i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return(i=t.view.Io(n)).Mn?[4,Mi(e.localStore,t.query,!1).then((function(e){var n=e.documents;return t.view.Io(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o),[2,(xa(e,t.targetId,s.Po),s.snapshot)]}}))}))}(e,t,n,r)},[4,Mi(e.localStore,t,!0)];case 1:return i=h.sent(),o=new pa(t,i.jn),s=o.Io(i.documents),u=Xt.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),c=o.applyChanges(s,e.isPrimaryClient,u),xa(e,n,c.Po),l=new va(t,n,o),[2,(e.No.set(t,l),e.$o.has(n)?e.$o.get(n).push(t):e.$o.set(n,[t]),c.snapshot)]}}))}))}function _a(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return n=m(e),r=n.No.get(t),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter((function(e){return!Fe(e,t)}))),void n.No.delete(t))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Ri(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Co(n.remoteStore,r.targetId),ja(n,r.targetId)})).catch(ti)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ja(n,r.targetId),[4,Ri(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function wa(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:r=za(e),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(e,t){var n,r=m(e),i=V.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Yt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(e){return r.Kn.bn(e,o).next((function(o){n=o;for(var a=[],s=0,u=t;s<u.length;s++){var c=u[s],l=gt(c,n.get(c.key));null!=l&&a.push(new wt(c.key,l,ze(l.proto.mapValue),ft.exists(!0)))}return r.Tn.addMutationBatch(e,i,a,t)}))})).then((function(e){var t=e.applyToLocalDocumentSet(n);return{batchId:e.batchId,changes:t}}))}(r.localStore,t)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(e,t,n){var r=e.Lo[e.currentUser.toKey()];r||(r=new Pt(b)),r=r.insert(t,n),e.Lo[e.currentUser.toKey()]=r}(r,i.batchId,n),[4,Ra(r,i.changes)];case 3:return a.sent(),[4,Vo(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Jo(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function Oa(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:n=m(e),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ni(n.localStore,t)];case 2:return r=i.sent(),t.targetChanges.forEach((function(e,t){var r=n.ko.get(t);r&&(v(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Co=!0:e.modifiedDocuments.size>0?v(r.Co):e.removedDocuments.size>0&&(v(r.Co),r.Co=!1))})),[4,Ra(n,r,t)];case 3:return i.sent(),[3,6];case 4:return[4,ti(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Ea(e,t,n){var r=m(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach((function(e,n){var r=n.view.eo(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=m(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(t)&&(r=!0)})),r&&sa(n)}(r.eventManager,t),i.length&&r.xo.Tr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Ta(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i,o,s,u,c;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return(r=m(e)).sharedClientState.updateQueryState(t,"rejected",n),i=r.ko.get(t),(o=i&&i.key)?(s=(s=new Pt(A.comparator)).insert(o,new oe(o,We.min())),u=Yt().add(o),c=new Qt(We.min(),new Map,new Mt(b),s,u),[4,Oa(r,c)]):[3,2];case 1:return a.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(t),Aa(r),[3,4];case 2:return[4,Ri(r.localStore,t,!1).then((function(){return ja(r,t,n)})).catch(ti)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))}function Ia(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:n=m(e),r=t.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Di(n.localStore,t)];case 2:return i=o.sent(),Da(n,r,null),Ca(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Ra(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,ti(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Sa(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:r=m(e),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(e,t){var n=m(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.Tn.lookupMutationBatch(e,t).next((function(t){return v(null!==t),r=t.keys(),n.Tn.removeMutationBatch(e,t)})).next((function(){return n.Tn.performConsistencyCheck(e)})).next((function(){return n.Kn.bn(e,r)}))}))}(r.localStore,t)];case 2:return i=o.sent(),Da(r,t,n),Ca(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),[4,Ra(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,ti(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ka(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:Po((n=m(e)).remoteStore)||l("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(e){var t=m(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.Tn.getHighestUnacknowledgedBatchId(e)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void t.resolve()]:((i=n.Bo.get(r)||[]).push(t),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Jo(o,"Initialization of waitForPendingWrites() operation failed"),t.reject(s),[3,4];case 4:return[2]}}))}))}function Ca(e,t){(e.Bo.get(t)||[]).forEach((function(e){e.resolve()})),e.Bo.delete(t)}function Da(e,t,n){var r=m(e),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.Lo[r.currentUser.toKey()]=i}}function ja(e,t,n){void 0===n&&(n=null),e.sharedClientState.removeLocalQueryTarget(t);for(var r=0,i=e.$o.get(t);r<i.length;r++){var o=i[r];e.No.delete(o),n&&e.xo.Ko(o,n)}e.$o.delete(t),e.isPrimaryClient&&e.Mo.os(t).forEach((function(t){e.Mo.containsKey(t)||Na(e,t)}))}function Na(e,t){e.Fo.delete(t.path.canonicalString());var n=e.Oo.get(t);null!==n&&(Co(e.remoteStore,n),e.Oo=e.Oo.remove(t),e.ko.delete(n),Aa(e))}function xa(e,t,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof fa?(e.Mo.addReference(o.key,t),Pa(e,o)):o instanceof da?(l("SyncEngine","Document no longer in limbo: "+o.key),e.Mo.removeReference(o.key,t),e.Mo.containsKey(o.key)||Na(e,o.key)):p()}}function Pa(e,t){var n=t.key,r=n.path.canonicalString();e.Oo.get(n)||e.Fo.has(r)||(l("SyncEngine","New document in limbo: "+n),e.Fo.add(r),Aa(e))}function Aa(e){for(;e.Fo.size>0&&e.Oo.size<e.maxConcurrentLimboResolutions;){var t=e.Fo.values().next().value;e.Fo.delete(t);var n=new A(N.fromString(t)),r=e.qo.next();e.ko.set(r,new ma(n)),e.Oo=e.Oo.insert(n,r),ko(e.remoteStore,new Or(Me(De(n.path)),r,2,s.o))}}function Ra(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i,o,s;return Object(a.__generator)(this,(function(u){switch(u.label){case 0:return r=m(e),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach((function(e,a){s.push(r.Qo(a,t,n).then((function(e){if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);var t=Ti.Nn(a.targetId,e);o.push(t)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.xo.Tr(i),[4,function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,h,f;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:n=m(e),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return ur.forEach(t,(function(t){return ur.forEach(t.Cn,(function(r){return n.persistence.referenceDelegate.addReference(e,t.targetId,r)})).next((function(){return ur.forEach(t.xn,(function(r){return n.persistence.referenceDelegate.removeReference(e,t.targetId,r)}))}))}))}))];case 2:return a.sent(),[3,4];case 3:if(!dr(r=a.sent()))throw r;return l("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=t;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(c=n.Bn.get(u),h=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(h),n.Bn=n.Bn.insert(u,f));return[2]}}))}))}(r.localStore,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Ma(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return(n=m(e)).currentUser.isEqual(t)?[3,3]:(l("SyncEngine","User change. New user:",t.toKey()),[4,Ci(n.localStore,t)]);case 1:return r=i.sent(),n.currentUser=t,function(e,t){e.Bo.forEach((function(e){e.forEach((function(e){e.reject(new D(C.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.Bo.clear()}(n),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),[4,Ra(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function La(e,t){var n=m(e),r=n.ko.get(t);if(r&&r.Co)return Yt().add(r.key);var i=Yt(),o=n.$o.get(t);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.No.get(u);i=i.unionWith(c.view.To)}return i}function Fa(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return[4,Mi((n=m(e)).localStore,t.query,!0)];case 1:return r=o.sent(),i=t.view.So(r),[2,(n.isPrimaryClient&&xa(n,t.targetId,i.Po),i)]}}))}))}function Ua(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){return[2,Fi((t=m(e)).localStore).then((function(e){return Ra(t,e)}))]}))}))}function Va(e,t,n,r){return Object(a.__awaiter)(this,void 0,void 0,(function(){var i,o;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return[4,function(e,t){var n=m(e),r=m(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Jt(e,t).next((function(t){return t?n.Kn.bn(e,t):ur.resolve(null)}))}))}((i=m(e)).localStore,t)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Vo(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Da(i,t,r||null),Ca(i,t),function(e,t){m(m(e).Tn).Xt(t)}(i.localStore,t)):p(),a.label=4;case 4:return[4,Ra(i,o)];case 5:return a.sent(),[3,7];case 6:l("SyncEngine","Cannot apply mutation batch with id: "+t),a.label=7;case 7:return[2]}}))}))}function qa(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return Ga(n=m(e)),za(n),!0!==t||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Ba(n,r.toArray())]);case 1:return i=a.sent(),n.Uo=!0,[4,Go(n.remoteStore,!0)];case 2:for(a.sent(),o=0,s=i;o<s.length;o++)u=s[o],ko(n.remoteStore,u);return[3,7];case 3:return!1!==t||!1===n.Uo?[3,7]:(c=[],l=Promise.resolve(),n.$o.forEach((function(e,t){n.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return ja(n,t),Ri(n.localStore,t,!0)})),Co(n.remoteStore,t)})),[4,l]);case 4:return a.sent(),[4,Ba(n,c)];case 5:return a.sent(),function(e){var t=m(e);t.ko.forEach((function(e,n){Co(t.remoteStore,n)})),t.Mo.cs(),t.ko=new Map,t.Oo=new Pt(A.comparator)}(n),n.Uo=!1,[4,Go(n.remoteStore,!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))}function Ba(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h,f,d,p,v,g;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:n=m(e),r=[],i=[],o=0,s=t,a.label=1;case 1:return o<s.length?(u=s[o],c=void 0,(l=n.$o.get(u))&&0!==l.length?[4,Ai(n.localStore,Me(l[0]))]:[3,7]):[3,13];case 2:c=a.sent(),h=0,f=l,a.label=3;case 3:return h<f.length?(d=f[h],p=n.No.get(d),[4,Fa(n,p)]):[3,6];case 4:(v=a.sent()).snapshot&&i.push(v.snapshot),a.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Li(n.localStore,u)];case 8:return g=a.sent(),[4,Ai(n.localStore,g)];case 9:return c=a.sent(),[4,ba(n,Ha(g),u,!1)];case 10:a.sent(),a.label=11;case 11:r.push(c),a.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}}))}))}function Ha(e){return Ce(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Wa(e){var t=m(e);return m(m(t.localStore).persistence).gn()}function Ka(e,t,n,r){return Object(a.__awaiter)(this,void 0,void 0,(function(){var i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return(i=m(e)).Uo?(l("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(t))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Fi(i.localStore)];case 3:return o=a.sent(),s=Qt.createSynthesizedRemoteEventForCurrentChange(t,"current"===n),[4,Ra(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Ri(i.localStore,t,!0)];case 6:return a.sent(),ja(i,t,r),[3,8];case 7:p(),a.label=8;case 8:return[2]}}))}))}function Ya(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i,o,s,u,c,h,f,d,p;return Object(a.__generator)(this,(function(v){switch(v.label){case 0:if(!(r=Ga(e)).Uo)return[3,10];i=0,o=t,v.label=1;case 1:return i<o.length?(s=o[i],r.$o.has(s)?(l("SyncEngine","Adding an already active target "+s),[3,5]):[4,Li(r.localStore,s)]):[3,6];case 2:return u=v.sent(),[4,Ai(r.localStore,u)];case 3:return c=v.sent(),[4,ba(r,Ha(u),c.targetId,!1)];case 4:v.sent(),ko(r.remoteStore,c),v.label=5;case 5:return i++,[3,1];case 6:h=function(e){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return r.$o.has(e)?[4,Ri(r.localStore,e,!1).then((function(){Co(r.remoteStore,e),ja(r,e)})).catch(ti)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))},f=0,d=n,v.label=7;case 7:return f<d.length?(p=d[f],[5,h(p)]):[3,10];case 8:v.sent(),v.label=9;case 9:return f++,[3,7];case 10:return[2]}}))}))}function Ga(e){var t=m(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Oa.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=La.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Ta.bind(null,t),t.xo.Tr=oa.bind(null,t.eventManager),t.xo.Ko=aa.bind(null,t.eventManager),t}function za(e){var t=m(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ia.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Sa.bind(null,t),t}var Qa=function(){function e(){this.synchronizeTabs=!1}return e.prototype.initialize=function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return this.D=go(e.databaseInfo.databaseId),this.sharedClientState=this.jo(e),this.persistence=this.Go(e),[4,this.persistence.start()];case 1:return t.sent(),this.gcScheduler=this.zo(e),this.localStore=this.Ho(e),[2]}}))}))},e.prototype.zo=function(e){return null},e.prototype.Ho=function(e){return ki(this.persistence,new Ii,e.initialUser,this.D)},e.prototype.Go=function(e){return new Qi(Ji.Cs,this.D)},e.prototype.jo=function(e){return new uo},e.prototype.terminate=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return e.sent(),[4,this.persistence.shutdown()];case 2:return e.sent(),[2]}}))}))},e}(),Xa=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).Jo=t,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(a.__extends)(t,e),t.prototype.initialize=function(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return n.sent(),[4,Ui(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,t)];case 3:return n.sent(),[4,za(this.Jo.syncEngine)];case 4:return n.sent(),[4,Vo(this.Jo.remoteStore)];case 5:return n.sent(),[2]}}))}))},t.prototype.Ho=function(e){return ki(this.persistence,new Ii,e.initialUser,this.D)},t.prototype.zo=function(e){var t=this.persistence.referenceDelegate.garbageCollector;return new ii(t,e.asyncQueue)},t.prototype.Go=function(e){var t=wi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Br.withCacheSize(this.cacheSizeBytes):Br.DEFAULT;return new yi(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,vo(),mo(),this.D,this.sharedClientState,!!this.forceOwnership)},t.prototype.jo=function(e){return new uo},t}(Qa),Ja=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n,!1)||this).Jo=t,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(a.__extends)(t,e),t.prototype.initialize=function(t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r=this;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,e.prototype.initialize.call(this,t)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof so?(this.sharedClientState.syncEngine={wi:Va.bind(null,n),_i:Ka.bind(null,n),mi:Ya.bind(null,n),gn:Wa.bind(null,n),di:Ua.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en((function(e){return Object(a.__awaiter)(r,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return[4,qa(this.Jo.syncEngine,e)];case 1:return t.sent(),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},t.prototype.jo=function(e){var t=vo();if(!so.At(t))throw new D(C.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=wi(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new so(t,e.asyncQueue,n,e.clientId,e.initialUser)},t}(Xa),$a=function(){function e(){}return e.prototype.initialize=function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n=this;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Ea(n.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Ma.bind(null,this.syncEngine),[4,Go(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.createEventManager=function(e){return new na},e.prototype.createDatastore=function(e){var t,n=go(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new po(t));return function(e,t,n){return new Oo(e,t,n)}(e.credentials,r,n)},e.prototype.createRemoteStore=function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Ea(a.syncEngine,e,0)},o=lo.At()?new lo:new co,new To(t,n,r,i,o)},e.prototype.createSyncEngine=function(e,t){return function(e,t,n,r,i,o,a){var s=new ga(e,t,n,r,i,o);return a&&(s.Uo=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)},e.prototype.terminate=function(){return function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return t=m(e),l("RemoteStore","RemoteStore shutting down."),t.Qr.add(5),[4,So(t)];case 1:return n.sent(),t.Wr.shutdown(),t.jr.set("Unknown"),[2]}}))}))}(this.remoteStore)},e}();var Za=function(){function e(e){this.observer=e,this.muted=!1}return e.prototype.next=function(e){this.observer.next&&this.Yo(this.observer.next,e)},e.prototype.error=function(e){this.observer.error?this.Yo(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)},e.prototype.Xo=function(){this.muted=!0},e.prototype.Yo=function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)},e}(),es=(function(){function e(e,t){var n=this;this.Zo=e,this.D=t,this.metadata=new sr,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then((function(e){e&&e.ho()?n.metadata.resolve(e.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.payload)))}),(function(e){return n.metadata.reject(e)}))}e.prototype.close=function(){return this.Zo.cancel()},e.prototype.getMetadata=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){return[2,this.metadata.promise]}))}))},e.prototype.Wo=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.getMetadata()];case 1:return[2,(e.sent(),this.ec())]}}))}))},e.prototype.ec=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,t,n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(e=i.sent())?[2,null]:(t=this.tc.decode(e),n=Number(t),isNaN(n)&&this.sc("length string ("+t+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new ca(JSON.parse(r),e.length+n)]}}))}))},e.prototype.rc=function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))},e.prototype.nc=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((e=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),t=this.buffer.slice(0,e),[2,(this.buffer=this.buffer.slice(e),t)])}}))}))},e.prototype.ic=function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return this.buffer.length<e?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return t=this.tc.decode(this.buffer.slice(0,e)),[2,(this.buffer=this.buffer.slice(e),t)]}}))}))},e.prototype.sc=function(e){throw this.Zo.cancel(),new Error("Invalid bundle format: "+e)},e.prototype.oc=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(e=n.sent()).done||((t=new Uint8Array(this.buffer.length+e.value.length)).set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t),[2,e.done]}}))}))}}(),function(){function e(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return e.prototype.lookup=function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n=this;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new D(C.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return n=m(e),r=yn(n.D)+"/documents",i={documents:t.map((function(e){return pn(n.D,e)}))},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(e){var t=function(e,t){return"found"in t?function(e,t){v(!!t.found),t.found.name,t.found.updateTime;var n=vn(e,t.found.name),r=hn(t.found.updateTime),i=new Ye({mapValue:{fields:t.found.fields}});return new ie(n,r,i,{})}(e,t):"missing"in t?function(e,t){v(!!t.missing),v(!!t.readTime);var n=vn(e,t.missing),r=hn(t.readTime);return new oe(n,r)}(e,t):p()}(n.D,e);s.set(t.key.toString(),t)})),u=[],[2,(t.forEach((function(e){var t=s.get(e.toString());v(!!t),u.push(t)})),u)]}}))}))}(this.datastore,e)];case 1:return[2,((t=r.sent()).forEach((function(e){e instanceof oe||e instanceof ie?n.recordVersion(e):p()})),t)]}}))}))},e.prototype.set=function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.update=function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())},e.prototype.delete=function(e){this.write(new Ct(e,this.precondition(e))),this.writtenDocs.add(e.toString())},e.prototype.commit=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return e=this.readVersions,this.mutations.forEach((function(t){e.delete(t.key.toString())})),e.forEach((function(e,n){var r=A.fromPath(n);t.mutations.push(new Dt(r,t.precondition(r)))})),[4,function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return n=m(e),r=yn(n.D)+"/documents",i={writes:t.map((function(e){return On(n.D,e)}))},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},e.prototype.recordVersion=function(e){var t;if(e instanceof ie)t=e.version;else{if(!(e instanceof oe))throw p();t=We.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new D(C.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)},e.prototype.precondition=function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ft.updateTime(t):ft.none()},e.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(We.min()))throw new D(C.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ft.updateTime(t)}return ft.exists(!0)},e.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations.push(e)},e.prototype.ensureCommitNotCalled=function(){},e}()),ts=function(){function e(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new yo(this.asyncQueue,"transaction_retry")}return e.prototype.run=function(){this.ac()},e.prototype.ac=function(){var e=this;this.rr.Yi((function(){return Object(a.__awaiter)(e,void 0,void 0,(function(){var e,t,n=this;return Object(a.__generator)(this,(function(r){return e=new es(this.datastore),(t=this.uc(e))&&t.then((function(t){n.asyncQueue.enqueueAndForget((function(){return e.commit().then((function(){n.deferred.resolve(t)})).catch((function(e){n.hc(e)}))}))})).catch((function(e){n.hc(e)})),[2]}))}))}))},e.prototype.uc=function(e){try{var t=this.updateFunction(e);return!I(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},e.prototype.hc=function(e){var t=this;this.cc>0&&this.lc(e)?(this.cc-=1,this.asyncQueue.enqueueAndForget((function(){return t.ac(),Promise.resolve()}))):this.deferred.reject(e)},e.prototype.lc=function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Nt(t)}return!1},e}(),ns=function(){function e(e,t,n){var r=this;this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=$i.UNAUTHENTICATED,this.clientId=y.u(),this.credentialListener=function(){},this.receivedInitialUser=new sr,this.credentials.setChangeListener((function(e){l("FirestoreClient","Received user=",e.uid),r.user=e,r.credentialListener(e),r.receivedInitialUser.resolve()}))}return e.prototype.getConfiguration=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(e.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}}))}))},e.prototype.setCredentialChangeListener=function(e){var t=this;this.credentialListener=e,this.receivedInitialUser.promise.then((function(){return t.credentialListener(t.user)}))},e.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new D(C.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.terminate=function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(a.__awaiter)(e,void 0,void 0,(function(){var e,n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),t.resolve(),[3,6];case 5:return e=r.sent(),n=Jo(e,"Failed to shutdown persistence"),t.reject(n),[3,6];case 6:return[2]}}))}))})),t.promise},e}();function rs(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i=this;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return e.asyncQueue.verifyOperationInProgress(),l("FirestoreClient","Initializing OfflineComponentProvider"),[4,e.getConfiguration()];case 1:return n=o.sent(),[4,t.initialize(n)];case 2:return o.sent(),r=n.initialUser,e.setCredentialChangeListener((function(n){r.isEqual(n)||(r=n,e.asyncQueue.enqueueRetryable((function(){return Object(a.__awaiter)(i,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return[4,Ci(t.localStore,n)];case 1:return e.sent(),[2]}}))}))})))})),t.persistence.setDatabaseDeletedListener((function(){return e.terminate()})),e.offlineComponents=t,[2]}}))}))}function is(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return e.asyncQueue.verifyOperationInProgress(),[4,os(e)];case 1:return n=i.sent(),l("FirestoreClient","Initializing OnlineComponentProvider"),[4,e.getConfiguration()];case 2:return r=i.sent(),[4,t.initialize(n,r)];case 3:return i.sent(),e.setCredentialChangeListener((function(n){return e.asyncQueue.enqueueRetryable((function(){return function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return(n=m(e)).asyncQueue.verifyOperationInProgress(),l("RemoteStore","RemoteStore received new credentials"),r=Po(n),n.Qr.add(3),[4,So(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(t)];case 2:return i.sent(),n.Qr.delete(3),[4,Io(n)];case 3:return i.sent(),[2]}}))}))}(t.remoteStore,n)}))})),e.onlineComponents=t,[2]}}))}))}function os(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return e.offlineComponents?[3,2]:(l("FirestoreClient","Using default OfflineComponentProvider"),[4,rs(e,new Qa)]);case 1:t.sent(),t.label=2;case 2:return[2,e.offlineComponents]}}))}))}function as(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return e.onlineComponents?[3,2]:(l("FirestoreClient","Using default OnlineComponentProvider"),[4,is(e,new $a)]);case 1:t.sent(),t.label=2;case 2:return[2,e.onlineComponents]}}))}))}function ss(e){return os(e).then((function(e){return e.persistence}))}function us(e){return os(e).then((function(e){return e.localStore}))}function cs(e){return as(e).then((function(e){return e.remoteStore}))}function ls(e){return as(e).then((function(e){return e.syncEngine}))}function hs(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return[4,as(e)];case 1:return t=r.sent(),[2,((n=t.eventManager).onListen=ya.bind(null,t.syncEngine),n.onUnlisten=_a.bind(null,t.syncEngine),n)]}}))}))}function fs(e,t,n){var r=this;void 0===n&&(n={});var i=new sr;return e.asyncQueue.enqueueAndForget((function(){return Object(a.__awaiter)(r,void 0,void 0,(function(){var r;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new Za({next:function(o){t.enqueueAndForget((function(){return ia(e,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new D(C.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new D(C.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new ua(De(n.path),o,{includeMetadataChanges:!0,uo:!0});return ra(e,a)},[4,hs(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}function ds(e,t,n){var r=this;void 0===n&&(n={});var i=new sr;return e.asyncQueue.enqueueAndForget((function(){return Object(a.__awaiter)(r,void 0,void 0,(function(){var r;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return r=function(e,t,n,r,i){var o=new Za({next:function(n){t.enqueueAndForget((function(){return ia(e,a)})),n.fromCache&&"server"===r.source?i.reject(new D(C.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new ua(n,o,{includeMetadataChanges:!0,uo:!0});return ra(e,a)},[4,hs(e)];case 1:return[2,r.apply(void 0,[o.sent(),e.asyncQueue,t,n,i])]}}))}))})),i.promise}var ps=function(e,t,n,r,i,o){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},vs=function(){function e(e,t){this.projectId=e,this.database=t||"(default)"}return Object.defineProperty(e.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database},e}(),ms=new Map,gs=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},ys=function(){function e(){this.changeListener=null}return e.prototype.getToken=function(){return Promise.resolve(null)},e.prototype.invalidateToken=function(){},e.prototype.setChangeListener=function(e){this.changeListener=e,e($i.UNAUTHENTICATED)},e.prototype.removeChangeListener=function(){this.changeListener=null},e}(),bs=function(){function e(e){var t=this;this.fc=null,this.currentUser=$i.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){t.dc++,t.currentUser=t.wc(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.dc=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),e.get().then((function(e){t.auth=e,t.fc&&t.auth.addAuthTokenListener(t.fc)}),(function(){})))}return e.prototype.getToken=function(){var e=this,t=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.dc!==t?(l("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(v("string"==typeof n.accessToken),new gs(n.accessToken,e.currentUser)):null})):Promise.resolve(null)},e.prototype.invalidateToken=function(){this.forceRefresh=!0},e.prototype.setChangeListener=function(e){this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},e.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},e.prototype.wc=function(){var e=this.auth&&this.auth.getUid();return v(null===e||"string"==typeof e),new $i(e)},e}(),_s=function(){function e(e,t){this._c=e,this.mc=t,this.type="FirstParty",this.user=$i.FIRST_PARTY}return Object.defineProperty(e.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.mc},t=this._c.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!1,configurable:!0}),e}(),ws=function(){function e(e,t){this._c=e,this.mc=t}return e.prototype.getToken=function(){return Promise.resolve(new _s(this._c,this.mc))},e.prototype.setChangeListener=function(e){e($i.FIRST_PARTY)},e.prototype.removeChangeListener=function(){},e.prototype.invalidateToken=function(){},e}();function Os(e,t,n){if(!n)throw new D(C.INVALID_ARGUMENT,"Function "+e+"() cannot be called with an empty "+t+".")}function Es(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new D(C.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function Ts(e,t,n,r){if(!0===t&&!0===r)throw new D(C.INVALID_ARGUMENT,e+" and "+n+" cannot be used together.")}function Is(e){if(!A.isDocumentKey(e))throw new D(C.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e+" has "+e.length+".")}function Ss(e){if(A.isDocumentKey(e))throw new D(C.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e+" has "+e.length+".")}function ks(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&t.length>1)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}return"function"==typeof e?"a function":p()}function Cs(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new D(C.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ks(e);throw new D(C.INVALID_ARGUMENT,"Expected type '"+t.name+"', but it was: "+n)}return e}function Ds(e,t){if(t<=0)throw new D(C.INVALID_ARGUMENT,"Function "+e+"() requires a positive number, but it was: "+t+".")}var js=function(){function e(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new D(C.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new D(C.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,Ts("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}return e.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties},e}(),Ns=function(){function e(e,t){this._persistenceKey="(lite)",this._settings=new js({}),this._settingsFrozen=!1,e instanceof vs?(this._databaseId=e,this._credentials=new ys):(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new D(C.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vs(e.options.projectId)}(e),this._credentials=new bs(t))}return Object.defineProperty(e.prototype,"app",{get:function(){if(!this._app)throw new D(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),e.prototype._setSettings=function(e){if(this._settingsFrozen)throw new D(C.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new js(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new ys;switch(e.type){case"gapi":var t=e.client;return v(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new ws(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new D(C.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},e.prototype._getSettings=function(){return this._settings},e.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},e.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},e.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},e.prototype._terminate=function(){return this,(e=ms.get(this))&&(l("ComponentProvider","Removing Datastore"),ms.delete(this),e.terminate()),Promise.resolve();var e},e}(),xs=function(e){this._delegate=e},Ps=function(){function e(e,t,n){this._converter=t,this._key=n,this.type="document",this.firestore=e}return Object.defineProperty(e.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Rs(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._key)},e}(),As=function(){function e(e,t,n){this._converter=t,this._query=n,this.type="query",this.firestore=e}return e.prototype.withConverter=function(t){return new e(this.firestore,t,this._query)},e}(),Rs=function(e){function t(t,n,r){var i=this;return(i=e.call(this,t,n,De(r))||this).firestore=t,i._path=r,i.type="collection",i}return Object(a.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Ps(this.firestore,null,new A(e))},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._path)},t}(As);function Ms(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e instanceof xs&&(e=e._delegate),Os("collection","path",t),e instanceof Ns)return Ss(n=N.fromString.apply(N,Object(a.__spreadArray)([t],r))),new Rs(e,null,n);if(!(e instanceof Ps||e instanceof Rs))throw new D(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Ss(n=N.fromString.apply(N,Object(a.__spreadArray)([e.path],r)).child(N.fromString(t))),new Rs(e.firestore,null,n)}function Ls(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(e instanceof xs&&(e=e._delegate),1===arguments.length&&(t=y.u()),Os("doc","path",t),e instanceof Ns)return Is(n=N.fromString.apply(N,Object(a.__spreadArray)([t],r))),new Ps(e,null,new A(n));if(!(e instanceof Ps||e instanceof Rs))throw new D(C.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Is(n=e._path.child(N.fromString.apply(N,Object(a.__spreadArray)([t],r)))),new Ps(e.firestore,e instanceof Rs?e._converter:null,new A(n))}function Fs(e,t){return e instanceof xs&&(e=e._delegate),t instanceof xs&&(t=t._delegate),(e instanceof Ps||e instanceof Rs)&&(t instanceof Ps||t instanceof Rs)&&e.firestore===t.firestore&&e.path===t.path&&e._converter===t._converter}function Us(e,t){return e instanceof xs&&(e=e._delegate),t instanceof xs&&(t=t._delegate),e instanceof As&&t instanceof As&&e.firestore===t.firestore&&Fe(e._query,t._query)&&e._converter===t._converter}var Vs=function(){function e(){var e=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new yo(this,"async_queue_retry"),this.bc=function(){var t=mo();t&&l("AsyncQueue","Visibility state changed to "+t.visibilityState),e.rr.Zi()};var t=mo();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(e.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),e.prototype.enqueueAndForget=function(e){this.enqueue(e)},e.prototype.enqueueAndForgetEvenWhileRestricted=function(e){this.vc(),this.Pc(e)},e.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var e=mo();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.bc)}},e.prototype.enqueue=function(e){return this.vc(),this.Ec?new Promise((function(e){})):this.Pc(e)},e.prototype.enqueueRetryable=function(e){var t=this;this.enqueueAndForget((function(){return t.gc.push(e),t.Vc()}))},e.prototype.Vc=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,t=this;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!dr(e=n.sent()))throw e;return l("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:this.gc.length>0&&this.rr.Yi((function(){return t.Vc()})),n.label=5;case 5:return[2]}}))}))},e.prototype.Pc=function(e){var t=this,n=this.yc.then((function(){return t.Ac=!0,e().catch((function(e){throw t.Ic=e,t.Ac=!1,h("INTERNAL UNHANDLED ERROR: ",function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e})).then((function(e){return t.Ac=!1,e}))}));return this.yc=n,n},e.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.vc(),this.Rc.indexOf(e)>-1&&(t=0);var i=Xo.createAndSchedule(this,e,t,n,(function(e){return r.Sc(e)}));return this.Tc.push(i),i},e.prototype.vc=function(){this.Ic&&p()},e.prototype.verifyOperationInProgress=function(){},e.prototype.Dc=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e;return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return[4,e=this.yc];case 1:t.sent(),t.label=2;case 2:if(e!==this.yc)return[3,0];t.label=3;case 3:return[2]}}))}))},e.prototype.Cc=function(e){for(var t=0,n=this.Tc;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},e.prototype.xc=function(e){var t=this;return this.Dc().then((function(){t.Tc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));for(var n=0,r=t.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==e&&i.timerId===e)break}return t.Dc()}))},e.prototype.Nc=function(e){this.Rc.push(e)},e.prototype.Sc=function(e){var t=this.Tc.indexOf(e);this.Tc.splice(t,1)},e}();function qs(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}!function(){function e(){this._progressObserver={},this._taskCompletionResolver=new sr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}e.prototype.onProgress=function(e,t,n){this._progressObserver={next:e,error:t,complete:n}},e.prototype.catch=function(e){return this._taskCompletionResolver.promise.catch(e)},e.prototype.then=function(e,t){return this._taskCompletionResolver.promise.then(e,t)},e.prototype._completeWith=function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)},e.prototype._failWith=function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)},e.prototype._updateProgress=function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}();var Bs=-1,Hs=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._queue=new Vs,r._persistenceKey="name"in t?t.name:"[DEFAULT]",r}return Object(a.__extends)(t,e),t.prototype._terminate=function(){return this._firestoreClient||Ks(this),this._firestoreClient.terminate()},t}(Ns);function Ws(e){return e._firestoreClient||Ks(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Ks(e){var t=e._freezeSettings(),n=function(e,t,n){return new ps(e,t,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(e._databaseId,e._persistenceKey,t);e._firestoreClient=new ns(e._credentials,e._queue,n)}function Ys(e,t,n){var r=this,i=new sr;return e.asyncQueue.enqueue((function(){return Object(a.__awaiter)(r,void 0,void 0,(function(){var r;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,rs(e,n)];case 1:return o.sent(),[4,is(e,t)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(e){return"FirebaseError"===e.name?e.code===C.FAILED_PRECONDITION||e.code===C.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Gs(e){if(e._initialized||e._terminated)throw new D(C.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var zs=function(){function e(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=0;n<e.length;++n)if(0===e[n].length)throw new D(C.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new P(e)}return e.prototype.isEqual=function(e){return this._internalPath.isEqual(e._internalPath)},e}(),Qs=function(){function e(e){this._byteString=e}return e.fromBase64String=function(t){try{return new e(R.fromBase64String(t))}catch(t){throw new D(C.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},e.fromUint8Array=function(t){return new e(R.fromUint8Array(t))},e.prototype.toBase64=function(){return this._byteString.toBase64()},e.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},e.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},e.prototype.isEqual=function(e){return this._byteString.isEqual(e._byteString)},e}(),Xs=function(e){this._methodName=e},Js=function(){function e(e,t){if(!isFinite(e)||e<-90||e>90)throw new D(C.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new D(C.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}return Object.defineProperty(e.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},e.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},e.prototype._compareTo=function(e){return b(this._lat,e._lat)||b(this._long,e._long)},e}(),$s=/^__.*__$/,Zs=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return null!==this.fieldMask?new wt(e,this.data,this.fieldMask,t,this.fieldTransforms):new _t(e,this.data,t,this.fieldTransforms)},e}(),eu=function(){function e(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}return e.prototype.toMutation=function(e,t){return new wt(e,this.data,this.fieldMask,t,this.fieldTransforms)},e}();function tu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw p()}}var nu=function(){function e(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(e.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),e.prototype.Oc=function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},e.prototype.kc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Mc:!1});return r.Lc(e),r},e.prototype.Bc=function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Oc({path:n,Mc:!1});return r.$c(),r},e.prototype.qc=function(e){return this.Oc({path:void 0,Mc:!0})},e.prototype.Uc=function(e){return Ou(e,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},e.prototype.contains=function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))},e.prototype.$c=function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Lc(this.path.get(e))},e.prototype.Lc=function(e){if(0===e.length)throw this.Uc("Document fields must not be empty");if(tu(this.Fc)&&$s.test(e))throw this.Uc('Document fields cannot begin and end with "__"')},e}(),ru=function(){function e(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.D=n||go(e)}return e.prototype.Wc=function(e,t,n,r){return void 0===r&&(r=!1),new nu({Fc:e,methodName:t,Kc:n,path:P.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},e}();function iu(e){var t=e._freezeSettings(),n=go(e._databaseId);return new ru(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ou(e,t,n,r,i,o){void 0===o&&(o={});var a=e.Wc(o.merge||o.mergeFields?2:0,t,n,i);yu("Data must be an object, but it was:",a,r);var s,u,c=mu(r,a);if(o.merge)s=new Ke(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=bu(t,f[h],n);if(!a.contains(d))throw new D(C.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Eu(l,d)||l.push(d)}s=new Ke(l),u=a.fieldTransforms.filter((function(e){return s.covers(e.field)}))}else s=null,u=a.fieldTransforms;return new Zs(new Ye(c),s,u)}var au=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype._toFieldTransform=function(e){if(2!==e.Fc)throw 1===e.Fc?e.Uc(this._methodName+"() can only appear at the top level of your update data"):e.Uc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null},t.prototype.isEqual=function(e){return e instanceof t},t}(Xs);function su(e,t,n){return new nu({Fc:3,Kc:t.settings.Kc,methodName:e._methodName,Mc:n},t.databaseId,t.D,t.ignoreUndefinedProperties)}var uu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype._toFieldTransform=function(e){return new lt(e.path,new nt)},t.prototype.isEqual=function(e){return e instanceof t},t}(Xs),cu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).jc=n,r}return Object(a.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=su(this,e,!0),n=this.jc.map((function(e){return vu(e,t)})),r=new rt(n);return new lt(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Xs),lu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).jc=n,r}return Object(a.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=su(this,e,!0),n=this.jc.map((function(e){return vu(e,t)})),r=new ot(n);return new lt(e.path,r)},t.prototype.isEqual=function(e){return this===e},t}(Xs),hu=function(e){function t(t,n){var r=this;return(r=e.call(this,t)||this).Gc=n,r}return Object(a.__extends)(t,e),t.prototype._toFieldTransform=function(e){var t=new st(e.D,Je(e.D,this.Gc));return new lt(e.path,t)},t.prototype.isEqual=function(e){return this===e},t}(Xs);function fu(e,t,n,r){var i=e.Wc(1,t,n);yu("Data must be an object, but it was:",i,r);var o=[],a=new Ge;E(r,(function(e,r){var s=wu(t,e,n);r instanceof xs&&(r=r._delegate);var u=i.Bc(s);if(r instanceof au)o.push(s);else{var c=vu(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new Ke(o);return new eu(a.v(),s,i.fieldTransforms)}function du(e,t,n,r,i,o){var a=e.Wc(1,t,n),s=[bu(t,r,n)],u=[i];if(o.length%2!=0)throw new D(C.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(bu(t,o[c])),u.push(o[c+1]);for(var l=[],h=new Ge,f=s.length-1;f>=0;--f)if(!Eu(l,s[f])){var d=s[f],p=u[f];p instanceof xs&&(p=p._delegate);var v=a.Bc(d);if(p instanceof au)l.push(d);else{var m=vu(p,v);null!=m&&(l.push(d),h.set(d,m))}}var g=new Ke(l);return new eu(h.v(),g,a.fieldTransforms)}function pu(e,t,n,r){return void 0===r&&(r=!1),vu(n,e.Wc(r?4:3,t))}function vu(e,t){if(e instanceof xs&&(e=e._delegate),gu(e))return yu("Unsupported field value:",t,e),mu(e,t);if(e instanceof Xs)return function(e,t){if(!tu(t.Fc))throw t.Uc(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t.Uc(e._methodName+"() is not currently supported inside arrays");var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Mc&&4!==t.Fc)throw t.Uc("Nested arrays are not supported");return function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=vu(o[i],t.qc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(e instanceof xs&&(e=e._delegate),null===e)return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Je(t.D,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=V.fromDate(e);return{timestampValue:un(t.D,n)}}if(e instanceof V)return n=new V(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:un(t.D,n)};if(e instanceof Js)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qs)return{bytesValue:cn(t.D,e._byteString)};if(e instanceof Ps){n=t.databaseId;var r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:fn(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Uc("Unsupported field value: "+ks(e))}(e,t)}function mu(e,t){var n={};return T(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):E(e,(function(e,r){var i=vu(r,t.kc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function gu(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof V||e instanceof Js||e instanceof Qs||e instanceof Ps||e instanceof Xs)}function yu(e,t,n){if(!gu(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=ks(n);throw"an object"===r?t.Uc(e+" a custom object"):t.Uc(e+" "+r)}}function bu(e,t,n){if(t instanceof xs&&(t=t._delegate),t instanceof zs)return t._internalPath;if("string"==typeof t)return wu(e,t);throw Ou("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var _u=new RegExp("[~\\*/\\[\\]]");function wu(e,t,n){if(t.search(_u)>=0)throw Ou("Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,n);try{return(new(zs.bind.apply(zs,Object(a.__spreadArray)([void 0],t.split(".")))))._internalPath}catch(r){throw Ou("Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,n)}}function Ou(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+t+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new D(C.INVALID_ARGUMENT,(s+=". ")+e+u)}function Eu(e,t){return e.some((function(e){return e.isEqual(t)}))}var Tu=function(){function e(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(e.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ref",{get:function(){return new Ps(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),e.prototype.exists=function(){return null!==this._document},e.prototype.data=function(){if(this._document){if(this._converter){var e=new Iu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.toProto())}},e.prototype.get=function(e){if(this._document){var t=this._document.data().field(Su("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}},e}(),Iu=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.data=function(){return e.prototype.data.call(this)},t}(Tu);function Su(e,t){return"string"==typeof t?wu(e,t):t instanceof xs?t._delegate._internalPath:t._internalPath}var ku=function(){function e(e,t){this.hasPendingWrites=e,this.fromCache=t}return e.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},e}(),Cu=function(e){function t(t,n,r,i,o,a){var s=this;return(s=e.call(this,t,n,r,i,a)||this)._firestore=t,s._firestoreImpl=t,s.metadata=o,s}return Object(a.__extends)(t,e),t.prototype.exists=function(){return e.prototype.exists.call(this)},t.prototype.data=function(e){if(void 0===e&&(e={}),this._document){if(this._converter){var t=new Du(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.toProto(),e.serverTimestamps)}},t.prototype.get=function(e,t){if(void 0===t&&(t={}),this._document){var n=this._document.data().field(Su("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}},t}(Tu),Du=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.data=function(t){return void 0===t&&(t={}),e.prototype.data.call(this,t)},t}(Cu),ju=function(){function e(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ku(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(e.prototype,"docs",{get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),e.prototype.forEach=function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Du(n._firestore,n._userDataWriter,r.key,r,new ku(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))}))},e.prototype.docChanges=function(e){void 0===e&&(e={});var t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new D(C.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Du(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ku(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query._converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Du(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ku(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query._converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Nu(t.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},e}();function Nu(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return p()}}function xu(e,t){return e instanceof Cu&&t instanceof Cu?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ju&&t instanceof ju&&e._firestore===t._firestore&&Us(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Pu(e){if(Ne(e)&&0===e.explicitOrderBy.length)throw new D(C.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Au=function(){};function Ru(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,i=t;r<i.length;r++){var o=i[r];e=o._apply(e)}return e}var Mu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).zc=t,i.Hc=n,i.Jc=r,i.type="where",i}return Object(a.__extends)(t,e),t.prototype._apply=function(e){var t=iu(e.firestore),n=function(e,t,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new D(C.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Hu(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(Bu(r,e,h))}s={arrayValue:{values:u}}}else s=Bu(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Hu(a,o),s=pu(n,"where",a,"in"===o||"not-in"===o);var f=fe.create(i,o,s);return function(e,t){if(t.g()){var n=Pe(e);if(null!==n&&!n.isEqual(t.field))throw new D(C.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+t.field.toString()+"'");var r=xe(e);null!==r&&Wu(e,t.field,r)}var i=function(e,t){for(var n=0,r=e.filters;n<r.length;n++){var i=r[n];if(t.indexOf(i.op)>=0)return i.op}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw i===t.op?new D(C.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new D(C.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+i.toString()+"' filters.")}(e,f),f}(e._query,0,t,e.firestore._databaseId,this.zc,this.Hc,this.Jc);return new As(e.firestore,e._converter,function(e,t){var n=e.filters.concat([t]);return new ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))},t}(Au),Lu=function(e){function t(t,n){var r=this;return(r=e.call(this)||this).zc=t,r.Yc=n,r.type="orderBy",r}return Object(a.__extends)(t,e),t.prototype._apply=function(e){var t=function(e,t,n){if(null!==e.startAt)throw new D(C.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new D(C.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ee(t,n);return function(e,t){if(null===xe(e)){var n=Pe(e);null!==n&&Wu(e,n,t.field)}}(e,r),r}(e._query,this.zc,this.Yc);return new As(e.firestore,e._converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new ke(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))},t}(Au),Fu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.Xc=n,i.Zc=r,i}return Object(a.__extends)(t,e),t.prototype._apply=function(e){return new As(e.firestore,e._converter,Le(e._query,this.Xc,this.Zc))},t}(Au),Uu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.ta=n,i.ea=r,i}return Object(a.__extends)(t,e),t.prototype._apply=function(e){var t=qu(e,this.type,this.ta,this.ea);return new As(e.firestore,e._converter,function(e,t){return new ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))},t}(Au),Vu=function(e){function t(t,n,r){var i=this;return(i=e.call(this)||this).type=t,i.ta=n,i.ea=r,i}return Object(a.__extends)(t,e),t.prototype._apply=function(e){var t=qu(e,this.type,this.ta,this.ea);return new As(e.firestore,e._converter,function(e,t){return new ke(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))},t}(Au);function qu(e,t,n,r){if(n[0]instanceof xs&&(n[0]=n[0]._delegate),n[0]instanceof Tu)return function(e,t,n,r,i){if(!r)throw new D(C.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Re(e);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(J(t,r.key));else{var c=r.field(u.field);if(q(c))throw new D(C.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new D(C.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new we(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=iu(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new D(C.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new D(C.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ae(e)&&-1!==c.indexOf("/"))throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=e.path.child(N.fromString(c));if(!A.isDocumentKey(l))throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new A(l);s.push(J(t,h))}else{var f=pu(n,r,c);s.push(f)}}return new we(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function Bu(e,t,n){if(n instanceof xs&&(n=n._delegate),"string"==typeof n){if(""===n)throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ae(t)&&-1!==n.indexOf("/"))throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=t.path.child(N.fromString(n));if(!A.isDocumentKey(r))throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return J(e,new A(r))}if(n instanceof Ps)return J(e,n._key);throw new D(C.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ks(n)+".")}function Hu(e,t){if(!Array.isArray(e)||0===e.length)throw new D(C.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(e.length>10)throw new D(C.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.")}function Wu(e,t,n){if(!n.isEqual(t))throw new D(C.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Ku=function(){function e(){}return e.prototype.convertValue=function(e,t){switch(void 0===t&&(t="none"),W(e)){case 0:return null;case 1:return e.booleanValue;case 2:return F(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(U(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw p()}},e.prototype.convertObject=function(e,t){var n=this,r={};return E(e.fields||{},(function(e,i){r[e]=n.convertValue(i,t)})),r},e.prototype.convertGeoPoint=function(e){return new Js(F(e.latitude),F(e.longitude))},e.prototype.convertArray=function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))},e.prototype.convertServerTimestamp=function(e,t){switch(t){case"previous":var n=B(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(H(e));default:return null}},e.prototype.convertTimestamp=function(e){var t=L(e);return new V(t.seconds,t.nanos)},e.prototype.convertDocumentKey=function(e,t){var n=N.fromString(e);v(Ln(n));var r=new vs(n.get(1),n.get(3)),i=new A(n.popFirst(5));return r.isEqual(t)||h("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+t.projectId+"/"+t.database+") instead."),i},e}();function Yu(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Gu=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(a.__extends)(t,e),t.prototype.convertBytes=function(e){return new Qs(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ps(this.firestore,null,t)},t}(Ku),zu=function(){function e(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=iu(e)}return e.prototype.set=function(e,t,n){this._verifyNotCommitted();var r=Qu(e,this._firestore),i=Yu(r._converter,t,n),o=ou(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,ft.none())),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=Qu(e,this._firestore);return t instanceof xs&&(t=t._delegate),o="string"==typeof t||t instanceof zs?du(this._dataReader,"WriteBatch.update",a._key,t,n,r):fu(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(o.toMutation(a._key,ft.exists(!0))),this},e.prototype.delete=function(e){this._verifyNotCommitted();var t=Qu(e,this._firestore);return this._mutations=this._mutations.concat(new Ct(t._key,ft.none())),this},e.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},e.prototype._verifyNotCommitted=function(){if(this._committed)throw new D(C.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},e}();function Qu(e,t){if(e instanceof xs&&(e=e._delegate),e.firestore!==t)throw new D(C.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Xu=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(a.__extends)(t,e),t.prototype.convertBytes=function(e){return new Qs(e)},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ps(this.firestore,null,t)},t}(Ku);function Ju(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];e=Cs(e,Ps);var o=Cs(e.firestore,Hs),a=iu(o);return t instanceof xs&&(t=t._delegate),Zu(o,[("string"==typeof t||t instanceof zs?du(a,"updateDoc",e._key,t,n,r):fu(a,"updateDoc",e._key,t)).toMutation(e._key,ft.exists(!0))])}function $u(e){for(var t,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];e instanceof xs&&(e=e._delegate);var s={includeMetadataChanges:!1},u=0;"object"!=typeof i[u]||qs(i[u])||(s=i[u],u++);var c,l,h,f={includeMetadataChanges:s.includeMetadataChanges};if(qs(i[u])){var d=i[u];i[u]=null===(t=d.next)||void 0===t?void 0:t.bind(d),i[u+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[u+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(e instanceof Ps)l=Cs(e.firestore,Hs),h=De(e._key.path),c={next:function(t){i[u]&&i[u](ec(l,e,t))},error:i[u+1],complete:i[u+2]};else{var p=Cs(e,As);l=Cs(p.firestore,Hs),h=p._query;var v=new Xu(l);c={next:function(e){i[u]&&i[u](new ju(l,v,p,e))},error:i[u+1],complete:i[u+2]},Pu(e._query)}return function(e,t,n,r){var i=this,o=new Za(r),s=new ua(t,o,n);return e.asyncQueue.enqueueAndForget((function(){return Object(a.__awaiter)(i,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return t=ra,[4,hs(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Xo(),e.asyncQueue.enqueueAndForget((function(){return Object(a.__awaiter)(i,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return t=ia,[4,hs(e)];case 1:return[2,t.apply(void 0,[n.sent(),s])]}}))}))}))}}(Ws(l),h,f,c)}function Zu(e,t){return function(e,t){var n=this,r=new sr;return e.asyncQueue.enqueueAndForget((function(){return Object(a.__awaiter)(n,void 0,void 0,(function(){var n;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return n=wa,[4,ls(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(Ws(e),t)}function ec(e,t,n){var r=n.docs.get(t._key),i=new Xu(e);return new Cu(e,i,t._key,r,new ku(n.hasPendingWrites,n.fromCache),t._converter)}var tc=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this)._firestore=t,r}return Object(a.__extends)(t,e),t.prototype.get=function(t){var n=this,r=Qu(t,this._firestore),i=new Xu(this._firestore);return e.prototype.get.call(this,t).then((function(e){return new Cu(n._firestore,i,r._key,e._document,new ku(!1,!1),r._converter)}))},t}(function(){function e(e,t){this._firestore=e,this._transaction=t,this._dataReader=iu(e)}return e.prototype.get=function(e){var t=this,n=Qu(e,this._firestore),r=new Gu(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return p();var i=e[0];if(i instanceof oe)return new Tu(t._firestore,r,n._key,null,n._converter);if(i instanceof ie)return new Tu(t._firestore,r,i.key,i,n._converter);throw p()}))},e.prototype.set=function(e,t,n){var r=Qu(e,this._firestore),i=Yu(r._converter,t,n),o=ou(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},e.prototype.update=function(e,t,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=Qu(e,this._firestore);return t instanceof xs&&(t=t._delegate),o="string"==typeof t||t instanceof zs?du(this._dataReader,"Transaction.update",a._key,t,n,r):fu(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,o),this},e.prototype.delete=function(e){var t=Qu(e,this._firestore);return this._transaction.delete(t._key),this},e}());function nc(){if("undefined"==typeof Uint8Array)throw new D(C.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function rc(){if("undefined"==typeof atob)throw new D(C.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ic=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.fromBase64String=function(e){return rc(),new t(Qs.fromBase64String(e))},t.fromUint8Array=function(e){return nc(),new t(Qs.fromUint8Array(e))},t.prototype.toBase64=function(){return rc(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return nc(),this._delegate.toUint8Array()},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(xs),oc=function(){function e(){}return e.prototype.enableIndexedDbPersistence=function(e,t){return function(e,t){Gs(e=Cs(e,Hs));var n=Ws(e),r=e._freezeSettings(),i=new $a;return Ys(n,i,new Xa(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})},e.prototype.enableMultiTabIndexedDbPersistence=function(e){return function(e){Gs(e=Cs(e,Hs));var t=Ws(e),n=e._freezeSettings(),r=new $a;return Ys(t,r,new Ja(r,n.cacheSizeBytes))}(e._delegate)},e.prototype.clearIndexedDbPersistence=function(e){return function(e){var t=this;if(e._initialized&&!e._terminated)throw new D(C.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new sr;return e._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(a.__awaiter)(t,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return lr.At()?(t=e+"main",[4,lr.delete(t)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(wi(e._databaseId,e._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise}(e._delegate)},e}(),ac=function(e){function t(t,n,r){var i=this;return(i=e.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},t instanceof vs||(i.sa=t),i}return Object(a.__extends)(t,e),Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(e){e.merge&&delete(e=Object.assign(Object.assign({},this._delegate._getSettings()),e)).merge,this._delegate._setSettings(e)},t.prototype.useEmulator=function(e,t){!function(e,t,n){var r=(e=Cs(e,Ns))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==t&&f("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},r),{host:t+":"+n,ssl:!1}))}(this._delegate,e,t)},t.prototype.enableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return Object(a.__awaiter)(t,void 0,void 0,(function(){var t,n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return[4,ss(e)];case 1:return t=r.sent(),[4,cs(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!0),function(e){var t=m(e);return t.Qr.delete(0),Io(t)}(n))]}}))}))}))}(Ws(Cs(this._delegate,Hs)))},t.prototype.disableNetwork=function(){return function(e){var t=this;return e.asyncQueue.enqueue((function(){return Object(a.__awaiter)(t,void 0,void 0,(function(){var t,n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return[4,ss(e)];case 1:return t=r.sent(),[4,cs(e)];case 2:return n=r.sent(),[2,(t.setNetworkEnabled(!1),function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return(t=m(e)).Qr.add(0),[4,So(t)];case 1:return n.sent(),t.jr.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ws(Cs(this._delegate,Hs)))},t.prototype.enablePersistence=function(e){var t=!1,n=!1;return e&&Ts("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(e){var t=this,n=new sr;return e.asyncQueue.enqueueAndForget((function(){return Object(a.__awaiter)(t,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return t=ka,[4,ls(e)];case 1:return[2,t.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ws(Cs(this._delegate,Hs)))},t.prototype.onSnapshotsInSync=function(e){return function(e,t){return function(e,t){var n=this,r=new Za(t);return e.asyncQueue.enqueueAndForget((function(){return Object(a.__awaiter)(n,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return t=function(e,t){m(e).Zr.add(t),t.next()},[4,hs(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Xo(),e.asyncQueue.enqueueAndForget((function(){return Object(a.__awaiter)(n,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return t=function(e,t){m(e).Zr.delete(t)},[4,hs(e)];case 1:return[2,t.apply(void 0,[n.sent(),r])]}}))}))}))}}(Ws(e=Cs(e,Hs)),qs(t)?t:{next:t})}(this._delegate,e)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.sa)throw new D(C.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new wc(this,Ms(this._delegate,e))}catch(e){throw dc(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(e){try{return new fc(this,Ls(this._delegate,e))}catch(e){throw dc(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(e){try{return new yc(this,function(e,t){if(e=Cs(e,Ns),Os("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new D(C.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new As(e,null,function(e){return new ke(N.emptyPath(),e)}(t))}(this._delegate,e))}catch(e){throw dc(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(e){var t=this;return function(e,t){return function(e,t){var n=this,r=new sr;return e.asyncQueue.enqueueAndForget((function(){return Object(a.__awaiter)(n,void 0,void 0,(function(){var n;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,function(e){return as(e).then((function(e){return e.datastore}))}(e)];case 1:return n=i.sent(),new ts(e.asyncQueue,n,t,r).run(),[2]}}))}))})),r.promise}(Ws(e),(function(n){return t(new tc(e,n))}))}(this._delegate,(function(n){return e(new cc(t,n))}))},t.prototype.batch=function(){var e=this;return Ws(this._delegate),new lc(new zu(this._delegate,(function(t){return Zu(e._delegate,t)})))},t.prototype.loadBundle=function(e){throw new D(C.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(e){throw new D(C.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(xs),sc=function(e){function t(t){var n=this;return(n=e.call(this)||this).firestore=t,n}return Object(a.__extends)(t,e),t.prototype.convertBytes=function(e){return new ic(new Qs(e))},t.prototype.convertReference=function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return fc.ia(t,this.firestore,null)},t}(Ku);function uc(e){var t;t=e,u.setLogLevel(t)}var cc=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this)._firestore=t,r._userDataWriter=new sc(t),r}return Object(a.__extends)(t,e),t.prototype.get=function(e){var t=this,n=Oc(e);return this._delegate.get(n).then((function(e){return new mc(t._firestore,new Cu(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n._converter))}))},t.prototype.set=function(e,t,n){var r=Oc(e);return n?(Es("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},t.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Oc(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,Object(a.__spreadArray)([s,t,n],i)),this},t.prototype.delete=function(e){var t=Oc(e);return this._delegate.delete(t),this},t}(xs),lc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.set=function(e,t,n){var r=Oc(e);return n?(Es("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this},t.prototype.update=function(e,t,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Oc(e);return 2===arguments.length?this._delegate.update(s,t):(r=this._delegate).update.apply(r,Object(a.__spreadArray)([s,t,n],i)),this},t.prototype.delete=function(e){var t=Oc(e);return this._delegate.delete(t),this},t.prototype.commit=function(){return this._delegate.commit()},t}(xs),hc=function(e){function t(t,n,r){var i=this;return(i=e.call(this,r)||this)._firestore=t,i._userDataWriter=n,i}return Object(a.__extends)(t,e),t.prototype.fromFirestore=function(e,t){var n=new Du(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new gc(this._firestore,n),null!=t?t:{})},t.prototype.toFirestore=function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)},t.ra=function(e,n){var r=t.oa,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new sc(e),n),i.set(n,o)),o},t}(xs);hc.oa=new WeakMap;var fc=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).firestore=t,r._userDataWriter=new sc(t),r}return Object(a.__extends)(t,e),t.ca=function(e,n,r){if(e.length%2!=0)throw new D(C.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Ps(n._delegate,r,new A(e)))},t.ia=function(e,n,r){return new t(n,new Ps(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new wc(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(e){try{return new wc(this.firestore,Ms(this._delegate,e))}catch(e){throw dc(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(e){return e instanceof xs&&(e=e._delegate),e instanceof Ps&&Fs(this._delegate,e)},t.prototype.set=function(e,t){t=Es("DocumentReference.set",t);try{return function(e,t,n){e=Cs(e,Ps);var r=Cs(e.firestore,Hs),i=Yu(e._converter,t,n);return Zu(r,[ou(iu(r),"setDoc",e._key,i,null!==e._converter,n).toMutation(e._key,ft.none())])}(this._delegate,e,t)}catch(e){throw dc(e,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Ju(this._delegate,e):Ju.apply(void 0,Object(a.__spreadArray)([this._delegate,e,t],n))}catch(e){throw dc(e,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Zu(Cs((e=this._delegate).firestore,Hs),[new Ct(e._key,ft.none())]);var e},t.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=pc(t),i=vc(t,(function(t){return new mc(e.firestore,new Cu(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))}));return $u(this._delegate,r,i)},t.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Cs(e,Ps);var t=Cs(e.firestore,Hs),n=Ws(t),r=new Xu(t);return function(e,t){var n=this,r=new sr;return e.asyncQueue.enqueueAndForget((function(){return Object(a.__awaiter)(n,void 0,void 0,(function(){var n;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(e,t){var n=m(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.Kn.In(e,t)}))}(e,t)];case 1:return(i=o.sent())instanceof ie?n.resolve(i):i instanceof oe?n.resolve(null):n.reject(new D(C.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Jo(r,"Failed to get document '"+t+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,us(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._key).then((function(n){return new Cu(t,r,e._key,n,new ku(n instanceof ie&&n.hasLocalMutations,!0),e._converter)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Cs(e,Ps);var t=Cs(e.firestore,Hs);return fs(Ws(t),e._key,{source:"server"}).then((function(n){return ec(t,e,n)}))}(this._delegate):function(e){e=Cs(e,Ps);var t=Cs(e.firestore,Hs);return fs(Ws(t),e._key).then((function(n){return ec(t,e,n)}))}(this._delegate)).then((function(e){return new mc(t.firestore,new Cu(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(hc.ra(this.firestore,e)):this._delegate.withConverter(null))},t}(xs);function dc(e,t,n){return e.message=e.message.replace(t,n),e}function pc(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if("object"==typeof r&&!qs(r))return r}return{}}function vc(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=qs(e[0])?e[0]:qs(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var mc=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this)._firestore=t,r}return Object(a.__extends)(t,e),Object.defineProperty(t.prototype,"ref",{get:function(){return new fc(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(e){return this._delegate.data(e)},t.prototype.get=function(e,t){return this._delegate.get(e,t)},t.prototype.isEqual=function(e){return xu(this._delegate,e._delegate)},t}(xs),gc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.prototype.data=function(e){return this._delegate.data(e)},t}(mc),yc=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this).firestore=t,r._userDataWriter=new sc(t),r}return Object(a.__extends)(t,e),t.prototype.where=function(e,n,r){try{return new t(this.firestore,Ru(this._delegate,function(e,t,n){var r=t,i=Su("where",e);return new Mu(i,r,n)}(e,n,r)))}catch(e){throw dc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Ru(this._delegate,function(e,t){void 0===t&&(t="asc");var n=t,r=Su("orderBy",e);return new Lu(r,n)}(e,n)))}catch(e){throw dc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Ru(this._delegate,function(e){return Ds("limit",e),new Fu("limit",e,"F")}(e)))}catch(e){throw dc(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Ru(this._delegate,function(e){return Ds("limitToLast",e),new Fu("limitToLast",e,"L")}(e)))}catch(e){throw dc(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ru(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Uu("startAt",e,!0)}.apply(void 0,e)))}catch(e){throw dc(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ru(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Uu("startAfter",e,!1)}.apply(void 0,e)))}catch(e){throw dc(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ru(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Vu("endBefore",e,!0)}.apply(void 0,e)))}catch(e){throw dc(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ru(this._delegate,function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new Vu("endAt",e,!1)}.apply(void 0,e)))}catch(e){throw dc(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(e){return Us(this._delegate,e._delegate)},t.prototype.get=function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=Cs(e,As);var t=Cs(e.firestore,Hs),n=Ws(t),r=new Xu(t);return function(e,t){var n=this,r=new sr;return e.asyncQueue.enqueueAndForget((function(){return Object(a.__awaiter)(n,void 0,void 0,(function(){var n;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return n=function(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,Mi(e,t,!0)];case 1:return u=a.sent(),r=new pa(t,u.jn),i=r.Io(u.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=Jo(s,"Failed to execute query '"+t+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,us(e)];case 1:return[2,n.apply(void 0,[i.sent(),t,r])]}}))}))})),r.promise}(n,e._query).then((function(n){return new ju(t,r,e,n)}))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=Cs(e,As);var t=Cs(e.firestore,Hs),n=Ws(t),r=new Xu(t);return ds(n,e._query,{source:"server"}).then((function(n){return new ju(t,r,e,n)}))}(this._delegate):function(e){e=Cs(e,As);var t=Cs(e.firestore,Hs),n=Ws(t),r=new Xu(t);return Pu(e._query),ds(n,e._query).then((function(n){return new ju(t,r,e,n)}))}(this._delegate)).then((function(e){return new _c(t.firestore,new ju(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))},t.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=pc(t),i=vc(t,(function(t){return new _c(e.firestore,new ju(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return $u(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(hc.ra(this.firestore,e)):this._delegate.withConverter(null))},t}(xs),bc=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this)._firestore=t,r}return Object(a.__extends)(t,e),Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new gc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(xs),_c=function(e){function t(t,n){var r=this;return(r=e.call(this,n)||this)._firestore=t,r}return Object(a.__extends)(t,e),Object.defineProperty(t.prototype,"query",{get:function(){return new yc(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var e=this;return this._delegate.docs.map((function(t){return new gc(e._firestore,t)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new bc(t._firestore,e)}))},t.prototype.forEach=function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new gc(n._firestore,r))}))},t.prototype.isEqual=function(e){return xu(this._delegate,e._delegate)},t}(xs),wc=function(e){function t(t,n){var r=this;return(r=e.call(this,t,n)||this).firestore=t,r._delegate=n,r}return Object(a.__extends)(t,e),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return e?new fc(this.firestore,e):null},enumerable:!1,configurable:!0}),t.prototype.doc=function(e){try{return new fc(this.firestore,void 0===e?Ls(this._delegate):Ls(this._delegate,e))}catch(e){throw dc(e,"doc()","CollectionReference.doc()")}},t.prototype.add=function(e){var t=this;return function(e,t){var n=Cs(e.firestore,Hs),r=Ls(e),i=Yu(e._converter,t);return Zu(n,[ou(iu(e.firestore),"addDoc",r._key,i,null!==e._converter,{}).toMutation(r._key,ft.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new fc(t.firestore,e)}))},t.prototype.isEqual=function(e){return Fs(this._delegate,e._delegate)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(hc.ra(this.firestore,e)):this._delegate.withConverter(null))},t}(yc);function Oc(e){return e instanceof xs&&(e=e._delegate),Cs(e,Ps)}var Ec=function(e){function t(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.call(this,new(zs.bind.apply(zs,Object(a.__spreadArray)([void 0],t))))||this}return Object(a.__extends)(t,e),t.documentId=function(){return new t(P.keyField().canonicalString())},t.prototype.isEqual=function(e){return e instanceof xs&&(e=e._delegate),e instanceof zs&&this._delegate._internalPath.isEqual(e._internalPath)},t}(xs),Tc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(a.__extends)(t,e),t.serverTimestamp=function(){var e=new uu("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new au("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new cu("arrayUnion",e)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new lu("arrayRemove",e)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(e){return new hu("increment",e)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(e){return this._delegate.isEqual(e._delegate)},t}(xs)}).call(this,n(225))},957:function(e,t,n){"use strict";n.r(t);var r,i=n(348),o=n(392),a=n(1),s=n(375),u=n(733),c="0.4.22",l=1e4,h="w:0.4.22",f="FIS_v2",d=36e5,p=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),v=new s.b("installations","Installations",p);function m(e){return e instanceof s.c&&e.code.includes("request-failed")}function g(e){return"https://firebaseinstallations.googleapis.com/v1/projects/"+e.projectId+"/installations"}function y(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function b(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.json()];case 1:return n=i.sent(),r=n.error,[2,v.create("request-failed",{requestName:e,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function _(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function w(e,t){var n=t.refreshToken,r=_(e);return r.append("Authorization",function(e){return"FIS_v2 "+e}(n)),r}function O(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return[4,e()];case 1:return(t=n.sent()).status>=500&&t.status<600?[2,e()]:[2,t]}}))}))}function E(e,t){var n=t.fid;return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,r,i,o,s,u;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return t=g(e),r=_(e),i={fid:n,authVersion:f,appId:e.appId,sdkVersion:h},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,O((function(){return fetch(t,o)}))];case 1:return(s=a.sent()).ok?[4,s.json()]:[3,3];case 2:return u=a.sent(),[2,{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:y(u.authToken)}];case 3:return[4,b("Create Installation",s)];case 4:throw a.sent()}}))}))}function T(e){return new Promise((function(t){setTimeout(t,e)}))}var I=/^[cdef][\w-]{21}$/;function S(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return(t=e,btoa(String.fromCharCode.apply(String,Object(a.__spreadArray)([],Object(a.__read)(t)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return I.test(t)?t:""}catch(n){return""}}function k(e){return e.appName+"!"+e.appId}var C=new Map;function D(e,t){var n=k(e);j(n,t),function(e,t){var n=x();n&&n.postMessage({key:e,fid:t});P()}(n,t)}function j(e,t){var n,r,i=C.get(e);if(i)try{for(var o=Object(a.__values)(i),s=o.next();!s.done;s=o.next()){(0,s.value)(t)}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var N=null;function x(){return!N&&"BroadcastChannel"in self&&((N=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){j(e.data.key,e.data.fid)}),N}function P(){0===C.size&&N&&(N.close(),N=null)}var A,R,M="firebase-installations-store",L=null;function F(){return L||(L=Object(u.openDb)("firebase-installations-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(M)}}))),L}function U(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return n=k(e),[4,F()];case 1:return r=a.sent(),i=r.transaction(M,"readwrite"),[4,(o=i.objectStore(M)).get(n)];case 2:return s=a.sent(),[4,o.put(t,n)];case 3:return a.sent(),[4,i.complete];case 4:return a.sent(),s&&s.fid===t.fid||D(e,t.fid),[2,t]}}))}))}function V(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return t=k(e),[4,F()];case 1:return n=i.sent(),[4,(r=n.transaction(M,"readwrite")).objectStore(M).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function q(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return n=k(e),[4,F()];case 1:return r=a.sent(),i=r.transaction(M,"readwrite"),[4,(o=i.objectStore(M)).get(n)];case 2:return s=a.sent(),void 0!==(u=t(s))?[3,4]:[4,o.delete(n)];case 3:return a.sent(),[3,6];case 4:return[4,o.put(u,n)];case 5:a.sent(),a.label=6;case 6:return[4,i.complete];case 7:return a.sent(),!u||s&&s.fid===u.fid||D(e,u.fid),[2,u]}}))}))}function B(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,q(e,(function(n){var r=function(e){return K(e||{fid:S(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(v.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,E(e,t)];case 1:return n=i.sent(),[2,U(e,n)];case 2:return m(r=i.sent())&&409===r.customData.serverCode?[4,V(e)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,U(e,{fid:t.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:H(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,t]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:t}]}}))}))}function H(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return[4,W(e)];case 1:t=o.sent(),o.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,T(100)];case 3:return o.sent(),[4,W(e)];case 4:return t=o.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,B(e)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}}))}))}function W(e){return q(e,(function(e){if(!e)throw v.create("installation-not-found");return K(e)}))}function K(e){return 1===(t=e).registrationStatus&&t.registrationTime+l<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Y(e,t){var n=e.appConfig,r=e.platformLoggerProvider;return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,i,o,s,u,c,l;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return e=function(e,t){var n=t.fid;return g(e)+"/"+n+"/authTokens:generate"}(n,t),i=w(n,t),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:h}},u={method:"POST",headers:i,body:JSON.stringify(s)},[4,O((function(){return fetch(e,u)}))];case 1:return(c=a.sent()).ok?[4,c.json()]:[3,3];case 2:return l=a.sent(),[2,y(l)];case 3:return[4,b("Generate Auth Token",c)];case 4:throw a.sent()}}))}))}function G(e,t){return void 0===t&&(t=!1),Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return[4,q(e.appConfig,(function(r){if(!Q(r))throw v.create("not-registered");var i=r.authToken;if(!t&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+d}(e)}(i))return r;if(1===i.requestStatus)return n=function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,z(e.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,T(100)];case 3:return i.sent(),[4,z(e.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,G(e,t)]:[2,r]}}))}))}(e,t),r;if(!navigator.onLine)throw v.create("app-offline");var o=function(e){var t={requestStatus:1,requestTime:Date.now()};return Object(a.__assign)(Object(a.__assign)({},e),{authToken:t})}(r);return n=function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,Y(e,t)];case 1:return n=o.sent(),i=Object(a.__assign)(Object(a.__assign)({},t),{authToken:n}),[4,U(e.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!m(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,V(e.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Object(a.__assign)(Object(a.__assign)({},t),{authToken:{requestStatus:0}}),[4,U(e.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(e,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function z(e){return q(e,(function(e){if(!Q(e))throw v.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+l<Date.now()?Object(a.__assign)(Object(a.__assign)({},e),{authToken:{requestStatus:0}}):e}))}function Q(e){return void 0!==e&&2===e.registrationStatus}function X(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return[4,B(e)];case 1:return(t=n.sent().registrationPromise)?[4,t]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}function J(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return n=function(e,t){var n=t.fid;return g(e)+"/"+n}(e,t),r=w(e,t),i={method:"DELETE",headers:r},[4,O((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,b("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}function $(e,t){var n=e.appConfig;return function(e,t){x();var n=k(e),r=C.get(n);r||(r=new Set,C.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=k(e),r=C.get(n);r&&(r.delete(t),0===r.size&&C.delete(n),P())}(n,t)}}function Z(e){return v.create("missing-app-config-values",{valueName:e})}(A=i.a).INTERNAL.registerComponent(new o.a("installations",(function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:function(e){var t,n;if(!e||!e.options)throw Z("App Configuration");if(!e.name)throw Z("App Name");try{for(var r=Object(a.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw Z(o)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){return function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,B(e.appConfig)];case 1:return t=i.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):G(e).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(e){return function(e,t){return void 0===t&&(t=!1),Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return[4,X(e.appConfig)];case 1:return n.sent(),[4,G(e,t)];case 2:return[2,n.sent().token]}}))}))}(n,e)},delete:function(){return function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return[4,q(t=e.appConfig,(function(e){if(!e||0!==e.registrationStatus)return e}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw v.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw v.create("app-offline");case 3:return[4,J(t,n)];case 4:return r.sent(),[4,V(t)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(e){return $(n,e)}}}),"PUBLIC")),A.registerVersion("@firebase/installations",c);var ee,te=((R={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',R["only-available-in-window"]="This method is available in a Window context.",R["only-available-in-sw"]="This method is available in a service worker context.",R["permission-default"]="The notification permission was not granted and dismissed instead.",R["permission-blocked"]="The notification permission was not granted and blocked instead.",R["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",R["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",R["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",R["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",R["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",R["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",R["token-update-no-token"]="FCM returned no token when updating the user to push.",R["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",R["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",R["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",R["invalid-vapid-key"]="The public VAPID key must be a string.",R["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",R),ne=new s.b("messaging","Messaging",te),re="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ie="google.c.a.c_id";function oe(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,Object(a.__spreadArray)([],Object(a.__read)(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ae(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}!function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(ee||(ee={}));var se="fcm_token_details_db",ue="fcm_token_object_Store";function ce(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r=this;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=i.sent(),!t.map((function(e){return e.name})).includes(se))return[2,null];i.label=2;case 2:return n=null,[4,Object(u.openDb)(se,5,(function(t){return Object(a.__awaiter)(r,void 0,void 0,(function(){var r,i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return t.oldVersion<2?[2]:t.objectStoreNames.contains(ue)?[4,(r=t.transaction.objectStore(ue)).index("fcmSenderId").get(e)]:[2];case 1:return i=a.sent(),[4,r.clear()];case 2:if(a.sent(),!i)return[2];if(2===t.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(s=o.createTime)&&void 0!==s?s:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"===typeof o.vapidKey?o.vapidKey:oe(o.vapidKey)}}}else(3===t.oldVersion||4===t.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:oe(o.auth),p256dh:oe(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:oe(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,Object(u.deleteDb)(se)];case 4:return i.sent(),[4,Object(u.deleteDb)("fcm_vapid_details_db")];case 5:return i.sent(),[4,Object(u.deleteDb)("undefined")];case 6:return i.sent(),[2,le(n)?n:null]}}))}))}function le(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}var he="firebase-messaging-store",fe=null;function de(){return fe||(fe=Object(u.openDb)("firebase-messaging-database",1,(function(e){switch(e.oldVersion){case 0:e.createObjectStore(he)}}))),fe}function pe(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return t=ge(e),[4,de()];case 1:return[4,i.sent().transaction(he).objectStore(he).get(t)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,ce(e.appConfig.senderId)];case 4:return(r=i.sent())?[4,ve(e,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function ve(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return n=ge(e),[4,de()];case 1:return r=o.sent(),[4,(i=r.transaction(he,"readwrite")).objectStore(he).put(t,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,t]}}))}))}function me(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return t=ge(e),[4,de()];case 1:return n=i.sent(),[4,(r=n.transaction(he,"readwrite")).objectStore(he).delete(t)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function ge(e){return e.appConfig.appId}function ye(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return[4,Oe(e)];case 1:n=a.sent(),r=Ee(t),i={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(we(e.appConfig),i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),ne.create("token-subscribe-failed",{errorInfo:s});case 6:if(o.error)throw u=o.error.message,ne.create("token-subscribe-failed",{errorInfo:u});if(!o.token)throw ne.create("token-subscribe-no-token");return[2,o.token]}}))}))}function be(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return[4,Oe(e)];case 1:n=a.sent(),r=Ee(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(we(e.appConfig)+"/"+t.token,i)];case 3:return[4,a.sent().json()];case 4:return o=a.sent(),[3,6];case 5:throw s=a.sent(),ne.create("token-update-failed",{errorInfo:s});case 6:if(o.error)throw u=o.error.message,ne.create("token-update-failed",{errorInfo:u});if(!o.token)throw ne.create("token-update-no-token");return[2,o.token]}}))}))}function _e(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return[4,Oe(e)];case 1:n=a.sent(),r={method:"DELETE",headers:n},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(we(e.appConfig)+"/"+t,r)];case 3:return[4,a.sent().json()];case 4:if((i=a.sent()).error)throw o=i.error.message,ne.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw s=a.sent(),ne.create("token-unsubscribe-failed",{errorInfo:s});case 6:return[2]}}))}))}function we(e){return"https://fcmregistrations.googleapis.com/v1/projects/"+e.projectId+"/registrations"}function Oe(e){var t=e.appConfig,n=e.installations;return Object(a.__awaiter)(this,void 0,void 0,(function(){var e;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return e=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}}))}))}function Ee(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==re&&(o.web.applicationPubKey=i),o}function Te(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i,o,s;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw ne.create("permission-blocked");return[4,Ce(t,n)];case 1:return r=a.sent(),[4,pe(e)];case 2:return i=a.sent(),o={vapidKey:n,swScope:t.scope,endpoint:r.endpoint,auth:oe(r.getKey("auth")),p256dh:oe(r.getKey("p256dh"))},i?[3,3]:[2,ke(e,o)];case 3:if(function(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,o=t.p256dh===e.p256dh;return n&&r&&i&&o}(i.subscriptionOptions,o))return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,_e(e,i.token)];case 5:return a.sent(),[3,7];case 6:return s=a.sent(),console.warn(s),[3,7];case 7:return[2,ke(e,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,Se({token:i.token,createTime:Date.now(),subscriptionOptions:o},e,t)]:[2,i.token];case 9:return[2]}}))}))}function Ie(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,pe(e)];case 1:return(n=i.sent())?[4,_e(e,n.token)]:[3,4];case 2:return i.sent(),[4,me(e)];case 3:i.sent(),i.label=4;case 4:return[4,t.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function Se(e,t,n){return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return Object(a.__generator)(this,(function(s){switch(s.label){case 0:return s.trys.push([0,3,,5]),[4,be(t,e)];case 1:return r=s.sent(),i=Object(a.__assign)(Object(a.__assign)({},e),{token:r,createTime:Date.now()}),[4,ve(t,i)];case 2:return s.sent(),[2,r];case 3:return o=s.sent(),[4,Ie(t,n)];case 4:throw s.sent(),o;case 5:return[2]}}))}))}function ke(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return[4,ye(e,t)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:t},[4,ve(e,r)];case 2:return i.sent(),[2,r.token]}}))}))}function Ce(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return[4,e.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ae(t)})]}}))}))}function De(e){return"object"===typeof e&&!!e&&ie in e}function je(e){return new Promise((function(t){setTimeout(t,e)}))}var Ne=function(){function e(e){var t=this;this.firebaseDependencies=e,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(e){e.waitUntil(t.onPush(e))})),self.addEventListener("pushsubscriptionchange",(function(e){e.waitUntil(t.onSubChange(e))})),self.addEventListener("notificationclick",(function(e){e.waitUntil(t.onNotificationClick(e))}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.setBackgroundMessageHandler=function(e){if(this.isOnBackgroundMessageUsed=!1,!e||"function"!==typeof e)throw ne.create("invalid-bg-handler");this.bgMessageHandler=e},e.prototype.onBackgroundMessage=function(e){var t=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=e,function(){t.bgMessageHandler=null}},e.prototype.getToken=function(){var e,t;return Object(a.__awaiter)(this,void 0,void 0,(function(){var n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,pe(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(t=null===(e=null===n||void 0===n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==t?t:re,r.label=2;case 2:return[2,Te(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},e.prototype.deleteToken=function(){return Ie(this.firebaseDependencies,self.registration)},e.prototype.requestPermission=function(){throw ne.create("only-available-in-window")},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw ne.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw ne.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(){throw ne.create("only-available-in-window")},e.prototype.onMessage=function(){throw ne.create("only-available-in-window")},e.prototype.onTokenRefresh=function(){throw ne.create("only-available-in-window")},e.prototype.onPush=function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i;return Object(a.__generator)(this,(function(o){switch(o.label){case 0:return(t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(n){return null}}(e))?[4,Re()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(e){return e.some((function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,Ae(n,t)]:(r=!1,t.notification?[4,Me(xe(t))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(e){var t={from:e.from,collapseKey:e.collapse_key};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}(t),"function"===typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,je(1e3)]);case 4:return o.sent(),[2]}}))}))},e.prototype.onSubChange=function(e){var t,n;return Object(a.__awaiter)(this,void 0,void 0,(function(){var r;return Object(a.__generator)(this,(function(i){switch(i.label){case 0:return e.newSubscription?[3,2]:[4,Ie(this.firebaseDependencies,self.registration)];case 1:return i.sent(),[2];case 2:return[4,pe(this.firebaseDependencies)];case 3:return r=i.sent(),[4,Ie(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,Te(this.firebaseDependencies,self.registration,null!==(n=null===(t=null===r||void 0===r?void 0:r.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==n?n:re)];case 5:return i.sent(),[2]}}))}))},e.prototype.onNotificationClick=function(e){var t,n;return Object(a.__awaiter)(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(a.__generator)(this,(function(a){switch(a.label){case 0:return(r=null===(n=null===(t=e.notification)||void 0===t?void 0:t.data)||void 0===n?void 0:n.FCM_MSG)?e.action?[2]:(e.stopImmediatePropagation(),e.notification.close(),(i=function(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;if(i)return i;return De(e.data)?self.location.origin:null}(r))?(o=new URL(i,self.location.href),s=new URL(self.location.origin),o.host!==s.host?[2]:[4,Pe(o)]):[2]):[2];case 1:return(u=a.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return u=a.sent(),[4,je(3e3)];case 3:return a.sent(),[3,6];case 4:return[4,u.focus()];case 5:u=a.sent(),a.label=6;case 6:return u?(r.messageType=ee.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,u.postMessage(r)]):[2]}}))}))},e}();function xe(e){var t,n=Object(a.__assign)({},e.notification);return n.data=((t={}).FCM_MSG=e,t),n}function Pe(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n,r,i,o,s,u;return Object(a.__generator)(this,(function(c){switch(c.label){case 0:return[4,Re()];case 1:t=c.sent();try{for(n=Object(a.__values)(t),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),e.host===o.host)return[2,i]}catch(l){s={error:l}}finally{try{r&&!r.done&&(u=n.return)&&u.call(n)}finally{if(s)throw s.error}}return[2,null]}}))}))}function Ae(e,t){var n,r;t.isFirebaseMessaging=!0,t.messageType=ee.PUSH_RECEIVED;try{for(var i=Object(a.__values)(e),o=i.next();!o.done;o=i.next()){o.value.postMessage(t)}}catch(s){n={error:s}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function Re(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Me(e){var t,n=e.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(t=e.title)&&void 0!==t?t:"",e)}var Le=function(){function e(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(e){return t.messageEventListener(e)}))}return Object.defineProperty(e.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),e.prototype.messageEventListener=function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return(t=e.data).isFirebaseMessaging?(this.onMessageCallback&&t.messageType===ee.PUSH_RECEIVED&&("function"===typeof this.onMessageCallback?this.onMessageCallback(function(e){return delete e.messageType,delete e.isFirebaseMessaging,e}(Object.assign({},t))):this.onMessageCallback.next(Object.assign({},t))),De(n=t.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(t.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},e.prototype.getVapidKey=function(){return this.vapidKey},e.prototype.getSwReg=function(){return this.swRegistration},e.prototype.getToken=function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw ne.create("permission-blocked");return[4,this.updateVapidKey(null===e||void 0===e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null===e||void 0===e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,Te(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},e.prototype.updateVapidKey=function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=re),[2]}))}))},e.prototype.updateSwReg=function(e){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw ne.create("invalid-sw-registration");return this.swRegistration=e,[2]}}))}))},e.prototype.registerDefaultSw=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(a.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=n.sent(),ne.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},e.prototype.deleteToken=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){return Object(a.__generator)(this,(function(e){switch(e.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:return[2,Ie(this.firebaseDependencies,this.swRegistration)]}}))}))},e.prototype.requestPermission=function(){return Object(a.__awaiter)(this,void 0,void 0,(function(){var e;return Object(a.__generator)(this,(function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?ne.create("permission-blocked"):ne.create("permission-default")}}))}))},e.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw ne.create("use-vapid-key-after-get-token");if("string"!==typeof e||0===e.length)throw ne.create("invalid-vapid-key");this.vapidKey=e},e.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw ne.create("invalid-sw-registration");if(this.swRegistration)throw ne.create("use-sw-after-get-token");this.swRegistration=e},e.prototype.onMessage=function(e){var t=this;return this.onMessageCallback=e,function(){t.onMessageCallback=null}},e.prototype.setBackgroundMessageHandler=function(){throw ne.create("only-available-in-sw")},e.prototype.onBackgroundMessage=function(){throw ne.create("only-available-in-sw")},e.prototype.onTokenRefresh=function(){return function(){}},e.prototype.logEvent=function(e,t){return Object(a.__awaiter)(this,void 0,void 0,(function(){var n;return Object(a.__generator)(this,(function(r){switch(r.label){case 0:return n=function(e){switch(e){case ee.NOTIFICATION_CLICKED:return"notification_open";case ee.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(e),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:t["google.c.a.c_id"],message_name:t["google.c.a.c_l"],message_time:t["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},e}();function Fe(e){return ne.create("missing-app-config-values",{valueName:e})}var Ue={isSupported:Ve};function Ve(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}i.a.INTERNAL.registerComponent(new o.a("messaging",(function(e){var t=e.getProvider("app").getImmediate(),n={app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw Fe("App Configuration Object");if(!e.name)throw Fe("App Name");var r=e.options;try{for(var i=Object(a.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw Fe(s)}}catch(u){t={error:u}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!Ve())throw ne.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new Ne(n):new Le(n)}),"PUBLIC").setServiceProps(Ue))},959:function(e,t,n){"use strict";n.r(t);var r,i=n(348),o=(n(430),n(375),n(732),n(773)),a=n(392),s={Firestore:o.f,GeoPoint:o.r,Timestamp:o.d,Blob:o.e,Transaction:o.n,WriteBatch:o.a,DocumentReference:o.b,DocumentSnapshot:o.j,Query:o.l,QueryDocumentSnapshot:o.q,QuerySnapshot:o.p,CollectionReference:o.m,FieldPath:o.o,FieldValue:o.k,setLogLevel:o.i,CACHE_SIZE_UNLIMITED:o.g};(function(e,t){e.INTERNAL.registerComponent(new a.a("firestore",(function(e){return function(e,t){return new o.f(e,new o.c(e,t),new o.h)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},s)))})(r=i.a),r.registerVersion("@firebase/firestore","2.2.1")},960:function(e,t,n){"use strict";n.r(t);var r=n(348),i=n(1),o=n(392),a={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},s=function(e){function t(n,r,i){var o=e.call(this,r)||this;return Object.setPrototypeOf(o,t.prototype),o.code=n,o.details=i,o}return Object(i.__extends)(t,e),t}(Error);var u=function(){function e(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then((function(e){return n.auth=e}),(function(){})),this.messaging||t.get().then((function(e){return n.messaging=e}),(function(){}))}return e.prototype.getAuthToken=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){var e;return Object(i.__generator)(this,(function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},e.prototype.getInstanceIdToken=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){return Object(i.__generator)(this,(function(e){if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]}))}))},e.prototype.getContext=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(i.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return e=n.sent(),[4,this.getInstanceIdToken()];case 2:return t=n.sent(),[2,{authToken:e,instanceIdToken:t}]}}))}))},e}();function c(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var l=function(){function e(){}return e.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"===typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map((function(e){return t.encode(e)}));if("function"===typeof e||"object"===typeof e)return c(e,(function(e){return t.encode(e)}));throw new Error("Data cannot be encoded in JSON: "+e)},e.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map((function(e){return t.decode(e)})):"function"===typeof e||"object"===typeof e?c(e,(function(e){return t.decode(e)})):e},e}();var h=function(){function e(e,t,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=e,this.fetchImpl=i,this.serializer=new l,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new u(t,n),this.cancelAllRequests=new Promise((function(e){o.deleteService=function(){return e()}}));try{var a=new URL(r);this.customDomain=a.origin,this.region="us-central1"}catch(s){this.customDomain=null,this.region=r}}return Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),e.prototype._url=function(e){var t=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+t+"/"+this.region+"/"+e:null!==this.customDomain?this.customDomain+"/"+e:"https://"+this.region+"-"+t+".cloudfunctions.net/"+e},e.prototype.useEmulator=function(e,t){this.emulatorOrigin="http://"+e+":"+t},e.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},e.prototype.httpsCallable=function(e,t){var n=this;return function(r){return n.call(e,r,t||{})}},e.prototype.postJSON=function(e,t,n){return Object(i.__awaiter)(this,void 0,void 0,(function(){var r,o;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:n["Content-Type"]="application/json",i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.fetchImpl(e,{method:"POST",body:JSON.stringify(t),headers:n})];case 2:return r=i.sent(),[3,4];case 3:return i.sent(),[2,{status:0,json:null}];case 4:o=null,i.label=5;case 5:return i.trys.push([5,7,,8]),[4,r.json()];case 6:return o=i.sent(),[3,8];case 7:return i.sent(),[3,8];case 8:return[2,{status:r.status,json:o}]}}))}))},e.prototype.call=function(e,t,n){return Object(i.__awaiter)(this,void 0,void 0,(function(){var r,o,u,c,l,h,d,p,v,m,g;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return r=this._url(e),t=this.serializer.encode(t),o={data:t},u={},[4,this.contextProvider.getContext()];case 1:return(c=i.sent()).authToken&&(u.Authorization="Bearer "+c.authToken),c.instanceIdToken&&(u["Firebase-Instance-ID-Token"]=c.instanceIdToken),l=n.timeout||7e4,h=function(e){var t,n=new Promise((function(n,r){t=setTimeout((function(){r(new s("deadline-exceeded","deadline-exceeded"))}),e)}));return{timer:t,promise:n}}(l),d=h.timer,p=h.promise,[4,Promise.race([f(d,this.postJSON(r,o,u)),p,f(d,this.cancelAllRequests)])];case 2:if(!(v=i.sent()))throw new s("cancelled","Firebase Functions instance was deleted.");if(m=function(e,t,n){var r=function(e){if(e>=200&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var u=t&&t.error;if(u){var c=u.status;if("string"===typeof c){if(!a[c])return new s("internal","internal");r=a[c],i=c}var l=u.message;"string"===typeof l&&(i=l),void 0!==(o=u.details)&&(o=n.decode(o))}}catch(h){}return"ok"===r?null:new s(r,i,o)}(v.status,v.json,this.serializer))throw m;if(!v.json)throw new s("internal","Response is not valid JSON object.");if("undefined"===typeof(g=v.json.data)&&(g=v.json.result),"undefined"===typeof g)throw new s("internal","Response is missing data field.");return[2,{data:this.serializer.decode(g)}]}}))}))},e}();function f(e,t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n;return Object(i.__generator)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),clearTimeout(e),[2,n]}}))}))}!function(e,t){var n={Functions:h};e.INTERNAL.registerComponent(new o.a("functions",(function(e,n){var r=n.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),a=e.getProvider("messaging");return new h(i,o,a,r,t)}),"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}(r.a,fetch.bind(self)),r.a.registerVersion("@firebase/functions","0.6.4")},961:function(e,t,n){"use strict";n.r(t);var r=n(348),i=n(1),o=n(375),a=n(392),s="firebasestorage.googleapis.com",u=function(e){function t(n,r){var i=e.call(this,c(n),"Firebase Storage: "+r+" ("+c(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,t.prototype),i}return Object(i.__extends)(t,e),t.prototype._codeEquals=function(e){return c(e)===this.code},Object.defineProperty(t.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e},enumerable:!1,configurable:!0}),t}(o.c);function c(e){return"storage/"+e}function l(){return new u("unknown","An unknown error occurred, please check the error payload for server response.")}function h(){return new u("canceled","User canceled the upload/download.")}function f(){return new u("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function d(e){return new u("invalid-argument",e)}function p(){return new u("app-deleted","The Firebase app was deleted.")}function v(e){return new u("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function m(e,t){return new u("invalid-format","String does not match format '"+e+"': "+t)}function g(e){throw new u("internal-error","Internal error: "+e)}var y={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},b=function(e,t){this.data=e,this.contentType=t||null};function _(e,t){switch(e){case y.RAW:return new b(w(t));case y.BASE64:case y.BASE64URL:return new b(O(e,t));case y.DATA_URL:return new b(function(e){var t=new E(e);return t.base64?O(y.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw m(y.DATA_URL,"Malformed data URL.")}return w(t)}(t.rest)}(t),new E(t).contentType)}throw l()}function w(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function O(e,t){switch(e){case y.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw m(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case y.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw m(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(c){throw m(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var E=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw m(y.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1);var r,i};var T,I={STATE_CHANGED:"state_changed"},S={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function k(e){switch(e){case"running":case"pausing":case"canceling":return S.RUNNING;case"paused":return S.PAUSED;case"success":return S.SUCCESS;case"canceled":return S.CANCELED;case"error":default:return S.ERROR}}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(T||(T={}));var C=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=T.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=T.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=T.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}return e.prototype.send=function(e,t,n,r){if(this.sent_)throw g("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw g("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw g("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw g("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},e}(),D=function(){function e(){}return e.prototype.createXhrIo=function(){return new C},e}(),j=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var n;try{n=e.makeFromUrl(t)}catch(r){return new e(t,"")}if(""===n.path)return n;throw new u("invalid-default-bucket","Invalid default bucket '"+t+"'.")},e.makeFromUrl=function(t){var n=null,r="([A-Za-z0-9.\\-_]+)";var i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var a=s.replace(/[.]/g,"\\."),c=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],l=0;l<c.length;l++){var h=c[l],f=h.regex.exec(t);if(f){var d=f[h.indices.bucket],p=f[h.indices.path];p||(p=""),n=new e(d,p),h.postModify(n);break}}if(null==n)throw function(e){return new u("invalid-url","Invalid URL '"+e+"'.")}(t);return n},e}(),N=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}();function x(e){return"string"===typeof e||e instanceof String}function P(e){return A()&&e instanceof Blob}function A(){return"undefined"!==typeof Blob}function R(e,t,n,r){if(r<t)throw d("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(r>n)throw d("Invalid value for '"+e+"'. Expected "+n+" or less.")}function M(e){return"https://"+s+"/v0"+e}function L(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}var F=function(){function e(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return e.prototype.start_=function(){var e=this;function t(t,n){var r,i=e.resolve_,o=e.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());void 0!==s?i(s):i()}catch(c){o(c)}else null!==a?((r=l()).serverResponse=a.getResponseText(),e.errorCallback_?o(e.errorCallback_(a,r)):o(r)):n.canceled?o(r=e.appDelete_?p():h()):o(r=new u("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?t(0,new U(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];c||(c=!0,t.apply(null,e))}function h(t){o=setTimeout((function(){o=null,e(f,u())}),t)}function f(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!c)if(e)l.call.apply(l,Object(i.__spreadArray)([null,e],t));else{var o;u()||a?l.call.apply(l,Object(i.__spreadArray)([null,e],t)):(r<64&&(r*=2),1===s?(s=2,o=0):o=1e3*(r+Math.random()),h(o))}}var d=!1;function p(e){d||(d=!0,c||(null!==o?(e||(s=2),clearTimeout(o),h(0)):e||(s=1)))}return h(0),setTimeout((function(){a=!0,p(!0)}),n),p}((function(t,n){if(n)t(!1,new U(!1,null,!0));else{var r=e.pool_.createXhrIo();e.pendingXhr_=r,null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(n){null!==e.progressCallback_&&n.removeUploadProgressListener(i),e.pendingXhr_=null;var r=(n=n).getErrorCode()===T.NO_ERROR,o=n.getStatus();if(r&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new U(a,n))}else{var s=n.getErrorCode()===T.ABORT;t(!1,new U(!1,null,s))}}))}function i(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)}}),t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},e}(),U=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function V(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function q(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=V();if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(A())return new Blob(e);throw new u("unsupported-environment","This browser doesn't seem to support creating Blobs")}var B=function(){function e(e,t){var n=0,r="";P(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,n){if(P(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}return new e(new Uint8Array(this.data_.buffer,t,n-t),!0)},e.getBlob=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(A()){var r=t.map((function(t){return t instanceof e?t.data_:t}));return new e(q.apply(null,r))}var i=t.map((function(e){return x(e)?_(y.RAW,e).data:e.data_})),o=0;i.forEach((function(e){o+=e.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]})),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}();function H(e){var t,n;try{t=JSON.parse(e)}catch(r){return null}return"object"!==typeof(n=t)||Array.isArray(n)?null:t}function W(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function K(e,t){return t}var Y=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||K},G=null;function z(){if(G)return G;var e=[];e.push(new Y("bucket")),e.push(new Y("generation")),e.push(new Y("metageneration")),e.push(new Y("name","fullPath",!0));var t=new Y("name");t.xform=function(e,t){return function(e){return!x(e)||e.length<2?e:W(e)}(t)},e.push(t);var n=new Y("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Y("timeCreated")),e.push(new Y("updated")),e.push(new Y("md5Hash",null,!0)),e.push(new Y("cacheControl",null,!0)),e.push(new Y("contentDisposition",null,!0)),e.push(new Y("contentEncoding",null,!0)),e.push(new Y("contentLanguage",null,!0)),e.push(new Y("contentType",null,!0)),e.push(new Y("metadata","customMetadata",!0)),G=e}function Q(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new j(n,r);return t._makeStorageReference(i)}})}(r,e),r}function X(e,t,n){var r=H(t);return null===r?null:Q(e,r,n)}function J(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function $(e,t,n){var r=H(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e._makeStorageReference(new j(t,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=e._makeStorageReference(new j(t,l.name)),r.items.push(s)}return r}(e,t,r)}var Z=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function ee(e){if(!e)throw l()}function te(e,t){return function(n,r){var i=X(e,r,t);return ee(null!==i),i}}function ne(e,t){return function(n,r){var i=X(e,r,t);return ee(null!==i),function(e,t){var n=H(t);if(null===n)return null;if(!x(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map((function(t){var n=e.bucket,r=e.fullPath;return M("/b/"+i(n)+"/o/"+i(r))+L({alt:"media",token:t})}))[0]}(i,r)}}function re(e){return function(t,n){var r,i,o;return 401===t.getStatus()?r=new u("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new u("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new u("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function ie(e){var t=re(e);return function(n,r){var i,o=t(n,r);return 404===n.getStatus()&&(i=e.path,o=new u("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function oe(e,t,n){var r=M(t.fullServerUrl()),i=e.maxOperationRetryTime,o=new Z(r,"GET",te(e,n),i);return o.errorHandler=ie(t),o}function ae(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=M(t.bucketOnlyServerUrl()),s=e.maxOperationRetryTime,u=new Z(a,"GET",function(e,t){return function(n,r){var i=$(e,t,r);return ee(null!==i),i}}(e,t.bucket),s);return u.urlParams=o,u.errorHandler=re(t),u}function se(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}var ue=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function ce(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){ee(!1)}return ee(!!n&&-1!==(t||["active"]).indexOf(n)),n}var le=262144;function he(e,t,n,r,i,o,a,s){var c=new ue(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new u("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var l=c.total-c.current,h=l;i>0&&(h=Math.min(h,i));var d=c.current,p=d+h,v={"X-Goog-Upload-Command":h===l?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},m=r.slice(d,p);if(null===m)throw f();var g=t.maxUploadRetryTime,y=new Z(n,"POST",(function(e,n){var i,a=ce(e,["active","final"]),s=c.current+h,u=r.size();return i="final"===a?te(t,o)(e,n):null,new ue(s,u,"final"===a,i)}),g);return y.headers=v,y.body=m.uploadData(),y.progressCallback=s||null,y.errorHandler=re(e),y}var fe=function(e,t,n){if("function"===typeof e||null!=t||null!=n)this.next=e,this.error=t,this.complete=n;else{var r=e;this.next=r.next,this.error=r.error,this.complete=r.complete}};function de(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var pe=function(){function e(e,t,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=z(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=e,r._transition("error"))},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return e.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}},e.prototype._shouldDoResumable=function(e){return e.size()>262144},e.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},e.prototype._resolveToken=function(e){var t=this;this._ref.storage._getAuthToken().then((function(n){switch(t._state){case"running":e(n);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},e.prototype._createResumable=function(){var e=this;this._resolveToken((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=se(t,r,i),s={name:a.fullPath},u=M(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=J(a,n),h=e.maxUploadRetryTime,f=new Z(u,"POST",(function(e){var t;ce(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){ee(!1)}return ee(x(t)),t}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=re(t),f}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},e.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n){var r=function(e,t,n,r){var i=e.maxUploadRetryTime,o=new Z(n,"POST",(function(e){var t=ce(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){ee(!1)}n||ee(!1);var i=Number(n);return ee(!isNaN(i)),new ue(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=re(t),o}(e._ref.storage,e._ref._location,t,e._blob),i=e._ref.storage._makeRequest(r,n);e._request=i,i.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},e.prototype._continueUpload=function(){var e=this,t=le*this._chunkMultiplier,n=new ue(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i){var o;try{o=he(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var a=e._ref.storage._makeRequest(o,i);e._request=a,a.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},e.prototype._increaseMultiplier=function(){le*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},e.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t){var n=oe(e._ref.storage,e._ref._location,e._mappings),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},e.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t){var n=function(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=se(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+J(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=B.getBlob(c,r,l);if(null===h)throw f();var d={name:u.fullPath},p=M(o),v=e.maxUploadRetryTime,m=new Z(p,"POST",te(e,n),v);return m.urlParams=d,m.headers=a,m.body=h.uploadData(),m.errorHandler=re(t),m}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),r=e._ref.storage._makeRequest(n,t);e._request=r,r.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},e.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},e.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=h(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}},e.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=k(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t,n,r){var i=this,o=new fe(t,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},e.prototype.then=function(e,t){return this._promise.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},e.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},e.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},e.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(k(this._state)){case S.SUCCESS:de(this._resolve.bind(null,this.snapshot))();break;case S.CANCELED:case S.ERROR:de(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},e.prototype._notifyObserver=function(e){switch(k(this._state)){case S.RUNNING:case S.PAUSED:e.next&&de(e.next.bind(e,this.snapshot))();break;case S.SUCCESS:e.complete&&de(e.complete.bind(e))();break;case S.CANCELED:case S.ERROR:e.error&&de(e.error.bind(e,this._error))();break;default:e.error&&de(e.error.bind(e,this._error))()}},e.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},e.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},e.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},e}(),ve=function(){function e(e,t){this._service=e,this._location=t instanceof j?t:j.makeFromUrl(t)}return e.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},e.prototype._newRef=function(t,n){return new e(t,n)},Object.defineProperty(e.prototype,"root",{get:function(){var e=new j(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return W(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new j(this._location.bucket,t);return new e(this._service,n)},enumerable:!1,configurable:!0}),e.prototype._throwIfRoot=function(e){if(""===this._location.path)throw v(e)},e}();function me(e){var t={prefixes:[],items:[]};return ge(e,t).then((function(){return t}))}function ge(e,t,n){return Object(i.__awaiter)(this,void 0,void 0,(function(){var r,o,a;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return[4,ye(e,{pageToken:n})];case 1:return r=i.sent(),(o=t.prefixes).push.apply(o,r.prefixes),(a=t.items).push.apply(a,r.items),null==r.nextPageToken?[3,3]:[4,ge(e,t,r.nextPageToken)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function ye(e,t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r,o;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return null!=t&&"number"===typeof t.maxResults&&R("options.maxResults",1,1e3,t.maxResults),[4,e.storage._getAuthToken()];case 1:return n=i.sent(),r=t||{},o=ae(e.storage,e._location,"/",r.pageToken,r.maxResults),[2,e.storage._makeRequest(o,n).getPromise()]}}))}))}function be(e,t){return Object(i.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(i.__generator)(this,(function(i){switch(i.label){case 0:return e._throwIfRoot("updateMetadata"),[4,e.storage._getAuthToken()];case 1:return n=i.sent(),r=function(e,t,n,r){var i=M(t.fullServerUrl()),o=J(n,r),a=e.maxOperationRetryTime,s=new Z(i,"PATCH",te(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=ie(t),s}(e.storage,e._location,t,z()),[2,e.storage._makeRequest(r,n).getPromise()]}}))}))}function _e(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(i.__generator)(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("getDownloadURL"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=function(e,t,n){var r=M(t.fullServerUrl()),i=e.maxOperationRetryTime,o=new Z(r,"GET",ne(e,n),i);return o.errorHandler=ie(t),o}(e.storage,e._location,z()),[2,e.storage._makeRequest(n,t).getPromise().then((function(e){if(null===e)throw new u("no-download-url","The given file does not have any download URLs.");return e}))]}}))}))}function we(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(i.__generator)(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("deleteObject"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=function(e,t){var n=M(t.fullServerUrl()),r=e.maxOperationRetryTime,i=new Z(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=ie(t),i}(e.storage,e._location),[2,e.storage._makeRequest(n,t).getPromise()]}}))}))}function Oe(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new j(e._location.bucket,n);return new ve(e.storage,r)}function Ee(e){return/^[A-Za-z]+:\/\//.test(e)}function Te(e,t){if(e instanceof Se){var n=e;if(null==n._bucket)throw new u("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new ve(n,n._bucket);return null!=t?Te(r,t):r}if(void 0!==t){if(t.includes(".."))throw d('`path` param cannot contain ".."');return Oe(e,t)}return e}function Ie(e,t){if(t&&Ee(t)){if(e instanceof Se)return new ve(e,t);throw d("To use ref(service, url), the first argument must be a Storage instance.")}return Te(e,t)}var Se=function(){function e(e,t,n,r,i){this.app=e,this._authProvider=t,this._pool=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?j.makeFromBucketSpec(r):function(e){var t=null===e||void 0===e?void 0:e.storageBucket;return null==t?null:j.makeFromBucketSpec(t)}(this.app.options)}return Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){R("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){R("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),e.prototype._getAuthToken=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){var e,t;return Object(i.__generator)(this,(function(n){switch(n.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=n.sent()))return[2,t.accessToken];n.label=2;case 2:return[2,null]}}))}))},e.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear(),Promise.resolve()},e.prototype._makeStorageReference=function(e){return new ve(this,e)},e.prototype._makeRequest=function(e,t){var n=this;if(this._deleted)return new N(p());var r=function(e,t,n,r,i){var o=L(e.urlParams),a=e.url+o,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(s,i),new F(a,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r)}(e,this._appId,t,this._pool,this._firebaseVersion);return this._requests.add(r),r.getPromise().then((function(){return n._requests.delete(r)}),(function(){return n._requests.delete(r)})),r},e}();function ke(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new pe(e,new B(t),n)}(e,t,n)}function Ce(e){return function(e){return Object(i.__awaiter)(this,void 0,void 0,(function(){var t,n;return Object(i.__generator)(this,(function(r){switch(r.label){case 0:return e._throwIfRoot("getMetadata"),[4,e.storage._getAuthToken()];case 1:return t=r.sent(),n=oe(e.storage,e._location,z()),[2,e.storage._makeRequest(n,t).getPromise()]}}))}))}(e)}function De(e,t){return Ie(e,t)}var je=function(){function e(e,t,n){this._delegate=e,this.task=t,this.ref=n}return Object.defineProperty(e.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),e}(),Ne=function(){function e(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(e.prototype,"snapshot",{get:function(){return new je(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),e.prototype.then=function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new je(t,n,n._ref))}),t)},e.prototype.on=function(e,t,n,r){var i=this,o=void 0;return t&&(o="function"===typeof t?function(e){return t(new je(e,i,i._ref))}:{next:t.next?function(e){return t.next(new je(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,o,n||void 0,r||void 0)},e}(),xe=function(){function e(e,t){this._delegate=e,this._service=t}return Object.defineProperty(e.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Pe(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new Pe(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),e}(),Pe=function(){function e(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(e.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return this._delegate.toString()},e.prototype.child=function(t){return new e(function(e,t){return Oe(e,t)}(this._delegate,t),this.storage)},Object.defineProperty(e.prototype,"root",{get:function(){return new e(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)},enumerable:!1,configurable:!0}),e.prototype.put=function(e,t){return this._throwIfRoot("put"),new Ne(ke(this._delegate,e,t),this)},e.prototype.putString=function(e,t,n){void 0===t&&(t=y.RAW),this._throwIfRoot("putString");var r=_(t,e),o=Object(i.__assign)({},n);return null==o.contentType&&null!=r.contentType&&(o.contentType=r.contentType),new Ne(new pe(this._delegate,new B(r.data,!0),o),this)},e.prototype.listAll=function(){var e,t=this;return(e=this._delegate,me(e)).then((function(e){return new xe(e,t.storage)}))},e.prototype.list=function(e){var t=this;return function(e,t){return ye(e,t)}(this._delegate,e||void 0).then((function(e){return new xe(e,t.storage)}))},e.prototype.getMetadata=function(){return Ce(this._delegate)},e.prototype.updateMetadata=function(e){return function(e,t){return be(e,t)}(this._delegate,e)},e.prototype.getDownloadURL=function(){return _e(this._delegate)},e.prototype.delete=function(){return this._throwIfRoot("delete"),we(this._delegate)},e.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw v(e)},e}(),Ae=function(){function e(e,t){var n=this;this.app=e,this._delegate=t,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(e.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),e.prototype.ref=function(e){if(Ee(e))throw d("ref() expected a child path but got a URL, use refFromURL instead.");return new Pe(De(this._delegate,e),this)},e.prototype.refFromURL=function(e){if(!Ee(e))throw d("refFromURL() expected a full URL but got a child path, use ref() instead.");try{j.makeFromUrl(e)}catch(t){throw d("refFromUrl() expected a valid full URL but got an invalid one.")}return new Pe(De(this._delegate,e),this)},e.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},e.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},e}();function Re(e,t){var n=t.instanceIdentifier,i=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal");return new Ae(i,new Se(i,o,new D,n,r.a.SDK_VERSION))}!function(e){var t={TaskState:S,TaskEvent:I,StringFormat:y,Storage:Se,Reference:Pe};e.INTERNAL.registerComponent(new a.a("storage",Re,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage","0.4.5")}(r.a)},992:function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var t=e.children;return o.default.createElement(r.default,null,o.default.createElement(i.default,null,t))};var r=a(n(765)),i=a(n(769)),o=a(n(0));function a(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default}}]);
//# sourceMappingURL=27.e9107cb4.chunk.js.map